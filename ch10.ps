%!PS-Adobe-2.0
%%Version: 0.1
%%DocumentFonts: (atend)
%%Pages: (atend)
%%EndComments
%
% Version 3.3.2 prologue for troff files.
%

/#copies 1 store
/aspectratio 1 def
/formsperpage 1 def
/landscape false def
/linewidth .3 def
/magnification 1 def
/margin 0 def
/orientation 0 def
/resolution 720 def
/rotation 1 def
/xoffset 0 def
/yoffset 0 def

/roundpage true def
/useclippath true def
/pagebbox [0 0 612 792] def

/R  /Times-Roman def
/I  /Times-Italic def
/B  /Times-Bold def
/BI /Times-BoldItalic def
/H  /Helvetica def
/HI /Helvetica-Oblique def
/HB /Helvetica-Bold def
/HX /Helvetica-BoldOblique def
/CW /Courier def
/CO /Courier def
/CI /Courier-Oblique def
/CB /Courier-Bold def
/CX /Courier-BoldOblique def
/PA /Palatino-Roman def
/PI /Palatino-Italic def
/PB /Palatino-Bold def
/PX /Palatino-BoldItalic def
/Hr /Helvetica-Narrow def
/Hi /Helvetica-Narrow-Oblique def
/Hb /Helvetica-Narrow-Bold def
/Hx /Helvetica-Narrow-BoldOblique def
/KR /Bookman-Light def
/KI /Bookman-LightItalic def
/KB /Bookman-Demi def
/KX /Bookman-DemiItalic def
/AR /AvantGarde-Book def
/AI /AvantGarde-BookOblique def
/AB /AvantGarde-Demi def
/AX /AvantGarde-DemiOblique def
/NR /NewCenturySchlbk-Roman def
/NI /NewCenturySchlbk-Italic def
/NB /NewCenturySchlbk-Bold def
/NX /NewCenturySchlbk-BoldItalic def
/ZD /ZapfDingbats def
/ZI /ZapfChancery-MediumItalic def
/S  /S def
/S1 /S1 def
/GR /Symbol def

/inch {72 mul} bind def
/min {2 copy gt {exch} if pop} bind def

/setup {
	counttomark 2 idiv {def} repeat pop

	landscape {/orientation 90 orientation add def} if
	/scaling 72 resolution div def
	linewidth setlinewidth
	1 setlinecap

	pagedimensions
	xcenter ycenter translate
	orientation rotation mul rotate
	width 2 div neg height 2 div translate
	xoffset inch yoffset inch neg translate
	margin 2 div dup neg translate
	magnification dup aspectratio mul scale
	scaling scaling scale

	addmetrics
	0 0 moveto
} def

/pagedimensions {
	useclippath userdict /gotpagebbox known not and {
		/pagebbox [clippath pathbbox newpath] def
		roundpage currentdict /roundpagebbox known and {roundpagebbox} if
	} if
	pagebbox aload pop
	4 -1 roll exch 4 1 roll 4 copy
	landscape {4 2 roll} if
	sub /width exch def
	sub /height exch def
	add 2 div /xcenter exch def
	add 2 div /ycenter exch def
	userdict /gotpagebbox true put
} def

/addmetrics {
	/Symbol /S null Sdefs cf
	/Times-Roman /S1 StandardEncoding dup length array copy S1defs cf
} def

/pagesetup {
	/page exch def
	currentdict /pagedict known currentdict page known and {
		page load pagedict exch get cvx exec
	} if
} def

/decodingdefs [
	{counttomark 2 idiv {y moveto show} repeat}
	{neg /y exch def counttomark 2 idiv {y moveto show} repeat}
	{neg moveto {2 index stringwidth pop sub exch div 0 32 4 -1 roll widthshow} repeat}
	{neg moveto {spacewidth sub 0.0 32 4 -1 roll widthshow} repeat}
	{counttomark 2 idiv {y moveto show} repeat}
	{neg setfunnytext}
] def

/setdecoding {/t decodingdefs 3 -1 roll get bind def} bind def

/w {neg moveto show} bind def
/m {neg dup /y exch def moveto} bind def
/done {/lastpage where {pop lastpage} if} def

/f {
	dup /font exch def findfont exch
	dup /ptsize exch def scaling div dup /size exch def scalefont setfont
	linewidth ptsize mul scaling 10 mul div setlinewidth
	/spacewidth ( ) stringwidth pop def
} bind def

/changefont {
	/fontheight exch def
	/fontslant exch def
	currentfont [
		1 0
		fontheight ptsize div fontslant sin mul fontslant cos div
		fontheight ptsize div
		0 0
	] makefont setfont
} bind def

/sf {f} bind def

/cf {
	dup length 2 idiv
	/entries exch def
	/chtab exch def
	/newencoding exch def
	/newfont exch def

	findfont dup length 1 add dict
	/newdict exch def
	{1 index /FID ne {newdict 3 1 roll put}{pop pop} ifelse} forall

	newencoding type /arraytype eq {newdict /Encoding newencoding put} if

	newdict /Metrics entries dict put
	newdict /Metrics get
	begin
		chtab aload pop
		1 1 entries {pop def} for
		newfont newdict definefont pop
	end
} bind def

%
% A few arrays used to adjust reference points and character widths in some
% of the printer resident fonts. If square roots are too high try changing
% the lines describing /radical and /radicalex to,
%
%	/radical	[0 -75 550 0]
%	/radicalex	[-50 -75 500 0]
%
% Move braceleftbt a bit - default PostScript character is off a bit.
%

/Sdefs [
	/bracketlefttp		[201 500]
	/bracketleftbt		[201 500]
	/bracketrighttp		[-81 380]
	/bracketrightbt		[-83 380]
	/braceleftbt		[203 490]
	/bracketrightex		[220 -125 500 0]
	/radical		[0 0 550 0]
	/radicalex		[-50 0 500 0]
	/parenleftex		[-20 -170 0 0]
	/integral		[100 -50 500 0]
	/infinity		[10 -75 730 0]
] def

/S1defs [
	/underscore		[0 80 500 0]
	/endash			[7 90 650 0]
] def
%
% Version 3.3.2 drawing procedures for dpost. Automatically pulled in when
% needed.
%

/inpath false def
/savematrix matrix def

/Dl {
	inpath
		{neg lineto pop pop}
		{newpath neg moveto neg lineto stroke}
	ifelse
} bind def

/De {
	/y1 exch 2 div def
	/x1 exch 2 div def
	/savematrix savematrix currentmatrix def
	neg exch x1 add exch translate
	x1 y1 scale
	0 0 1 0 360
	inpath
		{1 0 moveto arc savematrix setmatrix}
		{newpath arc savematrix setmatrix stroke}
	ifelse
} bind def

/Da {
	/dy2 exch def
	/dx2 exch def
	/dy1 exch def
	/dx1 exch def
	dy1 add neg exch dx1 add exch
	dx1 dx1 mul dy1 dy1 mul add sqrt
	dy1 dx1 neg atan
	dy2 neg dx2 atan
	inpath
		{arc}
		{newpath arc stroke}
	ifelse
} bind def

/DA {
	/dy2 exch def
	/dx2 exch def
	/dy1 exch def
	/dx1 exch def
	dy1 add neg exch dx1 add exch
	dx1 dx1 mul dy1 dy1 mul add sqrt
	dy1 dx1 neg atan
	dy2 neg dx2 atan
	inpath
		{arcn}
		{newpath arcn stroke}
	ifelse
} bind def

/Ds {
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/y0 exch def
	/x0 exch def
	x0 5 x1 mul add 6 div
	y0 5 y1 mul add -6 div
	x2 5 x1 mul add 6 div
	y2 5 y1 mul add -6 div
	x1 x2 add 2 div
	y1 y2 add -2 div
	inpath
		{curveto}
		{newpath x0 x1 add 2 div y0 y1 add -2 div moveto curveto stroke}
	ifelse
} bind def
%
% Tries to round clipping path dimensions, as stored in array pagebbox, so they
% match one of the known sizes in the papersizes array. Lower left coordinates
% are always set to 0.
%

/roundpagebbox {
    7 dict begin
	/papersizes [8.5 inch 11 inch 14 inch 17 inch] def

	/mappapersize {
		/val exch def
		/slop .5 inch def
		/diff slop def
		/j 0 def
		0 1 papersizes length 1 sub {
			/i exch def
			papersizes i get val sub abs
			dup diff le {/diff exch def /j i def} {pop} ifelse
		} for
		diff slop lt {papersizes j get} {val} ifelse
	} def

	pagebbox 0 0 put
	pagebbox 1 0 put
	pagebbox dup 2 get mappapersize 2 exch put
	pagebbox dup 3 get mappapersize 3 exch put
    end
} bind def

%%EndProlog
%%BeginSetup
mark
%
% Encoding vector and redefinition of findfont for the ISO Latin1 standard.
% The 18 characters missing from ROM based fonts on older printers are noted
% below.
%

/ISOLatin1Encoding [
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/space
	/exclam
	/quotedbl
	/numbersign
	/dollar
	/percent
	/ampersand
	/quoteright
	/parenleft
	/parenright
	/asterisk
	/plus
	/comma
	/minus
	/period
	/slash
	/zero
	/one
	/two
	/three
	/four
	/five
	/six
	/seven
	/eight
	/nine
	/colon
	/semicolon
	/less
	/equal
	/greater
	/question
	/at
	/A
	/B
	/C
	/D
	/E
	/F
	/G
	/H
	/I
	/J
	/K
	/L
	/M
	/N
	/O
	/P
	/Q
	/R
	/S
	/T
	/U
	/V
	/W
	/X
	/Y
	/Z
	/bracketleft
	/backslash
	/bracketright
	/asciicircum
	/underscore
	/quoteleft
	/a
	/b
	/c
	/d
	/e
	/f
	/g
	/h
	/i
	/j
	/k
	/l
	/m
	/n
	/o
	/p
	/q
	/r
	/s
	/t
	/u
	/v
	/w
	/x
	/y
	/z
	/braceleft
	/bar
	/braceright
	/asciitilde
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/dotlessi
	/grave
	/acute
	/circumflex
	/tilde
	/macron
	/breve
	/dotaccent
	/dieresis
	/.notdef
	/ring
	/cedilla
	/.notdef
	/hungarumlaut
	/ogonek
	/caron
	/space
	/exclamdown
	/cent
	/sterling
	/currency
	/yen
	/brokenbar		% missing
	/section
	/dieresis
	/copyright
	/ordfeminine
	/guillemotleft
	/logicalnot
	/hyphen
	/registered
	/macron
	/degree			% missing
	/plusminus		% missing
	/twosuperior		% missing
	/threesuperior		% missing
	/acute
	/mu			% missing
	/paragraph
	/periodcentered
	/cedilla
	/onesuperior		% missing
	/ordmasculine
	/guillemotright
	/onequarter		% missing
	/onehalf		% missing
	/threequarters		% missing
	/questiondown
	/Agrave
	/Aacute
	/Acircumflex
	/Atilde
	/Adieresis
	/Aring
	/AE
	/Ccedilla
	/Egrave
	/Eacute
	/Ecircumflex
	/Edieresis
	/Igrave
	/Iacute
	/Icircumflex
	/Idieresis
	/Eth			% missing
	/Ntilde
	/Ograve
	/Oacute
	/Ocircumflex
	/Otilde
	/Odieresis
	/multiply		% missing
	/Oslash
	/Ugrave
	/Uacute
	/Ucircumflex
	/Udieresis
	/Yacute			% missing
	/Thorn			% missing
	/germandbls
	/agrave
	/aacute
	/acircumflex
	/atilde
	/adieresis
	/aring
	/ae
	/ccedilla
	/egrave
	/eacute
	/ecircumflex
	/edieresis
	/igrave
	/iacute
	/icircumflex
	/idieresis
	/eth			% missing
	/ntilde
	/ograve
	/oacute
	/ocircumflex
	/otilde
	/odieresis
	/divide			% missing
	/oslash
	/ugrave
	/uacute
	/ucircumflex
	/udieresis
	/yacute			% missing
	/thorn			% missing
	/ydieresis
] def

/NewFontDirectory FontDirectory maxlength dict def

%
% Apparently no guarantee findfont is defined in systemdict so the obvious
%
%	systemdict /findfont get exec
%
% can generate an error. So far the only exception is a VT600 (version 48.0).
%

userdict /@RealFindfont known not {
	userdict begin
		/@RealFindfont systemdict begin /findfont load end def
	end
} if

/findfont {
	dup NewFontDirectory exch known not {
		dup
		%dup systemdict /findfont get exec	% not always in systemdict
		dup userdict /@RealFindfont get exec
		dup /Encoding get StandardEncoding eq {
			dup length dict begin
				{1 index /FID ne {def}{pop pop} ifelse} forall
				/Encoding ISOLatin1Encoding def
				currentdict
			end
			/DummyFontName exch definefont
		} if
		NewFontDirectory 3 1 roll put
	} if
	NewFontDirectory exch get
} bind def

%%Patch from lp
%%EndPatch from lp

setup
%%EndSetup
%%Page: 1 1
/saveobj save def
mark
1 pagesetup
30 /Times-Roman f
(10 ) 566 686 w
30 /LucidaSansUnicode20 f
(\024) 941 686 w
30 /Times-Roman f
(Concurrent programming) 1316 686 w
30 /S1 f
(______) 566 902 w
16 /Times-Bold f
(10.1.) 566 1262 w
(Synchronization) 966 1262 w
11 /Times-Roman f
(In) 566 1418 w
(the) 688 1418 w
(discussion) 853 1418 w
(of) 1343 1418 w
11 /Courier f
(rfork) 1465 1418 w
11 /Times-Roman f
(that) 1826 1418 w
(we) 2022 1418 w
(had) 2180 1418 w
(time) 2369 1418 w
(ago,) 2596 1418 w
(we) 2813 1418 w
(did) 2971 1418 w
(not) 3143 1418 w
(pay) 3315 1418 w
(attention) 3504 1418 w
(to) 3920 1418 w
(what) 4038 1418 w
(would) 566 1538 w
(happen) 878 1538 w
(when) 1231 1538 w
(a) 1505 1538 w
(new) 1589 1538 w
(process) 1807 1538 w
(is) 2171 1538 w
(created) 2281 1538 w
(sharing) 2631 1538 w
(the) 2990 1538 w
(parent's) 3160 1538 w
(memory.) 3548 1538 w
(A) 3978 1538 w
(call) 4093 1538 w
(like) 566 1658 w
10 /Courier f
(rfork\(RFPROC|RFMEM\)) 786 1828 w
11 /Times-Roman f
(is) 566 2044 w
(in) 671 2044 w
(effect) 788 2044 w
(creating) 1066 2044 w
(a) 1449 2044 w
(new) 1528 2044 w
(flow) 1741 2044 w
(of) 1973 2044 w
(control) 2095 2044 w
(within) 2438 2044 w
(our) 2752 2044 w
(program.) 2930 2044 w
(This) 3361 2044 w
(is) 3589 2044 w
(not) 3695 2044 w
(new,) 3868 2044 w
(but) 4110 2044 w
(what) 566 2164 w
(may) 824 2164 w
(be) 1058 2164 w
(new) 1206 2164 w
(is) 1433 2164 w
(the) 1552 2164 w
(nasty) 1731 2164 w
(effects) 2007 2164 w
(that) 2341 2164 w
(this) 2550 2164 w
(might) 2754 2164 w
(have) 3056 2164 w
(if) 3306 2164 w
(we) 3417 2164 w
(are) 3588 2164 w
(not) 3764 2164 w
(careful) 3949 2164 w
(enough.) 566 2284 w
(We) 816 2440 w
(warned) 998 2440 w
(you) 1350 2440 w
(that,) 1546 2440 w
(in) 1770 2440 w
(general,) 1887 2440 w
(when) 2267 2440 w
(more) 2535 2440 w
(than) 2791 2440 w
(one) 3011 2440 w
(process) 3200 2440 w
(is) 3559 2440 w
(sharing) 3664 2440 w
(some) 4019 2440 w
(data,) 566 2560 w
(there) 810 2560 w
(may) 1062 2560 w
(be) 1285 2560 w
(race) 1422 2560 w
(conditions.) 1636 2560 w
(You) 2156 2560 w
(could) 2378 2560 w
(see) 2655 2560 w
(how) 2827 2560 w
(two) 3049 2560 w
(processes) 3247 2560 w
(updating) 3699 2560 w
(the) 4117 2560 w
(same) 566 2680 w
(file) 823 2680 w
(could) 1002 2680 w
(lead) 1279 2680 w
(to) 1494 2680 w
(very) 1613 2680 w
(different) 1840 2680 w
(contents) 2249 2680 w
(in) 2648 2680 w
(the) 2767 2680 w
(file) 2934 2680 w
(after) 3113 2680 w
(both) 3345 2680 w
(processes) 3574 2680 w
(com\255) 4026 2680 w
(plete,) 566 2800 w
(depending) 837 2800 w
(on) 1324 2800 w
(when) 1464 2800 w
(they) 1731 2800 w
(did) 1950 2800 w
(their) 2121 2800 w
(updates) 2352 2800 w
(with) 2717 2800 w
(respect) 2943 2800 w
(to) 3282 2800 w
(each) 3398 2800 w
(other.) 3627 2800 w
(Sharing) 3909 2800 w
(memory) 566 2920 w
(is) 960 2920 w
(not) 1062 2920 w
(different.) 1231 2920 w
(What) 816 3076 w
(happens) 1088 3076 w
(is) 1482 3076 w
(that) 1591 3076 w
(the) 1791 3076 w
(idea) 1960 3076 w
(that) 2177 3076 w
(you) 2377 3076 w
(have) 2577 3076 w
(of) 2818 3076 w
(sequential) 2944 3076 w
(execution) 3425 3076 w
(for) 3887 3076 w
(your) 4050 3076 w
(program) 566 3196 w
(in) 975 3196 w
(an) 1099 3196 w
11 /Times-Italic f
(isolated) 1240 3196 w
11 /Times-Roman f
(world) 1627 3196 w
(is) 1921 3196 w
(no) 2033 3196 w
(longer) 2181 3196 w
(true.) 2499 3196 w
(We) 2734 3196 w
(saw) 2922 3196 w
(that) 3129 3196 w
(when) 3331 3196 w
(more) 3605 3196 w
(than) 3867 3196 w
(one) 4093 3196 w
(process) 566 3316 w
(was) 931 3316 w
(trying) 1138 3316 w
(to) 1438 3316 w
(update) 1561 3316 w
(the) 1890 3316 w
(same) 2061 3316 w
(file,) 2323 3316 w
(the) 2534 3316 w
(resulting) 2705 3316 w
(file) 3127 3316 w
(contents) 3310 3316 w
(might) 3713 3316 w
(differ) 4009 3316 w
(from) 566 3436 w
(one) 814 3436 w
(run) 1007 3436 w
(to) 1188 3436 w
(another.) 1309 3436 w
(It) 1700 3436 w
(all) 1802 3436 w
(depends) 1947 3436 w
(on) 2341 3436 w
(when) 2486 3436 w
(did) 2758 3436 w
(each) 2934 3436 w
(process) 3168 3436 w
(change) 3530 3436 w
(the) 3873 3436 w
(data.) 4041 3436 w
(And) 566 3556 w
(this) 783 3556 w
(is) 971 3556 w
(what) 1073 3556 w
(we) 1314 3556 w
(called) 1469 3556 w
(a) 1758 3556 w
11 /Times-Bold f
(race) 1834 3556 w
(condition) 2061 3556 w
11 /Times-Roman f
(.) 2503 3556 w
(Consider) 2587 3556 w
(this) 3012 3556 w
(program.) 3200 3556 w
9 /S f
(\347) 566 3726 w
9 /Times-Bold f
(rincr.c) 581 3726 w
9 /S f
(\347) 854 3726 w
(`) 566 3726 w
(``````) 584 3726 w
(_) 566 3726 w
(______) 584 3726 w
8 /Courier f
(#include <u.h>) 786 3834 w
(#include <libc.h>) 786 3942 w
(int) 786 4158 w
(cnt;) 1266 4158 w
(void) 786 4374 w
(main\(int, char*[]\)) 786 4482 w
({) 786 4590 w
(int) 1266 4698 w
(i;) 1746 4698 w
(if \(rfork\(RFPROC|RFMEM|RFNOWAIT\) < 0\)) 1266 4914 w
(sysfatal\("fork: %r"\);) 1746 5022 w
(for \(i = 0; i < 2; i++\)) 1266 5130 w
(cnt++;) 1746 5238 w
(print\("cnt is %d\\n", cnt\);) 1266 5346 w
(exits\(nil\);) 1266 5454 w
(}) 786 5562 w
11 /Times-Roman f
(It) 566 5778 w
(creates) 665 5778 w
(a) 999 5778 w
(child) 1079 5778 w
(process,) 1331 5778 w
(and) 1719 5778 w
(each) 1909 5778 w
(one) 2140 5778 w
(of) 2330 5778 w
(the) 2454 5778 w
(processes) 2621 5778 w
(increment) 3073 5778 w
(a) 3544 5778 w
(counter) 3625 5778 w
(twice.) 3986 5778 w
(The) 566 5898 w
(counter) 784 5898 w
(is) 1160 5898 w
11 /Times-Italic f
(shared) 1282 5898 w
11 /Times-Roman f
(,) 1581 5898 w
(because) 1656 5898 w
(the) 2048 5898 w
(call) 2229 5898 w
(to) 2434 5898 w
11 /Courier f
(rfork) 2567 5898 w
11 /Times-Roman f
(uses) 2944 5898 w
(the) 3180 5898 w
11 /Courier f
(RFMEM) 3361 5898 w
11 /Times-Roman f
(flag,) 3738 5898 w
(which) 3983 5898 w
(causes) 566 6018 w
(all) 895 6018 w
(the) 1050 6018 w
(data) 1229 6018 w
(to) 1456 6018 w
(be) 1587 6018 w
(shared) 1735 6018 w
(between) 2065 6018 w
(parent) 2474 6018 w
(and) 2792 6018 w
(child.) 2995 6018 w
(Note) 3316 6018 w
(that) 3574 6018 w
(only) 3784 6018 w
11 /Courier f
(cnt) 4025 6018 w
11 /Times-Roman f
(,) 4223 6018 w
(which) 566 6138 w
(is) 863 6138 w
(a) 966 6138 w
(global,) 1043 6138 w
(is) 1375 6138 w
(shared.) 1478 6138 w
(The) 1819 6138 w
(local) 2017 6138 w
(variable) 2258 6138 w
11 /Courier f
(i) 2638 6138 w
11 /Times-Roman f
(lives) 2732 6138 w
(on) 2968 6138 w
(the) 3106 6138 w
(stack) 3268 6138 w
(which) 3521 6138 w
(is) 3817 6138 w
(private,) 3919 6138 w
(as) 566 6258 w
(it) 685 6258 w
(should) 775 6258 w
(be.) 1097 6258 w
cleartomark
showpage
saveobj restore
%%EndPage: 1 1
%%Page: 2 2
/saveobj save def
mark
2 pagesetup
11 /Times-Roman f
(\255 2 \255) 2317 413 w
(Executing) 816 686 w
(the) 1289 686 w
(program) 1451 686 w
(yields) 1850 686 w
(this) 2141 686 w
(output.) 2329 686 w
10 /Courier f
(; 8.rincr) 786 856 w
(cnt is 2) 786 966 w
(cnt is 4) 786 1076 w
(;) 786 1186 w
11 /Times-Roman f
(We) 566 1402 w
(now) 756 1402 w
(declare) 984 1402 w
(an) 1338 1402 w
(integer) 1481 1402 w
(local) 1825 1402 w
(variable,) 2078 1402 w
11 /Courier f
(loc) 2498 1402 w
11 /Times-Roman f
(,) 2696 1402 w
(and) 2764 1402 w
(replace) 2962 1402 w
(the) 3316 1402 w
(body) 3490 1402 w
(of) 3750 1402 w
(the) 3881 1402 w
(loop) 4055 1402 w
(with) 566 1522 w
(this) 790 1522 w
(code,) 978 1522 w
(equivalent) 1240 1522 w
(to) 1725 1522 w
(what) 1839 1522 w
(we) 2080 1522 w
(were) 2235 1522 w
(doing.) 2474 1522 w
10 /Courier f
(loc = cnt;) 786 1692 w
(loc++;) 786 1802 w
(cnt = loc;) 786 1912 w
11 /Times-Roman f
(It) 566 2128 w
(turns) 670 2128 w
(out) 927 2128 w
(that) 1105 2128 w
(this) 1307 2128 w
(is) 1504 2128 w
(how) 1616 2128 w
11 /Courier f
(cnt++) 1843 2128 w
11 /Times-Roman f
(is) 2211 2128 w
(done,) 2323 2128 w
(by) 2602 2128 w
(copying) 2750 2128 w
(the) 3142 2128 w
(memory) 3314 2128 w
(value) 3718 2128 w
(into) 3993 2128 w
(a) 4203 2128 w
(temporary) 566 2248 w
(variable) 1056 2248 w
(\(kept) 1448 2248 w
(at) 1713 2248 w
(a) 1832 2248 w
(register\),) 1920 2248 w
(then) 2352 2248 w
(incrementing) 2581 2248 w
(the) 3199 2248 w
(register,) 3372 2248 w
(and) 3767 2248 w
(finally) 3964 2248 w
(updating) 566 2368 w
(the) 998 2368 w
(memory) 1180 2368 w
(location) 1594 2368 w
(for) 1996 2368 w
(the) 2171 2368 w
(variable) 2353 2368 w
(with) 2753 2368 w
(the) 2997 2368 w
(incremented) 3179 2368 w
(value.) 3768 2368 w
(The) 4081 2368 w
(result) 566 2488 w
(for) 838 2488 w
(this) 993 2488 w
(version) 1181 2488 w
(of) 1532 2488 w
(the) 1651 2488 w
(program) 1813 2488 w
(remains) 2212 2488 w
(the) 2587 2488 w
(same.) 2749 2488 w
10 /Courier f
(; 8.rincr) 786 2658 w
(cnt is 2) 786 2768 w
(cnt is 4) 786 2878 w
(;) 786 2988 w
11 /Times-Roman f
(But) 566 3204 w
(let's) 755 3204 w
(change) 973 3204 w
(a) 1311 3204 w
(little) 1388 3204 w
(bit) 1620 3204 w
(more) 1766 3204 w
(the) 2020 3204 w
(program.) 2183 3204 w
(Now) 2612 3204 w
(we) 2855 3204 w
(replace) 3012 3204 w
(the) 3356 3204 w
(body) 3520 3204 w
(of) 3770 3204 w
(the) 3891 3204 w
(loop) 4055 3204 w
(with) 566 3324 w
(these) 790 3324 w
(statements.) 1043 3324 w
10 /Courier f
(loc = cnt;) 786 3494 w
(sleep\(1\);) 786 3604 w
(loc++;) 786 3714 w
(cnt = loc;) 786 3824 w
11 /Times-Roman f
(The) 566 4040 w
(call) 768 4040 w
(to) 958 4040 w
11 /Courier f
(sleep) 1076 4040 w
11 /Times-Roman f
(does) 1438 4040 w
(not) 1671 4040 w
(change) 1844 4040 w
(the) 2185 4040 w
(meaning) 2351 4040 w
(of) 2762 4040 w
(the) 2886 4040 w
(program,) 3053 4040 w
(i.e.,) 3485 4040 w
(what) 3681 4040 w
(it) 3927 4040 w
(does.) 4022 4040 w
(However,) 566 4160 w
(it) 1033 4160 w
11 /Times-Italic f
(does) 1134 4160 w
11 /Times-Roman f
(change) 1373 4160 w
(the) 1720 4160 w
(result!) 1892 4160 w
(The) 2238 4160 w
(call) 2446 4160 w
(to) 2642 4160 w
11 /Courier f
(sleep) 2766 4160 w
11 /Times-Roman f
(exposed) 3134 4160 w
(a) 3531 4160 w
(race) 3617 4160 w
(condition) 3835 4160 w
(present) 566 4280 w
(in) 910 4280 w
(all) 1024 4280 w
(the) 1162 4280 w
(versions) 1324 4280 w
(of) 1718 4280 w
(the) 1837 4280 w
(program.) 1999 4280 w
10 /Courier f
(; 8.rincr) 786 4450 w
(cnt is 2) 786 4560 w
(cnt is 2) 786 4670 w
11 /Times-Roman f
(Both) 566 4886 w
(processes) 822 4886 w
(execute) 1282 4886 w
(one) 1656 4886 w
(instruction) 1855 4886 w
(after) 2367 4886 w
(another,) 2607 4886 w
(but) 3004 4886 w
(you) 3186 4886 w
(do) 3393 4886 w
(not) 3545 4886 w
(know) 3728 4886 w
(when) 4014 4886 w
(the) 566 5006 w
(operating) 734 5006 w
(system) 1182 5006 w
(\(or) 1522 5006 w
(any) 1683 5006 w
(external) 1875 5006 w
(event\)) 2261 5006 w
(will) 2568 5006 w
(move) 2774 5006 w
(one) 3052 5006 w
(process) 3243 5006 w
(out) 3604 5006 w
(of) 3778 5006 w
(the) 3902 5006 w
(pro\255) 4069 5006 w
(cessor) 566 5126 w
(or) 890 5126 w
(move) 1032 5126 w
(it) 1327 5126 w
(back) 1440 5126 w
(to) 1697 5126 w
(it.) 1834 5126 w
(The) 1975 5126 w
(result) 2196 5126 w
(is) 2491 5126 w
(that) 2616 5126 w
(we) 2832 5126 w
(do) 3010 5126 w
(not) 3171 5126 w
(know) 3363 5126 w
(how) 3659 5126 w
(the) 3900 5126 w
(two) 4086 5126 w
(sequences) 566 5246 w
(of) 1047 5246 w
(instructions) 1176 5246 w
(\(one) 1728 5246 w
(for) 1960 5246 w
(each) 2125 5246 w
(process\),) 2361 5246 w
(will) 2790 5246 w
(be) 2999 5246 w
11 /Times-Italic f
(merged) 3139 5246 w
11 /Times-Roman f
(in) 3504 5246 w
(time.) 3627 5246 w
(Despite) 3916 5246 w
(having) 566 5366 w
(just) 898 5366 w
(one) 1091 5366 w
(processor) 1282 5366 w
(that) 1734 5366 w
(executes) 1932 5366 w
(only) 2341 5366 w
(a) 2570 5366 w
(sequence) 2651 5366 w
(of) 3085 5366 w
(instructions,) 3210 5366 w
(any) 3786 5366 w
(merge) 3978 5366 w
(of) 566 5486 w
(instructions) 699 5486 w
(from) 1254 5486 w
(the) 1508 5486 w
(first) 1683 5486 w
(and) 1901 5486 w
(the) 2100 5486 w
(second) 2275 5486 w
(process) 2620 5486 w
(is) 2989 5486 w
(feasible.) 3104 5486 w
(Such) 3513 5486 w
(a) 3774 5486 w
(merge) 3863 5486 w
(is) 4177 5486 w
(usually) 566 5606 w
(called) 912 5606 w
(an) 1201 5606 w
11 /Times-Bold f
(interleaving) 1332 5606 w
11 /Times-Roman f
(.) 1894 5606 w
(Perhaps) 816 5762 w
(one) 1197 5762 w
(process) 1390 5762 w
(executes) 1753 5762 w
(all) 2164 5762 w
(of) 2309 5762 w
(its) 2435 5762 w
(statements,) 2575 5762 w
(and) 3102 5762 w
(then) 3295 5762 w
(the) 3519 5762 w
(second.) 3688 5762 w
(This) 4055 5762 w
(happen) 566 5882 w
(to) 926 5882 w
(the) 1056 5882 w
11 /Courier f
(for) 1234 5882 w
11 /Times-Roman f
(loop) 1475 5882 w
(in) 1714 5882 w
(all) 1843 5882 w
(but) 1996 5882 w
(the) 2180 5882 w
(last) 2357 5882 w
(version) 2553 5882 w
(of) 2919 5882 w
(the) 3053 5882 w
(program.) 3230 5882 w
(On) 3672 5882 w
(the) 3849 5882 w
(other) 4026 5882 w
(hand,) 566 6002 w
(perhaps) 846 6002 w
(one) 1225 6002 w
(process) 1423 6002 w
(executes) 1791 6002 w
(some) 2207 6002 w
(instructions,) 2479 6002 w
(and) 3061 6002 w
(then) 3259 6002 w
(the) 3488 6002 w
(other,) 3662 6002 w
(and) 3955 6002 w
(so) 4153 6002 w
(on.) 566 6122 w
(Figure) 787 6122 w
([[!interleaving!]]) 1129 6122 w
(shows) 1924 6122 w
(the) 2254 6122 w
(interleaving) 2443 6122 w
(of) 3022 6122 w
(statements) 3167 6122 w
(that) 3685 6122 w
(resulted) 3904 6122 w
(from) 566 6242 w
(our) 814 6242 w
(last) 995 6242 w
(modification) 1183 6242 w
(to) 1780 6242 w
(the) 1901 6242 w
(program,) 2071 6242 w
(along) 2506 6242 w
(with) 2786 6242 w
(the) 3018 6242 w
(values) 3188 6242 w
(for) 3504 6242 w
(the) 3667 6242 w
(two) 3837 6242 w
(local) 4038 6242 w
cleartomark
showpage
saveobj restore
%%EndPage: 2 2
%%Page: 3 3
/saveobj save def
mark
3 pagesetup
11 /Times-Roman f
(\255 3 \255) 2317 413 w
(variables) 566 686 w
11 /Courier f
(loc) 1000 686 w
11 /Times-Roman f
(,) 1198 686 w
(and) 1265 686 w
(the) 1462 686 w
(global) 1635 686 w
11 /Courier f
(cnt) 1949 686 w
11 /Times-Roman f
(.) 2147 686 w
(The) 2242 686 w
(initial) 2451 686 w
(call) 2748 686 w
(to) 2945 686 w
11 /Courier f
(rfork) 3069 686 w
11 /Times-Roman f
(is) 3437 686 w
(not) 3549 686 w
(shown.) 3728 686 w
(The) 4081 686 w
(statements) 566 806 w
(corresponding) 1058 806 w
(to) 1713 806 w
(the) 1827 806 w
(loop) 1989 806 w
(itself) 2213 806 w
(are) 2461 806 w
(not) 2621 806 w
(shown) 2790 806 w
(either.) 3105 806 w
9 /Times-Bold f
(Parent) 1328 1040 w
(Child) 3488 1040 w
1148 1256 1148 1148 Dl
1148 1148 1508 1148 Dl
1508 1148 1508 1256 Dl
1508 1256 1148 1256 Dl
9 /Courier f
(loc: ?) 1166 1220 w
2228 1256 2228 1148 Dl
2228 1148 2588 1148 Dl
2588 1148 2588 1256 Dl
2588 1256 2228 1256 Dl
(cnt: 0) 2246 1220 w
3308 1256 3308 1148 Dl
3308 1148 3668 1148 Dl
3668 1148 3668 1256 Dl
3668 1256 3308 1256 Dl
(loc: ?) 3326 1220 w
(loc = cnt) 1328 1400 w
(sleep) 1328 1508 w
1148 1724 1148 1616 Dl
1148 1616 1508 1616 Dl
1508 1616 1508 1724 Dl
1508 1724 1148 1724 Dl
(loc: 0) 1166 1688 w
2228 1724 2228 1616 Dl
2228 1616 2588 1616 Dl
2588 1616 2588 1724 Dl
2588 1724 2228 1724 Dl
(cnt: 0) 2246 1688 w
3308 1724 3308 1616 Dl
3308 1616 3668 1616 Dl
3668 1616 3668 1724 Dl
3668 1724 3308 1724 Dl
(loc: ?) 3326 1688 w
(loc = cnt) 3488 1868 w
(sleep) 3488 1976 w
1148 2192 1148 2084 Dl
1148 2084 1508 2084 Dl
1508 2084 1508 2192 Dl
1508 2192 1148 2192 Dl
(loc: 0) 1166 2156 w
2228 2192 2228 2084 Dl
2228 2084 2588 2084 Dl
2588 2084 2588 2192 Dl
2588 2192 2228 2192 Dl
(cnt: 0) 2246 2156 w
3308 2192 3308 2084 Dl
3308 2084 3668 2084 Dl
3668 2084 3668 2192 Dl
3668 2192 3308 2192 Dl
(loc: 0) 3326 2156 w
(loc++) 1328 2336 w
(cnt = loc) 1328 2444 w
(loc = cnt) 1328 2552 w
(sleep) 1328 2660 w
1148 2876 1148 2768 Dl
1148 2768 1508 2768 Dl
1508 2768 1508 2876 Dl
1508 2876 1148 2876 Dl
(loc: 1) 1166 2840 w
2228 2876 2228 2768 Dl
2228 2768 2588 2768 Dl
2588 2768 2588 2876 Dl
2588 2876 2228 2876 Dl
(cnt: 1) 2246 2840 w
3308 2876 3308 2768 Dl
3308 2768 3668 2768 Dl
3668 2768 3668 2876 Dl
3668 2876 3308 2876 Dl
(loc: 0) 3326 2840 w
(loc++) 3488 3020 w
(cnt = loc) 3488 3128 w
(loc = cnt) 3488 3236 w
(sleep) 3488 3344 w
1148 3560 1148 3452 Dl
1148 3452 1508 3452 Dl
1508 3452 1508 3560 Dl
1508 3560 1148 3560 Dl
(loc: 1) 1166 3524 w
2228 3560 2228 3452 Dl
2228 3452 2588 3452 Dl
2588 3452 2588 3560 Dl
2588 3560 2228 3560 Dl
(cnt: 1) 2246 3524 w
3308 3560 3308 3452 Dl
3308 3452 3668 3452 Dl
3668 3452 3668 3560 Dl
3668 3560 3308 3560 Dl
(loc: 1) 3326 3524 w
(loc++) 1328 3704 w
(cnt = loc) 1328 3812 w
(loc = cnt) 1328 3920 w
(sleep) 1328 4028 w
1148 4244 1148 4136 Dl
1148 4136 1508 4136 Dl
1508 4136 1508 4244 Dl
1508 4244 1148 4244 Dl
(loc: 2) 1166 4208 w
2228 4244 2228 4136 Dl
2228 4136 2588 4136 Dl
2588 4136 2588 4244 Dl
2588 4244 2228 4244 Dl
(cnt: 2) 2246 4208 w
3308 4244 3308 4136 Dl
3308 4136 3668 4136 Dl
3668 4136 3668 4244 Dl
3668 4244 3308 4244 Dl
(loc: 1) 3326 4208 w
(loc++) 3488 4388 w
(cnt = loc) 3488 4496 w
(loc = cnt) 3488 4604 w
(sleep) 3488 4712 w
1148 4928 1148 4820 Dl
1148 4820 1508 4820 Dl
1508 4820 1508 4928 Dl
1508 4928 1148 4928 Dl
(loc: 2) 1166 4892 w
2228 4928 2228 4820 Dl
2228 4820 2588 4820 Dl
2588 4820 2588 4928 Dl
2588 4928 2228 4928 Dl
(cnt: 2) 2246 4892 w
3308 4928 3308 4820 Dl
3308 4820 3668 4820 Dl
3668 4820 3668 4928 Dl
3668 4928 3308 4928 Dl
(loc: 2) 3326 4892 w
(print) 1328 5072 w
(print) 3488 5252 w
11 /Times-Roman f
(What) 816 5522 w
(you) 1090 5522 w
(see) 1292 5522 w
(is) 1469 5522 w
(that) 1581 5522 w
(something) 1784 5522 w
(happens) 2281 5522 w
11 /Times-Italic f
(while) 2678 5522 w
11 /Times-Roman f
(one) 2955 5522 w
(process) 3151 5522 w
(is) 3517 5522 w
(happily) 3629 5522 w
(incre\255) 3997 5522 w
(menting) 566 5642 w
(the) 966 5642 w
(variable,) 1139 5642 w
(by) 1558 5642 w
(copying) 1707 5642 w
(the) 2100 5642 w
(global) 2273 5642 w
(counter) 2587 5642 w
(to) 2954 5642 w
(its) 3078 5642 w
(local,) 3221 5642 w
(incrementing) 3500 5642 w
(the) 4117 5642 w
(local,) 566 5762 w
(and) 843 5762 w
(copying) 1037 5762 w
(back) 1427 5762 w
(the) 1670 5762 w
(local) 1841 5762 w
(to) 2091 5762 w
(the) 2214 5762 w
(shared) 2385 5762 w
(counter,) 2707 5762 w
(While) 3100 5762 w
(one) 3405 5762 w
(process) 3600 5762 w
(is) 3965 5762 w
(per\255) 4076 5762 w
(forming) 566 5882 w
(its) 955 5882 w
(increment,) 1095 5882 w
(the) 1596 5882 w
(other) 1765 5882 w
(process) 2025 5882 w
(gets) 2388 5882 w
(in) 2600 5882 w
(the) 2721 5882 w
(way.) 2890 5882 w
(In) 3162 5882 w
(the) 3287 5882 w
(sequence) 3455 5882 w
(of) 3889 5882 w
(state\255) 4014 5882 w
(ments) 566 6002 w
cleartomark
showpage
saveobj restore
%%EndPage: 3 3
%%Page: 4 4
/saveobj save def
mark
4 pagesetup
11 /Times-Roman f
(\255 4 \255) 2317 413 w
10 /Courier f
(loc = cnt;) 786 676 w
(loc++;) 786 786 w
(cnt = loc;) 786 896 w
11 /Times-Roman f
(we) 566 1112 w
(assume) 731 1112 w
(that) 1093 1112 w
(right) 1297 1112 w
(after) 1544 1112 w
(the) 1782 1112 w
(the) 1955 1112 w
(first) 2128 1112 w
(line,) 2344 1112 w
11 /Courier f
(loc) 2576 1112 w
11 /Times-Roman f
(has) 2813 1112 w
(the) 2998 1112 w
(value) 3171 1112 w
(that) 3447 1112 w
(is) 3651 1112 w
(kept) 3764 1112 w
(in) 3992 1112 w
(the) 4117 1112 w
(shared) 566 1232 w
(variable.) 890 1232 w
(We) 1309 1232 w
(further) 1499 1232 w
(assume) 1835 1232 w
(that) 2196 1232 w
(when) 2399 1232 w
(we) 2674 1232 w
(execute) 2839 1232 w
(the) 3210 1232 w
(last) 3382 1232 w
(line,) 3573 1232 w
(the) 3804 1232 w
(global) 3976 1232 w
(variable) 566 1352 w
11 /Courier f
(cnt) 946 1352 w
11 /Times-Roman f
(has) 1172 1352 w
(the) 1346 1352 w
(value) 1508 1352 w
(it) 1773 1352 w
(had) 1863 1352 w
(when) 2049 1352 w
(we) 2314 1352 w
(executed) 2469 1352 w
(the) 2885 1352 w
(first) 3047 1352 w
(line.) 3252 1352 w
(That) 816 1508 w
(is) 1061 1508 w
(no) 1179 1508 w
(longer) 1333 1508 w
(true.) 1657 1508 w
(Because) 1899 1508 w
(there) 2307 1508 w
(is) 2569 1508 w
(another) 2687 1508 w
(process) 3059 1508 w
(that) 3431 1508 w
(might) 3640 1508 w
(change) 3942 1508 w
11 /Courier f
(cnt) 566 1628 w
11 /Times-Roman f
(while) 799 1628 w
(we) 1078 1628 w
(are) 1240 1628 w
(doing) 1407 1628 w
(something) 1693 1628 w
(else.) 2186 1628 w
(The) 2418 1628 w
(net) 2622 1628 w
(effect) 2790 1628 w
(in) 3071 1628 w
(this) 3191 1628 w
(case) 3385 1628 w
(is) 3606 1628 w
(that) 3714 1628 w
(we) 3913 1628 w
(lose) 4074 1628 w
(increments.) 566 1748 w
(The) 1109 1748 w
(counter) 1313 1748 w
(should) 1675 1748 w
(end) 2003 1748 w
(up) 2195 1748 w
(with) 2339 1748 w
(a) 2569 1748 w
(value) 2652 1748 w
(of) 2924 1748 w
(4.) 3050 1748 w
(But) 3168 1748 w
(it) 3363 1748 w
(has) 3460 1748 w
(the) 3641 1748 w
(value) 3810 1748 w
(2) 4082 1748 w
(at) 4172 1748 w
(the) 566 1868 w
(end.) 728 1868 w
(The) 970 1868 w
(same) 1168 1868 w
(would) 1421 1868 w
(happen) 1724 1868 w
(if) 2068 1868 w
(the) 2163 1868 w
(interleaving) 2325 1868 w
(had) 2877 1868 w
(been) 3063 1868 w
(like) 3297 1868 w
(follows.) 3490 1868 w
(1) 566 2024 w
(Process) 816 2024 w
(1:) 1179 2024 w
(Consult) 1293 2024 w
(the) 1665 2024 w
(variable) 1827 2024 w
(2) 566 2180 w
(Process) 816 2180 w
(2:) 1179 2180 w
(Consult) 1293 2180 w
(the) 1665 2180 w
(variable) 1827 2180 w
(3) 566 2336 w
(Process) 816 2336 w
(1:) 1179 2336 w
(Increment) 1293 2336 w
(4) 566 2492 w
(Process) 816 2492 w
(2:) 1179 2492 w
(Increment) 1293 2492 w
(5) 566 2648 w
(Process) 816 2648 w
(1:) 1179 2648 w
(Update) 1293 2648 w
(the) 1637 2648 w
(variable) 1799 2648 w
(6) 566 2804 w
(Process) 816 2804 w
(2:) 1179 2804 w
(Update) 1293 2804 w
(the) 1637 2804 w
(variable) 1799 2804 w
(This) 566 2960 w
(interleaving) 790 2960 w
(also) 1342 2960 w
(loses) 1547 2960 w
(increments.) 1795 2960 w
(This) 2332 2960 w
(is) 2557 2960 w
(because) 2660 2960 w
(of) 3034 2960 w
(the) 3154 2960 w
(race) 3317 2960 w
(condition) 3526 2960 w
(result\255) 3971 2960 w
(ing) 566 3080 w
(from) 744 3080 w
(using) 994 3080 w
(the) 1269 3080 w
11 /Times-Italic f
(shared) 1439 3080 w
11 /Courier f
(cnt) 1774 3080 w
11 /Times-Roman f
(in) 2008 3080 w
(two) 2130 3080 w
(different) 2331 3080 w
(processes) 2743 3080 w
(without) 3198 3080 w
(taking) 3571 3080 w
(any) 3882 3080 w
(pre\255) 4076 3080 w
(caution.) 566 3200 w
(Why) 816 3356 w
(did) 1082 3356 w
(our) 1276 3356 w
(last) 1475 3356 w
(program) 1681 3356 w
(exhibit) 2105 3356 w
(the) 2464 3356 w
(race) 2651 3356 w
(condition) 2884 3356 w
(but) 3353 3356 w
(others) 3547 3356 w
(did) 3868 3356 w
(not?) 4062 3356 w
(Because) 566 3476 w
(calling) 962 3476 w
11 /Courier f
(sleep) 1293 3476 w
11 /Times-Roman f
(puts) 1655 3476 w
(the) 1871 3476 w
(process) 2037 3476 w
(to) 2397 3476 w
(sleep,) 2515 3476 w
(in) 2800 3476 w
(the) 2917 3476 w
(blocked) 3082 3476 w
(state,) 3460 3476 w
(and) 3720 3476 w
(the) 3909 3476 w
(sys\255) 4074 3476 w
(tem) 566 3596 w
(is) 761 3596 w
11 /Times-Italic f
(very) 865 3596 w
11 /Times-Roman f
(likely) 1082 3596 w
(to) 1363 3596 w
(let) 1479 3596 w
(the) 1619 3596 w
(other) 1783 3596 w
(process) 2038 3596 w
(run) 2396 3596 w
(while) 2572 3596 w
(we) 2846 3596 w
(sleep.) 3003 3596 w
(We) 3286 3596 w
(are) 3468 3596 w
(forcing) 3631 3596 w
(a) 3978 3596 w
(con\255) 4057 3596 w
(text) 566 3716 w
(switch) 763 3716 w
(at) 1082 3716 w
(the) 1193 3716 w
(place) 1359 3716 w
(where) 1621 3716 w
(we) 1919 3716 w
(call) 2078 3716 w
11 /Courier f
(sleep) 2268 3716 w
11 /Times-Roman f
(.) 2598 3716 w
(Nevertheless,) 2686 3716 w
(the) 3311 3716 w
(previous) 3476 3716 w
(versions) 3885 3716 w
(for) 566 3836 w
(the) 737 3836 w
(program) 915 3836 w
(are) 1330 3836 w
(broken) 1507 3836 w
(as) 1856 3836 w
(well.) 1992 3836 w
(We) 2282 3836 w
(do) 2478 3836 w
(not) 2633 3836 w
(know) 2819 3836 w
(if) 3108 3836 w
(the) 3220 3836 w
(system) 3399 3836 w
(is) 3750 3836 w
(going) 3869 3836 w
(to) 4165 3836 w
(decide) 566 3956 w
(to) 885 3956 w
(switch) 1004 3956 w
(from) 1324 3956 w
(one) 1570 3956 w
(process) 1761 3956 w
(to) 2122 3956 w
(another) 2241 3956 w
(in) 2602 3956 w
(the) 2721 3956 w
(middle) 2888 3956 w
(of) 3227 3956 w
(our) 3351 3956 w
(loop.) 3530 3956 w
(What) 3787 3956 w
(hap\255) 4057 3956 w
(pened) 566 4076 w
(is) 856 4076 w
(that) 959 4076 w
(in) 1153 4076 w
(our) 1269 4076 w
(case,) 1445 4076 w
(the) 1690 4076 w
(system) 1854 4076 w
(did) 2190 4076 w
(not) 2361 4076 w
(switch.) 2532 4076 w
(It) 2877 4076 w
(was) 2974 4076 w
(not) 3174 4076 w
(too) 3345 4076 w
(probable) 3516 4076 w
(to) 3929 4076 w
(have) 4045 4076 w
(a) 566 4196 w
(context) 642 4196 w
(switch) 993 4196 w
(right) 1308 4196 w
(in) 1544 4196 w
(the) 1658 4196 w
(middle,) 1820 4196 w
(but) 2182 4196 w
(it) 2351 4196 w
(could) 2441 4196 w
(happen.) 2713 4196 w
(Instructions) 816 4352 w
(are) 1383 4352 w
(said) 1563 4352 w
(to) 1788 4352 w
(execute) 1922 4352 w
11 /Times-Bold f
(atomically) 2303 4352 w
11 /Times-Roman f
(,) 2791 4352 w
(because) 2867 4352 w
(one) 3260 4352 w
(instruction) 3467 4352 w
(is) 3987 4352 w
(not) 4110 4352 w
(interrupted) 566 4472 w
(in) 1093 4472 w
(the) 1225 4472 w
(middle) 1405 4472 w
(to) 1757 4472 w
(do) 1889 4472 w
(something) 2045 4472 w
(else.) 2550 4472 w
(Interrupts) 2822 4472 w
(happen) 3293 4472 w
(at) 3654 4472 w
(the) 3778 4472 w
(end) 3957 4472 w
(of) 4160 4472 w
(instructions,) 566 4592 w
(but) 1149 4592 w
(not) 1331 4592 w
(in) 1513 4592 w
(the) 1640 4592 w
(middle.) 1815 4592 w
(However,) 2190 4592 w
(even) 2660 4592 w
11 /Courier f
(cnt++) 2908 4592 w
11 /Times-Roman f
(is) 3280 4592 w
(implemented) 3396 4592 w
(using) 4012 4592 w
(several) 566 4712 w
(instructions,) 928 4712 w
(along) 1523 4712 w
(the) 1820 4712 w
(lines) 2007 4712 w
(of) 2268 4712 w
(our) 2412 4712 w
(late) 2611 4712 w
(versions) 2821 4712 w
(for) 3239 4712 w
(the) 3418 4712 w
(program.) 3604 4712 w
(This) 4055 4712 w
(means) 566 4832 w
(that) 885 4832 w
(another) 1089 4832 w
(process) 1456 4832 w
(may) 1823 4832 w
(get) 2051 4832 w
(in) 2224 4832 w
(the) 2349 4832 w
(way,) 2522 4832 w
(even) 2771 4832 w
(in) 3016 4832 w
(the) 3141 4832 w
(middle) 3315 4832 w
(of) 3661 4832 w
(something) 3792 4832 w
(like) 566 4952 w
11 /Courier f
(cnt++) 759 4952 w
11 /Times-Roman f
(.) 1089 4952 w
(The) 1173 4952 w
(same) 1371 4952 w
(applies) 1624 4952 w
(to) 1963 4952 w
11 /Courier f
(if) 2077 4952 w
11 /Times-Roman f
(conditions) 2237 4952 w
(and) 2724 4952 w
(to) 2910 4952 w
(any) 3024 4952 w
(other) 3210 4952 w
(statement.) 3463 4952 w
(What) 816 5108 w
(we) 1096 5108 w
(need) 1266 5108 w
(is) 1515 5108 w
(some) 1633 5108 w
(way) 1909 5108 w
(to) 2135 5108 w
11 /Times-Bold f
(synchronize) 2265 5108 w
11 /Times-Roman f
(multiple) 2871 5108 w
(processes.) 3283 5108 w
(That) 3774 5108 w
(is,) 4019 5108 w
(to) 4165 5108 w
(arrange) 566 5228 w
(for) 921 5228 w
(multiple) 1077 5228 w
(processes) 1473 5228 w
(to) 1920 5228 w
(agree) 2034 5228 w
(regarding) 2297 5228 w
(when) 2744 5228 w
(is) 3009 5228 w
(a) 3111 5228 w
(good) 3187 5228 w
(time) 3435 5228 w
(to) 3659 5228 w
(do) 3773 5228 w
(particu\255) 3911 5228 w
(lar) 566 5348 w
(operations.) 713 5348 w
(In) 1230 5348 w
(the) 1353 5348 w
(rest) 1519 5348 w
(of) 1709 5348 w
(this) 1832 5348 w
(chapter,) 2024 5348 w
(and) 2405 5348 w
(in) 2595 5348 w
(the) 2713 5348 w
(following) 2879 5348 w
(one,) 3339 5348 w
(we) 3557 5348 w
(are) 3716 5348 w
(going) 3881 5348 w
(to) 4165 5348 w
(explore) 566 5468 w
(some) 928 5468 w
(abstractions) 1194 5468 w
(provided) 1752 5468 w
(by) 2176 5468 w
(Plan) 2319 5468 w
(9) 2548 5468 w
(that) 2636 5468 w
(can) 2834 5468 w
(be) 3018 5468 w
(used) 3154 5468 w
(to) 3388 5468 w
(synchronize) 3507 5468 w
(pro\255) 4069 5468 w
(cesses.) 566 5588 w
(We) 920 5588 w
(are) 1124 5588 w
(going) 1309 5588 w
(to) 1613 5588 w
(focus) 1752 5588 w
(on) 2042 5588 w
(synchronizing) 2205 5588 w
(processes) 2881 5588 w
(that) 3354 5588 w
(share) 3573 5588 w
(memory.) 3857 5588 w
(When) 566 5708 w
(they) 867 5708 w
(do) 1096 5708 w
(not) 1246 5708 w
(share) 1427 5708 w
(memory,) 1697 5708 w
(pipes) 2130 5708 w
(are) 2401 5708 w
(excellent) 2572 5708 w
(synchronization) 3006 5708 w
(means,) 3746 5708 w
(and) 4093 5708 w
(you) 566 5828 w
(have) 759 5828 w
(already) 993 5828 w
(used) 1342 5828 w
(them.) 1571 5828 w
cleartomark
showpage
saveobj restore
%%EndPage: 4 4
%%Page: 5 5
/saveobj save def
mark
5 pagesetup
11 /Times-Roman f
(\255 5 \255) 2317 413 w
16 /Times-Bold f
(10.2.) 566 686 w
(Locks) 966 686 w
11 /Times-Roman f
(How) 566 842 w
(do) 810 842 w
(we) 951 842 w
(solve) 1109 842 w
(the) 1373 842 w
(problem?) 1539 842 w
(The) 1985 842 w
(race) 2187 842 w
(condition) 2399 842 w
(happens) 2847 842 w
(because) 3238 842 w
(more) 3615 842 w
(than) 3872 842 w
(one) 4093 842 w
(process) 566 962 w
(may) 930 962 w
(simultaneously) 1155 962 w
(use) 1858 962 w
(a) 2040 962 w
(shared) 2124 962 w
(resource,) 2445 962 w
(i.e.) 2878 962 w
(the) 3048 962 w
(global) 3217 962 w
(counter.) 3527 962 w
(This) 3946 962 w
(is) 4177 962 w
(what) 566 1082 w
(breaks) 807 1082 w
(the) 1120 1082 w
(assumption) 1282 1082 w
(that) 1812 1082 w
11 /Courier f
(cnt) 2005 1082 w
11 /Times-Roman f
(does) 2231 1082 w
(not) 2460 1082 w
(change) 2629 1082 w
(between) 2966 1082 w
(lines) 3358 1082 w
(\(1\)) 3594 1082 w
(and) 3749 1082 w
(\(3\)) 3935 1082 w
(in) 4090 1082 w
10 /Times-Roman f
(\(1\)) 786 1252 w
10 /Courier f
(loc = cnt;) 1266 1252 w
10 /Times-Roman f
(\(2\)) 786 1362 w
10 /Courier f
(loc++;) 1266 1362 w
10 /Times-Roman f
(\(3\)) 786 1472 w
10 /Courier f
(cnt = loc;) 1266 1472 w
11 /Times-Roman f
(Furthermore,) 566 1688 w
(the) 1178 1688 w
(reason) 1348 1688 w
(why) 1669 1688 w
(more) 1894 1688 w
(than) 2155 1688 w
(one) 2380 1688 w
(process) 2575 1688 w
(may) 2940 1688 w
(use) 3166 1688 w
11 /Courier f
(cnt) 3349 1688 w
11 /Times-Roman f
(simultaneously) 3584 1688 w
(is) 566 1808 w
(because) 683 1808 w
(this) 1071 1808 w
(block) 1274 1808 w
(of) 1561 1808 w
(code) 1695 1808 w
(is) 1943 1808 w
(not) 2059 1808 w
11 /Times-Italic f
(atomic) 2242 1808 w
11 /Times-Roman f
(.) 2541 1808 w
(It) 2639 1808 w
(is) 2748 1808 w
(not) 2864 1808 w
(a) 3047 1808 w
(single) 3137 1808 w
(instruction,) 3442 1808 w
(which) 3983 1808 w
(means) 566 1928 w
(that) 879 1928 w
(in) 1077 1928 w
(the) 1196 1928 w
(middle) 1363 1928 w
(of) 1702 1928 w
(the) 1826 1928 w
(block) 1993 1928 w
(there) 2270 1928 w
(may) 2521 1928 w
(be) 2743 1928 w
(a) 2879 1928 w
(context) 2960 1928 w
(switch,) 3317 1928 w
(and) 3666 1928 w
(the) 3858 1928 w
(other) 4026 1928 w
(process) 566 2048 w
(may) 922 2048 w
(change) 1139 2048 w
11 /Courier f
(cnt) 1476 2048 w
11 /Times-Roman f
(or) 1702 2048 w
(consult) 1821 2048 w
(it) 2167 2048 w
(while) 2257 2048 w
(we) 2529 2048 w
(are) 2684 2048 w
(in) 2844 2048 w
(the) 2958 2048 w
(middle) 3120 2048 w
(of) 3454 2048 w
(a) 3573 2048 w
(change.) 3649 2048 w
(On) 816 2204 w
(the) 999 2204 w
(contrary,) 1182 2204 w
(the) 1623 2204 w
(executions) 1806 2204 w
(for) 2324 2204 w
(the) 2501 2204 w
(first) 2685 2204 w
(two) 2912 2204 w
(versions) 3127 2204 w
(of) 3543 2204 w
(our) 3684 2204 w
(program) 3880 2204 w
(behaved) 566 2324 w
11 /Times-Italic f
(as) 969 2324 w
(if) 1106 2324 w
11 /Times-Roman f
(this) 1207 2324 w
(block) 1406 2324 w
(of) 1689 2324 w
(code) 1819 2324 w
(was) 2064 2324 w
(atomic.) 2273 2324 w
(It) 2639 2324 w
(just) 2745 2324 w
(happen) 2944 2324 w
(that) 3299 2324 w
(one) 3502 2324 w
(process) 3698 2324 w
(exe\255) 4064 2324 w
(cuted) 566 2444 w
(the) 848 2444 w
(problematic) 1028 2444 w
(code,) 1598 2444 w
(and) 1878 2444 w
(then) 2082 2444 w
(the) 2317 2444 w
(other.) 2497 2444 w
(The) 2796 2444 w
(code) 3012 2444 w
(was) 3264 2444 w
(executed) 3480 2444 w
(without) 3914 2444 w
(being) 566 2564 w
(interrupted) 850 2564 w
(by) 1371 2564 w
(the) 1521 2564 w
(other) 1695 2564 w
(process) 1959 2564 w
(in) 2326 2564 w
(the) 2451 2564 w
(middle) 2624 2564 w
(of) 2969 2564 w
(the) 3099 2564 w
(update) 3272 2564 w
(for) 3603 2564 w
11 /Courier f
(cnt) 3769 2564 w
11 /Times-Roman f
(.) 3967 2564 w
(And) 4062 2564 w
(the) 566 2684 w
(net) 736 2684 w
(effect) 906 2684 w
(is) 1189 2684 w
(that) 1299 2684 w
(the) 1500 2684 w
(program) 1670 2684 w
(worked!) 2077 2684 w
(We) 2477 2684 w
(now) 2664 2684 w
(know) 2889 2684 w
(that) 3169 2684 w
(we) 3370 2684 w
(were) 3534 2684 w
(just) 3782 2684 w
(lucky,) 3979 2684 w
(because) 566 2804 w
(there) 944 2804 w
(could) 1195 2804 w
(have) 1472 2804 w
(been) 1711 2804 w
(a) 1950 2804 w
(context) 2031 2804 w
(switch) 2387 2804 w
(in) 2707 2804 w
(the) 2826 2804 w
(middle.) 2993 2804 w
(But) 3360 2804 w
(the) 3553 2804 w
(point) 3720 2804 w
(is) 3980 2804 w
(that) 4086 2804 w
(when) 566 2924 w
(the) 831 2924 w
(block) 993 2924 w
(of) 1265 2924 w
(code) 1384 2924 w
(behaves) 1618 2924 w
(as) 1998 2924 w
(an) 2117 2924 w
(atomic) 2248 2924 w
(instruction,) 2575 2924 w
(there) 3103 2924 w
(are) 3350 2924 w
(no) 3511 2924 w
(races,) 3650 2924 w
(and) 3930 2924 w
(the) 4117 2924 w
(program) 566 3044 w
(behaves) 965 3044 w
(nicely.) 1345 3044 w
9 /Times-Bold f
(Parent) 1017 3278 w
(Child) 1760 3278 w
1327 3494 1327 3386 Dl
1327 3386 1687 3386 Dl
1687 3386 1687 3494 Dl
1687 3494 1327 3494 Dl
9 /Courier f
(cnt: 0) 1345 3458 w
(cnt++) 1012 3638 w
1327 3854 1327 3746 Dl
1327 3746 1687 3746 Dl
1687 3746 1687 3854 Dl
1687 3854 1327 3854 Dl
(cnt: 1) 1345 3818 w
(cnt++) 1732 3998 w
1327 4214 1327 4106 Dl
1327 4106 1687 4106 Dl
1687 4106 1687 4214 Dl
1687 4214 1327 4214 Dl
(cnt: 2) 1345 4178 w
9 /Times-Bold f
(\(a\)) 1455 4664 w
2407 4646 2407 3206 Dl
2407 3206 2410 3206 Dl
2410 3206 2410 4646 Dl
2410 4646 2407 4646 Dl
(Parent) 2820 3278 w
(Child) 3563 3278 w
3130 3494 3130 3386 Dl
3130 3386 3490 3386 Dl
3490 3386 3490 3494 Dl
3490 3494 3130 3494 Dl
9 /Courier f
(cnt: 0) 3148 3458 w
(cnt++) 3535 3638 w
3130 3854 3130 3746 Dl
3130 3746 3490 3746 Dl
3490 3746 3490 3854 Dl
3490 3854 3130 3854 Dl
(cnt: 1) 3148 3818 w
(cnt++) 2815 3998 w
3130 4214 3130 4106 Dl
3130 4106 3490 4106 Dl
3490 4106 3490 4214 Dl
3490 4214 3130 4214 Dl
(cnt: 2) 3148 4178 w
9 /Times-Bold f
(\(b\)) 3255 4664 w
11 /Times-Roman f
(Why) 816 4880 w
(is) 1072 4880 w
(this) 1189 4880 w
(so?) 1392 4880 w
(Consider) 1581 4880 w
(our) 2021 4880 w
(two) 2210 4880 w
(processes) 2418 4880 w
(trying) 2880 4880 w
(to) 3186 4880 w
(increment) 3316 4880 w
(the) 3798 4880 w
(global) 3976 4880 w
(counter,) 566 5000 w
(as) 956 5000 w
(shown) 1081 5000 w
(in) 1402 5000 w
(figure) 1521 5000 w
([[!atomic) 1843 5000 w
(increment!]].) 2283 5000 w
(Imagine) 2918 5000 w
(also) 3310 5000 w
(that) 3520 5000 w
11 /Courier f
(cnt++) 3718 5000 w
11 /Times-Roman f
(was) 4081 5000 w
(a) 566 5120 w
(single) 642 5120 w
(instruction.) 933 5120 w
(One) 1460 5120 w
(of) 1670 5120 w
(the) 1789 5120 w
(two) 1951 5120 w
(processes) 2144 5120 w
(is) 2591 5120 w
(going) 2694 5120 w
(to) 2974 5120 w
(execute) 3089 5120 w
11 /Courier f
(cnt++) 3451 5120 w
11 /Times-Roman f
(before) 3810 5120 w
(the) 4117 5120 w
(other.) 566 5240 w
(It) 868 5240 w
(could) 983 5240 w
(happen) 1275 5240 w
(what) 1639 5240 w
(figure) 1900 5240 w
([[!atomic) 2209 5240 w
(increment!]]) 2664 5240 w
(\(a\)) 3258 5240 w
(shows,) 3426 5240 w
(or) 3777 5240 w
(what) 3916 5240 w
(is) 4177 5240 w
(shown) 566 5360 w
(in) 891 5360 w
([[!atomic) 1015 5360 w
(increment!]]) 1460 5360 w
(\(b\).) 2044 5360 w
(There) 2237 5360 w
(is) 2529 5360 w
(no) 2642 5360 w
(other) 2791 5360 w
(case.) 3055 5360 w
(As) 3337 5360 w
(we) 3498 5360 w
(are) 3664 5360 w
(assuming) 3835 5360 w
(that) 566 5480 w
(this) 772 5480 w
(is) 973 5480 w
(an) 1088 5480 w
(atomic) 1232 5480 w
(\(non) 1572 5480 w
(divisible\)) 1814 5480 w
(instruction,) 2271 5480 w
(the) 2811 5480 w
(increment) 2986 5480 w
(is) 3465 5480 w
(performed) 3580 5480 w
(cor\255) 4076 5480 w
(rectly.) 566 5600 w
(There) 875 5600 w
(can) 1162 5600 w
(be) 1346 5600 w
(no) 1482 5600 w
(context) 1625 5600 w
(switch) 1981 5600 w
(in) 2301 5600 w
(the) 2420 5600 w
(middle.) 2587 5600 w
(Now,) 2954 5600 w
(when) 3228 5600 w
(the) 3498 5600 w
(other) 3665 5600 w
(process) 3923 5600 w
(executes) 566 5720 w
(its) 973 5720 w
11 /Courier f
(cnt++) 1109 5720 w
11 /Times-Roman f
(,) 1439 5720 w
(it) 1497 5720 w
(finds) 1589 5720 w
11 /Courier f
(cnt) 1839 5720 w
11 /Times-Roman f
(already) 2067 5720 w
(incremented,) 2418 5720 w
(and) 3017 5720 w
(no) 3205 5720 w
(increment) 3345 5720 w
(is) 3813 5720 w
(missed.) 3917 5720 w
(There) 566 5840 w
(is) 857 5840 w
(no) 968 5840 w
(race.) 1115 5840 w
(The) 1361 5840 w
(only) 1569 5840 w
(two) 1803 5840 w
(possibilities) 2006 5840 w
(are) 2572 5840 w
(those) 2742 5840 w
(depicted) 3012 5840 w
(in) 3421 5840 w
(figure) 3545 5840 w
([[!atomic) 3844 5840 w
(increment!]].) 566 5960 w
(Of) 816 6116 w
(course,) 974 6116 w
(we) 1330 6116 w
(do) 1501 6116 w
(not) 1655 6116 w
(know) 1840 6116 w
(the) 2128 6116 w
(order) 2306 6116 w
(in) 2580 6116 w
(which) 2710 6116 w
(increments) 3022 6116 w
(are) 3547 6116 w
(going) 3723 6116 w
(to) 4018 6116 w
(be) 4148 6116 w
(made.) 566 6236 w
(Perhaps) 904 6236 w
(the) 1296 6236 w
(parent) 1474 6236 w
(in) 1791 6236 w
(our) 1921 6236 w
(program) 2111 6236 w
(does) 2526 6236 w
(its) 2771 6236 w
(two) 2920 6236 w
(increments,) 3129 6236 w
(and) 3682 6236 w
(then) 3884 6236 w
(the) 4117 6236 w
(child,) 566 6356 w
(or) 856 6356 w
(perhaps) 989 6356 w
(the) 1371 6356 w
(other) 1547 6356 w
(way) 1814 6356 w
(around,) 2039 6356 w
(or) 2414 6356 w
(perhaps) 2548 6356 w
(in) 2931 6356 w
(some) 3060 6356 w
(interleaved) 3335 6356 w
(way.) 3864 6356 w
(No) 4117 6356 w
cleartomark
showpage
saveobj restore
%%EndPage: 5 5
%%Page: 6 6
/saveobj save def
mark
6 pagesetup
11 /Times-Roman f
(\255 6 \255) 2317 413 w
(matter) 566 686 w
(the) 888 686 w
(order,) 1064 686 w
(the) 1364 686 w
(program) 1539 686 w
(will) 1951 686 w
(yield) 2164 686 w
(the) 2425 686 w
(expected) 2600 686 w
(result) 3029 686 w
(if) 3314 686 w
(the) 3422 686 w
(increments) 3597 686 w
(are) 4119 686 w
(atomic,) 566 806 w
(as) 921 806 w
(we) 1040 806 w
(just) 1195 806 w
(discussed.) 1383 806 w
(The) 816 962 w
(code) 1019 962 w
(where) 1259 962 w
(we) 1559 962 w
(are) 1720 962 w
(using) 1886 962 w
(a) 2159 962 w
(shared) 2241 962 w
(resource,) 2560 962 w
(which) 2991 962 w
(poses) 3293 962 w
(problems) 3571 962 w
(when) 4014 962 w
(not) 566 1082 w
(executed) 757 1082 w
(atomically,) 1195 1082 w
(is) 1737 1082 w
(called) 1861 1082 w
(a) 2172 1082 w
11 /Times-Bold f
(critical) 2270 1082 w
(region) 2648 1082 w
11 /Times-Roman f
(.) 2947 1082 w
(It) 3053 1082 w
(is) 3169 1082 w
(just) 3292 1082 w
(a) 3501 1082 w
(piece) 3626 1082 w
(of) 3905 1082 w
(code) 4045 1082 w
(accessing) 566 1202 w
(a) 1024 1202 w
(shared) 1111 1202 w
(resource.) 1435 1202 w
(A) 1899 1202 w
(context) 2017 1202 w
(switch) 2379 1202 w
(while) 2705 1202 w
(executing) 2988 1202 w
(within) 3453 1202 w
(the) 3774 1202 w
(critical) 3947 1202 w
(region) 566 1322 w
(may) 895 1322 w
(be) 1133 1322 w
(a) 1284 1322 w
(problem.) 1380 1322 w
(More) 1822 1322 w
(precisely,) 2107 1322 w
(the) 2578 1322 w
(problem) 2760 1322 w
(is) 3174 1322 w
(not) 3296 1322 w
(having) 3485 1322 w
(a) 3832 1322 w
(context) 3928 1322 w
(switch,) 566 1442 w
(but) 912 1442 w
(switching) 1084 1442 w
(to) 1543 1442 w
(any) 1660 1442 w
(other) 1849 1442 w
(process) 2105 1442 w
(that) 2464 1442 w
(might) 2660 1442 w
(also) 2949 1442 w
(use) 3158 1442 w
(or) 3336 1442 w
(change) 3459 1442 w
(the) 3800 1442 w
(shared) 3966 1442 w
(resource.) 566 1562 w
(For) 994 1562 w
(example,) 1178 1562 w
(it) 1608 1562 w
(does) 1701 1562 w
(not) 1933 1562 w
(matter) 2105 1562 w
(if) 2416 1562 w
(while) 2514 1562 w
(we) 2789 1562 w
(are) 2947 1562 w
(incrementing) 3110 1562 w
(our) 3719 1562 w
(counter,) 3895 1562 w
(Acme) 566 1682 w
(runs) 870 1682 w
(for) 1102 1682 w
(a) 1272 1682 w
(while.) 1363 1682 w
(Acme) 1678 1682 w
(does) 1982 1682 w
(not) 2226 1682 w
(interfere) 2410 1682 w
(because) 2822 1682 w
(we) 3210 1682 w
(are) 3380 1682 w
(not) 3555 1682 w
(sharing) 3739 1682 w
(our) 4105 1682 w
(counter) 566 1802 w
(with) 938 1802 w
(it.) 1177 1802 w
(This) 1310 1802 w
(is) 1549 1802 w
(the) 1666 1802 w
(last) 1843 1802 w
(program,) 2039 1802 w
(with) 2481 1802 w
(the) 2720 1802 w
(critical) 2897 1802 w
(region) 3244 1802 w
(shown) 3567 1802 w
(inside) 3897 1802 w
(a) 4203 1802 w
(box.) 566 1922 w
9 /S f
(\347) 566 2092 w
9 /Times-Bold f
(rincr2.c) 581 2092 w
9 /S f
(\347) 899 2092 w
(`) 566 2092 w
(```````) 584 2092 w
(_) 566 2092 w
(_______) 584 2092 w
8 /Courier f
(#include <u.h>) 786 2200 w
(#include <libc.h>) 786 2308 w
(int) 786 2524 w
(cnt;) 1266 2524 w
(void) 786 2740 w
(main\(int, char*[]\)) 786 2848 w
({) 786 2956 w
(int) 1266 3064 w
(i;) 1746 3064 w
(int) 1266 3172 w
(loc;) 1746 3172 w
(if \(rfork\(RFPROC|RFMEM|RFNOWAIT\) < 0\)) 1266 3388 w
(sysfatal\("fork: %r"\);) 1746 3496 w
(for \(i = 0; i < 2; i++\){) 1266 3604 w
(loc = cnt;) 1746 3712 w
(sleep\(1\);) 1746 3820 w
(loc++;) 1746 3928 w
(cnt = loc;) 1746 4036 w
(}) 1266 4144 w
(print\("cnt is %d\\n", cnt\);) 1266 4252 w
(exits\(nil\);) 1266 4360 w
(}) 786 4468 w
11 /Times-Roman f
(Given) 566 4684 w
(our) 866 4684 w
(critical) 1044 4684 w
(region,) 1380 4684 w
(If) 1720 4684 w
(we) 1824 4684 w
(could) 1983 4684 w
(guarantee) 2259 4684 w
(that) 2715 4684 w
(at) 2912 4684 w
(most) 3023 4684 w
(one) 3271 4684 w
(process) 3462 4684 w
(is) 3823 4684 w
(execut\255) 3930 4684 w
(ing) 566 4804 w
(inside) 756 4804 w
(it,) 1068 4804 w
(there) 1207 4804 w
(would) 1474 4804 w
(be) 1798 4804 w
(no) 1950 4804 w
(race) 2109 4804 w
(conditions.) 2338 4804 w
(The) 2902 4804 w
(reason) 3121 4804 w
(is) 3454 4804 w
(that) 3576 4804 w
(the) 3789 4804 w
(region) 3971 4804 w
(would) 566 4924 w
(appear) 876 4924 w
(to) 1201 4924 w
(be) 1322 4924 w
(atomic,) 1460 4924 w
(at) 1822 4924 w
(least) 1936 4924 w
(with) 2173 4924 w
(respect) 2405 4924 w
(to) 2750 4924 w
(the) 2872 4924 w
(processes) 3042 4924 w
(trying) 3497 4924 w
(to) 3796 4924 w
(execute) 3918 4924 w
(it.) 566 5044 w
(There) 692 5044 w
(could) 981 5044 w
(be) 1260 5044 w
(any) 1398 5044 w
(number) 1591 5044 w
(of) 1961 5044 w
(context) 2087 5044 w
(switches) 2445 5044 w
(while) 2858 5044 w
(executing) 3137 5044 w
(the) 3598 5044 w
(region,) 3767 5044 w
(but) 4110 5044 w
(no) 566 5164 w
(other) 710 5164 w
(process) 969 5164 w
(would) 1331 5164 w
(be) 1640 5164 w
(allowed) 1777 5164 w
(to) 2158 5164 w
(enter) 2278 5164 w
(it) 2530 5164 w
(until) 2627 5164 w
(the) 2865 5164 w
(one) 3034 5164 w
(executing) 3227 5164 w
(it) 3688 5164 w
(does) 3785 5164 w
(leave) 4021 5164 w
(the) 566 5284 w
(region.) 739 5284 w
(Thus,) 1086 5284 w
(only) 1373 5284 w
(one) 1608 5284 w
(process) 1805 5284 w
(would) 2171 5284 w
(be) 2484 5284 w
(using) 2625 5284 w
(the) 2902 5284 w
(shared) 3074 5284 w
(resource) 3397 5284 w
(at) 3804 5284 w
(a) 3921 5284 w
(given) 4007 5284 w
(time) 566 5404 w
(and) 790 5404 w
(that) 976 5404 w
(is) 1169 5404 w
(why) 1271 5404 w
(there) 1488 5404 w
(would) 1734 5404 w
(be) 2037 5404 w
(no) 2168 5404 w
(races.) 2306 5404 w
(Guaranteeing) 816 5560 w
(that) 1433 5560 w
(no) 1626 5560 w
(more) 1764 5560 w
(than) 2017 5560 w
(one) 2234 5560 w
(process) 2420 5560 w
(is) 2776 5560 w
(executing) 2878 5560 w
(code) 3332 5560 w
(within) 3566 5560 w
(the) 3876 5560 w
(criti\255) 4038 5560 w
(cal) 566 5680 w
(region) 739 5680 w
(is) 1065 5680 w
(called) 1185 5680 w
(achieving) 1492 5680 w
11 /Times-Bold f
(mutual) 1964 5680 w
(exclusion) 2347 5680 w
11 /Times-Roman f
(,) 2782 5680 w
(because) 2856 5680 w
(one) 3247 5680 w
(process) 3451 5680 w
(executing) 3825 5680 w
(within) 566 5800 w
(the) 897 5800 w
(region) 1080 5800 w
(excludes) 1410 5800 w
(any) 1843 5800 w
(other) 2051 5800 w
(one) 2326 5800 w
(from) 2534 5800 w
(executing) 2797 5800 w
(inside) 3273 5800 w
(\(when) 3586 5800 w
(there) 3909 5800 w
(is) 4177 5800 w
(mutual) 566 5920 w
(exclusion\).) 900 5920 w
(How) 816 6076 w
(can) 1072 6076 w
(we) 1266 6076 w
(achieve) 1436 6076 w
(mutual) 1813 6076 w
(exclusion) 2163 6076 w
(for) 2628 6076 w
(our) 2799 6076 w
(critical) 2989 6076 w
(region?) 3337 6076 w
(The) 3737 6076 w
(idea) 3951 6076 w
(is) 4177 6076 w
(that) 566 6196 w
(when) 764 6196 w
(a) 1034 6196 w
(process) 1115 6196 w
(is) 1476 6196 w
(about) 1583 6196 w
(to) 1860 6196 w
(enter) 1979 6196 w
(the) 2230 6196 w
(critical) 2396 6196 w
(region,) 2732 6196 w
(it) 3072 6196 w
(must) 3166 6196 w
(wait) 3413 6196 w
(until) 3634 6196 w
(it) 3869 6196 w
(is) 3963 6196 w
(sure) 4069 6196 w
(that) 566 6316 w
(nobody) 768 6316 w
(else) 1135 6316 w
(is) 1342 6316 w
(executing) 1453 6316 w
(code) 1916 6316 w
(inside) 2159 6316 w
(it.) 2459 6316 w
(Only) 2586 6316 w
(in) 2843 6316 w
(that) 2966 6316 w
(case) 3168 6316 w
(it) 3392 6316 w
(may) 3491 6316 w
(proceed.) 3718 6316 w
(To) 4129 6316 w
cleartomark
showpage
saveobj restore
%%EndPage: 6 6
%%Page: 7 7
/saveobj save def
mark
7 pagesetup
11 /Times-Roman f
(\255 7 \255) 2317 413 w
(achieve) 566 686 w
(this) 927 686 w
(we) 1115 686 w
(need) 1270 686 w
(new) 1504 686 w
(abstractions.) 1714 686 w
(A) 816 842 w
11 /Times-Bold f
(lock) 924 842 w
11 /Times-Roman f
(is) 1149 842 w
(a) 1253 842 w
(boolean) 1331 842 w
(variable) 1708 842 w
(\(or) 2090 842 w
(an) 2247 842 w
(integer) 2380 842 w
(used) 2714 842 w
(as) 2945 842 w
(a) 3066 842 w
(boolean\)) 3144 842 w
(used) 3557 842 w
(to) 3788 842 w
(indicate) 3904 842 w
(if) 566 962 w
(a) 665 962 w
(critical) 745 962 w
(region) 1081 962 w
(is) 1393 962 w
(occupied) 1499 962 w
(or) 1926 962 w
(not.) 2049 962 w
(A) 2250 962 w
(process) 2361 962 w
(entering) 2720 962 w
(the) 3110 962 w
(critical) 3275 962 w
(region) 3610 962 w
(sets) 3921 962 w
(the) 4117 962 w
(lock) 566 1082 w
(to) 789 1082 w
(true,) 909 1082 w
(and) 1141 1082 w
(resets) 1333 1082 w
(the) 1617 1082 w
(lock) 1786 1082 w
(to) 2010 1082 w
(false) 2131 1082 w
(only) 2372 1082 w
(after) 2603 1082 w
(leaving) 2837 1082 w
(the) 3195 1082 w
(region.) 3364 1082 w
(To) 3707 1082 w
(enter) 3864 1082 w
(the) 4117 1082 w
(region,) 566 1202 w
(a) 903 1202 w
(process) 980 1202 w
(must) 1337 1202 w
(either) 1581 1202 w
(find) 1859 1202 w
(the) 2065 1202 w
(lock) 2228 1202 w
(set) 2446 1202 w
(to) 2597 1202 w
(false) 2712 1202 w
(or) 2947 1202 w
(wait) 3067 1202 w
(until) 3285 1202 w
(it) 3516 1202 w
(becomes) 3606 1202 w
(false,) 4017 1202 w
(otherwise) 566 1322 w
(there) 1020 1322 w
(would) 1266 1322 w
(be) 1569 1322 w
(more) 1700 1322 w
(than) 1953 1322 w
(one) 2170 1322 w
(process) 2356 1322 w
(executing) 2712 1322 w
(within) 3166 1322 w
(the) 3476 1322 w
(critical) 3638 1322 w
(region) 3971 1322 w
(and) 566 1442 w
(we) 752 1442 w
(would) 907 1442 w
(have) 1210 1442 w
(race) 1444 1442 w
(conditions.) 1652 1442 w
(The) 816 1598 w
(intuition) 1020 1598 w
(is) 1430 1598 w
(that) 1539 1598 w
(the) 1739 1598 w
(lock) 1908 1598 w
(is) 2132 1598 w
(a) 2241 1598 w
(variable) 2324 1598 w
(that) 2711 1598 w
(is) 2911 1598 w
(used) 3020 1598 w
(to) 3256 1598 w
11 /Times-Italic f
(lock) 3377 1598 w
11 /Times-Roman f
(a) 3594 1598 w
(resource) 3677 1598 w
(\(the) 4081 1598 w
(region\).) 566 1718 w
(A) 942 1718 w
(process) 1053 1718 w
(wanting) 1413 1718 w
(to) 1799 1718 w
(use) 1917 1718 w
(the) 2095 1718 w
(shared) 2261 1718 w
(resource) 2578 1718 w
(only) 2979 1718 w
(does) 3207 1718 w
(so) 3440 1718 w
(after) 3570 1718 w
(locking) 3800 1718 w
(it.) 4161 1718 w
(After) 566 1838 w
(using) 845 1838 w
(the) 1133 1838 w
(resource,) 1317 1838 w
(the) 1764 1838 w
(process) 1948 1838 w
(unlocks) 2326 1838 w
(it.) 2718 1838 w
(While) 2886 1838 w
(the) 3204 1838 w
(resource) 3388 1838 w
(is) 3807 1838 w
(locked,) 3931 1838 w
(nobody) 566 1958 w
(else) 924 1958 w
(will) 1122 1958 w
(be) 1322 1958 w
(able) 1453 1958 w
(to) 1663 1958 w
(lock) 1777 1958 w
(it) 1994 1958 w
(and) 2084 1958 w
(use) 2270 1958 w
(it.) 2444 1958 w
(Using) 816 2114 w
(locks,) 1118 2114 w
(we) 1417 2114 w
(could) 1583 2114 w
(protect) 1866 2114 w
(our) 2209 2114 w
(critical) 2394 2114 w
(region) 2737 2114 w
(by) 3056 2114 w
(declaring) 3206 2114 w
(a) 3653 2114 w
11 /Courier f
(Lock) 3741 2114 w
11 /Times-Roman f
(vari\255) 4045 2114 w
(able,) 566 2234 w
11 /Courier f
(cntlck) 826 2234 w
11 /Times-Roman f
(,) 1222 2234 w
(calling) 1299 2234 w
11 /Courier f
(lock) 1647 2234 w
11 /Times-Roman f
(on) 1960 2234 w
(it) 2119 2234 w
(\(to) 2230 2234 w
(set) 2401 2234 w
(the) 2572 2234 w
(lock\)) 2755 2234 w
(before) 3029 2234 w
(entering) 3356 2234 w
(the) 3764 2234 w
(critical) 3947 2234 w
(region,) 566 2354 w
(and) 908 2354 w
(calling) 1100 2354 w
11 /Courier f
(unlock) 1433 2354 w
11 /Times-Roman f
(on) 1863 2354 w
(it) 2007 2354 w
(\(to) 2103 2354 w
(release) 2259 2354 w
(the) 2595 2354 w
(lock\)) 2763 2354 w
(after) 3022 2354 w
(leaving) 3255 2354 w
(the) 3612 2354 w
(region.) 3780 2354 w
(By) 4122 2354 w
(initializing) 566 2474 w
(the) 1074 2474 w
(variable) 1238 2474 w
(to) 1620 2474 w
(zero,) 1736 2474 w
(the) 1981 2474 w
(lock) 2145 2474 w
(is) 2364 2474 w
(initially) 2468 2474 w
(released) 2842 2474 w
(\(remember) 3229 2474 w
(that) 3738 2474 w
(globals) 3933 2474 w
(are) 566 2594 w
(initialized) 726 2594 w
(to) 1194 2594 w
(zero) 1308 2594 w
(by) 1523 2594 w
(default\).) 1661 2594 w
10 /Courier f
(; sig lock unlock) 786 2764 w
(void lock\(Lock *l\)) 1266 2874 w
(void unlock\(Lock *l\)) 1266 2984 w
11 /Times-Roman f
(The) 566 3200 w
(resulting) 764 3200 w
(program) 1177 3200 w
(is) 1576 3200 w
(shown) 1678 3200 w
(next.) 1993 3200 w
9 /S f
(\347) 566 3370 w
9 /Times-Bold f
(lock.c) 581 3370 w
9 /S f
(\347) 819 3370 w
(`) 566 3370 w
(`````) 594 3370 w
(_) 566 3370 w
(_____) 594 3370 w
8 /Courier f
(#include <u.h>) 786 3478 w
(#include <libc.h>) 786 3586 w
(int) 786 3802 w
(cnt;) 1266 3802 w
(Lock) 786 3910 w
(cntlck;) 1266 3910 w
(void) 786 4126 w
(main\(int, char*[]\)) 786 4234 w
({) 786 4342 w
(int) 1266 4450 w
(i;) 1746 4450 w
(if \(rfork\(RFPROC|RFMEM|RFNOWAIT\) < 0\)) 1266 4666 w
(sysfatal\("fork: %r"\);) 1746 4774 w
(for \(i = 0; i < 2; i++\){) 1266 4882 w
(lock\(&cntlck\);) 1746 4990 w
(cnt++;) 1746 5098 w
(unlock\(&cntlck\);) 1746 5206 w
(}) 1266 5314 w
(print\("cnt is %d\\n", cnt\);) 1266 5422 w
(exits\(nil\);) 1266 5530 w
(}) 786 5638 w
11 /Times-Roman f
(Just) 566 5854 w
(to) 766 5854 w
(make) 880 5854 w
(it) 1145 5854 w
(more) 1235 5854 w
(clear,) 1488 5854 w
(we) 1755 5854 w
(can) 1910 5854 w
(replace) 2089 5854 w
11 /Courier f
(cnt++) 2431 5854 w
11 /Times-Roman f
(with) 2789 5854 w
cleartomark
showpage
saveobj restore
%%EndPage: 7 7
%%Page: 8 8
/saveobj save def
mark
8 pagesetup
11 /Times-Roman f
(\255 8 \255) 2317 413 w
10 /Courier f
(loc = cnt;) 786 676 w
(sleep\(1\);) 786 786 w
(loc++;) 786 896 w
(cnt = loc;) 786 1006 w
11 /Times-Roman f
(and) 566 1222 w
(the) 760 1222 w
(program) 930 1222 w
(will) 1337 1222 w
(in) 1545 1222 w
(any) 1667 1222 w
(case) 1861 1222 w
(work) 2085 1222 w
(as) 2347 1222 w
(expected.) 2475 1222 w
(Each) 2928 1222 w
(process) 3183 1222 w
(would) 3548 1222 w
(loop) 3860 1222 w
(and) 4093 1222 w
(do) 566 1342 w
(its) 704 1342 w
(two) 837 1342 w
(increments,) 1030 1342 w
(without) 1567 1342 w
(interference) 1932 1342 w
(from) 2480 1342 w
(the) 2721 1342 w
(other) 2883 1342 w
(process.) 3136 1342 w
(When) 816 1498 w
(our) 1124 1498 w
(two) 1317 1498 w
(processes) 1529 1498 w
(try) 1995 1498 w
(to) 2164 1498 w
(execute) 2297 1498 w
(the) 2677 1498 w
(critical) 2858 1498 w
(region,) 3209 1498 w
(one) 3564 1498 w
(of) 3770 1498 w
(them) 3909 1498 w
(is) 4177 1498 w
(going) 566 1618 w
(to) 857 1618 w
(execute) 983 1618 w
11 /Courier f
(lock\(&cntlck\)) 1356 1618 w
11 /Times-Roman f
(first.) 2254 1618 w
(That) 2499 1618 w
(one) 2740 1618 w
(wins) 2937 1618 w
(and) 3184 1618 w
(gains) 3381 1618 w
(the) 3652 1618 w
(lock.) 3825 1618 w
(The) 4081 1618 w
(region) 566 1738 w
(is) 887 1738 w
(now) 1002 1738 w
(locked.) 1232 1738 w
(When) 1593 1738 w
(the) 1895 1738 w
(second) 2070 1738 w
(process) 2415 1738 w
(calls) 2784 1738 w
11 /Courier f
(lock\(&cntlck\)) 3027 1738 w
11 /Times-Roman f
(it) 3927 1738 w
(finds) 4031 1738 w
(the) 566 1858 w
(lock) 736 1858 w
(set,) 961 1858 w
(and) 1147 1858 w
(waits) 1341 1858 w
(inside) 1608 1858 w
(the) 1906 1858 w
(function) 2075 1858 w
11 /Courier f
(lock) 2476 1858 w
11 /Times-Roman f
(until) 2775 1858 w
(the) 3013 1858 w
(lock) 3182 1858 w
(is) 3406 1858 w
(released) 3515 1858 w
(and) 3907 1858 w
(can) 4100 1858 w
(be) 566 1978 w
(set) 714 1978 w
(again.) 881 1978 w
(The) 1191 1978 w
(net) 1407 1978 w
(effect) 1587 1978 w
(is) 1880 1978 w
(that) 2000 1978 w
(we) 2211 1978 w
(achieve) 2384 1978 w
(mutual) 2763 1978 w
(exclusion) 3115 1978 w
(for) 3582 1978 w
(our) 3755 1978 w
(critical) 3947 1978 w
(region.) 566 2098 w
(Note) 816 2254 w
(that) 1063 2254 w
(the) 1262 2254 w
(output) 1430 2254 w
(from) 1746 2254 w
(the) 1993 2254 w
(program) 2161 2254 w
(may) 2566 2254 w
(still) 2789 2254 w
(be) 2990 2254 w
(the) 3127 2254 w
(same) 3295 2254 w
(than) 3555 2254 w
(that) 3779 2254 w
(of) 3979 2254 w
(our) 4105 2254 w
(first) 566 2374 w
(two) 772 2374 w
(versions,) 966 2374 w
(but) 1389 2374 w
(those) 1559 2374 w
(versions) 1820 2374 w
(were) 2214 2374 w
(incorrect.) 2453 2374 w
(They) 2897 2374 w
(are) 3150 2374 w
(poltergeists,) 3310 2374 w
(awaiting) 3873 2374 w
(for) 566 2494 w
(the) 735 2494 w
(worst) 911 2494 w
(time) 1198 2494 w
(to) 1437 2494 w
(happen.) 1566 2494 w
(When) 1953 2494 w
(you) 2257 2494 w
(do) 2465 2494 w
(not) 2618 2494 w
(expect) 2802 2494 w
(them) 3130 2494 w
(to) 3393 2494 w
(misbehave,) 3522 2494 w
(they) 4062 2494 w
(would) 566 2614 w
(miss) 879 2614 w
(an) 1120 2614 w
(increment,) 1261 2614 w
(and) 1765 2614 w
(the) 1961 2614 w
(program) 2133 2614 w
(with) 2542 2614 w
(the) 2776 2614 w
(race) 2948 2614 w
(will) 3166 2614 w
(fail) 3376 2614 w
(in) 3560 2614 w
(a) 3683 2614 w
(mysterious) 3768 2614 w
(way) 566 2734 w
(that) 776 2734 w
(you) 969 2734 w
(would) 1162 2734 w
(have) 1465 2734 w
(to) 1699 2734 w
(debug.) 1813 2734 w
(That) 2137 2734 w
(is) 2366 2734 w
(not) 2468 2734 w
(fun.) 2637 2734 w
(By) 816 2926 w
(the) 990 2926 w
(way,) 1169 2926 w
(did) 1424 2926 w
(we) 1611 2926 w
(lie?) 1784 2926 w
(We) 1988 2926 w
(said) 2185 2926 w
(that) 2408 2926 w
(locks) 2619 2926 w
(are) 2897 2926 w
(boolean) 3075 2926 w
(variables,) 3468 2926 w
(but) 3937 2926 w
(we) 4124 2926 w
(declared) 566 3046 w
11 /Courier f
(cntlck) 963 3046 w
11 /Times-Roman f
(as) 1387 3046 w
(a) 1506 3046 w
(structure) 1582 3046 w
11 /Courier f
(Lock) 1993 3046 w
11 /Times-Roman f
(.) 2257 3046 w
(This) 2341 3046 w
(is) 2565 3046 w
(how) 2667 3046 w
11 /Courier f
(Lock) 2884 3046 w
11 /Times-Roman f
(is) 3176 3046 w
(defined) 3278 3046 w
(in) 3634 3046 w
11 /Courier f
(libc.h) 3748 3046 w
10 /Courier f
(typedef) 786 3216 w
(struct Lock {) 786 3326 w
(int) 1266 3436 w
(val;) 1746 3436 w
(} Lock;) 786 3546 w
11 /Times-Roman f
(The) 566 3762 w
(lock) 767 3762 w
(is) 987 3762 w
(also) 1092 3762 w
(a) 1300 3762 w
(shared) 1379 3762 w
(variable.) 1695 3762 w
(It) 2106 3762 w
(would) 2204 3762 w
(not) 2510 3762 w
(make) 2682 3762 w
(sense) 2950 3762 w
(to) 3218 3762 w
(give) 3335 3762 w
(each) 3555 3762 w
(process) 3786 3762 w
(its) 4146 3762 w
(own) 566 3882 w
(lock.) 800 3882 w
(The) 1062 3882 w
(lock) 1277 3882 w
(is) 1511 3882 w
(used) 1629 3882 w
(to) 1874 3882 w
11 /Times-Bold f
(synchronize) 2004 3882 w
11 /Times-Roman f
(both) 2610 3882 w
(processes,) 2850 3882 w
(to) 3341 3882 w
(make) 3471 3882 w
(them) 3752 3882 w
(agree) 4016 3882 w
(upon) 566 4002 w
(when) 815 4002 w
(is) 1081 4002 w
(it) 1184 4002 w
(safe) 1275 4002 w
(to) 1479 4002 w
(do) 1594 4002 w
(something.) 1733 4002 w
(Therefore,) 2249 4002 w
(it) 2735 4002 w
(must) 2826 4002 w
(be) 3070 4002 w
(shared.) 3202 4002 w
(That) 3545 4002 w
(means) 3776 4002 w
(that) 4086 4002 w
(if) 566 4122 w
(you) 678 4122 w
(write) 888 4122 w
(two) 1158 4122 w
(C) 1367 4122 w
(functions) 1485 4122 w
(for) 1938 4122 w
(implementing) 2109 4122 w
11 /Courier f
(lock) 2765 4122 w
11 /Times-Roman f
(and) 3073 4122 w
11 /Courier f
(unlock) 3275 4122 w
11 /Times-Roman f
(,) 3671 4122 w
(they) 3743 4122 w
(would) 3976 4122 w
(have) 566 4242 w
(race) 800 4242 w
(conditions!) 1008 4242 w
(The) 816 4398 w
(implementation) 1023 4398 w
(for) 1751 4398 w
11 /Courier f
(unlock) 1915 4398 w
11 /Times-Roman f
(is) 2348 4398 w
(simple,) 2459 4398 w
(it) 2818 4398 w
(sets) 2917 4398 w
11 /Courier f
(Lock.val) 3119 4398 w
11 /Times-Roman f
(to) 3685 4398 w
(false.) 3809 4398 w
(The) 4081 4398 w
(implementation) 566 4518 w
(for) 1291 4518 w
11 /Courier f
(lock) 1452 4518 w
11 /Times-Roman f
(is) 1750 4518 w
(more) 1858 4518 w
(delicate.) 2117 4518 w
(It) 2519 4518 w
(is) 2620 4518 w
(made) 2727 4518 w
(in) 2997 4518 w
(assembly) 3116 4518 w
(language) 3558 4518 w
(to) 3986 4518 w
(use) 4105 4518 w
(a) 566 4638 w
(single) 656 4638 w
(machine) 961 4638 w
(instruction) 1374 4638 w
(capable) 1887 4638 w
(of) 2262 4638 w
(consulting) 2395 4638 w
(the) 2896 4638 w
(lock) 3073 4638 w
(and) 3305 4638 w
(modifying) 3506 4638 w
(it,) 4008 4638 w
(all) 4141 4638 w
(that) 566 4758 w
(within) 766 4758 w
(the) 1083 4758 w
(same) 1252 4758 w
(instruction.) 1512 4758 w
(That) 2074 4758 w
(is) 2310 4758 w
(reasonable.) 2419 4758 w
(If) 2949 4758 w
(we) 3055 4758 w
(do) 3216 4758 w
(not) 3360 4758 w
(both) 3535 4758 w
(consult) 3765 4758 w
(the) 4117 4758 w
(lock) 566 4878 w
(\(to) 791 4878 w
(see) 949 4878 w
(if) 1124 4878 w
(it) 1227 4878 w
(is) 1325 4878 w
(set\)) 1435 4878 w
(and) 1629 4878 w
(update) 1823 4878 w
(it) 2151 4878 w
(within) 2250 4878 w
(an) 2569 4878 w
(atomic) 2709 4878 w
(instruction,) 3045 4878 w
(there) 3581 4878 w
(would) 3836 4878 w
(be) 4148 4878 w
(race) 566 4998 w
(conditions.) 775 4998 w
(There) 1291 4998 w
(are) 1573 4998 w
(several) 1733 4998 w
(kinds) 2070 4998 w
(of) 2337 4998 w
11 /Times-Bold f
(test\255and\255set) 2456 4998 w
11 /Times-Roman f
(instructions,) 3025 4998 w
(that) 3595 4998 w
(test) 3788 4998 w
(a) 3969 4998 w
(vari\255) 4045 4998 w
(able) 566 5118 w
(for) 785 5118 w
(a) 949 5118 w
(value) 1034 5118 w
(but) 1309 5118 w
(also) 1488 5118 w
(modify) 1703 5118 w
(it.) 2059 5118 w
(A) 2187 5118 w
(famous) 2304 5118 w
(one) 2665 5118 w
(is) 2861 5118 w
(precisely) 2973 5118 w
(called) 3406 5118 w
11 /Courier f
(TAS) 3705 5118 w
11 /Times-Roman f
(,) 3903 5118 w
(or) 3969 5118 w
(test) 4098 5118 w
(and) 566 5238 w
(set.) 752 5238 w
(Using) 816 5394 w
11 /Courier f
(TAS) 1107 5394 w
11 /Times-Roman f
(,) 1305 5394 w
(here) 1361 5394 w
(is) 1576 5394 w
(a) 1678 5394 w
(description) 1754 5394 w
(of) 2270 5394 w
(how) 2389 5394 w
(to) 2606 5394 w
(implement) 2720 5394 w
(a) 3219 5394 w
11 /Courier f
(lock) 3295 5394 w
11 /Times-Roman f
(function.) 3587 5394 w
10 /Courier f
(loop:) 786 5564 w
(MOVL) 1266 5674 w
10 /Times-Italic f
(lock) 1746 5674 w
10 /Courier f
(, A0) 1912 5674 w
10 /Times-Italic f
(put address of lock in register A0) 2226 5674 w
10 /Courier f
(TAS) 1266 5784 w
(\(A0\)) 1746 5784 w
10 /Times-Italic f
(test\255and\255set word at memory address in A0) 2226 5784 w
10 /Courier f
(BNE) 1266 5894 w
(loop) 1746 5894 w
10 /Times-Italic f
(if the word was set, continue the loop) 2226 5894 w
10 /Courier f
(RTS) 1266 6004 w
10 /Times-Italic f
(return otherwise) 2226 6004 w
11 /Times-Roman f
(To) 566 6220 w
(emphasize) 723 6220 w
(it) 1220 6220 w
(even) 1317 6220 w
(more,) 1558 6220 w
(the) 1846 6220 w
(key) 2015 6220 w
(point) 2208 6220 w
(why) 2470 6220 w
(this) 2694 6220 w
(works) 2889 6220 w
(at) 3192 6220 w
(all) 3306 6220 w
(is) 3452 6220 w
(because) 3562 6220 w
11 /Courier f
(TAS) 3943 6220 w
11 /Times-Roman f
(is) 4177 6220 w
(atomic.) 566 6340 w
(It) 931 6340 w
(puts) 1036 6340 w
(a) 1258 6340 w
(non\255zero) 1344 6340 w
(value) 1770 6340 w
(at) 2045 6340 w
(the) 2162 6340 w
(address) 2334 6340 w
(for) 2700 6340 w
(the) 2865 6340 w
(lock) 3037 6340 w
(and) 3264 6340 w
(sets) 3459 6340 w
(the) 3661 6340 w
(processor) 3832 6340 w
cleartomark
showpage
saveobj restore
%%EndPage: 8 8
%%Page: 9 9
/saveobj save def
mark
9 pagesetup
11 /Times-Roman f
(\255 9 \255) 2317 413 w
(flag) 566 686 w
(to) 764 686 w
(reflect) 878 686 w
(if) 1184 686 w
(the) 1279 686 w
(previous) 1441 686 w
(value) 1847 686 w
(was) 2112 686 w
(not\255zero) 2310 686 w
(or) 2702 686 w
(was) 2821 686 w
(zero.) 3019 686 w
(In) 816 842 w
(this) 936 842 w
(loop,) 1125 842 w
(if) 1378 842 w
(a) 1474 842 w
(process) 1551 842 w
(is) 1908 842 w
(trying) 2011 842 w
(to) 2303 842 w
(set) 2418 842 w
(the) 2569 842 w
(lock) 2732 842 w
(and) 2950 842 w
(finds) 3137 842 w
(that) 3386 842 w
(it) 3581 842 w
(was) 3673 842 w
(set,) 3873 842 w
11 /Courier f
(TAS) 4053 842 w
11 /Times-Roman f
(will) 566 962 w
(set) 772 962 w
(an) 928 962 w
(already) 1065 962 w
(set) 1420 962 w
(lock) 1576 962 w
(\(store) 1799 962 w
(1) 2081 962 w
(in) 2169 962 w
(the) 2288 962 w
(lock) 2455 962 w
(that) 2677 962 w
(already) 2875 962 w
(was) 3229 962 w
(1\),) 3432 962 w
(and) 3584 962 w
(that) 3775 962 w
(opera\255) 3973 962 w
(tion) 566 1082 w
(would) 774 1082 w
(be) 1085 1082 w
(harmless.) 1224 1082 w
(In) 1678 1082 w
(this) 1806 1082 w
(case,) 2003 1082 w
11 /Courier f
(TAS) 2255 1082 w
11 /Times-Roman f
(would) 2490 1082 w
(report) 2802 1082 w
(that) 3100 1082 w
(the) 3302 1082 w
(lock) 3473 1082 w
(was) 3699 1082 w
(set,) 3906 1082 w
(and) 4093 1082 w
(the) 566 1202 w
(process) 739 1202 w
(would) 1106 1202 w
(be) 1420 1202 w
(held) 1562 1202 w
(in) 1790 1202 w
(the) 1915 1202 w
(loop) 2088 1202 w
(waiting) 2323 1202 w
(for) 2692 1202 w
(the) 2858 1202 w
(lock) 3030 1202 w
(to) 3257 1202 w
(be) 3381 1202 w
(released.) 3522 1202 w
(On) 3945 1202 w
(the) 4117 1202 w
(other) 566 1322 w
(hand,) 830 1322 w
(if) 1110 1322 w
(the) 1216 1322 w
(process) 1389 1322 w
(trying) 1756 1322 w
(to) 2058 1322 w
(set) 2183 1322 w
(the) 2344 1322 w
(lock) 2517 1322 w
(executes) 2745 1322 w
11 /Courier f
(TAS) 3160 1322 w
11 /Times-Roman f
(while) 3397 1322 w
(the) 3680 1322 w
(lock) 3853 1322 w
(was) 4081 1322 w
(not) 566 1442 w
(set,) 750 1442 w
(this) 943 1442 w
(instruction) 1146 1442 w
(will) 1660 1442 w
(both) 1874 1442 w
(set) 2112 1442 w
(the) 2276 1442 w
(lock) 2452 1442 w
(and) 2683 1442 w
(report) 2883 1442 w
(that) 3186 1442 w
(it) 3393 1442 w
(was) 3497 1442 w
(clear.) 3709 1442 w
(When) 3990 1442 w
(more) 566 1562 w
(than) 829 1562 w
(one) 1056 1562 w
(process) 1252 1562 w
(call) 1618 1562 w
11 /Courier f
(lock\(\)) 1814 1562 w
11 /Times-Roman f
(,) 2210 1562 w
(one) 2276 1562 w
(of) 2472 1562 w
(them) 2601 1562 w
(is) 2859 1562 w
(going) 2971 1562 w
(to) 3260 1562 w
(run) 3384 1562 w
11 /Courier f
(TAS) 3569 1562 w
11 /Times-Roman f
(first.) 3806 1562 w
(That) 4050 1562 w
(one) 566 1682 w
(wins.) 752 1682 w
(To) 816 1838 w
(play) 981 1838 w
(with) 1213 1838 w
(locks) 1453 1838 w
(a) 1729 1838 w
(little) 1821 1838 w
(bit,) 2068 1838 w
(we) 2257 1838 w
(are) 2428 1838 w
(going) 2604 1838 w
(to) 2899 1838 w
(implement) 3029 1838 w
(a) 3544 1838 w
(tiny) 3636 1838 w
(program.) 3852 1838 w
(This) 566 1958 w
(program) 816 1958 w
(has) 1241 1958 w
(two) 1441 1958 w
(processes.) 1660 1958 w
(One) 2161 1958 w
(of) 2397 1958 w
(them) 2542 1958 w
(will) 2816 1958 w
(always) 3041 1958 w
(try) 3398 1958 w
(to) 3573 1958 w
(increment) 3712 1958 w
(a) 4203 1958 w
(counter.) 566 2078 w
(The) 987 2078 w
(other,) 1194 2078 w
(will) 1484 2078 w
(be) 1693 2078 w
(trying) 1833 2078 w
(to) 2133 2078 w
(decrement) 2256 2078 w
(it.) 2749 2078 w
(However,) 2877 2078 w
(we) 3343 2078 w
(do) 3508 2078 w
(not) 3656 2078 w
(allow) 3835 2078 w
(the) 4117 2078 w
(counter) 566 2198 w
(to) 927 2198 w
(be) 1046 2198 w
(negative.) 1182 2198 w
(If) 1614 2198 w
(the) 1719 2198 w
(process) 1885 2198 w
(decrementing) 2245 2198 w
(the) 2873 2198 w
(counter) 3039 2198 w
(finds) 3399 2198 w
(that) 3651 2198 w
(the) 3848 2198 w
(value) 4014 2198 w
(is) 566 2318 w
(zero,) 673 2318 w
(it) 921 2318 w
(will) 1016 2318 w
(just) 1221 2318 w
(try) 1414 2318 w
(again) 1569 2318 w
(later.) 1839 2318 w
(Once) 2094 2318 w
(per) 2357 2318 w
(second,) 2529 2318 w
(one) 2894 2318 w
(of) 3086 2318 w
(the) 3211 2318 w
(processes) 3379 2318 w
(prints) 3832 2318 w
(the) 4117 2318 w
(counter) 566 2438 w
(value,) 922 2438 w
(to) 1215 2438 w
(let) 1329 2438 w
(us) 1467 2438 w
(see) 1593 2438 w
(what) 1760 2438 w
(is) 2001 2438 w
(happening.) 2103 2438 w
(In) 816 2594 w
(the) 954 2594 w
(program,) 1135 2594 w
(we) 1581 2594 w
(print) 1755 2594 w
(in) 2010 2594 w
11 /Times-Bold f
(boldface) 2144 2594 w
11 /Times-Roman f
(statements) 2589 2594 w
(that) 3101 2594 w
(are) 3314 2594 w
(part) 3494 2594 w
(of) 3712 2594 w
(a) 3851 2594 w
(critical) 3947 2594 w
(region.) 566 2714 w
(As) 917 2714 w
(you) 1082 2714 w
(can) 1290 2714 w
(see,) 1484 2714 w
(any) 1694 2714 w
(part) 1895 2714 w
(of) 2108 2714 w
(the) 2242 2714 w
(program) 2419 2714 w
(where) 2833 2714 w
11 /Courier f
(cnt) 3142 2714 w
11 /Times-Roman f
(is) 3382 2714 w
(used) 3498 2714 w
(is) 3741 2714 w
(a) 3857 2714 w
(critical) 3947 2714 w
(region.) 566 2834 w
(Furthermore,) 908 2834 w
(note) 1518 2834 w
(that) 1741 2834 w
(even) 1940 2834 w
11 /Courier f
(print) 2180 2834 w
11 /Times-Roman f
(is) 2544 2834 w
(in) 2652 2834 w
(the) 2772 2834 w
(critical) 2940 2834 w
(region) 3279 2834 w
(if) 3594 2834 w
(it) 3696 2834 w
(is) 3793 2834 w
(printing) 3902 2834 w
11 /Courier f
(cnt) 566 2954 w
11 /Times-Roman f
(,) 764 2954 w
(because) 820 2954 w
(we) 1193 2954 w
(do) 1348 2954 w
(not) 1486 2954 w
(want) 1655 2954 w
11 /Courier f
(cnt) 1896 2954 w
11 /Times-Roman f
(to) 2122 2954 w
(change) 2236 2954 w
(in) 2573 2954 w
(the) 2687 2954 w
(middle) 2849 2954 w
(of) 3183 2954 w
(a) 3302 2954 w
(print.) 3378 2954 w
cleartomark
showpage
saveobj restore
%%EndPage: 9 9
%%Page: 10 10
/saveobj save def
mark
10 pagesetup
11 /Times-Roman f
(\255 10 \255) 2289 413 w
9 /S f
(\347) 566 676 w
9 /Times-Bold f
(cnt.c) 581 676 w
9 /S f
(\347) 779 676 w
(`) 566 676 w
(````) 599 676 w
(_) 566 676 w
(____) 599 676 w
8 /Courier f
(#include <u.h>) 786 784 w
(#include <libc.h>) 786 892 w
(int) 786 1108 w
(cnt;) 1266 1108 w
(Lock) 786 1216 w
(cntlck;) 1266 1216 w
(void) 786 1432 w
(main\(int, char*[]\)) 786 1540 w
({) 786 1648 w
(long) 1266 1756 w
(last, now;) 1746 1756 w
(switch\(rfork\(RFPROC|RFMEM|RFNOWAIT\)\){) 1266 1972 w
(case \2551:) 1266 2080 w
(sysfatal\("fork: %r"\);) 1746 2188 w
(case 0:) 1266 2296 w
(last = time\(nil\);) 1746 2404 w
(for\(;;\){) 1746 2512 w
(lock\(&cntlck\);) 2226 2620 w
(assert\(cnt >= 0\);) 2226 2728 w
(cnt++;) 2226 2836 w
(unlock\(&cntlck\);) 2226 2944 w
(now = time\(nil\);) 2226 3052 w
(if \(now \255 last >= 1\){) 2226 3160 w
(lock\(&cntlck\);) 2706 3268 w
(print\("cnt= %d\\n", cnt\);) 2706 3376 w
(unlock\(&cntlck\);) 2706 3484 w
(last = now;) 2706 3592 w
(}) 2226 3700 w
(}) 1746 3808 w
(default:) 1266 3916 w
(for\(;;\){) 1746 4024 w
(lock\(&cntlck\);) 2226 4132 w
(assert\(cnt >= 0\);) 2226 4240 w
(if \(cnt > 0\)) 2226 4348 w
(cnt\255\255;) 2706 4456 w
(unlock\(&cntlck\);) 2226 4564 w
(}) 1746 4672 w
(}) 1266 4780 w
(}) 786 4888 w
11 /Times-Roman f
(Also,) 566 5104 w
(in) 831 5104 w
(the) 947 5104 w
(parent) 1111 5104 w
(process,) 1414 5104 w
(both) 1800 5104 w
(the) 2026 5104 w
(check) 2190 5104 w
(for) 2474 5104 w
11 /Courier f
(cnt>0) 2631 5104 w
11 /Times-Roman f
(and) 2991 5104 w
(the) 3179 5104 w
11 /Courier f
(cnt\255\255) 3343 5104 w
11 /Times-Roman f
(must) 3703 5104 w
(be) 3948 5104 w
(part) 4081 5104 w
(of) 566 5224 w
(the) 693 5224 w
(same) 863 5224 w
(critical) 1124 5224 w
(region.) 1464 5224 w
(Otherwise,) 1808 5224 w
(the) 2322 5224 w
(other) 2492 5224 w
(process) 2753 5224 w
(might) 3117 5224 w
(have) 3411 5224 w
(changed) 3653 5224 w
11 /Courier f
(cnt) 4053 5224 w
11 /Times-Roman f
(between) 566 5344 w
(the) 958 5344 w
11 /Courier f
(if) 1120 5344 w
11 /Times-Roman f
(and) 1280 5344 w
(its) 1466 5344 w
(body.) 1599 5344 w
(The) 816 5500 w
(idea) 1015 5500 w
(is) 1226 5500 w
(simple.) 1330 5500 w
(If) 1682 5500 w
(you) 1784 5500 w
(want) 1979 5500 w
(to) 2222 5500 w
(be) 2338 5500 w
(sure) 2471 5500 w
(that) 2683 5500 w
(no) 2878 5500 w
(other) 3018 5500 w
(process) 3273 5500 w
(is) 3631 5500 w
(even) 3735 5500 w
(touch\255) 3971 5500 w
(ing) 566 5620 w
(the) 745 5620 w
(shared) 917 5620 w
(resource) 1240 5620 w
(while) 1647 5620 w
(you) 1929 5620 w
(are) 2132 5620 w
(doing) 2302 5620 w
(something,) 2591 5620 w
(you) 3116 5620 w
(must) 3319 5620 w
(provide) 3572 5620 w
(mutual) 3945 5620 w
(exclusion) 566 5740 w
(for) 1020 5740 w
(your) 1180 5740 w
(critical) 1414 5740 w
(region.) 1751 5740 w
(As) 2092 5740 w
(you) 2247 5740 w
(see,) 2445 5740 w
(one) 2645 5740 w
(way) 2836 5740 w
(is) 3051 5740 w
(to) 3159 5740 w
(use) 3279 5740 w
(a) 3459 5740 w
11 /Courier f
(Lock) 3541 5740 w
11 /Times-Roman f
(along) 3839 5740 w
(the) 4117 5740 w
(shared) 566 5860 w
(resource,) 879 5860 w
(to) 1304 5860 w
(lock) 1418 5860 w
(it.) 1635 5860 w
(An) 1781 5860 w
(example) 1943 5860 w
(execution) 2342 5860 w
(follows.) 2796 5860 w
cleartomark
showpage
saveobj restore
%%EndPage: 10 10
%%Page: 11 11
/saveobj save def
mark
11 pagesetup
11 /Times-Roman f
(\255 11 \255) 2289 413 w
10 /Courier f
(; !!8.cnt) 786 676 w
(cnt= 2043) 786 786 w
(cnt= 1) 786 896 w
(cnt= 1) 786 1006 w
(cnt= 0) 786 1116 w
(cnt= 4341) 786 1226 w
(cnt= 1) 786 1336 w
(cnt= 2808) 786 1446 w
(cnt= 0) 786 1556 w
(cnt= 1) 786 1666 w
(cnt= 1400) 786 1776 w
(cnt= 1) 786 1886 w
11 /Times-Roman f
(The) 566 2102 w
(value) 764 2102 w
(moves) 1029 2102 w
(in) 1344 2102 w
(bursts,) 1458 2102 w
(up) 1777 2102 w
(as) 1915 2102 w
(the) 2034 2102 w
(child) 2196 2102 w
(manages) 2444 2102 w
(to) 2855 2102 w
(increment) 2969 2102 w
(it,) 3435 2102 w
(and) 3554 2102 w
(down) 3741 2102 w
(when) 4014 2102 w
(the) 566 2222 w
(parent) 733 2222 w
(manages) 1039 2222 w
(to) 1455 2222 w
(decrement) 1574 2222 w
(it) 2062 2222 w
(many) 2157 2222 w
(times.) 2434 2222 w
(The) 2734 2222 w
(value) 2936 2222 w
(printed) 3205 2222 w
(was) 3548 2222 w
11 /Courier f
(1) 3750 2222 w
11 /Times-Roman f
(when) 3848 2222 w
(the) 4117 2222 w
(child) 566 2342 w
(finds) 820 2342 w
(a) 1074 2342 w
(zero) 1156 2342 w
(counter,) 1377 2342 w
(increments) 1767 2342 w
(it,) 2282 2342 w
(and) 2407 2342 w
(prints) 2600 2342 w
(its) 2886 2342 w
(value.) 3026 2342 w
(The) 3354 2342 w
(value) 3559 2342 w
(printed) 3831 2342 w
(is) 4177 2342 w
(zero) 566 2462 w
(when,) 785 2462 w
(after) 1082 2462 w
(the) 1313 2462 w
(parent) 1479 2462 w
(increments) 1784 2462 w
(the) 2297 2462 w
(counter,) 2462 2462 w
(the) 2849 2462 w
(child) 3014 2462 w
(manages) 3265 2462 w
(to) 3679 2462 w
(decrement) 3796 2462 w
(it) 566 2582 w
(before) 656 2582 w
(the) 962 2582 w
(parent) 1124 2582 w
(prints) 1425 2582 w
(its) 1704 2582 w
(value.) 1837 2582 w
(It) 816 2738 w
(is) 916 2738 w
(very) 1023 2738 w
(important) 1250 2738 w
(to) 1711 2738 w
(maintain) 1830 2738 w
(critical) 2248 2738 w
(regions) 2585 2738 w
(as) 2941 2738 w
(small) 3065 2738 w
(as) 3337 2738 w
(possible.) 3461 2738 w
(If) 3883 2738 w
(a) 3988 2738 w
(pro\255) 4069 2738 w
(cess) 566 2858 w
(keeps) 798 2858 w
(a) 1097 2858 w
(resource) 1195 2858 w
(locked) 1614 2858 w
(most) 1956 2858 w
(of) 2220 2858 w
(the) 2360 2858 w
(time,) 2543 2858 w
(other) 2816 2858 w
(processes) 3090 2858 w
(will) 3558 2858 w
(experience) 3779 2858 w
(many) 566 2978 w
(delays) 838 2978 w
(while) 1146 2978 w
(trying) 1418 2978 w
(to) 1709 2978 w
(acquire) 1823 2978 w
(the) 2172 2978 w
(resource.) 2334 2978 w
(Or) 2759 2978 w
(even) 2902 2978 w
(worse,) 3136 2978 w
(if) 3453 2978 w
(we) 3548 2978 w
(are) 3704 2978 w
(not) 3865 2978 w
(care\255) 4035 2978 w
(ful,) 566 3098 w
(it) 761 3098 w
(may) 868 3098 w
(be) 1102 3098 w
(that) 1250 3098 w
(a) 1459 3098 w
(process) 1551 3098 w
(is) 1923 3098 w
11 /Times-Italic f
(never) 2041 3098 w
11 /Times-Roman f
(able) 2327 3098 w
(to) 2553 3098 w
(acquire) 2683 3098 w
(a) 3048 3098 w
(lock) 3140 3098 w
(it) 3373 3098 w
(needs,) 3479 3098 w
(because) 3800 3098 w
(it) 4189 3098 w
(always) 566 3218 w
(finds) 902 3218 w
(the) 1154 3218 w
(resource) 1320 3218 w
(locked.) 1721 3218 w
(Look) 2101 3218 w
(at) 2365 3218 w
(this) 2476 3218 w
(variant) 2668 3218 w
(of) 3005 3218 w
(our) 3129 3218 w
(last) 3308 3218 w
(program,) 3494 3218 w
(that) 3926 3218 w
(we) 4124 3218 w
(call) 566 3338 w
11 /Courier f
(cnt2) 752 3338 w
11 /Times-Roman f
(.) 1016 3338 w
10 /Courier f
(switch\(rfork\(RFPROC|RFMEM|RFNOWAIT\)\){) 1266 3508 w
(case 0:) 1266 3618 w
(last = time\(nil\);) 1746 3728 w
(for\(;;\){) 1746 3838 w
(lock\(&cntlck\);) 2226 3948 w
(assert\(cnt >= 0\);) 2226 4058 w
(cnt++;) 2226 4168 w
(print\("%d\\n", cnt\);) 2226 4278 w
(unlock\(&cntlck\);) 2226 4388 w
(}) 1746 4498 w
(default:) 1266 4608 w
(for\(;;\){) 1746 4718 w
(lock\(&cntlck\);) 2226 4828 w
(assert\(cnt >= 0\);) 2226 4938 w
(if \(cnt > 0\)) 2226 5048 w
(cnt\255\255;) 2706 5158 w
(print\("%d\\n", cnt\);) 2226 5268 w
(unlock\(&cntlck\);) 2226 5378 w
(}) 1746 5488 w
(}) 1266 5598 w
11 /Times-Roman f
(Now) 566 5814 w
(look) 807 5814 w
(at) 1031 5814 w
(this:) 1138 5814 w
10 /Courier f
(; 8.cnt2 | grep \255v 0) 786 5984 w
10 /Times-Italic f
(and no number is ever shown!) 1291 6094 w
11 /Times-Roman f
(We) 566 6310 w
(asked) 745 6310 w
11 /Courier f
(grep) 1022 6310 w
11 /Times-Roman f
(to) 1314 6310 w
(print) 1428 6310 w
(only) 1664 6310 w
(lines) 1888 6310 w
(that) 2124 6310 w
(do) 2317 6310 w
11 /Times-Italic f
(not) 2455 6310 w
11 /Times-Roman f
(contain) 2624 6310 w
(a) 2975 6310 w
11 /Courier f
(0) 3051 6310 w
11 /Times-Roman f
(.) 3117 6310 w
(It) 3202 6310 w
(seems) 3298 6310 w
(that) 3595 6310 w
(all) 3789 6310 w
(lines) 3928 6310 w
(in) 4165 6310 w
cleartomark
showpage
saveobj restore
%%EndPage: 11 11
%%Page: 12 12
/saveobj save def
mark
12 pagesetup
11 /Times-Roman f
(\255 12 \255) 2289 413 w
(the) 566 686 w
(output) 730 686 w
(report) 1042 686 w
(a) 1333 686 w
(zero) 1411 686 w
(value) 1628 686 w
(for) 1895 686 w
11 /Courier f
(cnt) 2052 686 w
11 /Times-Roman f
(.) 2250 686 w
(Is) 2336 686 w
(it) 2445 686 w
(that) 2537 686 w
(the) 2732 686 w
(child) 2896 686 w
(process) 3146 686 w
(is) 3504 686 w
(not) 3607 686 w
(executing?) 3777 686 w
(We) 566 806 w
(can) 745 806 w
(use) 924 806 w
(the) 1098 806 w
(debugger) 1260 806 w
(to) 1695 806 w
(print) 1809 806 w
(the) 2045 806 w
(stack) 2207 806 w
(for) 2460 806 w
(the) 2615 806 w
(child.) 2777 806 w
10 /Courier f
(; ps | grep 8.cnt2) 786 976 w
(nemo) 786 1086 w
(5153) 1446 1086 w
(0:00) 1926 1086 w
(0:01) 2346 1086 w
(28K Pwrite) 2706 1086 w
(8.cnt2) 3486 1086 w
(nemo) 786 1196 w
(5155) 1446 1196 w
(0:00) 1926 1196 w
(0:00) 2346 1196 w
(28K Sleep) 2706 1196 w
(8.cnt2) 3486 1196 w
(; acid 5155) 786 1426 w
(/proc/5155/text:386 plan 9 executable) 786 1536 w
(/sys/lib/acid/port) 786 1756 w
(/sys/lib/acid/386) 786 1866 w
(acid: !!stk\(\)) 786 1976 w
(sleep\(\)+0x7 /sys/src/libc/9syscall/sleep.s:5) 786 2086 w
(lock\(lk=0x702c\)+0x47 /sys/src/libc/port/lock.c:16) 786 2196 w
(main\(\)+0x90 /usr/nemo/9intro/cnt2.c:19) 786 2306 w
(_main+0x31 /sys/src/libc/386/main9.s:16) 786 2416 w
(acid:) 786 2526 w
11 /Times-Roman f
(The) 566 2742 w
(child) 764 2742 w
(process) 1012 2742 w
(is) 1368 2742 w
(always) 1470 2742 w
(trying) 1802 2742 w
(to) 2093 2742 w
(lock) 2207 2742 w
(the) 2424 2742 w
(resource,) 2586 2742 w
(inside) 3011 2742 w
11 /Courier f
(lock\(\)) 3302 2742 w
11 /Times-Roman f
(!) 3698 2742 w
(What) 3791 2742 w
(hap\255) 4057 2742 w
(pens) 566 2862 w
(is) 813 2862 w
(that) 933 2862 w
(the) 1144 2862 w
(parent) 1324 2862 w
(is) 1643 2862 w
(holding) 1763 2862 w
(the) 2146 2862 w
(lock) 2326 2862 w
(almost) 2561 2862 w
(at) 2901 2862 w
(all) 3026 2862 w
(times.) 3182 2862 w
(The) 3522 2862 w
(parent) 3737 2862 w
(only) 4055 2862 w
(releases) 566 2982 w
(the) 958 2982 w
(lock) 1139 2982 w
(for) 1375 2982 w
(a) 1549 2982 w
(very) 1644 2982 w
(brief) 1885 2982 w
(time,) 2138 2982 w
(between) 2409 2982 w
(the) 2820 2982 w
(end) 3001 2982 w
(of) 3207 2982 w
(an) 3346 2982 w
(iteration) 3497 2982 w
(and) 3911 2982 w
(the) 4117 2982 w
(beginning) 566 3102 w
(of) 1044 3102 w
(the) 1173 3102 w
(next) 1345 3102 w
(iteration.) 1572 3102 w
(Only) 2004 3102 w
(if) 2262 3102 w
(during) 2367 3102 w
(this) 2692 3102 w
(time) 2890 3102 w
(there) 3124 3102 w
(is) 3380 3102 w
(a) 3491 3102 w
(context) 3576 3102 w
(switch,) 3936 3102 w
(and) 566 3222 w
(the) 765 3222 w
(child) 940 3222 w
(is) 1201 3222 w
(allowed) 1316 3222 w
(to) 1704 3222 w
(run,) 1831 3222 w
(will) 2046 3222 w
(the) 2259 3222 w
(child) 2434 3222 w
(be) 2695 3222 w
(able) 2839 3222 w
(to) 3062 3222 w
(acquire) 3189 3222 w
(the) 3552 3222 w
(lock.) 3728 3222 w
(But) 3987 3222 w
(it) 4189 3222 w
(seems) 566 3342 w
(that) 866 3342 w
(in) 1063 3342 w
(our) 1181 3342 w
(case) 1359 3342 w
(the) 1578 3342 w
(system) 1744 3342 w
(always) 2082 3342 w
(decides) 2418 3342 w
(to) 2778 3342 w
(let) 2896 3342 w
(the) 3038 3342 w
(child) 3204 3342 w
(run) 3456 3342 w
(while) 3634 3342 w
(the) 3910 3342 w
(par\255) 4076 3342 w
(ent) 566 3462 w
(is) 728 3462 w
(holding) 830 3462 w
(the) 1195 3462 w
(lock.) 1357 3462 w
(This) 816 3618 w
(is) 1042 3618 w
(called) 1146 3618 w
11 /Times-Bold f
(starvation) 1437 3618 w
11 /Times-Roman f
(.) 1913 3618 w
(A) 1999 3618 w
(process) 2108 3618 w
(may) 2466 3618 w
(never) 2686 3618 w
(be) 2959 3618 w
(able) 3093 3618 w
(to) 3306 3618 w
(acquire) 3423 3618 w
(a) 3775 3618 w
(resource,) 3854 3618 w
(and) 566 3738 w
(it) 762 3738 w
(will) 862 3738 w
(starve) 1072 3738 w
(to) 1371 3738 w
(death.) 1495 3738 w
(It) 1826 3738 w
(can) 1931 3738 w
(be) 2120 3738 w
(understood) 2260 3738 w
(that) 2785 3738 w
(this) 2987 3738 w
(may) 3184 3738 w
(happen) 3410 3738 w
(to) 3763 3738 w
(our) 3886 3738 w
(pro\255) 4069 3738 w
(gram,) 566 3858 w
(because) 851 3858 w
(only) 1228 3858 w
(for) 1456 3858 w
(a) 1615 3858 w
(very) 1695 3858 w
(little) 1921 3858 w
(fraction) 2156 3858 w
(of) 2528 3858 w
(time) 2651 3858 w
(the) 2880 3858 w
(lock) 3047 3858 w
(is) 3269 3858 w
(released) 3376 3858 w
(by) 3766 3858 w
(the) 3909 3858 w
(par\255) 4076 3858 w
(ent.) 566 3978 w
(The) 759 3978 w
(most) 960 3978 w
(probable) 1206 3978 w
(thing) 1620 3978 w
(is) 1878 3978 w
(that) 1983 3978 w
(once) 2179 3978 w
(a) 2416 3978 w
(process) 2495 3978 w
(gets) 2854 3978 w
(the) 3061 3978 w
(lock,) 3225 3978 w
(the) 3472 3978 w
(other) 3636 3978 w
(one) 3891 3978 w
(will) 4079 3978 w
(never) 566 4098 w
(be) 836 4098 w
(able) 967 4098 w
(to) 1177 4098 w
(acquire) 1291 4098 w
(it.) 1640 4098 w
(Look) 816 4254 w
(at) 1076 4254 w
(the) 1183 4254 w
(stack) 1345 4254 w
(trace) 1598 4254 w
(shown) 1837 4254 w
(above.) 2153 4254 w
(Did) 2471 4254 w
(you) 2665 4254 w
(notice) 2859 4254 w
(that) 3156 4254 w
11 /Courier f
(lock) 3350 4254 w
11 /Times-Roman f
(calls) 3643 4254 w
11 /Courier f
(sleep) 3873 4254 w
11 /Times-Roman f
(?) 4203 4254 w
(You) 566 4374 w
(know) 791 4374 w
(that) 1071 4374 w
(the) 1272 4374 w
(system) 1441 4374 w
(gives) 1782 4374 w
(some) 2049 4374 w
(processor) 2316 4374 w
(time) 2770 4374 w
(to) 3001 4374 w
(each) 3122 4374 w
(process,) 3356 4374 w
(in) 3747 4374 w
(turns.) 3868 4374 w
(If) 4179 4374 w
(the) 566 4494 w
(implementation) 743 4494 w
(for) 1477 4494 w
11 /Courier f
(lock) 1647 4494 w
11 /Times-Roman f
(was) 1954 4494 w
(the) 2167 4494 w
(one) 2344 4494 w
(we) 2545 4494 w
(presented) 2715 4494 w
(before) 3177 4494 w
(in) 3498 4494 w
(assembly) 3628 4494 w
(lan\255) 4081 4494 w
(guage,) 566 4614 w
(we) 891 4614 w
(would) 1054 4614 w
(be) 1365 4614 w
(wasting) 1504 4614 w
(a) 1882 4614 w
(lot) 1966 4614 w
(of) 2119 4614 w
(processor) 2246 4614 w
(time.) 2700 4614 w
(Figure) 2959 4614 w
([[!spin) 3281 4614 w
(lock!]]) 3608 4614 w
(depicts) 3940 4614 w
(the) 566 4734 w
(execution) 744 4734 w
(for) 1214 4734 w
(our) 1385 4734 w
(two) 1575 4734 w
(processes,) 1784 4734 w
(assuming) 2275 4734 w
(that) 2735 4734 w
11 /Courier f
(lock) 2944 4734 w
11 /Times-Roman f
(is) 3252 4734 w
(implemented) 3370 4734 w
(as) 3988 4734 w
(we) 4124 4734 w
(told) 566 4854 w
(before.) 780 4854 w
(In) 1128 4854 w
(the) 1260 4854 w
(figure,) 1435 4854 w
(a) 1765 4854 w
(solid) 1854 4854 w
(line) 2110 4854 w
(represents) 2316 4854 w
(a) 2800 4854 w
(process) 2889 4854 w
(that) 3258 4854 w
(is) 3464 4854 w
(running,) 3579 4854 w
(in) 3990 4854 w
(the) 4117 4854 w
(processor.) 566 4974 w
(A) 1043 4974 w
(dotted) 1152 4974 w
(line) 1457 4974 w
(represents) 1652 4974 w
(a) 2126 4974 w
(process) 2205 4974 w
(that) 2564 4974 w
(is) 2760 4974 w
(ready) 2865 4974 w
(to) 3138 4974 w
(run,) 3255 4974 w
(but) 3460 4974 w
(is) 3632 4974 w
(not) 3737 4974 w
(running) 3909 4974 w
(in) 566 5094 w
(the) 682 5094 w
(processor.) 846 5094 w
(The) 1323 5094 w
(figure) 1523 5094 w
(shows) 1813 5094 w
(how) 2117 5094 w
(the) 2335 5094 w
(system) 2498 5094 w
(gives) 2833 5094 w
(some) 3094 5094 w
(time) 3355 5094 w
(to) 3580 5094 w
(each) 3695 5094 w
(process) 3923 5094 w
(for) 566 5214 w
(running,) 721 5214 w
(in) 1119 5214 w
(turns.) 1233 5214 w
cleartomark
showpage
saveobj restore
%%EndPage: 12 12
%%Page: 13 13
/saveobj save def
mark
13 pagesetup
11 /Times-Roman f
(\255 13 \255) 2289 413 w
10 /Times-Roman f
(Parent) 842 862 w
1077 842 1703 842 Dl
(Run.) 1294 802 w
7 /Times-Roman f
(.) 1693 845 w
(.) 1724 845 w
(.) 1756 845 w
(.) 1787 845 w
(.) 1819 845 w
(.) 1850 845 w
(.) 1881 845 w
(.) 1912 845 w
(.) 1944 845 w
(.) 1975 845 w
(.) 2007 845 w
(.) 2038 845 w
(.) 2068 845 w
(.) 2100 845 w
(.) 2131 845 w
(.) 2163 845 w
(.) 2194 845 w
(.) 2225 845 w
(.) 2256 845 w
(.) 2288 845 w
(.) 2319 845 w
10 /Times-Roman f
(Rdy.) 1921 802 w
2329 842 2955 842 Dl
(Run.) 2546 802 w
7 /Times-Roman f
(.) 2945 845 w
(.) 2976 845 w
(.) 3008 845 w
(.) 3039 845 w
(.) 3071 845 w
(.) 3102 845 w
(.) 3133 845 w
(.) 3164 845 w
(.) 3196 845 w
(.) 3227 845 w
(.) 3259 845 w
(.) 3290 845 w
(.) 3321 845 w
(.) 3352 845 w
(.) 3384 845 w
(.) 3415 845 w
(.) 3447 845 w
(.) 3478 845 w
(.) 3508 845 w
(.) 3540 845 w
(.) 3571 845 w
10 /Times-Roman f
(Rdy.) 3173 802 w
3581 842 4207 842 Dl
(Run.) 3798 802 w
gsave
newpath
3894 842 m
/inpath true def
 0 setgray
1234 842 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2438 842 m
/inpath true def
 7 setgray
1515 842 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2438 842 m
/inpath true def
 0 setgray
1609 842 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2438 842 m
/inpath true def
 7 setgray
2768 842 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2438 842 m
/inpath true def
 0 setgray
2861 842 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2438 842 m
/inpath true def
 7 setgray
4020 842 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2438 842 m
/inpath true def
 0 setgray
4114 842 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
1281 936 1266 874 Dl
1249 936 1264 874 Dl
1265 873 1265 873 1265 1186 Ds
1265 873 1265 1186 1390 1186 Ds
1265 1186 1390 1186 1390 1186 Ds
10 /Courier f
(lock) 1390 1207 w
1562 936 1547 874 Dl
1531 936 1546 874 Dl
1546 873 1546 873 1546 998 Ds
1546 873 1546 998 1671 998 Ds
1546 998 1671 998 1671 998 Ds
(unlock) 1672 1019 w
10 /Times-Roman f
(Child) 842 1426 w
7 /Times-Roman f
(.) 1067 1409 w
(.) 1099 1409 w
(.) 1130 1409 w
(.) 1161 1409 w
(.) 1192 1409 w
(.) 1224 1409 w
(.) 1255 1409 w
(.) 1287 1409 w
(.) 1318 1409 w
(.) 1348 1409 w
(.) 1380 1409 w
(.) 1411 1409 w
(.) 1443 1409 w
(.) 1474 1409 w
(.) 1505 1409 w
(.) 1536 1409 w
(.) 1568 1409 w
(.) 1599 1409 w
(.) 1631 1409 w
(.) 1662 1409 w
(.) 1693 1409 w
10 /Times-Roman f
(Rdy.) 1294 1366 w
1703 1406 2329 1406 Dl
(Run.) 1921 1366 w
7 /Times-Roman f
(.) 2319 1409 w
(.) 2351 1409 w
(.) 2382 1409 w
(.) 2413 1409 w
(.) 2444 1409 w
(.) 2476 1409 w
(.) 2507 1409 w
(.) 2539 1409 w
(.) 2570 1409 w
(.) 2601 1409 w
(.) 2632 1409 w
(.) 2664 1409 w
(.) 2695 1409 w
(.) 2727 1409 w
(.) 2758 1409 w
(.) 2788 1409 w
(.) 2820 1409 w
(.) 2851 1409 w
(.) 2883 1409 w
(.) 2914 1409 w
(.) 2945 1409 w
10 /Times-Roman f
(Rdy.) 2546 1366 w
2955 1406 3581 1406 Dl
(Run.) 3173 1366 w
7 /Times-Roman f
(.) 3571 1409 w
(.) 3603 1409 w
(.) 3634 1409 w
(.) 3665 1409 w
(.) 3696 1409 w
(.) 3728 1409 w
(.) 3759 1409 w
(.) 3791 1409 w
(.) 3822 1409 w
(.) 3853 1409 w
(.) 3884 1409 w
(.) 3916 1409 w
(.) 3947 1409 w
(.) 3979 1409 w
(.) 4010 1409 w
(.) 4041 1409 w
(.) 4072 1409 w
(.) 4104 1409 w
(.) 4135 1409 w
(.) 4167 1409 w
(.) 4198 1409 w
10 /Times-Roman f
(Rdy.) 3798 1366 w
gsave
newpath
3894 1406 m
/inpath true def
 0 setgray
1860 1406 62 62 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
1891 1421 m
/inpath true def
 0 setgray
1891 1421 1891 1391 Dl
1891 1390 2329 1390 Dl
2329 1390 2329 1420 Dl
2329 1421 1891 1421 Dl
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2955 1421 m
/inpath true def
 0 setgray
2955 1421 2955 1391 Dl
2955 1390 3581 1390 Dl
3581 1390 3581 1420 Dl
3581 1421 2955 1421 Dl
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
1906 1499 1891 1437 Dl
1875 1499 1890 1437 Dl
1891 1436 1891 1436 1891 1561 Ds
1891 1436 1891 1561 2016 1561 Ds
1891 1561 2016 1561 2016 1561 Ds
(calls) 2017 1582 w
10 /Courier f
(lock) 2225 1582 w
10 /Times-Roman f
(, which spins around trying to acquire it.) 2465 1582 w
686 1750 999 1750 Dl
10 /Times-Bold f
(Time) 731 1710 w
998 1750 4128 1750 Dl
4066 1766 4128 1751 Dl
4066 1735 4128 1750 Dl
11 /Times-Roman f
(Initially,) 816 1984 w
(the) 1225 1984 w
(parent) 1391 1984 w
(calls) 1696 1984 w
11 /Courier f
(lock) 1929 1984 w
11 /Times-Roman f
(,) 2193 1984 w
(and) 2254 1984 w
(acquires) 2445 1984 w
(the) 2842 1984 w
(lock) 3009 1984 w
(because) 3231 1984 w
(it) 3609 1984 w
(was) 3704 1984 w
(initially) 3907 1984 w
(released.) 566 2104 w
(Later,) 995 2104 w
(the) 1297 2104 w
(parent) 1475 2104 w
(process) 1792 2104 w
(releases) 2164 2104 w
(the) 2553 2104 w
(lock) 2731 2104 w
(by) 2964 2104 w
(a) 3117 2104 w
(call) 3208 2104 w
(to) 3409 2104 w
11 /Courier f
(unlock) 3538 2104 w
11 /Times-Roman f
(,) 3934 2104 w
(but) 4005 2104 w
(it) 4189 2104 w
(quickly) 566 2224 w
(calls) 925 2224 w
11 /Courier f
(lock) 1155 2224 w
11 /Times-Roman f
(again,) 1448 2224 w
(and) 1742 2224 w
(re\255acquires) 1929 2224 w
(the) 2442 2224 w
(lock.) 2606 2224 w
(Now) 2881 2224 w
(it) 3124 2224 w
(is) 3216 2224 w
(the) 3320 2224 w
(time) 3484 2224 w
(for) 3710 2224 w
(the) 3867 2224 w
(child) 4031 2224 w
(process) 566 2344 w
(to) 937 2344 w
(run.) 1066 2344 w
(This) 1283 2344 w
(poor) 1522 2344 w
(process) 1766 2344 w
(calls) 2137 2344 w
11 /Courier f
(lock) 2381 2344 w
11 /Times-Roman f
(,) 2645 2344 w
(but) 2716 2344 w
(you) 2900 2344 w
(know) 3108 2344 w
(what) 3395 2344 w
(happens.) 3651 2344 w
(The) 4081 2344 w
(routine) 566 2464 w
(cannot) 914 2464 w
(acquire) 1243 2464 w
(the) 1601 2464 w
(lock,) 1772 2464 w
(which) 2026 2464 w
(is) 2331 2464 w
(held) 2442 2464 w
(by) 2669 2464 w
(the) 2817 2464 w
(parent) 2989 2464 w
(process.) 3300 2464 w
(Therefore,) 3694 2464 w
(it) 4189 2464 w
(waits) 566 2584 w
(in) 833 2584 w
(its) 954 2584 w
(loop) 1094 2584 w
(calling) 1325 2584 w
11 /Courier f
(TAS) 1659 2584 w
11 /Times-Roman f
(to) 1892 2584 w
(try) 2013 2584 w
(to) 2170 2584 w
(gain) 2291 2584 w
(the) 2514 2584 w
(lock.) 2682 2584 w
(That) 2933 2584 w
(is) 3168 2584 w
(all) 3276 2584 w
(this) 3420 2584 w
(process) 3614 2584 w
(would) 3976 2584 w
(do) 566 2704 w
(while) 715 2704 w
(it) 999 2704 w
(is) 1101 2704 w
(allowed) 1215 2704 w
(to) 1602 2704 w
(remain) 1728 2704 w
(running.) 2072 2704 w
(The) 2482 2704 w
(very) 2692 2704 w
(thick) 2926 2704 w
(line) 3186 2704 w
(in) 3391 2704 w
(the) 3517 2704 w
(figure) 3691 2704 w
(repre\255) 3992 2704 w
(sents) 566 2824 w
(the) 817 2824 w
(process) 982 2824 w
(executing) 1340 2824 w
(this) 1796 2824 w
(while,) 1986 2824 w
(spinning) 2288 2824 w
(around) 2698 2824 w
(desperately) 3032 2824 w
(hoping) 3560 2824 w
(for) 3896 2824 w
11 /Courier f
(TAS) 4053 2824 w
11 /Times-Roman f
(to) 566 2944 w
(succeed) 690 2944 w
(and) 1073 2944 w
(obtain) 1269 2944 w
(the) 1582 2944 w
(lock.) 1754 2944 w
(Because) 2009 2944 w
(of) 2411 2944 w
(this,) 2540 2944 w
(this) 2766 2944 w
(kind) 2964 2944 w
(of) 3198 2944 w
(lock) 3327 2944 w
(is) 3554 2944 w
(called) 3666 2944 w
(a) 3966 2944 w
11 /Times-Bold f
(spin) 4053 2944 w
(lock) 566 3064 w
11 /Times-Roman f
(.) 762 3064 w
(One) 816 3220 w
(problem) 1033 3220 w
(with) 1434 3220 w
(this) 1665 3220 w
(execution,) 1861 3220 w
(as) 2351 3220 w
(you) 2478 3220 w
(already) 2679 3220 w
(know,) 3036 3220 w
(is) 3344 3220 w
(that) 3454 3220 w
(the) 3655 3220 w
(child) 3825 3220 w
(suf\255) 4081 3220 w
(fers) 566 3340 w
(starvation,) 767 3340 w
(and) 1266 3340 w
(is) 1462 3340 w
(very) 1574 3340 w
(likely) 1806 3340 w
(to) 2095 3340 w
(never) 2219 3340 w
(acquire) 2499 3340 w
(its) 2858 3340 w
(lock.) 3001 3340 w
(This) 3256 3340 w
(can) 3489 3340 w
(be) 3677 3340 w
(solved) 3817 3340 w
(by) 4141 3340 w
(trying) 566 3460 w
(to) 866 3460 w
(hold) 989 3460 w
(locks) 1222 3460 w
(for) 1491 3460 w
(the) 1655 3460 w
(least) 1826 3460 w
(time) 2064 3460 w
(as) 2297 3460 w
(feasible,) 2425 3460 w
(unlike) 2830 3460 w
(we) 3142 3460 w
(are) 3306 3460 w
(doing) 3475 3460 w
(in) 3763 3460 w
(our) 3886 3460 w
(pro\255) 4069 3460 w
(gram.) 566 3580 w
(The) 887 3580 w
(other) 1097 3580 w
(problem) 1362 3580 w
(that) 1768 3580 w
(you) 1973 3580 w
(may) 2178 3580 w
(see) 2407 3580 w
(is) 2586 3580 w
(that) 2700 3580 w
(the) 2904 3580 w
(child) 3077 3580 w
(is) 3336 3580 w
11 /Times-Italic f
(wasting) 3449 3580 w
11 /Times-Roman f
(processor) 3832 3580 w
(time.) 566 3700 w
(When) 831 3700 w
(the) 1133 3700 w
(child) 1308 3700 w
(calls) 1569 3700 w
11 /Courier f
(lock) 1811 3700 w
11 /Times-Roman f
(,) 2075 3700 w
(and) 2144 3700 w
(finds) 2343 3700 w
(that) 2604 3700 w
(the) 2810 3700 w
(lock) 2985 3700 w
(was) 3215 3700 w
(held) 3426 3700 w
(and) 3656 3700 w
(it) 3855 3700 w
(cannot) 3959 3700 w
(acquire) 566 3820 w
(it,) 920 3820 w
(it) 1043 3820 w
(is) 1138 3820 w
(pointless) 1245 3820 w
(to) 1670 3820 w
(keep) 1789 3820 w
(on) 2028 3820 w
(trying) 2171 3820 w
(to) 2467 3820 w
(acquire) 2586 3820 w
(it.) 2940 3820 w
(Unless) 3063 3820 w
(the) 3394 3820 w
(child) 3560 3820 w
(leaves) 3812 3820 w
(the) 4117 3820 w
(processor,) 566 3940 w
(and) 1063 3940 w
(the) 1271 3940 w
(process) 1455 3940 w
(holding) 1833 3940 w
(the) 2220 3940 w
(lock) 2404 3940 w
(is) 2643 3940 w
(able) 2767 3940 w
(to) 2999 3940 w
(run,) 3135 3940 w
(nobody) 3359 3940 w
(is) 3739 3940 w
(going) 3863 3940 w
(to) 4165 3940 w
(release) 566 4060 w
(the) 908 4060 w
(lock.) 1082 4060 w
(Therefore,) 1339 4060 w
(it) 1836 4060 w
(is) 1938 4060 w
(much) 2052 4060 w
(better) 2336 4060 w
(to) 2625 4060 w
(let) 2751 4060 w
(other) 2901 4060 w
(processes) 3166 4060 w
(run) 3625 4060 w
(instead) 3810 4060 w
(of) 4160 4060 w
(insisting.) 566 4180 w
(This) 1000 4180 w
(may) 1227 4180 w
(give) 1447 4180 w
(the) 1667 4180 w
(one) 1832 4180 w
(holding) 2021 4180 w
(the) 2389 4180 w
(lock) 2554 4180 w
(a) 2774 4180 w
(chance) 2853 4180 w
(to) 3186 4180 w
(release) 3303 4180 w
(it.) 3637 4180 w
(And) 3759 4180 w
(that) 3980 4180 w
(is) 4177 4180 w
(better) 566 4300 w
(for) 843 4300 w
(us,) 998 4300 w
(because) 1152 4300 w
(we) 1525 4300 w
(want) 1680 4300 w
(to) 1921 4300 w
(acquire) 2035 4300 w
(it.) 2384 4300 w
(In) 816 4456 w
(the) 946 4456 w
(actual) 1119 4456 w
(implementation) 1420 4456 w
(of) 2151 4456 w
11 /Courier f
(lock) 2282 4456 w
11 /Times-Roman f
(in) 2586 4456 w
(Plan) 2712 4456 w
(9,) 2948 4456 w
(when) 3071 4456 w
11 /Courier f
(lock) 3348 4456 w
11 /Times-Roman f
(finds) 3652 4456 w
(that) 3912 4456 w
(the) 4117 4456 w
(lock) 566 4576 w
(is) 791 4576 w
(held) 901 4576 w
(and) 1126 4576 w
(cannot) 1320 4576 w
(be) 1648 4576 w
(set,) 1787 4576 w
(it) 1973 4576 w
(calls) 2071 4576 w
11 /Courier f
(sleep) 2308 4576 w
11 /Times-Roman f
(.) 2638 4576 w
(This) 2730 4576 w
(moves) 2961 4576 w
(the) 3283 4576 w
(process) 3452 4576 w
(out) 3815 4576 w
(of) 3991 4576 w
(the) 4117 4576 w
(processor,) 566 4696 w
(while) 1041 4696 w
(it) 1313 4696 w
(is) 1404 4696 w
(blocked) 1507 4696 w
(during) 1883 4696 w
(the) 2199 4696 w
(sleep.) 2362 4696 w
(Hopefully,) 2672 4696 w
(after) 3174 4696 w
(sleeping) 3402 4696 w
(a) 3797 4696 w
(little) 3874 4696 w
(bit,) 4106 4696 w
(the) 566 4816 w
(lock) 729 4816 w
(will) 947 4816 w
(be) 1148 4816 w
(already) 1280 4816 w
(released.) 1630 4816 w
(And,) 2044 4816 w
(at) 2290 4816 w
(the) 2398 4816 w
(very) 2561 4816 w
(least,) 2784 4816 w
(we) 3042 4816 w
(will) 3198 4816 w
(not) 3399 4816 w
(be) 3568 4816 w
(wasting) 3699 4816 w
(pro\255) 4069 4816 w
(cessor) 566 4936 w
(time) 878 4936 w
(spinning) 1113 4936 w
(around) 1532 4936 w
(inside) 1875 4936 w
11 /Courier f
(lock) 2177 4936 w
11 /Times-Roman f
(without) 2480 4936 w
(any) 2856 4936 w
(hope) 3053 4936 w
(of) 3305 4936 w
(acquiring) 3435 4936 w
(the) 3888 4936 w
(lock) 4062 4936 w
(before) 566 5056 w
(leaving) 883 5056 w
(the) 1245 5056 w
(processor.) 1418 5056 w
(Figure) 1904 5056 w
([[!lock) 2230 5056 w
(sleep!]]) 2566 5056 w
(depicts) 2938 5056 w
(the) 3287 5056 w
(same) 3459 5056 w
(scenario) 3722 5056 w
(for) 4124 5056 w
(our) 566 5176 w
(two) 743 5176 w
(processes,) 940 5176 w
(but) 1419 5176 w
(showing) 1592 5176 w
(what) 1997 5176 w
(happens) 2242 5176 w
(when) 2633 5176 w
11 /Courier f
(lock) 2902 5176 w
11 /Times-Roman f
(calls) 3198 5176 w
11 /Courier f
(sleep) 3431 5176 w
11 /Times-Roman f
(.) 3761 5176 w
(Compare) 3849 5176 w
(it) 566 5296 w
(with) 656 5296 w
(the) 880 5296 w
(previous) 1042 5296 w
(one.) 1448 5296 w
cleartomark
showpage
saveobj restore
%%EndPage: 13 13
%%Page: 14 14
/saveobj save def
mark
14 pagesetup
11 /Times-Roman f
(\255 14 \255) 2289 413 w
10 /Times-Roman f
(Parent) 1027 906 w
1328 886 2127 886 Dl
(Run.) 1632 846 w
7 /Times-Roman f
(.) 2117 889 w
(.) 2158 889 w
(.) 2197 889 w
(.) 2238 889 w
(.) 2277 889 w
(.) 2318 889 w
(.) 2357 889 w
10 /Times-Roman f
(Rdy.) 2152 846 w
2367 886 3166 886 Dl
(Run.) 2672 846 w
7 /Times-Roman f
(.) 3158 889 w
(.) 3197 889 w
(.) 3238 889 w
(.) 3277 889 w
10 /Times-Roman f
(Rdy.) 3132 846 w
3287 886 4086 886 Dl
(Run.) 3592 846 w
gsave
newpath
3688 886 m
/inpath true def
 0 setgray
1528 886 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2448 886 m
/inpath true def
 7 setgray
1808 886 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2448 886 m
/inpath true def
 0 setgray
1888 886 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2448 886 m
/inpath true def
 7 setgray
2847 886 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2448 886 m
/inpath true def
 0 setgray
2927 886 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2448 886 m
/inpath true def
 7 setgray
3768 886 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
2448 886 m
/inpath true def
 0 setgray
3848 886 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
1587 1005 1567 926 Dl
1548 1005 1568 926 Dl
1567 925 1567 925 1567 1325 Ds
1567 925 1567 1325 1726 1325 Ds
1567 1325 1726 1325 1726 1325 Ds
10 /Courier f
(lock) 1728 1346 w
1868 1005 1848 926 Dl
1827 1005 1847 926 Dl
1847 925 1847 925 1847 1084 Ds
1847 925 1847 1084 2006 1084 Ds
1847 1084 2006 1084 2006 1084 Ds
(unlock) 2007 1106 w
10 /Times-Roman f
(Child) 1047 1626 w
7 /Times-Roman f
(.) 1338 1609 w
(.) 1377 1609 w
(.) 1418 1609 w
(.) 1457 1609 w
(.) 1498 1609 w
(.) 1538 1609 w
(.) 1577 1609 w
(.) 1618 1609 w
(.) 1657 1609 w
(.) 1698 1609 w
(.) 1737 1609 w
(.) 1778 1609 w
(.) 1817 1609 w
(.) 1858 1609 w
(.) 1898 1609 w
(.) 1937 1609 w
(.) 1978 1609 w
(.) 2017 1609 w
(.) 2058 1609 w
(.) 2097 1609 w
(.) 2138 1609 w
10 /Times-Roman f
(Rdy.) 1651 1566 w
2148 1606 2387 1606 Dl
(Run.) 2172 1566 w
2387 1606 2427 1606 Dl
2477 1606 2517 1606 Dl
2567 1606 2607 1606 Dl
2657 1606 2697 1606 Dl
2747 1606 2787 1606 Dl
(Blk.) 2503 1566 w
7 /Times-Roman f
(.) 2778 1609 w
(.) 2817 1609 w
(.) 2858 1609 w
(.) 2897 1609 w
(.) 2938 1609 w
(.) 2978 1609 w
(.) 3017 1609 w
(.) 3058 1609 w
(.) 3097 1609 w
(.) 3138 1609 w
(.) 3177 1609 w
10 /Times-Roman f
(Rdy.) 2892 1566 w
gsave
newpath
3187 1626 m
/inpath true def
 0 setgray
3187 1626 3187 1586 Dl
3187 1586 3266 1586 Dl
3267 1586 3267 1626 Dl
3267 1626 3188 1626 Dl
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
3267 1606 3307 1606 Dl
3334 1606 3374 1606 Dl
3401 1606 3441 1606 Dl
3467 1606 3507 1606 Dl
(Blk.) 3302 1566 w
7 /Times-Roman f
(.) 3498 1609 w
(.) 3537 1609 w
(.) 3578 1609 w
(.) 3617 1609 w
(.) 3658 1609 w
(.) 3698 1609 w
(.) 3737 1609 w
(.) 3778 1609 w
(.) 3817 1609 w
(.) 3858 1609 w
(.) 3897 1609 w
(.) 3938 1609 w
(.) 3977 1609 w
(.) 4018 1609 w
(.) 4058 1609 w
10 /Times-Roman f
(Rdy.) 3692 1566 w
gsave
newpath
3788 1606 m
/inpath true def
 0 setgray
2348 1606 79 79 De
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
2408 1725 2388 1646 Dl
2367 1725 2387 1646 Dl
2387 1645 2387 1645 2387 2045 Ds
2387 1645 2387 2045 2546 2045 Ds
2387 2045 2546 2045 2546 2045 Ds
(calls) 2547 2066 w
10 /Courier f
(lock) 2755 2066 w
10 /Times-Roman f
(, which calls) 2995 2066 w
10 /Courier f
(sleep) 3522 2066 w
10 /Times-Roman f
(this time) 3847 2066 w
3248 1706 3228 1627 Dl
3207 1706 3227 1627 Dl
3228 1626 3228 1626 3228 1785 Ds
3228 1626 3228 1785 3387 1785 Ds
3228 1785 3387 1785 3387 1785 Ds
(No luck. Calls) 3387 1806 w
10 /Courier f
(sleep) 3987 1806 w
608 2285 1008 2285 Dl
10 /Times-Bold f
(Time) 697 2245 w
1008 2285 4207 2285 Dl
4128 2306 4207 2286 Dl
4128 2265 4207 2285 Dl
11 /Times-Roman f
(One) 816 2519 w
(last) 1029 2519 w
(remark.) 1213 2519 w
(Because) 1581 2519 w
(of) 1976 2519 w
(the) 2098 2519 w
(call) 2263 2519 w
(to) 2452 2519 w
11 /Courier f
(sleep) 2569 2519 w
11 /Times-Roman f
(,) 2899 2519 w
(Plan) 2958 2519 w
(9) 3185 2519 w
(locks) 3271 2519 w
(are) 3535 2519 w
(not) 3699 2519 w
(real) 3872 2519 w
(spin) 4067 2519 w
(locks.) 566 2639 w
(They) 855 2639 w
(do) 1109 2639 w
(not) 1248 2639 w
(spin) 1418 2639 w
(around) 1631 2639 w
(in) 1964 2639 w
(a) 2079 2639 w
(while) 2156 2639 w
(all) 2429 2639 w
(the) 2568 2639 w
(time.) 2731 2639 w
(As) 3012 2639 w
(you) 3163 2639 w
(now) 3357 2639 w
(know,) 3575 2639 w
(they) 3876 2639 w
(call) 4093 2639 w
11 /Courier f
(sleep\(0\)) 566 2759 w
11 /Times-Roman f
(,) 1094 2759 w
(just) 1157 2759 w
(to) 1352 2759 w
(abandon) 1473 2759 w
(the) 1879 2759 w
(processor) 2049 2759 w
(and) 2504 2759 w
(let) 2698 2759 w
(others) 2844 2759 w
(run) 3148 2759 w
(if) 3330 2759 w
(the) 3433 2759 w
(lock) 3603 2759 w
(was) 3828 2759 w
(held.) 4034 2759 w
(However,) 566 2879 w
(because) 1040 2879 w
(they) 1431 2879 w
(are) 1666 2879 w
(very) 1844 2879 w
(similar,) 2084 2879 w
(and) 2464 2879 w
(loop) 2668 2879 w
(around,) 2910 2879 w
(many) 3288 2879 w
(people) 3578 2879 w
(refer) 3916 2879 w
(to) 4165 2879 w
(them) 566 2999 w
(as) 814 2999 w
(spin) 933 2999 w
(locks.) 1145 2999 w
16 /Times-Bold f
(10.3.) 566 3359 w
(Queueing locks) 966 3359 w
11 /Times-Roman f
(How) 566 3515 w
(can) 816 3515 w
(avoid) 1004 3515 w
(starvation) 1285 3515 w
(in) 1755 3515 w
(our) 1878 3515 w
(program?) 2061 3515 w
(The) 2545 3515 w
(code) 2752 3515 w
(for) 2995 3515 w
(both) 3159 3515 w
(processes) 3392 3515 w
(was) 3849 3515 w
(very) 4057 3515 w
(similar,) 566 3635 w
(and) 931 3635 w
(had) 1119 3635 w
(a) 1307 3635 w
(nice) 1385 3635 w
(symmetry.) 1597 3635 w
(However,) 2095 3635 w
(the) 2553 3635 w
(execution) 2717 3635 w
(was) 3173 3635 w
(not) 3373 3635 w
(fair.) 3544 3635 w
(At) 3753 3635 w
(least) 3893 3635 w
(for) 4124 3635 w
(the) 566 3755 w
(child) 743 3755 w
(process.) 1006 3755 w
(There) 1405 3755 w
(is) 1702 3755 w
(a) 1819 3755 w
(different) 1911 3755 w
(kind) 2331 3755 w
(of) 2571 3755 w
(lock) 2706 3755 w
(\(yet) 2939 3755 w
(another) 3153 3755 w
(abstraction\)) 3525 3755 w
(that) 4086 3755 w
(may) 566 3875 w
(be) 783 3875 w
(of) 914 3875 w
(help.) 1033 3875 w
(A) 816 4031 w
11 /Times-Bold f
(queueing) 928 4031 w
(lock) 1391 4031 w
11 /Times-Roman f
(is) 1620 4031 w
(a) 1727 4031 w
(lock) 1808 4031 w
(like) 2030 4031 w
(the) 2228 4031 w
(ones) 2395 4031 w
(we) 2629 4031 w
(know.) 2790 4031 w
(It) 3096 4031 w
(works) 3197 4031 w
(in) 3499 4031 w
(a) 3619 4031 w
(similar) 3701 4031 w
(way.) 4041 4031 w
(But) 566 4151 w
(unlike) 756 4151 w
(a) 1061 4151 w
(spin) 1139 4151 w
(lock,) 1353 4151 w
(a) 1600 4151 w
(queueing) 1678 4151 w
(lock) 2110 4151 w
(uses) 2329 4151 w
(a) 2548 4151 w
(queue) 2626 4151 w
(to) 2917 4151 w
(assign) 3032 4151 w
(the) 3336 4151 w
(lock) 3499 4151 w
(to) 3717 4151 w
(processes) 3832 4151 w
(that) 566 4271 w
(want) 762 4271 w
(to) 1006 4271 w
(acquire) 1123 4271 w
(it.) 1475 4271 w
(The) 1624 4271 w
(data) 1825 4271 w
(type) 2038 4271 w
(for) 2259 4271 w
(this) 2418 4271 w
(lock) 2610 4271 w
(is) 2831 4271 w
11 /Courier f
(QLock) 2937 4271 w
11 /Times-Roman f
(,) 3267 4271 w
(and) 3327 4271 w
(the) 3517 4271 w
(functions) 3683 4271 w
(for) 4124 4271 w
(acquiring) 566 4391 w
(and) 1008 4391 w
(releasing) 1194 4391 w
(the) 1617 4391 w
(lock) 1779 4391 w
(are) 1996 4391 w
11 /Courier f
(qlock) 2156 4391 w
11 /Times-Roman f
(and) 2514 4391 w
11 /Courier f
(qunlock) 2700 4391 w
11 /Times-Roman f
(.) 3162 4391 w
10 /Courier f
(; sig qlock qunlock) 786 4561 w
(void qlock\(QLock *l\)) 1266 4671 w
(void qunlock\(QLock *l\)) 1266 4781 w
11 /Times-Roman f
(When) 566 4997 w
(a) 860 4997 w
(process) 941 4997 w
(calls) 1302 4997 w
11 /Courier f
(qlock) 1536 4997 w
11 /Times-Roman f
(,) 1866 4997 w
(it) 1927 4997 w
(acquires) 2022 4997 w
(the) 2419 4997 w
(lock) 2586 4997 w
(if) 2808 4997 w
(the) 2908 4997 w
(lock) 3075 4997 w
(is) 3297 4997 w
(released.) 3404 4997 w
(However,) 3823 4997 w
(if) 566 5117 w
(the) 667 5117 w
(lock) 835 5117 w
(is) 1057 5117 w
(held) 1164 5117 w
(and) 1386 5117 w
(cannot) 1577 5117 w
(be) 1902 5117 w
(acquired) 2038 5117 w
(yet,) 2447 5117 w
(the) 2642 5117 w
(process) 2809 5117 w
(is) 3170 5117 w
(put) 3277 5117 w
(in) 3451 5117 w
(a) 3570 5117 w
(queue) 3651 5117 w
(of) 3945 5117 w
(pro\255) 4069 5117 w
(cesses) 566 5237 w
(waiting) 873 5237 w
(for) 1237 5237 w
(the) 1398 5237 w
(lock.) 1566 5237 w
(When) 1845 5237 w
(the) 2140 5237 w
(lock) 2308 5237 w
(is) 2531 5237 w
(released,) 2639 5237 w
(the) 3058 5237 w
(first) 3226 5237 w
(process) 3437 5237 w
(waiting) 3800 5237 w
(in) 4165 5237 w
(queue) 566 5357 w
(for) 855 5357 w
(the) 1010 5357 w
(lock) 1172 5357 w
(is) 1389 5357 w
(the) 1491 5357 w
(one) 1653 5357 w
(that) 1839 5357 w
(acquires) 2032 5357 w
(it.) 2424 5357 w
(There) 816 5513 w
(is) 1123 5513 w
(a) 1250 5513 w
11 /Times-Italic f
(huge) 1351 5513 w
11 /Times-Roman f
(difference) 1617 5513 w
(between) 2111 5513 w
11 /Courier f
(Locks) 2528 5513 w
11 /Times-Roman f
(and) 2911 5513 w
11 /Courier f
(QLocks) 3123 5513 w
11 /Times-Roman f
(because) 3573 5513 w
(of) 3972 5513 w
(the) 4117 5513 w
(queue) 566 5633 w
(used) 857 5633 w
(to) 1088 5633 w
(wait) 1204 5633 w
(for) 1423 5633 w
(the) 1580 5633 w
(lock.) 1744 5633 w
(First,) 1991 5633 w
(a) 2252 5633 w
(process) 2330 5633 w
(is) 2688 5633 w
(not) 2791 5633 w
(kept) 2961 5633 w
(spinning) 3179 5633 w
(around) 3588 5633 w
(waiting) 3921 5633 w
(for) 566 5753 w
(a) 723 5753 w
(lock.) 801 5753 w
(It) 1048 5753 w
(will) 1145 5753 w
(be) 1347 5753 w
(waiting,) 1480 5753 w
(but) 1868 5753 w
(blocked,) 2039 5753 w
(sitting) 2444 5753 w
(in) 2751 5753 w
(the) 2867 5753 w
(queue) 3031 5753 w
(of) 3322 5753 w
(waiting) 3443 5753 w
(processes.) 3804 5753 w
(Second,) 566 5873 w
(the) 951 5873 w
(lock) 1119 5873 w
(is) 1341 5873 w
(assigned) 1448 5873 w
(to) 1859 5873 w
(processes) 1978 5873 w
(in) 2430 5873 w
(a) 2549 5873 w
(very) 2630 5873 w
(fair) 2857 5873 w
(way.) 3041 5873 w
(The) 3312 5873 w
(first) 3515 5873 w
(process) 3725 5873 w
(that) 4086 5873 w
(entered) 566 5993 w
(the) 920 5993 w
(queue) 1087 5993 w
(to) 1381 5993 w
(wait) 1500 5993 w
(for) 1722 5993 w
(the) 1882 5993 w
(lock) 2049 5993 w
(would) 2271 5993 w
(be) 2579 5993 w
(the) 2715 5993 w
(first) 2882 5993 w
(to) 3092 5993 w
(acquire) 3211 5993 w
(it) 3565 5993 w
(after) 3661 5993 w
(the) 3894 5993 w
(lock) 4062 5993 w
(is) 566 6113 w
(released.) 691 6113 w
(Because) 1126 6113 w
(of) 1540 6113 w
(both) 1681 6113 w
(reasons,) 1927 6113 w
(it) 2333 6113 w
(is) 2445 6113 w
(always) 2569 6113 w
(a) 2923 6113 w
(good) 3021 6113 w
(idea) 3291 6113 w
(to) 3523 6113 w
(use) 3659 6113 w
11 /Courier f
(QLocks) 3855 6113 w
11 /Times-Roman f
(instead) 566 6233 w
(of) 918 6233 w
11 /Courier f
(Locks) 1050 6233 w
11 /Times-Roman f
(.) 1380 6233 w
(The) 1477 6233 w
(spin) 1688 6233 w
(locks) 1913 6233 w
(are) 2186 6233 w
(meant) 2359 6233 w
(for) 2669 6233 w
(tiny) 2838 6233 w
(critical) 3052 6233 w
(regions) 3398 6233 w
(with) 3763 6233 w
(just) 4001 6233 w
(a) 4203 6233 w
(few) 566 6353 w
(instructions.) 773 6353 w
(For) 1359 6353 w
(example,) 1556 6353 w
(the) 1998 6353 w
(data) 2175 6353 w
(structure) 2400 6353 w
(used) 2826 6353 w
(to) 3070 6353 w
(implement) 3199 6353 w
(a) 3713 6353 w
11 /Courier f
(QLock) 3804 6353 w
11 /Times-Roman f
(is) 4177 6353 w
cleartomark
showpage
saveobj restore
%%EndPage: 14 14
%%Page: 15 15
/saveobj save def
mark
15 pagesetup
11 /Times-Roman f
(\255 15 \255) 2289 413 w
(protected) 566 686 w
(by) 1003 686 w
(using) 1143 686 w
(a) 1412 686 w
11 /Courier f
(Lock) 1490 686 w
11 /Times-Roman f
(.) 1754 686 w
(Such) 1840 686 w
(spin) 2090 686 w
(lock) 2304 686 w
(is) 2523 686 w
(held) 2628 686 w
(just) 2848 686 w
(for) 3039 686 w
(a) 3197 686 w
(very) 3276 686 w
(short) 3501 686 w
(time,) 3752 686 w
(while) 4007 686 w
(updating) 566 806 w
(the) 979 806 w
11 /Courier f
(QLock) 1141 806 w
11 /Times-Roman f
(during) 1499 806 w
(a) 1814 806 w
(call) 1890 806 w
(to) 2076 806 w
11 /Courier f
(qlock) 2190 806 w
11 /Times-Roman f
(or) 2548 806 w
11 /Courier f
(qunlock) 2667 806 w
11 /Times-Roman f
(.) 3129 806 w
(Our) 816 962 w
(\(in\)famous) 1014 962 w
(program) 1523 962 w
(follows,) 1922 962 w
(but) 2308 962 w
(using) 2477 962 w
(queueing) 2744 962 w
(locks) 3174 962 w
(this) 3434 962 w
(time.) 3622 962 w
9 /S f
(\347) 566 1132 w
9 /Times-Bold f
(qcnt.c) 581 1132 w
9 /S f
(\347) 829 1132 w
(`) 566 1132 w
(`````) 604 1132 w
(_) 566 1132 w
(_____) 604 1132 w
8 /Courier f
(#include <u.h>) 786 1240 w
(#include <libc.h>) 786 1348 w
(int) 786 1564 w
(cnt;) 1266 1564 w
(QLock) 786 1672 w
(cntlck;) 1266 1672 w
(void) 786 1888 w
(main\(int, char*[]\)) 786 1996 w
({) 786 2104 w
(long) 1266 2212 w
(last, now;) 1746 2212 w
(switch\(rfork\(RFPROC|RFMEM|RFNOWAIT\)\){) 1266 2428 w
(case \2551:) 1266 2536 w
(sysfatal\("fork: %r"\);) 1746 2644 w
(case 0:) 1266 2752 w
(last = time\(nil\);) 1746 2860 w
(for\(;;\){) 1746 2968 w
(qlock\(&cntlck\);) 2226 3076 w
(assert\(cnt >= 0\);) 2226 3184 w
(cnt++;) 2226 3292 w
(print\("%d\\n", cnt\);) 2226 3400 w
(qunlock\(&cntlck\);) 2226 3508 w
(}) 1746 3616 w
(default:) 1266 3724 w
(for\(;;\){) 1746 3832 w
(qlock\(&cntlck\);) 2226 3940 w
(assert\(cnt >= 0\);) 2226 4048 w
(if \(cnt > 0\)) 2226 4156 w
(cnt\255\255;) 2706 4264 w
(print\("%d\\n", cnt\);) 2226 4372 w
(qunlock\(&cntlck\);) 2226 4480 w
(}) 1746 4588 w
(}) 1266 4696 w
(}) 786 4804 w
11 /Times-Roman f
(Note) 566 5020 w
(the) 817 5020 w
(huge) 989 5020 w
(difference) 1240 5020 w
(in) 1719 5020 w
(behavior.) 1843 5020 w
(An) 2292 5020 w
(execution) 2464 5020 w
(for) 2929 5020 w
(this) 3095 5020 w
(program) 3294 5020 w
(follows.) 3704 5020 w
(As) 4129 5020 w
(you) 566 5140 w
(can) 781 5140 w
(see,) 982 5140 w
(this) 1199 5140 w
(time,) 1409 5140 w
(both) 1683 5140 w
(processes) 1929 5140 w
(take) 2398 5140 w
(turns.) 2630 5140 w
(This) 2928 5140 w
(happens) 3174 5140 w
(because) 3583 5140 w
(of) 3977 5140 w
(the) 4117 5140 w
(queue.) 566 5260 w
(The) 889 5260 w
(lock) 1093 5260 w
(is) 1316 5260 w
(assigned) 1424 5260 w
(in) 1836 5260 w
(a) 1956 5260 w
(very) 2038 5260 w
(fair) 2267 5260 w
(way,) 2453 5260 w
(and) 2698 5260 w
(both) 2891 5260 w
(processes) 3122 5260 w
(get) 3576 5260 w
(a) 3745 5260 w
(chance) 3828 5260 w
(to) 4165 5260 w
(do) 566 5380 w
(their) 704 5380 w
(job.) 933 5380 w
10 /Courier f
(; 8.qcnt) 786 5550 w
(0) 786 5660 w
(0) 786 5770 w
(1) 786 5880 w
(0) 786 5990 w
(1) 786 6100 w
(0) 786 6210 w
cleartomark
showpage
saveobj restore
%%EndPage: 15 15
%%Page: 16 16
/saveobj save def
mark
16 pagesetup
11 /Times-Roman f
(\255 16 \255) 2289 413 w
(To) 566 686 w
(do) 725 686 w
(something) 872 686 w
(more) 1368 686 w
(useful,) 1630 686 w
(we) 1963 686 w
(are) 2127 686 w
(going) 2296 686 w
(to) 2584 686 w
(implement) 2707 686 w
(a) 3216 686 w
(tool) 3302 686 w
(to) 3512 686 w
(update) 3636 686 w
(ticker\255) 3966 686 w
(tape) 566 806 w
(panels) 785 806 w
(at) 1102 806 w
(an) 1218 806 w
(airport.) 1358 806 w
(This) 1715 806 w
(program) 1947 806 w
(is) 2354 806 w
(going) 2464 806 w
(to) 2751 806 w
(read) 2873 806 w
(lines) 3096 806 w
(from) 3340 806 w
(standard) 3589 806 w
(input.) 3996 806 w
(When) 566 926 w
(a) 860 926 w
(new) 941 926 w
(message) 1156 926 w
(must) 1560 926 w
(be) 1809 926 w
(displayed) 1946 926 w
(at) 2401 926 w
(the) 2514 926 w
(airport) 2682 926 w
(panels,) 3008 926 w
(the) 3350 926 w
(user) 3518 926 w
(is) 3734 926 w
(supposed) 3842 926 w
(to) 566 1046 w
(type) 680 1046 w
(the) 897 1046 w
(message) 1059 1046 w
(in) 1458 1046 w
(the) 1572 1046 w
(keyboard) 1734 1046 w
(and) 2169 1046 w
(press) 2355 1046 w
(return.) 2608 1046 w
(Once) 816 1202 w
(a) 1077 1202 w
(new) 1156 1202 w
(message) 1369 1202 w
(has) 1771 1202 w
(been) 1949 1202 w
(read,) 2187 1202 w
(all) 2434 1202 w
(the) 2576 1202 w
(panels) 2742 1202 w
(must) 3054 1202 w
(be) 3301 1202 w
(updated) 3436 1202 w
(to) 3815 1202 w
(display) 3933 1202 w
(it) 566 1322 w
(instead) 659 1322 w
(of) 1001 1322 w
(the) 1123 1322 w
(old) 1288 1322 w
(one.) 1460 1322 w
(Because) 1705 1322 w
(updating) 2100 1322 w
(a) 2516 1322 w
(panel) 2595 1322 w
(is) 2863 1322 w
(a) 2968 1322 w
(very) 3047 1322 w
(slow) 3272 1322 w
(operation,) 3511 1322 w
(we) 3984 1322 w
(do) 4141 1322 w
(not) 566 1442 w
(want) 745 1442 w
(to) 996 1442 w
(use) 1120 1442 w
(a) 1304 1442 w
(loop) 1390 1442 w
(to) 1624 1442 w
(update) 1748 1442 w
(each) 2078 1442 w
(one) 2315 1442 w
(in) 2511 1442 w
(turn.) 2635 1442 w
(Instead,) 2879 1442 w
(we) 3262 1442 w
(create) 3428 1442 w
(one) 3726 1442 w
(process) 3923 1442 w
(per) 566 1562 w
(panel,) 733 1562 w
(as) 1026 1562 w
(shown) 1145 1562 w
(in) 1460 1562 w
(figure) 1574 1562 w
([[!airport) 1863 1562 w
(panels!]].) 2291 1562 w
648 2746 3 2 5 -2 Da
670 2758 3 2 5 -2 Da
681 2765 5 2 3 0 Da
694 2773 3 2 5 0 Da
704 2780 5 2 3 0 Da
715 2787 3 2 5 -2 Da
766 2816 3 2 5 -2 Da
756 2809 3 1 5 -1 Da
746 2804 5 2 5 0 Da
733 2796 5 2 5 0 Da
870 2876 3 3 5 -2 Da
859 2870 5 2 5 0 Da
850 2865 3 2 5 -2 Da
839 2859 5 1 5 -1 Da
825 2848 5 2 5 0 Da
814 2843 5 2 5 -2 Da
803 2836 3 2 5 -2 Da
792 2830 3 2 5 0 Da
782 2825 5 2 5 -2 Da
762 2897 3 2 5 0 Da
749 2891 5 1 5 0 Da
738 2884 3 1 5 0 Da
724 2876 5 3 5 -2 Da
622 2818 5 2 5 -2 Da
607 2807 5 3 5 -1 Da
594 2800 3 2 5 0 Da
841 2899 5 1 5 -1 Da
828 2890 3 3 5 -1 Da
812 2881 5 2 5 0 Da
834 2883 3 2 5 -2 Da
846 2890 5 3 5 -1 Da
821 2873 3 2 5 0 Da
802 2919 3 2 5 0 Da
789 2912 3 3 5 -2 Da
778 2906 3 2 5 -2 Da
800 2906 3 2 5 -2 Da
852 2945 5 2 5 0 Da
839 2938 3 3 5 -2 Da
825 2931 3 2 5 0 Da
886 2933 3 3 5 -2 Da
895 2924 5 1 5 0 Da
861 2938 5 2 5 -2 Da
872 2927 5 2 5 -2 Da
884 2919 3 2 5 -2 Da
848 2931 3 2 5 0 Da
859 2922 5 2 3 0 Da
870 2912 3 1 5 0 Da
834 2922 5 3 5 -1 Da
846 2915 5 2 3 0 Da
857 2906 5 2 5 0 Da
758 2881 3 2 5 0 Da
746 2873 3 2 5 0 Da
731 2865 5 2 3 0 Da
719 2855 3 2 5 0 Da
706 2848 3 2 5 0 Da
692 2841 5 2 3 0 Da
679 2834 5 1 3 0 Da
665 2827 5 1 5 0 Da
652 2819 3 3 5 -1 Da
638 2811 5 3 5 -2 Da
623 2804 5 2 5 0 Da
611 2794 3 1 5 -1 Da
620 2783 5 2 5 0 Da
634 2773 3 3 5 -2 Da
620 2768 5 2 5 -2 Da
767 2873 5 2 5 -2 Da
776 2863 5 2 5 0 Da
634 2793 5 3 5 -1 Da
647 2804 3 2 5 -2 Da
658 2811 5 2 5 -2 Da
672 2818 5 2 5 0 Da
684 2825 5 2 5 -2 Da
697 2832 5 3 5 -1 Da
710 2840 3 1 5 0 Da
722 2847 5 3 5 -2 Da
735 2855 5 2 5 -2 Da
751 2863 3 2 5 -2 Da
760 2855 5 2 5 0 Da
748 2847 5 3 5 -2 Da
733 2837 3 3 5 -1 Da
720 2830 3 2 5 0 Da
706 2822 5 3 5 -2 Da
695 2814 5 1 5 0 Da
681 2807 5 2 5 0 Da
668 2798 5 3 5 -2 Da
658 2793 3 2 5 -2 Da
645 2783 5 3 5 -2 Da
787 2855 5 2 5 -2 Da
773 2847 3 3 5 -2 Da
758 2840 5 1 3 0 Da
744 2832 5 2 3 -2 Da
730 2823 5 2 5 0 Da
717 2816 5 2 5 -2 Da
706 2807 3 2 5 -2 Da
694 2800 3 3 5 -1 Da
681 2793 5 2 5 0 Da
668 2786 5 2 3 -2 Da
656 2778 5 2 5 -2 Da
645 2769 3 1 5 -1 Da
632 2760 5 3 5 -2 Da
872 2991 946 2932 Dl
946 2931 946 2945 Dl
868 2991 954 2923 Dl
954 2922 954 2906 Dl
954 2906 870 2975 Dl
870 2976 869 2990 Dl
870 2992 568 2816 Dl
568 2816 567 2802 Dl
566 2801 653 2732 Dl
654 2732 954 2906 Dl
870 2978 567 2802 Dl
580 2801 767 2909 Dl
767 2909 811 2863 Dl
643 2750 653 2757 Dl
654 2757 663 2748 Dl
665 2762 719 2795 Dl
719 2796 726 2788 Dl
728 2800 771 2825 Dl
771 2825 781 2816 Dl
778 2830 828 2857 Dl
828 2858 837 2851 Dl
818 2937 868 2965 Dl
868 2966 914 2927 Dl
836 2863 875 2886 Dl
875 2886 883 2878 Dl
807 2886 846 2909 Dl
846 2909 862 2891 Dl
767 2909 806 2930 Dl
807 2931 817 2921 Dl
593 2789 593 2789 Dl
593 2789 593 2789 Dl
593 2789 595 2790 Dl
594 2791 594 2793 Dl
594 2793 594 2793 Dl
594 2793 594 2793 Dl
594 2793 595 2795 Dl
596 2794 596 2794 Dl
596 2794 596 2794 Dl
596 2794 597 2794 Dl
598 2794 598 2794 Dl
598 2794 599 2792 Dl
600 2793 600 2793 Dl
600 2793 601 2793 Dl
602 2793 604 2791 Dl
604 2791 604 2791 Dl
604 2791 605 2790 Dl
605 2789 606 2787 Dl
607 2787 608 2785 Dl
609 2786 610 2784 Dl
611 2783 612 2782 Dl
612 2782 614 2782 Dl
614 2782 614 2780 Dl
614 2780 615 2780 Dl
771 2886 771 2886 Dl
771 2886 771 2886 Dl
771 2886 771 2888 Dl
771 2888 771 2890 Dl
771 2890 771 2890 Dl
771 2890 772 2890 Dl
773 2890 773 2890 Dl
773 2890 773 2892 Dl
773 2891 774 2891 Dl
774 2891 774 2891 Dl
774 2891 774 2889 Dl
774 2890 775 2890 Dl
776 2890 777 2890 Dl
778 2890 778 2890 Dl
778 2890 779 2888 Dl
780 2888 780 2888 Dl
780 2888 781 2886 Dl
782 2886 783 2885 Dl
784 2884 785 2882 Dl
785 2883 786 2881 Dl
787 2881 790 2880 Dl
791 2879 791 2879 Dl
791 2879 792 2877 Dl
792 2877 792 2877 Dl
864 2953 864 2955 Dl
864 2955 864 2955 Dl
864 2955 865 2957 Dl
866 2956 866 2956 Dl
866 2956 866 2957 Dl
866 2958 866 2958 Dl
866 2958 867 2958 Dl
868 2958 868 2958 Dl
868 2958 868 2958 Dl
868 2958 869 2958 Dl
870 2958 870 2958 Dl
870 2958 871 2958 Dl
872 2958 872 2958 Dl
872 2958 873 2957 Dl
874 2956 875 2956 Dl
875 2956 875 2954 Dl
875 2955 876 2955 Dl
877 2955 878 2953 Dl
879 2953 880 2951 Dl
881 2951 882 2950 Dl
882 2949 883 2947 Dl
884 2948 885 2946 Dl
886 2945 887 2945 Dl
887 2945 887 2945 Dl
638 2823 638 2823 Dl
638 2823 638 2823 Dl
638 2823 638 2825 Dl
638 2825 638 2825 Dl
638 2825 638 2827 Dl
638 2827 638 2827 Dl
638 2827 638 2827 Dl
638 2827 638 2828 Dl
638 2829 638 2829 Dl
638 2829 639 2831 Dl
640 2830 640 2830 Dl
640 2830 641 2832 Dl
641 2832 644 2834 Dl
645 2834 646 2835 Dl
647 2836 650 2838 Dl
650 2837 651 2839 Dl
652 2840 653 2840 Dl
654 2840 655 2841 Dl
656 2841 657 2843 Dl
658 2843 661 2845 Dl
661 2845 662 2845 Dl
663 2845 666 2847 Dl
666 2847 667 2848 Dl
668 2848 671 2850 Dl
672 2850 673 2852 Dl
674 2852 677 2854 Dl
677 2854 680 2855 Dl
681 2855 682 2857 Dl
683 2858 686 2860 Dl
686 2859 687 2860 Dl
688 2861 691 2861 Dl
692 2861 693 2863 Dl
694 2863 695 2865 Dl
695 2865 696 2865 Dl
697 2865 700 2867 Dl
701 2866 702 2867 Dl
702 2868 703 2868 Dl
704 2868 707 2870 Dl
708 2870 709 2872 Dl
710 2872 711 2872 Dl
712 2872 713 2872 Dl
713 2872 713 2873 Dl
713 2873 714 2873 Dl
715 2873 715 2873 Dl
715 2873 715 2873 Dl
715 2873 716 2873 Dl
717 2873 717 2873 Dl
717 2873 717 2873 Dl
717 2873 718 2872 Dl
719 2872 719 2872 Dl
719 2872 719 2872 Dl
719 2872 721 2870 Dl
720 2870 720 2870 Dl
720 2870 720 2870 Dl
720 2870 720 2868 Dl
720 2868 720 2868 Dl
720 2868 720 2868 Dl
720 2868 718 2867 Dl
719 2866 719 2866 Dl
719 2866 719 2864 Dl
719 2865 719 2865 Dl
719 2865 719 2865 Dl
1017 2854 1017 2854 Dl
1017 2854 1016 2854 Dl
1016 2854 1015 2854 Dl
1014 2854 1013 2854 Dl
1012 2854 1011 2854 Dl
1010 2854 1010 2855 Dl
1010 2855 1009 2855 Dl
1008 2855 1007 2855 Dl
1007 2855 1007 2855 Dl
1007 2855 1006 2857 Dl
1005 2858 1004 2858 Dl
1003 2858 1003 2860 Dl
1003 2859 1002 2859 Dl
1001 2859 1000 2860 Dl
1000 2861 1000 2861 Dl
1000 2861 999 2863 Dl
998 2863 998 2863 Dl
998 2863 997 2865 Dl
996 2865 996 2867 Dl
996 2866 995 2866 Dl
994 2866 994 2867 Dl
994 2868 993 2870 Dl
992 2870 992 2870 Dl
992 2870 992 2872 Dl
992 2872 991 2873 Dl
990 2873 990 2873 Dl
990 2873 990 2875 Dl
990 2876 990 2878 Dl
990 2877 990 2877 Dl
990 2877 989 2879 Dl
989 2879 989 2880 Dl
989 2881 989 2883 Dl
989 2883 989 2883 Dl
989 2883 989 2885 Dl
989 2884 989 2885 Dl
989 2886 989 2886 Dl
989 2886 989 2888 Dl
989 2888 989 2890 Dl
989 2890 989 2892 Dl
989 2891 990 2891 Dl
990 2891 990 2892 Dl
990 2894 990 2894 Dl
990 2894 990 2896 Dl
990 2895 991 2895 Dl
992 2895 992 2897 Dl
992 2897 993 2897 Dl
994 2897 994 2897 Dl
994 2897 995 2899 Dl
996 2899 996 2899 Dl
996 2899 997 2899 Dl
998 2899 999 2899 Dl
1000 2899 1001 2900 Dl
1001 2901 1002 2901 Dl
1003 2901 1004 2901 Dl
1005 2901 1005 2901 Dl
1005 2901 1006 2901 Dl
1007 2901 1008 2901 Dl
1008 2901 1009 2901 Dl
1010 2901 1011 2901 Dl
1012 2901 1013 2903 Dl
1014 2902 1014 2902 Dl
1014 2902 1015 2902 Dl
1016 2902 1017 2902 Dl
1017 2902 1018 2902 Dl
1019 2902 1019 2902 Dl
1019 2902 1020 2900 Dl
1021 2901 1022 2901 Dl
1023 2901 1023 2901 Dl
1023 2901 1025 2901 Dl
1025 2901 1026 2901 Dl
1026 2901 1026 2900 Dl
1026 2899 1027 2899 Dl
1028 2899 1028 2899 Dl
1028 2899 1028 2897 Dl
1028 2897 1029 2897 Dl
1030 2897 1030 2895 Dl
1030 2895 1031 2895 Dl
1032 2895 1032 2893 Dl
1032 2894 1032 2894 Dl
1032 2894 1033 2893 Dl
1034 2891 1034 2889 Dl
1034 2890 1035 2890 Dl
1036 2890 1036 2888 Dl
1036 2888 1036 2888 Dl
1036 2888 1037 2886 Dl
1037 2886 1038 2886 Dl
1039 2886 1039 2885 Dl
1039 2884 1040 2884 Dl
1041 2884 1041 2882 Dl
1041 2883 1042 2883 Dl
1043 2883 1043 2881 Dl
1043 2881 1044 2881 Dl
1044 2881 1044 2880 Dl
1044 2879 1045 2879 Dl
1046 2879 1046 2877 Dl
1046 2877 1047 2877 Dl
1048 2877 1048 2875 Dl
1048 2876 1048 2876 Dl
1048 2876 1049 2874 Dl
1050 2873 1050 2873 Dl
1050 2873 1050 2872 Dl
1050 2872 1050 2870 Dl
1050 2870 1050 2870 Dl
1050 2870 1050 2868 Dl
1050 2868 1050 2868 Dl
1050 2868 1050 2867 Dl
1050 2866 1050 2866 Dl
1050 2866 1050 2864 Dl
1050 2865 1050 2865 Dl
1050 2865 1049 2863 Dl
1048 2863 1048 2861 Dl
1048 2861 1047 2861 Dl
1046 2861 1046 2861 Dl
1046 2861 1045 2860 Dl
1044 2859 1044 2859 Dl
1044 2859 1043 2859 Dl
1043 2859 1043 2857 Dl
1043 2858 1042 2858 Dl
1041 2858 1040 2858 Dl
1039 2858 1039 2858 Dl
1039 2858 1038 2856 Dl
1037 2855 1036 2855 Dl
1036 2855 1036 2855 Dl
1036 2855 1035 2855 Dl
1034 2855 1034 2855 Dl
1034 2855 1033 2855 Dl
1032 2855 1032 2855 Dl
1032 2855 1031 2854 Dl
1030 2854 1029 2854 Dl
1028 2854 1028 2854 Dl
1028 2854 1027 2854 Dl
1026 2854 1026 2854 Dl
1026 2854 1025 2854 Dl
1025 2854 1023 2854 Dl
1023 2854 1022 2854 Dl
1021 2854 1021 2854 Dl
1021 2854 1020 2854 Dl
1019 2854 1018 2854 Dl
994 2899 994 2899 Dl
994 2899 994 2899 Dl
994 2899 995 2900 Dl
996 2901 996 2901 Dl
996 2901 997 2903 Dl
998 2902 999 2904 Dl
1000 2904 1001 2905 Dl
1001 2906 1002 2906 Dl
1003 2906 1003 2906 Dl
1003 2906 1004 2908 Dl
1005 2908 1005 2908 Dl
1005 2908 1006 2908 Dl
1007 2908 1008 2910 Dl
1008 2909 1009 2909 Dl
1010 2909 1010 2909 Dl
1010 2909 1011 2909 Dl
1012 2909 1013 2909 Dl
1014 2909 1015 2909 Dl
1016 2909 1017 2909 Dl
1017 2909 1017 2909 Dl
1017 2909 1018 2909 Dl
1019 2909 1020 2909 Dl
1021 2909 1022 2909 Dl
1023 2909 1023 2909 Dl
1023 2909 1025 2909 Dl
1025 2909 1026 2909 Dl
1026 2909 1027 2909 Dl
1028 2909 1029 2909 Dl
1030 2909 1030 2907 Dl
1030 2908 1031 2908 Dl
1032 2908 1033 2908 Dl
1034 2908 1034 2908 Dl
1034 2908 1035 2906 Dl
1036 2906 1037 2906 Dl
1037 2906 1037 2905 Dl
1037 2904 1038 2904 Dl
1039 2904 1039 2904 Dl
1039 2904 1040 2902 Dl
1041 2902 1041 2902 Dl
1041 2902 1042 2900 Dl
1043 2901 1043 2901 Dl
1043 2901 1044 2900 Dl
1044 2899 1045 2897 Dl
1046 2897 1046 2897 Dl
1046 2897 1046 2895 Dl
1046 2895 1047 2895 Dl
1048 2895 1048 2893 Dl
1048 2894 1049 2893 Dl
1050 2891 1050 2891 Dl
1050 2891 1051 2889 Dl
1052 2890 1052 2890 Dl
1052 2890 1053 2888 Dl
1054 2888 1054 2888 Dl
1054 2888 1055 2886 Dl
1055 2886 1055 2886 Dl
1055 2886 1056 2885 Dl
1057 2884 1057 2884 Dl
1057 2884 1058 2882 Dl
1059 2883 1060 2883 Dl
1061 2883 1061 2881 Dl
1061 2881 1062 2881 Dl
1062 2881 1063 2880 Dl
1064 2879 1064 2879 Dl
1064 2879 1065 2879 Dl
1066 2879 1067 2877 Dl
1067 2877 1067 2877 Dl
1067 2877 1069 2875 Dl
1070 2876 1070 2876 Dl
1070 2876 1070 2874 Dl
1070 2873 1070 2872 Dl
1070 2872 1071 2872 Dl
1072 2872 1072 2870 Dl
1072 2870 1072 2870 Dl
1072 2870 1072 2868 Dl
1072 2868 1072 2867 Dl
1072 2866 1072 2864 Dl
1072 2865 1072 2865 Dl
1072 2865 1071 2863 Dl
1070 2863 1070 2863 Dl
1070 2863 1070 2861 Dl
1070 2861 1070 2860 Dl
1070 2859 1070 2859 Dl
1070 2859 1068 2857 Dl
1067 2858 1067 2856 Dl
1067 2855 1067 2855 Dl
1067 2855 1066 2855 Dl
1066 2855 1066 2854 Dl
1066 2854 1065 2854 Dl
1064 2854 1064 2852 Dl
1064 2852 1063 2852 Dl
1062 2852 1062 2852 Dl
1062 2852 1061 2850 Dl
1061 2850 1060 2850 Dl
1059 2850 1059 2850 Dl
1059 2850 1058 2848 Dl
1057 2848 1057 2848 Dl
1057 2848 1056 2848 Dl
1055 2848 1054 2848 Dl
1054 2848 1054 2847 Dl
1054 2847 1053 2847 Dl
1052 2847 1051 2847 Dl
1050 2847 1050 2847 Dl
1050 2847 1049 2847 Dl
1048 2847 1047 2845 Dl
1046 2845 1046 2845 Dl
1046 2845 1045 2845 Dl
1044 2845 1043 2845 Dl
1043 2845 1042 2845 Dl
1041 2845 1040 2847 Dl
1039 2847 1039 2847 Dl
1039 2847 1038 2847 Dl
1037 2847 1036 2847 Dl
1036 2847 1036 2848 Dl
1036 2848 1035 2848 Dl
1034 2848 1033 2850 Dl
1032 2850 1031 2852 Dl
1030 2852 1030 2852 Dl
1030 2852 1030 2852 Dl
927 2721 926 2513 Dl
977 2463 711 2312 Dl
690 2656 691 2329 Dl
956 2812 955 2480 Dl
956 2811 979 2799 Dl
980 2798 978 2466 Dl
890 2307 1017 2255 Dl
1017 2254 1058 2275 Dl
1172 2328 1171 2344 Dl
1170 2344 1225 2376 Dl
1226 2377 1229 2571 Dl
1230 2571 1018 2686 Dl
1017 2686 1012 2698 Dl
1226 2379 1021 2476 Dl
1021 2476 1021 2485 Dl
1021 2485 1014 2492 Dl
1016 2490 1016 2695 Dl
1196 2591 1195 2625 Dl
918 2762 918 2748 Dl
918 2747 903 2742 Dl
902 2742 902 2756 Dl
893 2750 893 2747 Dl
893 2746 894 2746 Dl
895 2746 895 2751 Dl
719 2634 731 2646 Dl
731 2647 731 2655 Dl
756 2686 756 2689 Dl
756 2690 757 2690 Dl
766 2692 766 2695 Dl
766 2696 769 2696 Dl
776 2697 776 2700 Dl
776 2701 777 2701 Dl
785 2704 785 2705 Dl
785 2706 786 2706 Dl
794 2710 794 2712 Dl
794 2711 795 2711 Dl
803 2715 803 2718 Dl
803 2719 804 2719 Dl
812 2721 812 2724 Dl
812 2724 813 2724 Dl
823 2726 823 2729 Dl
823 2729 824 2729 Dl
832 2732 832 2733 Dl
832 2733 835 2733 Dl
843 2737 843 2740 Dl
843 2740 846 2740 Dl
690 2328 690 2328 Dl
690 2328 690 2328 Dl
690 2328 690 2328 Dl
690 2328 691 2327 Dl
692 2326 692 2326 Dl
692 2326 693 2324 Dl
694 2325 694 2323 Dl
694 2323 695 2323 Dl
695 2323 696 2321 Dl
697 2321 699 2320 Dl
699 2319 700 2317 Dl
701 2318 704 2316 Dl
704 2315 707 2314 Dl
708 2314 711 2312 Dl
712 2312 715 2310 Dl
715 2310 720 2308 Dl
720 2308 723 2307 Dl
724 2307 727 2307 Dl
728 2307 731 2305 Dl
731 2305 732 2305 Dl
733 2305 734 2305 Dl
735 2305 736 2305 Dl
737 2305 737 2305 Dl
737 2305 738 2305 Dl
738 2305 738 2303 Dl
738 2303 739 2303 Dl
740 2303 741 2303 Dl
742 2303 744 2303 Dl
744 2303 745 2303 Dl
746 2303 749 2303 Dl
749 2303 754 2301 Dl
755 2301 760 2301 Dl
760 2301 765 2301 Dl
766 2301 771 2301 Dl
771 2301 774 2300 Dl
774 2300 779 2300 Dl
780 2300 783 2300 Dl
784 2300 785 2300 Dl
785 2300 786 2300 Dl
787 2300 789 2300 Dl
789 2300 790 2300 Dl
791 2300 791 2300 Dl
791 2300 791 2300 Dl
791 2300 792 2300 Dl
792 2300 792 2300 Dl
792 2300 793 2300 Dl
794 2300 795 2300 Dl
796 2300 797 2300 Dl
798 2300 801 2300 Dl
802 2300 805 2300 Dl
805 2300 810 2300 Dl
810 2300 815 2301 Dl
816 2301 821 2301 Dl
821 2301 826 2301 Dl
827 2301 832 2301 Dl
832 2301 837 2301 Dl
838 2301 841 2301 Dl
841 2301 844 2303 Dl
845 2303 848 2303 Dl
848 2303 849 2303 Dl
850 2303 853 2303 Dl
854 2303 854 2303 Dl
854 2303 856 2303 Dl
856 2303 857 2303 Dl
857 2303 857 2303 Dl
857 2303 858 2303 Dl
859 2303 860 2305 Dl
861 2305 861 2305 Dl
861 2305 862 2305 Dl
863 2305 864 2305 Dl
864 2305 867 2305 Dl
868 2305 871 2305 Dl
872 2305 875 2305 Dl
875 2305 878 2305 Dl
879 2305 884 2307 Dl
884 2307 889 2307 Dl
890 2307 895 2307 Dl
895 2307 902 2307 Dl
902 2307 907 2307 Dl
908 2307 911 2307 Dl
911 2307 916 2307 Dl
917 2307 920 2307 Dl
920 2307 921 2307 Dl
922 2307 925 2307 Dl
926 2307 926 2307 Dl
926 2307 927 2307 Dl
927 2307 928 2307 Dl
929 2307 929 2307 Dl
929 2307 930 2307 Dl
931 2307 931 2307 Dl
931 2307 932 2307 Dl
933 2307 933 2307 Dl
933 2307 936 2307 Dl
936 2307 937 2307 Dl
938 2307 941 2307 Dl
942 2307 943 2307 Dl
944 2307 949 2307 Dl
949 2307 952 2307 Dl
953 2307 958 2307 Dl
958 2307 963 2307 Dl
964 2307 969 2307 Dl
969 2307 972 2307 Dl
972 2307 975 2307 Dl
976 2307 977 2307 Dl
977 2307 977 2307 Dl
977 2307 979 2307 Dl
980 2307 980 2307 Dl
980 2307 980 2307 Dl
980 2307 980 2307 Dl
980 2307 981 2307 Dl
982 2307 982 2307 Dl
982 2307 985 2307 Dl
985 2307 986 2307 Dl
987 2307 990 2305 Dl
990 2305 995 2305 Dl
996 2305 999 2303 Dl
1000 2303 1003 2303 Dl
1003 2303 1006 2301 Dl
1007 2301 1008 2301 Dl
1008 2301 1009 2300 Dl
1010 2300 1011 2300 Dl
1012 2300 1012 2300 Dl
1012 2300 1012 2300 Dl
1012 2300 1013 2298 Dl
1014 2297 1014 2297 Dl
1014 2297 1015 2297 Dl
1016 2297 1016 2295 Dl
1016 2296 1017 2296 Dl
1017 2296 1020 2295 Dl
1021 2294 1024 2292 Dl
1025 2292 1028 2292 Dl
1028 2292 1031 2289 Dl
1032 2289 1033 2289 Dl
1034 2289 1037 2288 Dl
1037 2287 1038 2285 Dl
1039 2285 1039 2285 Dl
1039 2285 1039 2285 Dl
1039 2285 1039 2285 Dl
1039 2285 1040 2283 Dl
1041 2283 1041 2283 Dl
1041 2283 1041 2283 Dl
1041 2283 1042 2282 Dl
1043 2282 1044 2282 Dl
1044 2282 1047 2280 Dl
1048 2279 1049 2277 Dl
1050 2278 1053 2276 Dl
1054 2276 1057 2275 Dl
1057 2274 1058 2274 Dl
1059 2274 1062 2272 Dl
1062 2272 1063 2272 Dl
1064 2272 1065 2272 Dl
1066 2272 1067 2270 Dl
1067 2271 1069 2271 Dl
1070 2271 1070 2271 Dl
1070 2271 1071 2271 Dl
1072 2271 1072 2271 Dl
954 2480 954 2480 Dl
954 2480 954 2480 Dl
954 2480 954 2480 Dl
954 2480 955 2480 Dl
956 2480 957 2478 Dl
958 2477 959 2477 Dl
960 2477 961 2475 Dl
962 2476 963 2475 Dl
964 2474 965 2474 Dl
965 2474 966 2472 Dl
967 2472 970 2470 Dl
970 2470 971 2468 Dl
972 2469 975 2468 Dl
976 2467 979 2465 Dl
980 2465 983 2463 Dl
983 2463 984 2462 Dl
985 2462 986 2462 Dl
987 2462 988 2460 Dl
989 2459 989 2459 Dl
989 2459 990 2459 Dl
990 2459 990 2459 Dl
990 2459 991 2459 Dl
992 2459 992 2457 Dl
992 2458 993 2458 Dl
994 2458 997 2456 Dl
998 2456 999 2455 Dl
1000 2454 1003 2452 Dl
1003 2452 1006 2449 Dl
1007 2449 1008 2447 Dl
1008 2447 1009 2445 Dl
1010 2445 1011 2445 Dl
1012 2445 1012 2443 Dl
1012 2444 1012 2444 Dl
1012 2444 1013 2444 Dl
1014 2444 1014 2444 Dl
1014 2444 1014 2444 Dl
1014 2444 1014 2443 Dl
1014 2441 1015 2439 Dl
1016 2440 1017 2438 Dl
1017 2438 1018 2436 Dl
1019 2436 1020 2433 Dl
1021 2433 1024 2431 Dl
1025 2431 1026 2428 Dl
1026 2427 1027 2425 Dl
1028 2426 1029 2424 Dl
1030 2423 1030 2422 Dl
1030 2422 1030 2422 Dl
1030 2422 1030 2420 Dl
1030 2420 1031 2420 Dl
1032 2420 1032 2420 Dl
1032 2420 1032 2418 Dl
1032 2418 1032 2418 Dl
1032 2418 1033 2417 Dl
1034 2416 1034 2414 Dl
1034 2415 1035 2413 Dl
1036 2413 1039 2410 Dl
1039 2409 1040 2407 Dl
1041 2408 1042 2405 Dl
1043 2404 1046 2401 Dl
1046 2400 1047 2398 Dl
1048 2398 1048 2398 Dl
1048 2398 1049 2397 Dl
1050 2397 1050 2397 Dl
1050 2397 1050 2397 Dl
1050 2397 1050 2397 Dl
1050 2397 1050 2397 Dl
1050 2397 1050 2397 Dl
1050 2397 1051 2395 Dl
1052 2395 1053 2393 Dl
1054 2393 1057 2391 Dl
1057 2391 1060 2388 Dl
1061 2387 1064 2385 Dl
1064 2386 1067 2385 Dl
1067 2384 1070 2382 Dl
1072 2382 1073 2380 Dl
1073 2380 1074 2378 Dl
1075 2379 1076 2379 Dl
1077 2379 1077 2379 Dl
1077 2379 1078 2379 Dl
1079 2379 1079 2378 Dl
1079 2377 1079 2377 Dl
1079 2377 1079 2377 Dl
1079 2377 1080 2377 Dl
1080 2377 1081 2377 Dl
1082 2377 1083 2375 Dl
1084 2375 1087 2373 Dl
1088 2373 1091 2372 Dl
1091 2372 1096 2369 Dl
1097 2368 1104 2365 Dl
1104 2364 1107 2362 Dl
1107 2362 1112 2360 Dl
1113 2361 1116 2358 Dl
1116 2357 1121 2355 Dl
1122 2355 1125 2353 Dl
1126 2354 1129 2353 Dl
1129 2351 1132 2348 Dl
1133 2348 1138 2346 Dl
1138 2346 1141 2345 Dl
1142 2344 1145 2342 Dl
1145 2343 1148 2341 Dl
1149 2341 1150 2340 Dl
1150 2339 1153 2337 Dl
1154 2337 1157 2335 Dl
1157 2336 1160 2336 Dl
1162 2336 1163 2334 Dl
1163 2333 1164 2332 Dl
1165 2332 1166 2332 Dl
1167 2332 1168 2330 Dl
1169 2330 1170 2330 Dl
1170 2330 1170 2330 Dl
1170 2330 1170 2330 Dl
1170 2330 1170 2328 Dl
1170 2328 1170 2328 Dl
1170 2328 1170 2328 Dl
1170 2328 1170 2328 Dl
1170 2328 1169 2328 Dl
1169 2328 1169 2327 Dl
1169 2326 1168 2324 Dl
1167 2325 1166 2323 Dl
1165 2323 1164 2323 Dl
1163 2323 1162 2320 Dl
1162 2319 1159 2317 Dl
1157 2318 1156 2316 Dl
1156 2315 1153 2314 Dl
1152 2314 1151 2312 Dl
1150 2312 1147 2310 Dl
1147 2310 1146 2307 Dl
1145 2307 1142 2305 Dl
1142 2305 1139 2302 Dl
1138 2301 1133 2300 Dl
1133 2300 1130 2298 Dl
1129 2297 1126 2294 Dl
1126 2294 1121 2292 Dl
1120 2292 1115 2289 Dl
1115 2289 1110 2288 Dl
1109 2287 1106 2284 Dl
1106 2283 1101 2282 Dl
1100 2282 1097 2280 Dl
1097 2279 1094 2277 Dl
1093 2278 1090 2278 Dl
1090 2278 1087 2276 Dl
1086 2276 1085 2275 Dl
1084 2274 1081 2274 Dl
1080 2274 1079 2274 Dl
1079 2274 1076 2272 Dl
1075 2272 1074 2272 Dl
1073 2272 1072 2272 Dl
1072 2272 1071 2270 Dl
1070 2271 1068 2271 Dl
1067 2271 1067 2271 Dl
1067 2271 1067 2271 Dl
1067 2271 1067 2271 Dl
956 2481 956 2481 Dl
956 2481 956 2481 Dl
956 2481 955 2481 Dl
954 2481 954 2481 Dl
954 2481 953 2481 Dl
953 2481 953 2481 Dl
953 2481 952 2480 Dl
951 2480 948 2480 Dl
947 2480 946 2478 Dl
946 2477 943 2475 Dl
942 2476 941 2475 Dl
940 2474 937 2474 Dl
936 2474 933 2472 Dl
933 2472 928 2470 Dl
927 2470 924 2468 Dl
924 2469 919 2466 Dl
918 2465 915 2463 Dl
915 2463 910 2462 Dl
910 2462 905 2460 Dl
904 2459 901 2456 Dl
900 2456 895 2455 Dl
895 2454 890 2451 Dl
890 2451 885 2450 Dl
884 2449 879 2446 Dl
879 2445 872 2443 Dl
872 2444 867 2441 Dl
866 2440 861 2438 Dl
861 2438 854 2435 Dl
854 2434 849 2431 Dl
848 2431 841 2428 Dl
841 2427 834 2424 Dl
834 2423 827 2420 Dl
827 2420 820 2415 Dl
820 2415 813 2412 Dl
812 2411 805 2408 Dl
805 2408 797 2403 Dl
796 2402 789 2397 Dl
789 2397 782 2394 Dl
782 2393 775 2388 Dl
774 2387 767 2384 Dl
767 2384 760 2381 Dl
760 2380 755 2375 Dl
755 2375 750 2372 Dl
749 2372 744 2369 Dl
744 2368 741 2366 Dl
740 2366 735 2363 Dl
735 2362 732 2359 Dl
731 2359 726 2356 Dl
726 2355 723 2353 Dl
722 2354 719 2351 Dl
719 2350 716 2348 Dl
715 2348 712 2345 Dl
712 2344 709 2342 Dl
708 2343 707 2341 Dl
706 2341 703 2338 Dl
702 2337 701 2335 Dl
701 2336 698 2334 Dl
697 2333 696 2332 Dl
695 2332 694 2332 Dl
694 2332 694 2330 Dl
694 2330 693 2328 Dl
692 2328 691 2328 Dl
690 2328 690 2328 Dl
690 2328 690 2328 Dl
690 2328 690 2328 Dl
690 2328 690 2327 Dl
956 2811 956 2811 Dl
956 2811 955 2811 Dl
954 2811 954 2811 Dl
954 2811 953 2810 Dl
953 2809 950 2809 Dl
949 2809 948 2807 Dl
947 2807 944 2805 Dl
944 2805 943 2805 Dl
942 2805 939 2803 Dl
938 2804 935 2803 Dl
935 2801 932 2799 Dl
931 2800 928 2798 Dl
927 2798 926 2796 Dl
926 2796 923 2796 Dl
922 2796 919 2795 Dl
918 2794 915 2791 Dl
915 2791 914 2791 Dl
913 2791 910 2790 Dl
910 2789 910 2787 Dl
910 2787 909 2785 Dl
908 2786 908 2786 Dl
908 2786 908 2786 Dl
908 2786 908 2786 Dl
908 2786 908 2786 Dl
908 2786 909 2786 Dl
910 2786 911 2786 Dl
911 2786 912 2786 Dl
913 2786 913 2788 Dl
913 2787 914 2787 Dl
915 2787 916 2787 Dl
917 2787 918 2787 Dl
918 2787 918 2787 Dl
918 2787 918 2787 Dl
918 2787 918 2787 Dl
918 2787 918 2785 Dl
918 2786 917 2786 Dl
917 2786 916 2784 Dl
915 2783 912 2782 Dl
911 2782 906 2779 Dl
906 2778 903 2777 Dl
902 2776 899 2774 Dl
899 2775 896 2772 Dl
895 2771 892 2770 Dl
892 2769 887 2767 Dl
886 2768 883 2766 Dl
882 2765 881 2764 Dl
881 2764 878 2762 Dl
877 2762 874 2762 Dl
874 2762 873 2760 Dl
872 2760 871 2758 Dl
870 2758 869 2758 Dl
868 2758 867 2757 Dl
866 2757 863 2757 Dl
863 2757 862 2755 Dl
861 2755 860 2755 Dl
859 2755 858 2753 Dl
857 2753 856 2753 Dl
856 2753 853 2751 Dl
852 2751 849 2750 Dl
848 2750 847 2748 Dl
846 2747 841 2745 Dl
841 2746 838 2745 Dl
838 2744 833 2742 Dl
832 2742 827 2739 Dl
827 2739 822 2738 Dl
821 2737 816 2734 Dl
816 2733 811 2730 Dl
810 2729 803 2726 Dl
803 2726 798 2723 Dl
798 2722 793 2719 Dl
792 2719 787 2717 Dl
787 2717 784 2714 Dl
784 2714 781 2713 Dl
780 2711 779 2709 Dl
778 2710 777 2710 Dl
776 2710 775 2708 Dl
774 2708 773 2706 Dl
773 2706 773 2706 Dl
773 2706 772 2706 Dl
771 2706 771 2705 Dl
771 2704 771 2704 Dl
771 2704 770 2702 Dl
769 2703 768 2703 Dl
767 2703 767 2701 Dl
767 2701 766 2701 Dl
766 2701 763 2700 Dl
762 2699 761 2697 Dl
760 2697 757 2695 Dl
756 2696 753 2693 Dl
753 2692 748 2690 Dl
748 2690 745 2688 Dl
744 2688 739 2685 Dl
738 2685 733 2683 Dl
733 2683 730 2681 Dl
730 2681 729 2680 Dl
728 2679 728 2679 Dl
728 2679 727 2680 Dl
726 2681 727 2681 Dl
728 2681 728 2681 Dl
728 2681 728 2681 Dl
728 2681 727 2681 Dl
726 2681 726 2681 Dl
726 2681 723 2681 Dl
722 2681 721 2680 Dl
720 2679 715 2677 Dl
715 2678 714 2675 Dl
713 2674 710 2672 Dl
710 2672 707 2670 Dl
706 2670 705 2668 Dl
704 2668 701 2667 Dl
701 2667 700 2665 Dl
699 2665 697 2663 Dl
697 2663 696 2661 Dl
695 2661 694 2660 Dl
694 2660 693 2658 Dl
692 2657 691 2655 Dl
690 2656 689 2656 Dl
688 2656 688 2655 Dl
688 2654 688 2654 Dl
688 2654 688 2654 Dl
933 2513 933 2513 Dl
933 2513 933 2513 Dl
933 2513 933 2513 Dl
933 2513 932 2513 Dl
931 2513 931 2513 Dl
931 2513 930 2512 Dl
929 2512 928 2512 Dl
927 2512 924 2512 Dl
924 2512 923 2510 Dl
922 2510 919 2508 Dl
918 2508 915 2508 Dl
915 2508 912 2507 Dl
911 2506 908 2504 Dl
908 2505 905 2503 Dl
904 2503 901 2501 Dl
900 2501 895 2500 Dl
895 2499 892 2497 Dl
892 2498 887 2496 Dl
886 2495 881 2494 Dl
881 2494 878 2492 Dl
877 2492 872 2489 Dl
872 2488 867 2487 Dl
866 2487 861 2484 Dl
861 2483 856 2481 Dl
856 2481 851 2478 Dl
850 2477 843 2475 Dl
843 2476 838 2473 Dl
838 2472 831 2469 Dl
830 2469 823 2466 Dl
823 2465 818 2462 Dl
818 2462 811 2459 Dl
810 2458 803 2455 Dl
803 2454 796 2449 Dl
796 2449 791 2446 Dl
791 2445 784 2442 Dl
784 2441 779 2438 Dl
778 2438 773 2435 Dl
773 2434 768 2431 Dl
767 2431 764 2428 Dl
764 2427 759 2424 Dl
758 2423 755 2422 Dl
755 2422 752 2419 Dl
751 2418 748 2417 Dl
748 2416 745 2413 Dl
744 2413 741 2411 Dl
740 2411 737 2408 Dl
737 2408 734 2406 Dl
733 2405 732 2402 Dl
731 2402 728 2400 Dl
728 2400 727 2398 Dl
726 2398 725 2397 Dl
724 2397 723 2395 Dl
722 2395 721 2393 Dl
720 2393 718 2393 Dl
719 2393 719 2391 Dl
719 2391 718 2391 Dl
717 2391 717 2390 Dl
717 2390 717 2390 Dl
717 2390 717 2390 Dl
717 2390 716 2390 Dl
730 2607 730 2607 Dl
730 2607 730 2607 Dl
730 2607 730 2605 Dl
730 2606 730 2606 Dl
730 2606 730 2604 Dl
730 2603 730 2602 Dl
730 2602 729 2600 Dl
728 2600 728 2598 Dl
728 2598 728 2595 Dl
728 2595 728 2592 Dl
728 2591 728 2588 Dl
728 2588 727 2585 Dl
726 2584 726 2581 Dl
726 2580 726 2577 Dl
726 2577 726 2574 Dl
726 2573 726 2568 Dl
726 2567 725 2564 Dl
724 2564 724 2559 Dl
724 2559 724 2554 Dl
724 2553 724 2548 Dl
724 2548 724 2543 Dl
724 2542 723 2537 Dl
722 2537 722 2532 Dl
722 2531 722 2526 Dl
722 2526 722 2521 Dl
722 2521 722 2514 Dl
722 2513 722 2506 Dl
722 2506 722 2501 Dl
722 2501 722 2494 Dl
722 2494 722 2485 Dl
722 2485 722 2478 Dl
722 2477 722 2470 Dl
722 2470 722 2465 Dl
722 2465 722 2458 Dl
722 2458 722 2453 Dl
722 2452 722 2447 Dl
722 2447 722 2444 Dl
722 2444 722 2439 Dl
722 2438 723 2435 Dl
724 2434 724 2429 Dl
724 2429 724 2426 Dl
724 2426 724 2423 Dl
724 2422 725 2419 Dl
726 2418 726 2415 Dl
726 2415 726 2413 Dl
726 2413 726 2410 Dl
726 2409 726 2407 Dl
726 2408 726 2406 Dl
726 2405 726 2404 Dl
726 2404 727 2402 Dl
728 2402 728 2402 Dl
728 2402 728 2402 Dl
728 2402 728 2400 Dl
728 2400 728 2400 Dl
926 2719 926 2719 Dl
926 2719 926 2719 Dl
926 2719 925 2717 Dl
924 2717 924 2717 Dl
924 2717 923 2717 Dl
922 2717 921 2717 Dl
920 2717 919 2715 Dl
918 2715 917 2715 Dl
917 2715 916 2713 Dl
915 2714 912 2713 Dl
911 2711 908 2711 Dl
908 2711 905 2709 Dl
904 2710 901 2708 Dl
900 2708 897 2706 Dl
897 2706 894 2705 Dl
893 2704 888 2702 Dl
887 2703 884 2701 Dl
884 2701 879 2698 Dl
879 2697 876 2695 Dl
875 2696 870 2694 Dl
870 2693 865 2692 Dl
864 2692 861 2689 Dl
861 2688 856 2687 Dl
856 2686 851 2684 Dl
850 2685 845 2682 Dl
845 2681 840 2678 Dl
839 2678 834 2676 Dl
834 2675 827 2672 Dl
827 2672 822 2669 Dl
821 2668 814 2665 Dl
814 2665 809 2662 Dl
809 2661 802 2658 Dl
802 2657 795 2652 Dl
794 2652 787 2649 Dl
787 2649 782 2646 Dl
782 2645 777 2642 Dl
776 2642 771 2639 Dl
771 2638 768 2635 Dl
767 2634 762 2632 Dl
762 2632 759 2629 Dl
758 2629 755 2627 Dl
755 2627 752 2624 Dl
751 2624 750 2623 Dl
749 2621 746 2619 Dl
746 2620 743 2617 Dl
742 2616 741 2615 Dl
740 2614 739 2612 Dl
738 2613 737 2611 Dl
737 2611 736 2610 Dl
735 2609 734 2607 Dl
733 2607 732 2607 Dl
731 2607 731 2605 Dl
731 2606 730 2606 Dl
730 2606 730 2606 Dl
730 2606 730 2606 Dl
730 2606 730 2606 Dl
1197 2625 1197 2625 Dl
1197 2625 1197 2625 Dl
1197 2625 1196 2627 Dl
1196 2627 1196 2627 Dl
1196 2627 1195 2627 Dl
1194 2627 1193 2629 Dl
1192 2629 1191 2629 Dl
1190 2629 1189 2630 Dl
1188 2631 1185 2633 Dl
1185 2632 1182 2634 Dl
1181 2634 1178 2635 Dl
1178 2636 1175 2639 Dl
1174 2639 1171 2641 Dl
1170 2642 1165 2645 Dl
1165 2645 1160 2647 Dl
1160 2647 1155 2650 Dl
1154 2650 1149 2653 Dl
1149 2654 1144 2655 Dl
1144 2656 1139 2659 Dl
1138 2660 1133 2663 Dl
1133 2663 1128 2666 Dl
1127 2667 1122 2670 Dl
1122 2670 1115 2672 Dl
1115 2672 1110 2675 Dl
1109 2675 1104 2678 Dl
1104 2679 1099 2682 Dl
1098 2683 1093 2686 Dl
1093 2686 1086 2689 Dl
1086 2690 1081 2693 Dl
1080 2693 1075 2695 Dl
1075 2696 1070 2699 Dl
1070 2699 1065 2702 Dl
1064 2703 1059 2706 Dl
1059 2706 1054 2709 Dl
1054 2710 1049 2712 Dl
1048 2711 1043 2714 Dl
1043 2715 1040 2718 Dl
1039 2719 1036 2720 Dl
1036 2721 1033 2723 Dl
1032 2722 1031 2724 Dl
1030 2724 1027 2725 Dl
1026 2726 1025 2728 Dl
1025 2728 1023 2728 Dl
1023 2728 1022 2730 Dl
1021 2729 1020 2729 Dl
1019 2729 1019 2731 Dl
1019 2732 1018 2732 Dl
1017 2732 1017 2732 Dl
1017 2732 1017 2733 Dl
1017 2733 1017 2733 Dl
1017 2733 1017 2733 Dl
1017 2733 1017 2732 Dl
1017 2732 1017 2732 Dl
1017 2732 1017 2732 Dl
1017 2732 1018 2732 Dl
1019 2732 1019 2732 Dl
1019 2732 1020 2730 Dl
1021 2729 1021 2729 Dl
1021 2729 1022 2729 Dl
1023 2729 1023 2729 Dl
1023 2729 1023 2727 Dl
1023 2728 1025 2728 Dl
1025 2728 1025 2728 Dl
1025 2728 1026 2726 Dl
1026 2726 1026 2726 Dl
1026 2726 1027 2726 Dl
1028 2726 1028 2726 Dl
1028 2726 1029 2726 Dl
1030 2726 1030 2725 Dl
1030 2724 1030 2724 Dl
1030 2724 1030 2724 Dl
1030 2724 1031 2724 Dl
1032 2724 1032 2724 Dl
1032 2724 1032 2724 Dl
1032 2724 1032 2725 Dl
1032 2726 1032 2726 Dl
1032 2726 1032 2726 Dl
1032 2726 1032 2726 Dl
1032 2726 1031 2728 Dl
1030 2728 1030 2728 Dl
1030 2728 1030 2730 Dl
1030 2729 1030 2729 Dl
1030 2729 1029 2731 Dl
1028 2732 1027 2735 Dl
1026 2735 1025 2737 Dl
1025 2737 1025 2738 Dl
1025 2739 1025 2741 Dl
1025 2740 1023 2740 Dl
1023 2740 1023 2742 Dl
1023 2742 1023 2742 Dl
1023 2742 1023 2744 Dl
1023 2744 1023 2744 Dl
1023 2744 1022 2745 Dl
1021 2746 1020 2749 Dl
1019 2750 1018 2753 Dl
1017 2753 1016 2756 Dl
1016 2757 1015 2760 Dl
1014 2760 1013 2762 Dl
1012 2762 1011 2765 Dl
1010 2765 1010 2767 Dl
1010 2768 1009 2770 Dl
1008 2769 1008 2769 Dl
1008 2769 1008 2770 Dl
1008 2771 1008 2771 Dl
1008 2771 1008 2771 Dl
1008 2771 1007 2773 Dl
1007 2773 1006 2775 Dl
1005 2775 1005 2777 Dl
1005 2776 1002 2779 Dl
1001 2780 1000 2782 Dl
1000 2782 997 2785 Dl
996 2786 995 2788 Dl
994 2787 993 2789 Dl
992 2789 989 2790 Dl
989 2791 988 2793 Dl
987 2793 986 2795 Dl
985 2794 984 2794 Dl
983 2794 983 2795 Dl
983 2796 982 2796 Dl
982 2796 981 2796 Dl
980 2796 980 2798 Dl
980 2798 978 2798 Dl
977 2798 977 2798 Dl
780 2719 780 2719 Dl
780 2719 780 2719 Dl
780 2719 780 2719 Dl
780 2719 780 2720 Dl
780 2721 780 2723 Dl
780 2722 780 2724 Dl
780 2724 779 2727 Dl
778 2728 778 2730 Dl
778 2729 778 2732 Dl
778 2733 778 2735 Dl
778 2735 778 2738 Dl
778 2739 778 2742 Dl
778 2742 779 2745 Dl
780 2746 780 2749 Dl
780 2750 780 2753 Dl
780 2753 781 2756 Dl
782 2757 783 2760 Dl
784 2760 785 2765 Dl
785 2765 786 2768 Dl
787 2769 790 2772 Dl
791 2773 792 2776 Dl
792 2776 795 2779 Dl
796 2780 797 2782 Dl
798 2782 799 2783 Dl
800 2783 801 2785 Dl
802 2786 803 2788 Dl
803 2787 804 2787 Dl
805 2787 805 2787 Dl
805 2787 806 2787 Dl
807 2787 807 2789 Dl
807 2789 808 2789 Dl
809 2789 809 2789 Dl
809 2789 811 2790 Dl
810 2791 813 2791 Dl
814 2791 815 2793 Dl
816 2793 819 2795 Dl
820 2794 823 2795 Dl
823 2796 828 2798 Dl
828 2798 833 2801 Dl
834 2801 837 2802 Dl
838 2804 843 2806 Dl
843 2805 846 2807 Dl
846 2807 849 2809 Dl
850 2809 853 2810 Dl
854 2811 856 2811 Dl
856 2811 857 2811 Dl
857 2811 857 2813 Dl
857 2812 858 2812 Dl
859 2812 859 2812 Dl
859 2812 860 2812 Dl
861 2812 861 2812 Dl
861 2812 862 2812 Dl
863 2812 864 2814 Dl
864 2814 865 2814 Dl
866 2814 869 2814 Dl
870 2814 873 2815 Dl
874 2816 877 2816 Dl
877 2816 884 2818 Dl
884 2818 889 2818 Dl
890 2818 895 2820 Dl
895 2819 900 2819 Dl
900 2819 905 2819 Dl
906 2819 909 2819 Dl
910 2819 913 2821 Dl
913 2822 916 2822 Dl
917 2822 918 2822 Dl
918 2822 919 2822 Dl
920 2822 920 2822 Dl
920 2822 921 2822 Dl
922 2822 923 2822 Dl
924 2822 924 2822 Dl
924 2822 925 2822 Dl
926 2822 926 2822 Dl
926 2822 927 2822 Dl
927 2822 930 2822 Dl
931 2822 932 2822 Dl
933 2822 936 2822 Dl
936 2822 941 2820 Dl
942 2819 945 2819 Dl
946 2819 951 2819 Dl
951 2819 958 2817 Dl
958 2818 963 2818 Dl
964 2818 969 2816 Dl
969 2816 974 2816 Dl
974 2816 977 2815 Dl
977 2814 980 2814 Dl
982 2814 985 2812 Dl
985 2812 986 2812 Dl
987 2812 988 2812 Dl
989 2812 990 2810 Dl
990 2811 990 2811 Dl
990 2811 991 2811 Dl
992 2811 993 2811 Dl
994 2811 994 2810 Dl
994 2809 995 2809 Dl
996 2809 997 2809 Dl
998 2809 999 2807 Dl
1000 2807 1001 2807 Dl
1001 2807 1004 2805 Dl
1005 2805 1008 2803 Dl
1008 2804 1011 2803 Dl
1012 2801 1017 2799 Dl
1017 2800 1020 2798 Dl
1021 2798 1026 2795 Dl
1026 2794 1031 2792 Dl
1032 2793 1035 2790 Dl
1036 2789 1039 2787 Dl
1039 2787 1040 2787 Dl
1041 2787 1042 2785 Dl
1043 2786 1044 2786 Dl
1044 2786 1044 2786 Dl
1044 2786 1044 2784 Dl
1044 2783 1045 2783 Dl
1046 2783 1046 2783 Dl
1046 2783 1046 2783 Dl
1046 2783 1047 2782 Dl
1048 2782 1049 2780 Dl
1050 2780 1051 2778 Dl
1052 2778 1053 2775 Dl
1054 2775 1057 2772 Dl
1057 2771 1058 2768 Dl
1059 2768 1062 2765 Dl
1062 2764 1063 2759 Dl
1064 2758 1065 2755 Dl
1066 2755 1067 2752 Dl
1067 2751 1067 2748 Dl
1067 2747 1069 2744 Dl
1070 2744 1070 2741 Dl
1070 2740 1070 2737 Dl
1070 2737 1071 2735 Dl
1072 2735 1072 2732 Dl
1072 2732 1072 2730 Dl
1072 2729 1072 2727 Dl
1072 2728 1072 2725 Dl
1072 2724 1072 2724 Dl
1072 2724 1072 2722 Dl
1072 2722 1072 2722 Dl
1072 2722 1072 2722 Dl
780 2757 780 2757 Dl
780 2757 780 2757 Dl
780 2757 780 2757 Dl
780 2757 780 2758 Dl
780 2758 781 2760 Dl
782 2760 782 2762 Dl
782 2762 782 2764 Dl
782 2764 783 2765 Dl
784 2765 785 2768 Dl
785 2769 785 2770 Dl
785 2771 786 2774 Dl
787 2775 789 2778 Dl
789 2778 790 2780 Dl
791 2780 792 2783 Dl
792 2783 795 2786 Dl
796 2787 799 2790 Dl
800 2791 803 2794 Dl
803 2794 806 2797 Dl
807 2798 812 2801 Dl
812 2801 815 2802 Dl
816 2804 821 2807 Dl
821 2807 824 2809 Dl
825 2809 828 2810 Dl
828 2811 831 2813 Dl
832 2812 835 2814 Dl
836 2814 837 2815 Dl
838 2816 839 2816 Dl
839 2816 840 2818 Dl
841 2818 842 2818 Dl
843 2818 843 2818 Dl
843 2818 844 2818 Dl
845 2818 845 2820 Dl
845 2819 846 2819 Dl
846 2819 847 2819 Dl
848 2819 849 2819 Dl
850 2819 851 2821 Dl
852 2822 853 2822 Dl
854 2822 857 2822 Dl
857 2822 862 2823 Dl
863 2823 866 2825 Dl
866 2825 871 2825 Dl
872 2825 877 2827 Dl
877 2827 884 2827 Dl
884 2827 889 2828 Dl
890 2829 897 2829 Dl
897 2829 902 2831 Dl
902 2830 905 2830 Dl
906 2830 911 2830 Dl
911 2830 912 2830 Dl
913 2830 916 2830 Dl
917 2830 918 2830 Dl
918 2830 919 2830 Dl
920 2830 921 2830 Dl
922 2830 923 2830 Dl
924 2830 924 2830 Dl
924 2830 925 2830 Dl
926 2830 926 2830 Dl
926 2830 927 2830 Dl
927 2830 928 2830 Dl
929 2830 930 2830 Dl
931 2830 934 2830 Dl
935 2830 938 2828 Dl
938 2829 941 2829 Dl
942 2829 945 2829 Dl
946 2829 951 2828 Dl
951 2827 958 2827 Dl
958 2827 963 2825 Dl
964 2825 971 2825 Dl
970 2825 975 2823 Dl
976 2823 981 2822 Dl
982 2822 985 2822 Dl
985 2822 988 2820 Dl
989 2819 992 2819 Dl
992 2819 993 2819 Dl
994 2819 995 2817 Dl
996 2818 997 2818 Dl
998 2818 999 2818 Dl
1000 2818 1000 2818 Dl
1000 2818 1001 2818 Dl
1001 2818 1001 2818 Dl
1001 2818 1002 2816 Dl
1003 2816 1004 2816 Dl
1005 2816 1006 2815 Dl
1007 2814 1008 2814 Dl
1008 2814 1011 2812 Dl
1012 2812 1015 2810 Dl
1016 2811 1019 2810 Dl
1019 2809 1024 2806 Dl
1025 2805 1030 2803 Dl
1030 2804 1033 2801 Dl
1034 2800 1039 2797 Dl
1039 2796 1042 2795 Dl
1043 2794 1046 2791 Dl
1046 2791 1049 2788 Dl
1050 2787 1051 2785 Dl
1052 2786 1053 2783 Dl
1054 2782 1055 2780 Dl
1055 2780 1056 2778 Dl
1057 2778 1058 2775 Dl
1059 2775 1060 2773 Dl
1061 2773 1062 2771 Dl
1062 2771 1062 2770 Dl
1062 2769 1063 2767 Dl
1064 2768 1064 2766 Dl
1064 2765 1064 2765 Dl
1064 2765 1064 2764 Dl
1064 2764 1065 2764 Dl
1066 2764 1066 2764 Dl
929 2773 929 2773 Dl
929 2773 929 2773 Dl
929 2773 928 2773 Dl
927 2773 927 2773 Dl
927 2773 926 2771 Dl
926 2771 926 2771 Dl
926 2771 923 2770 Dl
922 2769 921 2769 Dl
920 2769 919 2767 Dl
918 2768 915 2766 Dl
915 2765 912 2764 Dl
911 2764 908 2762 Dl
908 2762 905 2760 Dl
904 2760 899 2758 Dl
899 2758 896 2757 Dl
895 2757 890 2755 Dl
890 2755 887 2753 Dl
886 2753 881 2751 Dl
881 2751 878 2748 Dl
877 2747 872 2745 Dl
872 2746 867 2745 Dl
866 2744 861 2741 Dl
861 2740 856 2738 Dl
856 2739 851 2736 Dl
850 2735 845 2733 Dl
845 2733 838 2730 Dl
838 2729 833 2726 Dl
832 2726 827 2723 Dl
827 2722 820 2719 Dl
820 2719 813 2716 Dl
812 2715 807 2712 Dl
807 2711 799 2708 Dl
798 2708 791 2705 Dl
791 2704 786 2701 Dl
785 2701 778 2698 Dl
778 2697 773 2694 Dl
773 2693 768 2690 Dl
767 2690 762 2687 Dl
762 2686 759 2684 Dl
758 2685 755 2682 Dl
755 2681 752 2680 Dl
751 2679 748 2676 Dl
748 2675 745 2674 Dl
744 2674 741 2672 Dl
740 2672 739 2670 Dl
738 2670 735 2668 Dl
735 2668 734 2667 Dl
733 2667 732 2665 Dl
731 2665 730 2663 Dl
730 2663 729 2663 Dl
728 2663 727 2661 Dl
726 2661 726 2661 Dl
726 2661 725 2660 Dl
724 2660 724 2660 Dl
724 2660 724 2660 Dl
724 2660 724 2660 Dl
1302 2606 1230 2624 Dl
1302 2642 1230 2624 Dl
1230 2624 1590 2624 Dl
(read) 1317 2586 w
1590 2624 360 360 De
(reader) 1635 2586 w
(process) 1606 2706 w
1950 2624 2310 2624 Dl
2237 2642 2309 2624 Dl
2237 2606 2309 2624 Dl
(update) 1983 2586 w
2309 2696 2309 2552 Dl
2309 2552 2849 2552 Dl
2849 2552 2849 2696 Dl
2849 2696 2309 2696 Dl
(message) 2394 2646 w
2921 2606 2849 2624 Dl
2921 2642 2849 2624 Dl
2849 2624 3209 2624 Dl
(poll) 2943 2586 w
3209 1904 360 360 De
(panel) 3271 1866 w
(process) 3225 1986 w
3570 1904 3930 1904 Dl
3858 1922 3930 1904 Dl
3858 1886 3930 1904 Dl
(write) 3638 1866 w
4125 2017 11 -4 11 4 Da
4099 2014 10 -4 11 4 Da
4076 2013 10 -5 11 5 Da
3930 1792 3930 1998 Dl
3930 1999 4210 2023 Dl
4209 2023 4209 1813 Dl
4209 1812 3929 1793 Dl
4238 1875 4286 1856 Dl
4286 1856 4238 1854 Dl
4238 1854 4238 1875 Dl
3943 1807 3943 1979 Dl
3943 1979 4194 2000 Dl
4194 2001 4194 1828 Dl
4194 1827 3943 1807 Dl
4209 1812 4207 2022 Dl
4207 2023 4237 1997 Dl
4238 1996 4238 1805 Dl
4238 1805 4220 1803 Dl
4220 1803 4208 1811 Dl
4207 1812 4209 1812 Dl
4238 1973 4286 1923 Dl
4286 1922 4286 1857 Dl
4286 1856 4238 1875 Dl
4238 1875 4238 1972 Dl
4176 2012 14 14 De
4155 2009 14 14 De
3930 1792 3956 1783 Dl
3957 1783 4220 1803 Dl
4220 1803 4210 1811 Dl
4209 1812 3929 1793 Dl
3956 1819 3956 1970 Dl
3956 1970 4177 1989 Dl
4178 1990 4178 1839 Dl
4178 1838 3957 1819 Dl
3209 2624 360 360 De
(panel) 3271 2586 w
(process) 3225 2706 w
3570 2624 3930 2624 Dl
3858 2642 3930 2624 Dl
3858 2606 3930 2624 Dl
(write) 3638 2586 w
4125 2737 11 -4 11 4 Da
4099 2734 10 -4 11 4 Da
4076 2733 10 -5 11 5 Da
3930 2512 3930 2718 Dl
3930 2719 4210 2743 Dl
4209 2743 4209 2533 Dl
4209 2532 3929 2513 Dl
4238 2595 4286 2576 Dl
4286 2576 4238 2574 Dl
4238 2574 4238 2595 Dl
3943 2527 3943 2699 Dl
3943 2699 4194 2720 Dl
4194 2721 4194 2548 Dl
4194 2547 3943 2527 Dl
4209 2532 4207 2742 Dl
4207 2743 4237 2717 Dl
4238 2716 4238 2525 Dl
4238 2525 4220 2523 Dl
4220 2523 4208 2531 Dl
4207 2532 4209 2532 Dl
4238 2693 4286 2643 Dl
4286 2642 4286 2577 Dl
4286 2576 4238 2595 Dl
4238 2595 4238 2692 Dl
4176 2732 14 14 De
4155 2729 14 14 De
3930 2512 3956 2503 Dl
3957 2503 4220 2523 Dl
4220 2523 4210 2531 Dl
4209 2532 3929 2513 Dl
3956 2539 3956 2690 Dl
3956 2690 4177 2709 Dl
4178 2710 4178 2559 Dl
4178 2558 3957 2539 Dl
3209 3344 360 360 De
(panel) 3271 3306 w
(process) 3225 3426 w
3570 3344 3930 3344 Dl
3858 3362 3930 3344 Dl
3858 3326 3930 3344 Dl
(write) 3638 3306 w
4125 3457 11 -4 11 4 Da
4099 3454 10 -4 11 4 Da
4076 3453 10 -5 11 5 Da
3930 3232 3930 3438 Dl
3930 3439 4210 3463 Dl
4209 3463 4209 3253 Dl
4209 3252 3929 3233 Dl
4238 3315 4286 3296 Dl
4286 3296 4238 3294 Dl
4238 3294 4238 3315 Dl
3943 3247 3943 3419 Dl
3943 3419 4194 3440 Dl
4194 3441 4194 3268 Dl
4194 3267 3943 3247 Dl
4209 3252 4207 3462 Dl
4207 3463 4237 3437 Dl
4238 3436 4238 3245 Dl
4238 3245 4220 3243 Dl
4220 3243 4208 3251 Dl
4207 3252 4209 3252 Dl
4238 3413 4286 3363 Dl
4286 3362 4286 3297 Dl
4286 3296 4238 3315 Dl
4238 3315 4238 3412 Dl
4176 3452 14 14 De
4155 3449 14 14 De
3930 3232 3956 3223 Dl
3957 3223 4220 3243 Dl
4220 3243 4210 3251 Dl
4209 3252 3929 3233 Dl
3956 3259 3956 3410 Dl
3956 3410 4177 3429 Dl
4178 3430 4178 3279 Dl
4178 3278 3957 3259 Dl
2878 2519 2850 2587 Dl
2907 2541 2850 2587 Dl
2849 2588 3261 2032 Dl
2907 2706 2850 2660 Dl
2878 2728 2850 2660 Dl
2849 2660 3261 3216 Dl
(The) 816 3758 w
(parent) 1029 3758 w
(process) 1345 3758 w
(will) 1716 3758 w
(be) 1931 3758 w
(the) 2077 3758 w
(one) 2254 3758 w
(reading) 2455 3758 w
(from) 2826 3758 w
(the) 3082 3758 w
(input.) 3259 3758 w
(After) 3557 3758 w
(reading) 3831 3758 w
(a) 4203 3758 w
(new) 566 3878 w
(message,) 788 3878 w
(it) 1227 3878 w
(will) 1329 3878 w
(increment) 1541 3878 w
(a) 2019 3878 w
11 /Times-Italic f
(version) 2107 3878 w
(number) 2470 3878 w
11 /Times-Roman f
(for) 2845 3878 w
(the) 3012 3878 w
(message) 3186 3878 w
(along) 3597 3878 w
(with) 3881 3878 w
(the) 4117 3878 w
(message) 566 3998 w
(text) 971 3998 w
(itself.) 1170 3998 w
(The) 1452 3998 w
(panel) 1656 3998 w
(processes) 1927 3998 w
(will) 2380 3998 w
(be) 2586 3998 w
(polling) 2723 3998 w
(the) 3070 3998 w
(version) 3238 3998 w
(number,) 3595 3998 w
(to) 3992 3998 w
(see) 4112 3998 w
(if) 566 4118 w
(their) 662 4118 w
(messages) 892 4118 w
(are) 1335 4118 w
(out) 1496 4118 w
(of) 1666 4118 w
(date.) 1786 4118 w
(If) 2025 4118 w
(they) 2126 4118 w
(are,) 2344 4118 w
(they) 2533 4118 w
(will) 2751 4118 w
(just) 2952 4118 w
(write) 3141 4118 w
(the) 3394 4118 w
(new) 3556 4118 w
(message) 3766 4118 w
(to) 4165 4118 w
(their) 566 4238 w
(respective) 811 4238 w
(panels,) 1298 4238 w
(and) 1650 4238 w
(record) 1853 4238 w
(the) 2176 4238 w
(version) 2355 4238 w
(for) 2723 4238 w
(the) 2895 4238 w
(message.) 3074 4238 w
(This) 3518 4238 w
(is) 3759 4238 w
(our) 3878 4238 w
(data) 4069 4238 w
(structure.) 566 4358 w
9 /Courier f
(typedef struct Msg Msg;) 786 4528 w
(struct Msg {) 786 4638 w
(QLock) 1266 4748 w
(lck;) 1746 4748 w
(// to protect the other fields) 2226 4748 w
(char*) 1266 4858 w
(text;) 1746 4858 w
(// for the message) 2226 4858 w
(ulong) 1266 4968 w
(vers;) 1746 4968 w
(// for the message) 2226 4968 w
(};) 786 5078 w
(Msg msg;) 786 5298 w
11 /Times-Roman f
(The) 566 5514 w
(code) 765 5514 w
(for) 1000 5514 w
(the) 1156 5514 w
(message) 1319 5514 w
(reader) 1719 5514 w
(is) 2019 5514 w
(as) 2122 5514 w
(follows.) 2242 5514 w
(It) 2629 5514 w
(works) 2725 5514 w
(only) 3023 5514 w
(when) 3249 5514 w
(reading) 3516 5514 w
(from) 3874 5514 w
(the) 4117 5514 w
(terminal,) 566 5634 w
(because) 988 5634 w
(it) 1361 5634 w
(is) 1451 5634 w
(using) 1553 5634 w
(just) 1820 5634 w
11 /Courier f
(read) 2008 5634 w
11 /Times-Roman f
(to) 2300 5634 w
(read) 2414 5634 w
(a) 2629 5634 w
(line) 2705 5634 w
(from) 2898 5634 w
(the) 3139 5634 w
(input.) 3301 5634 w
cleartomark
showpage
saveobj restore
%%EndPage: 16 16
%%Page: 17 17
/saveobj save def
mark
17 pagesetup
11 /Times-Roman f
(\255 17 \255) 2289 413 w
10 /Courier f
(void) 786 676 w
(reader\(void\)) 786 786 w
({) 786 896 w
(char) 1266 1006 w
(buf[512];) 1746 1006 w
(int) 1266 1116 w
(nr;) 1746 1116 w
(for\(;;\){) 1266 1336 w
(nr = read\(0, buf, sizeof\(buf\)\2551\);) 1746 1446 w
(if \(nr <= 0\)) 1746 1556 w
(break;) 2226 1666 w
(buf[nr] = 0;) 1746 1776 w
(qlock\(&msg.lck\);) 1746 1886 w
(free\(msg.text\);) 1746 1996 w
(msg.text = strdup\(buf\);) 1746 2106 w
(msg.vers++;) 1746 2216 w
(qunlock\(&msg.lck\);) 1746 2326 w
(}) 1266 2436 w
(exiting = 1;) 1266 2546 w
(exits\(nil\);) 1266 2656 w
(}) 786 2766 w
11 /Times-Roman f
(The) 566 2982 w
(critical) 775 2982 w
(region,) 1118 2982 w
(updating) 1465 2982 w
(the) 1889 2982 w
(message) 2062 2982 w
(text) 2472 2982 w
(and) 2676 2982 w
(its) 2873 2982 w
(version,) 3017 2982 w
(is) 3407 2982 w
(protected) 3520 2982 w
(by) 3967 2982 w
(the) 4117 2982 w
11 /Courier f
(QLock) 566 3102 w
11 /Times-Roman f
(kept) 929 3102 w
(at) 1151 3102 w
11 /Courier f
(msg.lck) 1263 3102 w
11 /Times-Roman f
(.) 1725 3102 w
(This) 1814 3102 w
(lock) 2043 3102 w
(is) 2265 3102 w
(kept) 2372 3102 w
(within) 2594 3102 w
11 /Courier f
(msg) 2909 3102 w
11 /Times-Roman f
(because) 3140 3102 w
(it) 3518 3102 w
(is) 3612 3102 w
(used) 3718 3102 w
(to) 3951 3102 w
(pro\255) 4069 3102 w
(tect) 566 3222 w
(it.) 765 3222 w
(If) 896 3222 w
(the) 1009 3222 w
(program) 1184 3222 w
(grows) 1596 3222 w
(and) 1905 3222 w
(there) 2104 3222 w
(are) 2363 3222 w
(more) 2536 3222 w
(data) 2802 3222 w
(structures,) 3026 3222 w
(there) 3522 3222 w
(will) 3782 3222 w
(be) 3996 3222 w
(no) 4141 3222 w
(doubt) 566 3342 w
(regarding) 845 3342 w
(what) 1292 3342 w
(data) 1533 3342 w
(structure) 1743 3342 w
(is) 2154 3342 w
(protecting) 2256 3342 w
11 /Courier f
(msg.lck) 2729 3342 w
11 /Times-Roman f
(.) 3191 3342 w
(Each) 816 3498 w
(panel) 1077 3498 w
(process) 1357 3498 w
(will) 1728 3498 w
(be) 1943 3498 w
(running) 2089 3498 w
(a) 2475 3498 w
11 /Courier f
(panelproc) 2567 3498 w
11 /Times-Roman f
(function,) 3205 3498 w
(and) 3643 3498 w
(receive) 3845 3498 w
(a) 4203 3498 w
(file) 566 3618 w
(descriptor) 740 3618 w
(that) 1206 3618 w
(can) 1399 3618 w
(be) 1578 3618 w
(used) 1709 3618 w
(to) 1938 3618 w
(write) 2052 3618 w
(a) 2305 3618 w
(message) 2381 3618 w
(to) 2780 3618 w
(the) 2894 3618 w
(file) 3056 3618 w
(representing) 3230 3618 w
(the) 3799 3618 w
(panel.) 3961 3618 w
9 /Courier f
(void) 786 3788 w
(panelproc\(int fd\)) 786 3898 w
({) 786 4008 w
(ulong) 1266 4118 w
(lastvers = \2551;) 1746 4118 w
(do {) 1266 4338 w
(qlock\(&msg.lck\);) 1746 4448 w
(if\(msg.text != nil && lastvers != msg.vers\){) 1746 4558 w
(write\(fd, msg.text, strlen\(msg.text\)\);) 2226 4668 w
(lastvers = msg.vers;) 2226 4778 w
(}) 1746 4888 w
(qunlock\(&msg.lck\);) 1746 4998 w
(sleep\(5 * 1000\);) 1746 5108 w
(} while\(!exiting\);) 1266 5218 w
(fprint\(2, "panel exiting\\n"\);) 1266 5328 w
(exits\(nil\);) 1266 5438 w
(}) 786 5548 w
11 /Times-Roman f
(The) 566 5764 w
(local) 767 5764 w
11 /Courier f
(lastvers) 1011 5764 w
11 /Times-Roman f
(keeps) 1570 5764 w
(the) 1850 5764 w
(version) 2015 5764 w
(for) 2370 5764 w
(the) 2529 5764 w
(message) 2695 5764 w
(shown) 3098 5764 w
(at) 3417 5764 w
(the) 3528 5764 w
(panel.) 3694 5764 w
(Basi\255) 4019 5764 w
(cally,) 566 5884 w
11 /Courier f
(panelproc) 858 5884 w
11 /Times-Roman f
(loops) 1503 5884 w
(and,) 1793 5884 w
(once) 2030 5884 w
(each) 2287 5884 w
(5) 2537 5884 w
(seconds,) 2643 5884 w
(checks) 3068 5884 w
(out) 3415 5884 w
(if) 3606 5884 w
11 /Courier f
(msg.vers) 3723 5884 w
11 /Times-Roman f
(changed.) 566 6004 w
(If) 992 6004 w
(it) 1098 6004 w
(did,) 1194 6004 w
(the) 1397 6004 w
(new) 1565 6004 w
(text) 1781 6004 w
(for) 1980 6004 w
(the) 2141 6004 w
(message) 2309 6004 w
(is) 2715 6004 w
(written) 2824 6004 w
(to) 3170 6004 w
(the) 3291 6004 w
(panel.) 3460 6004 w
(The) 3788 6004 w
(initial) 3993 6004 w
(value) 566 6124 w
(for) 845 6124 w
11 /Courier f
(lastvers) 1013 6124 w
11 /Times-Roman f
(is) 1582 6124 w
(just) 1697 6124 w
(a) 1898 6124 w
(kludge) 1987 6124 w
(to) 2327 6124 w
(be) 2454 6124 w
(sure) 2598 6124 w
(that) 2821 6124 w
(the) 3027 6124 w
(message) 3202 6124 w
(is) 3614 6124 w
(updated) 3729 6124 w
(the) 4117 6124 w
(very) 566 6244 w
(first) 801 6244 w
(time) 1019 6244 w
(\(in) 1256 6244 w
(that) 1419 6244 w
(case,) 1625 6244 w
(there) 1881 6244 w
(is) 2140 6244 w
(no) 2256 6244 w
(previous) 2408 6244 w
(version\).) 2828 6244 w
(Note) 3285 6244 w
(how) 3540 6244 w
(the) 3771 6244 w
(critical) 3947 6244 w
cleartomark
showpage
saveobj restore
%%EndPage: 17 17
%%Page: 18 18
/saveobj save def
mark
18 pagesetup
11 /Times-Roman f
(\255 18 \255) 2289 413 w
(region) 566 686 w
(includes) 879 686 w
(both) 1278 686 w
(the) 1507 686 w
(checks) 1674 686 w
(in) 2004 686 w
(the) 2123 686 w
(condition) 2290 686 w
(of) 2739 686 w
(the) 2863 686 w
11 /Courier f
(if) 3030 686 w
11 /Times-Roman f
(and) 3195 686 w
(the) 3386 686 w
(statements) 3553 686 w
(used) 4050 686 w
(to) 566 806 w
(access) 680 806 w
11 /Courier f
(msg) 986 806 w
11 /Times-Roman f
(in) 1212 806 w
(the) 1326 806 w
(body.) 1488 806 w
(Before) 816 962 w
(discussing) 1147 962 w
(other) 1640 962 w
(details) 1899 962 w
(of) 2220 962 w
(this) 2346 962 w
(program,) 2541 962 w
(let's) 2975 962 w
(see) 3199 962 w
(how) 3373 962 w
(the) 3597 962 w
(whole) 3766 962 w
(pro\255) 4069 962 w
(gram) 566 1082 w
(looks) 819 1082 w
(like.) 1086 1082 w
9 /S f
(\347) 566 1252 w
9 /Times-Bold f
(ticker.c) 581 1252 w
9 /S f
(\347) 884 1252 w
(`) 566 1252 w
(```````) 569 1252 w
(_) 566 1252 w
(_______) 569 1252 w
8 /Courier f
(#include <u.h>) 786 1360 w
(#include <libc.h>) 786 1468 w
(typedef struct Msg Msg;) 786 1684 w
(struct Msg {) 786 1792 w
(QLock) 1266 1900 w
(lck;) 1746 1900 w
(// to protect the other fields from races) 2226 1900 w
(char*) 1266 2008 w
(text;) 1746 2008 w
(// for the message) 2226 2008 w
(ulong) 1266 2116 w
(vers;) 1746 2116 w
(// for the message) 2226 2116 w
(};) 786 2224 w
(int) 786 2332 w
(exiting;) 1266 2332 w
(Msg) 786 2440 w
(msg;) 1266 2440 w
(void) 786 2656 w
(reader\(void\)) 786 2764 w
({) 786 2872 w
(char) 1266 2980 w
(buf[512];) 1746 2980 w
(int) 1266 3088 w
(nr;) 1746 3088 w
(for\(;;\){) 1266 3304 w
(nr = read\(0, buf, sizeof\(buf\)\2551\);) 1746 3412 w
(if \(nr <= 0\)) 1746 3520 w
(break;) 2226 3628 w
(buf[nr] = 0;) 1746 3736 w
(qlock\(&msg.lck\);) 1746 3844 w
(free\(msg.text\);) 1746 3952 w
(msg.text = strdup\(buf\);) 1746 4060 w
(msg.vers++;) 1746 4168 w
(qunlock\(&msg.lck\);) 1746 4276 w
(}) 1266 4384 w
(exiting = 1;) 1266 4492 w
(exits\(nil\);) 1266 4600 w
(}) 786 4708 w
cleartomark
showpage
saveobj restore
%%EndPage: 18 18
%%Page: 19 19
/saveobj save def
mark
19 pagesetup
11 /Times-Roman f
(\255 19 \255) 2289 413 w
8 /Courier f
(void) 786 674 w
(panelproc\(int fd\)) 786 782 w
({) 786 890 w
(ulong) 1266 998 w
(lastvers = \2551;) 1746 998 w
(while\(!exiting\){) 1266 1214 w
(qlock\(&msg.lck\);) 1746 1322 w
(if\(msg.text != nil && lastvers != msg.vers\){) 1746 1430 w
(write\(fd, msg.text, strlen\(msg.text\)\);) 2226 1538 w
(lastvers = msg.vers;) 2226 1646 w
(}) 1746 1754 w
(qunlock\(&msg.lck\);) 1746 1862 w
(sleep\(5 * 1000\);) 1746 1970 w
(}) 1266 2078 w
(fprint\(2, "panel exiting\\n"\);) 1266 2186 w
(exits\(nil\);) 1266 2294 w
(}) 786 2402 w
(enum { Npanels = 3 };) 786 2618 w
(void) 786 2834 w
(main\(int, char*[]\)) 786 2942 w
({) 786 3050 w
(int) 1266 3158 w
(i;) 1746 3158 w
(for \(i = 0; i < Npanels; i++\)) 1266 3374 w
(if \(rfork\(RFPROC|RFMEM|RFNOWAIT\) == 0\)) 1746 3482 w
(panelproc\(1\);) 2226 3590 w
(reader\(\);) 1266 3698 w
(/* does not return */) 1266 3806 w
(}) 786 3914 w
11 /Times-Roman f
(It) 566 4130 w
(creates) 662 4130 w
(one) 994 4130 w
(process) 1182 4130 w
(per) 1540 4130 w
(panel,) 1709 4130 w
(and) 2004 4130 w
(then) 2192 4130 w
(executes) 2411 4130 w
(the) 2817 4130 w
11 /Courier f
(reader) 2981 4130 w
11 /Times-Roman f
(code) 3407 4130 w
(using) 3643 4130 w
(the) 3912 4130 w
(par\255) 4076 4130 w
(ent) 566 4250 w
(process.) 734 4250 w
(To) 1123 4250 w
(test) 1278 4250 w
(the) 1464 4250 w
(program,) 1631 4250 w
(we) 2063 4250 w
(used) 2223 4250 w
(the) 2457 4250 w
(standard) 2624 4250 w
(output) 3028 4250 w
(as) 3343 4250 w
(the) 3467 4250 w
(file) 3634 4250 w
(descriptor) 3813 4250 w
(to) 566 4370 w
(write) 680 4370 w
(to) 933 4370 w
(each) 1047 4370 w
(one) 1274 4370 w
(of) 1460 4370 w
(the) 1579 4370 w
(panels.) 1741 4370 w
(When) 816 4526 w
(a) 1105 4526 w
(program) 1181 4526 w
(is) 1580 4526 w
(built) 1682 4526 w
(using) 1913 4526 w
(multiple) 2180 4526 w
(processes,) 2576 4526 w
(it) 3051 4526 w
(is) 3141 4526 w
(important) 3243 4526 w
(to) 3700 4526 w
(pay) 3815 4526 w
(atten\255) 4002 4526 w
(tion) 566 4646 w
(to) 768 4646 w
(how) 884 4646 w
(the) 1103 4646 w
(program) 1267 4646 w
(is) 1668 4646 w
(started) 1772 4646 w
(and) 2094 4646 w
(how) 2282 4646 w
(is) 2500 4646 w
(it) 2603 4646 w
(going) 2694 4646 w
(to) 2974 4646 w
(terminate.) 3089 4646 w
(In) 3588 4646 w
(general,) 3708 4646 w
(it) 4086 4646 w
(is) 4177 4646 w
(best) 566 4766 w
(if) 771 4766 w
(the) 866 4766 w
(program) 1029 4766 w
(works) 1429 4766 w
(no) 1726 4766 w
(matter) 1865 4766 w
(the) 2174 4766 w
(order) 2337 4766 w
(in) 2596 4766 w
(which) 2711 4766 w
(processes) 3008 4766 w
(are) 3456 4766 w
(started.) 3617 4766 w
(Other\255) 3966 4766 w
(wise,) 566 4886 w
(initialization) 824 4886 w
(for) 1409 4886 w
(the) 1564 4886 w
(program) 1726 4886 w
(will) 2125 4886 w
(be) 2325 4886 w
(more) 2456 4886 w
(delicate,) 2709 4886 w
(and) 3105 4886 w
(may) 3291 4886 w
(fail) 3508 4886 w
(mysteriously) 3682 4886 w
(if) 566 5006 w
(you) 668 5006 w
(make) 868 5006 w
(a) 1140 5006 w
(mistake) 1223 5006 w
(regarding) 1600 5006 w
(the) 2054 5006 w
(order) 2223 5006 w
(in) 2488 5006 w
(which) 2609 5006 w
(processes) 2913 5006 w
(are) 3368 5006 w
(started.) 3536 5006 w
(Further\255) 3892 5006 w
(more,) 566 5126 w
(you) 852 5126 w
(do) 1050 5126 w
(not) 1193 5126 w
(know) 1367 5126 w
(how) 1644 5126 w
(fast) 1866 5126 w
(they) 2057 5126 w
(are) 2279 5126 w
(going) 2443 5126 w
(to) 2726 5126 w
(run.) 2844 5126 w
(If) 3050 5126 w
(you) 3154 5126 w
(require) 3351 5126 w
(certain) 3692 5126 w
(order) 4021 5126 w
(for) 566 5246 w
(the) 730 5246 w
(starting) 901 5246 w
(up) 1268 5246 w
(of) 1415 5246 w
(processes,) 1543 5246 w
(you) 2028 5246 w
(must) 2231 5246 w
(use) 2484 5246 w
(a) 2668 5246 w
(synchronization) 2754 5246 w
(tool) 3493 5246 w
(to) 3703 5246 w
(guarantee) 3827 5246 w
(that) 566 5366 w
(such) 759 5366 w
(order) 988 5366 w
(is) 1246 5366 w
(met.) 1348 5366 w
(For) 816 5522 w
(example,) 1006 5522 w
(a) 1442 5522 w
11 /Courier f
(panelproc) 1528 5522 w
11 /Times-Roman f
(should) 2160 5522 w
(not) 2492 5522 w
(write) 2671 5522 w
(a) 2934 5522 w
(message) 3020 5522 w
(to) 3429 5522 w
(its) 3553 5522 w
(panel) 3696 5522 w
11 /Times-Italic f
(before) 3971 5522 w
11 /Times-Roman f
(there) 566 5642 w
(is) 843 5642 w
(at) 976 5642 w
(least) 1114 5642 w
(one) 1374 5642 w
(message) 1591 5642 w
(to) 2021 5642 w
(print.) 2166 5642 w
(All) 2461 5642 w
11 /Courier f
(panelprocs) 2661 5642 w
11 /Times-Roman f
(should) 3380 5642 w
(be) 3732 5642 w
(waiting,) 3893 5642 w
(silently,) 566 5762 w
(until) 947 5762 w
11 /Courier f
(reader) 1178 5762 w
11 /Times-Roman f
(has) 1602 5762 w
(got) 1776 5762 w
(the) 1945 5762 w
(chance) 2107 5762 w
(of) 2437 5762 w
(reading) 2556 5762 w
(the) 2912 5762 w
(first) 3074 5762 w
(message) 3279 5762 w
(and) 3679 5762 w
(updating) 3866 5762 w
(the) 566 5882 w
(data) 731 5882 w
(structure.) 943 5882 w
(The) 1384 5882 w
(program) 1584 5882 w
(does) 1985 5882 w
(so) 2216 5882 w
(by) 2344 5882 w
(checking) 2484 5882 w
(that) 2909 5882 w
11 /Courier f
(msg.text) 3104 5882 w
11 /Times-Roman f
(is) 3662 5882 w
(not) 3766 5882 w
11 /Courier f
(nil) 3937 5882 w
11 /Times-Roman f
(in) 4165 5882 w
11 /Courier f
(panelproc) 566 6002 w
11 /Times-Roman f
(before) 1198 6002 w
(even) 1514 6002 w
(looking) 1758 6002 w
(at) 2134 6002 w
(the) 2252 6002 w
(message.) 2425 6002 w
(The) 2863 6002 w
11 /Courier f
(msg.text) 3072 6002 w
11 /Times-Roman f
(will) 3639 6002 w
(be) 3850 6002 w
(a) 3992 6002 w
(null) 4079 6002 w
(value) 566 6122 w
(until) 847 6122 w
(the) 1094 6122 w
(reader) 1272 6122 w
(initializes) 1587 6122 w
(it) 2059 6122 w
(for) 2165 6122 w
(the) 2336 6122 w
(first) 2514 6122 w
(time.) 2735 6122 w
(As) 3031 6122 w
(a) 3197 6122 w
(result,) 3289 6122 w
(if) 3605 6122 w
(we) 3715 6122 w
(start) 3885 6122 w
(the) 4117 6122 w
(panel) 566 6242 w
(processes) 831 6242 w
(after) 1278 6242 w
(starting) 1505 6242 w
(the) 1863 6242 w
(reader,) 2025 6242 w
(the) 2352 6242 w
(program) 2514 6242 w
(will) 2913 6242 w
(still) 3113 6242 w
(work.) 3308 6242 w
cleartomark
showpage
saveobj restore
%%EndPage: 19 19
%%Page: 20 20
/saveobj save def
mark
20 pagesetup
11 /Times-Roman f
(\255 20 \255) 2289 413 w
(Termination) 816 686 w
(is) 1400 686 w
(also) 1515 686 w
(a) 1733 686 w
(delicate) 1822 686 w
(thing.) 2203 686 w
(Now) 2499 686 w
(that) 2753 686 w
(there) 2960 686 w
(are) 3220 686 w
(multiple) 3394 686 w
(processes,) 3804 686 w
(when) 566 806 w
(the) 837 806 w
(program) 1004 806 w
(terminates,) 1408 806 w
(all) 1926 806 w
(the) 2069 806 w
(processes) 2236 806 w
(should) 2688 806 w
(exit.) 3015 806 w
(How) 3241 806 w
(to) 3487 806 w
(achieve) 3606 806 w
(this) 3972 806 w
(in) 4165 806 w
(a) 566 926 w
(clean) 643 926 w
(way,) 902 926 w
(it) 1141 926 w
(depends) 1232 926 w
(on) 1620 926 w
(the) 1759 926 w
(problem) 1922 926 w
(being) 2317 926 w
(solved.) 2590 926 w
(In) 2934 926 w
(this) 3055 926 w
(case) 3245 926 w
(we) 3462 926 w
(decided) 3619 926 w
(to) 3989 926 w
(use) 4105 926 w
(a) 566 1046 w
(global) 679 1046 w
(flag) 1019 1046 w
11 /Courier f
(exiting) 1254 1046 w
11 /Times-Roman f
(.) 1716 1046 w
(No) 1837 1046 w
11 /Courier f
(panelproc) 2036 1046 w
11 /Times-Roman f
(will) 2695 1046 w
(remain) 2932 1046 w
(in) 3301 1046 w
(its) 3451 1046 w
11 /Courier f
(while) 3620 1046 w
11 /Times-Roman f
(when) 4014 1046 w
11 /Courier f
(exiting) 566 1166 w
11 /Times-Roman f
(is) 1065 1166 w
(true.) 1176 1166 w
(Therefore,) 1412 1166 w
(all) 1907 1166 w
(we) 2055 1166 w
(have) 2220 1166 w
(to) 2464 1166 w
(do) 2588 1166 w
(to) 2736 1166 w
(terminate) 2860 1166 w
(the) 3312 1166 w
(program) 3484 1166 w
(is) 3893 1166 w
(to) 4005 1166 w
(set) 4129 1166 w
11 /Courier f
(exiting) 566 1286 w
11 /Times-Roman f
(to) 1058 1286 w
11 /Courier f
(1) 1174 1286 w
11 /Times-Roman f
(,) 1240 1286 w
(as) 1298 1286 w
(we) 1419 1286 w
(do) 1576 1286 w
(in) 1716 1286 w
(the) 1832 1286 w
(reader) 1996 1286 w
(after) 2297 1286 w
(reaching) 2526 1286 w
(the) 2932 1286 w
(end) 3096 1286 w
(of) 3284 1286 w
(file.) 3404 1286 w
(Later,) 3607 1286 w
(as) 3894 1286 w
(panel) 4014 1286 w
(processes) 566 1406 w
(awake) 1021 1406 w
(from) 1335 1406 w
(their) 1584 1406 w
(sleep) 1821 1406 w
(and) 2083 1406 w
(check) 2278 1406 w
11 /Courier f
(exiting) 2569 1406 w
11 /Times-Roman f
(,) 3031 1406 w
(they) 3096 1406 w
(will) 3322 1406 w
(call) 3531 1406 w
11 /Courier f
(exits) 3726 1406 w
11 /Times-Roman f
(and) 4093 1406 w
(terminate) 566 1526 w
(themselves.) 1008 1526 w
(This) 816 1682 w
(is) 1046 1682 w
(an) 1154 1682 w
(example) 1291 1682 w
(execution) 1696 1682 w
(for) 2156 1682 w
(the) 2317 1682 w
(program.) 2485 1682 w
(Note) 2919 1682 w
(how) 3167 1682 w
(the) 3391 1682 w
(panel) 3560 1682 w
(processes) 3832 1682 w
(terminate) 566 1802 w
11 /Times-Italic f
(after) 1008 1802 w
11 /Times-Roman f
(we) 1244 1802 w
(have) 1399 1802 w
(sent) 1633 1802 w
(the) 1838 1802 w
(end) 2000 1802 w
(of) 2186 1802 w
(file) 2305 1802 w
(indication.) 2479 1802 w
10 /Courier f
(; 8.ticker) 786 1972 w
(!!Iberia arriving late for flight 666) 786 2082 w
(Iberia arriving late for flight 666) 786 2192 w
(Iberia arriving late for flight 666) 786 2302 w
(!!Iberia arriving very late for flight 666) 786 2412 w
(Iberia arriving very late for flight 666) 786 2522 w
(Iberia arriving very late for flight 666) 786 2632 w
10 /Times-Bold f
(control\255d) 786 2742 w
10 /Courier f
(; panel exiting) 786 2852 w
(panel exiting) 786 2962 w
11 /Times-Roman f
(If) 566 3178 w
(you) 668 3178 w
(look) 863 3178 w
(at) 1089 3178 w
(the) 1198 3178 w
(program,) 1362 3178 w
(you) 1791 3178 w
(will) 1986 3178 w
(notice) 2189 3178 w
(that) 2488 3178 w
(after) 2684 3178 w
(we) 2914 3178 w
(have) 3072 3178 w
(updated) 3309 3178 w
(the) 3687 3178 w
(message,) 3852 3178 w
(the) 566 3298 w
(panel) 733 3298 w
(processes) 1003 3298 w
(will) 1455 3298 w
(acquire) 1660 3298 w
(the) 2013 3298 w
11 /Courier f
(msg.lck) 2179 3298 w
11 /Times-Roman f
(in) 2673 3298 w
(sequence) 2791 3298 w
(as) 3223 3298 w
(they) 3346 3298 w
(write) 3567 3298 w
(their) 3824 3298 w
(pan\255) 4057 3298 w
(els,) 566 3418 w
(one) 752 3418 w
11 /Times-Italic f
(after) 946 3418 w
11 /Times-Roman f
(another.) 1190 3418 w
(If) 1610 3418 w
(the) 1718 3418 w
(data) 1888 3418 w
(structure) 2106 3418 w
11 /Courier f
(msg) 2525 3418 w
11 /Times-Roman f
(is) 2759 3418 w
(consulted) 2869 3418 w
(a) 3326 3418 w
(lot,) 3411 3418 w
(the) 3593 3418 w
(whole) 3764 3418 w
(pro\255) 4069 3418 w
(gram) 566 3538 w
(will) 826 3538 w
(be) 1032 3538 w
(very) 1169 3538 w
(slow) 1397 3538 w
(due) 1639 3538 w
(to) 1831 3538 w
(delays) 1951 3538 w
(caused) 2265 3538 w
(by) 2596 3538 w
(the) 2740 3538 w
(use) 2908 3538 w
(of) 3088 3538 w
(a) 3213 3538 w
11 /Courier f
(QLock) 3295 3538 w
11 /Times-Roman f
(to) 3659 3538 w
(protect) 3779 3538 w
(the) 4117 3538 w
(data.) 566 3658 w
(While) 812 3658 w
(a) 1116 3658 w
(panel) 1200 3658 w
(process) 1473 3658 w
(is) 1837 3658 w
(writing) 1947 3658 w
(to) 2301 3658 w
(the) 2423 3658 w
(panel,) 2593 3658 w
(no) 2894 3658 w
(other) 3040 3658 w
(panel) 3301 3658 w
(process) 3574 3658 w
(will) 3939 3658 w
(be) 4148 3658 w
(able) 566 3778 w
(to) 778 3778 w
(even) 894 3778 w
(touch) 1130 3778 w
(the) 1404 3778 w
(message.) 1568 3778 w
(We) 1997 3778 w
(can) 2178 3778 w
(improve) 2359 3778 w
(things) 2755 3778 w
(a) 3055 3778 w
(little) 3133 3778 w
(bit) 3366 3778 w
(by) 3513 3778 w
(writing) 3653 3778 w
(to) 4001 3778 w
(the) 4117 3778 w
(panel) 566 3898 w
11 /Times-Italic f
(outside) 851 3898 w
11 /Times-Roman f
(of) 1217 3898 w
(the) 1356 3898 w
(critical) 1538 3898 w
(region.) 1890 3898 w
(By) 2246 3898 w
(doing) 2424 3898 w
(so,) 2724 3898 w
(other) 2899 3898 w
(panel) 3173 3898 w
(processes) 3459 3898 w
(will) 3927 3898 w
(be) 4148 3898 w
(allowed) 566 4018 w
(to) 941 4018 w
(gain) 1055 4018 w
(the) 1272 4018 w
(lock) 1434 4018 w
(and) 1651 4018 w
(consult) 1837 4018 w
(the) 2183 4018 w
(message) 2345 4018 w
(as) 2744 4018 w
(well.) 2863 4018 w
cleartomark
showpage
saveobj restore
%%EndPage: 20 20
%%Page: 21 21
/saveobj save def
mark
21 pagesetup
11 /Times-Roman f
(\255 21 \255) 2289 413 w
9 /Courier f
(void) 786 676 w
(panelproc\(int fd\)) 786 786 w
({) 786 896 w
(ulong) 1266 1006 w
(lastvers = \2551;) 1746 1006 w
(char*) 1266 1116 w
(text;) 1746 1116 w
(do {) 1266 1336 w
(text = nil;) 1746 1446 w
(qlock\(&msg.lck\);) 1746 1556 w
(if\(msg.text != nil && lastvers != msg.vers\){) 1746 1666 w
(text = strdup\(msg.text\);) 2226 1776 w
(lastvers = msg.vers;) 2226 1886 w
(}) 1746 1996 w
(qunlock\(&msg.lck\);) 1746 2106 w
(if \(text != nil\){) 1746 2216 w
(write\(fd, text, strlen\(text\)\);) 2226 2326 w
(free\(text\);) 2226 2436 w
(}) 1746 2546 w
(sleep\(5 * 1000\);) 1746 2656 w
(} while\(!exiting\);) 1266 2766 w
(fprint\(2, "panel exiting\\n"\);) 1266 2876 w
(exits\(nil\);) 1266 2986 w
(}) 786 3096 w
11 /Times-Roman f
(Here,) 566 3312 w
(we) 839 3312 w
(moved) 1000 3312 w
(the) 1333 3312 w
11 /Courier f
(write) 1501 3312 w
11 /Times-Roman f
(outside) 1865 3312 w
(of) 2217 3312 w
(the) 2342 3312 w
(critical) 2510 3312 w
(region.) 2848 3312 w
(Because) 3191 3312 w
(the) 3590 3312 w
(panel) 3759 3312 w
(itself) 4031 3312 w
(\(i.e.,) 566 3432 w
(its) 805 3432 w
(file\)) 950 3432 w
(is) 1172 3432 w
(not) 1286 3432 w
(being) 1467 3432 w
(shared) 1751 3432 w
(in) 2076 3432 w
(our) 2202 3432 w
(program,) 2388 3432 w
(we) 2827 3432 w
(do) 2994 3432 w
(not) 3144 3432 w
(need) 3325 3432 w
(to) 3570 3432 w
(protect) 3695 3432 w
(from) 4038 3432 w
(races) 566 3552 w
(while) 817 3552 w
(writing) 1089 3552 w
(it.) 1435 3552 w
(We) 1553 3552 w
(created) 1732 3552 w
(one) 2074 3552 w
(process) 2260 3552 w
(for) 2616 3552 w
(each) 2771 3552 w
(panel) 2998 3552 w
(and) 3263 3552 w
(that) 3449 3552 w
(was) 3642 3552 w
(nice.) 3840 3552 w
(But) 816 3708 w
(we) 1010 3708 w
(can) 1171 3708 w
(do) 1356 3708 w
(much) 1500 3708 w
(better.) 1778 3708 w
(Are) 2089 3708 w
(there) 2286 3708 w
(races) 2538 3708 w
(when) 2795 3708 w
(multiple) 3067 3708 w
(processes) 3470 3708 w
(are) 3924 3708 w
(just) 4091 3708 w
11 /Times-Italic f
(reading) 566 3828 w
11 /Times-Roman f
(a) 948 3828 w
(data) 1036 3828 w
(structure?) 1258 3828 w
(While) 1729 3828 w
(nobody) 2037 3828 w
(is) 2407 3828 w
(changing) 2521 3828 w
(anything,) 2963 3828 w
(there) 3415 3828 w
(are) 3672 3828 w
(no) 3843 3828 w
(races!) 3992 3828 w
(During) 566 3948 w
(a) 912 3948 w
(long) 996 3948 w
(time,) 1228 3948 w
(all) 1488 3948 w
(the) 1634 3948 w
(panel) 1804 3948 w
(processes) 2077 3948 w
(will) 2532 3948 w
(be) 2740 3948 w
(polling) 2879 3948 w
11 /Courier f
(msg) 3228 3948 w
11 /Times-Roman f
(,) 3426 3948 w
(reading) 3490 3948 w
(its) 3854 3948 w
(mem\255) 3995 3948 w
(ory,) 566 4068 w
(and) 775 4068 w
(the) 968 4068 w
(input) 1137 4068 w
(process) 1399 4068 w
(will) 1762 4068 w
(be) 1969 4068 w
(just) 2107 4068 w
(blocked) 2302 4068 w
(waiting) 2684 4068 w
(for) 3049 4068 w
(a) 3211 4068 w
(line.) 3294 4068 w
(It) 3522 4068 w
(would) 3623 4068 w
(be) 3932 4068 w
(nice) 4069 4068 w
(to) 566 4188 w
(let) 686 4188 w
(all) 830 4188 w
(the) 974 4188 w
(panel) 1142 4188 w
(processes) 1413 4188 w
(to) 1866 4188 w
(access) 1986 4188 w
(the) 2298 4188 w
(data) 2466 4188 w
(structure) 2682 4188 w
(at) 3099 4188 w
(the) 3212 4188 w
(same) 3380 4188 w
(time,) 3639 4188 w
(in) 3898 4188 w
(those) 4019 4188 w
(periods) 566 4308 w
(when) 917 4308 w
(nobody) 1182 4308 w
(is) 1540 4308 w
(modifying) 1642 4308 w
11 /Courier f
(msg) 2129 4308 w
11 /Times-Roman f
(.) 2327 4308 w
(Plan) 816 4464 w
(9) 1049 4464 w
(has) 1141 4464 w
11 /Times-Bold f
(read/write) 1324 4464 w
(locks) 1847 4464 w
11 /Times-Roman f
(.) 2086 4464 w
(A) 2179 4464 w
(read/write) 2296 4464 w
(lock,) 2777 4464 w
(or) 3032 4464 w
11 /Courier f
(RWLock) 3161 4464 w
11 /Times-Roman f
(,) 3557 4464 w
(is) 3623 4464 w
(similar) 3735 4464 w
(to) 4079 4464 w
(a) 4203 4464 w
(queuing) 566 4584 w
(lock.) 957 4584 w
(However,) 1211 4584 w
(it) 1676 4584 w
(makes) 1774 4584 w
(a) 2090 4584 w
(distinction) 2174 4584 w
(between) 2676 4584 w
11 /Times-Italic f
(readers) 3076 4584 w
11 /Times-Roman f
(and) 3447 4584 w
11 /Times-Italic f
(writers) 3641 4584 w
11 /Times-Roman f
(of) 3990 4584 w
(the) 4117 4584 w
(resource) 566 4704 w
(being) 964 4704 w
(protected) 1237 4704 w
(by) 1673 4704 w
(the) 1812 4704 w
(lock.) 1975 4704 w
(Multiple) 2221 4704 w
(readers) 2630 4704 w
(are) 2974 4704 w
(admitted) 3136 4704 w
(to) 3551 4704 w
(hold) 3667 4704 w
(the) 3893 4704 w
(very) 4057 4704 w
(same) 566 4824 w
11 /Courier f
(RWLock) 831 4824 w
11 /Times-Roman f
(,) 1227 4824 w
(at) 1295 4824 w
(the) 1414 4824 w
(same) 1588 4824 w
(time.) 1853 4824 w
(However,) 2116 4824 w
(only) 2583 4824 w
(one) 2818 4824 w
(writer) 3015 4824 w
(can) 3315 4824 w
(hold) 3505 4824 w
(a) 3740 4824 w
11 /Courier f
(RWLock) 3827 4824 w
11 /Times-Roman f
(,) 4223 4824 w
(and) 566 4944 w
(in) 779 4944 w
(this) 920 4944 w
(case) 1135 4944 w
(there) 1377 4944 w
(can) 1650 4944 w
(be) 1856 4944 w
(no) 2014 4944 w
(other) 2179 4944 w
(reader) 2459 4944 w
(or) 2785 4944 w
(writer.) 2931 4944 w
(This) 3275 4944 w
(is) 3526 4944 w
(also) 3655 4944 w
(called) 3887 4944 w
(a) 4203 4944 w
11 /Times-Italic f
(multiple\255reader) 566 5064 w
(single\255writer) 1283 5064 w
11 /Times-Roman f
(lock.) 1880 5064 w
(Processes) 816 5220 w
(that) 1291 5220 w
(want) 1505 5220 w
(to) 1767 5220 w
(acquire) 1903 5220 w
(the) 2274 5220 w
(lock) 2458 5220 w
(for) 2697 5220 w
(reading) 2874 5220 w
(must) 3252 5220 w
(use) 3517 5220 w
11 /Courier f
(rlock) 3713 5220 w
11 /Times-Roman f
(and) 4093 5220 w
11 /Courier f
(runlock) 566 5340 w
11 /Times-Roman f
(.) 1028 5340 w
10 /Courier f
(; sig rlock runlock) 786 5510 w
(void rlock\(RWLock *l\)) 1266 5620 w
(void runlock\(RWLock *l\)) 1266 5730 w
11 /Times-Roman f
(Processes) 566 5946 w
(that) 1061 5946 w
(want) 1295 5946 w
(to) 1577 5946 w
(acquire) 1732 5946 w
(the) 2122 5946 w
(lock) 2325 5946 w
(for) 2583 5946 w
(writing) 2779 5946 w
(must) 3166 5946 w
(use) 3450 5946 w
11 /Courier f
(wlock) 3665 5946 w
11 /Times-Roman f
(,) 3995 5946 w
(and) 4093 5946 w
11 /Courier f
(wunlock) 566 6066 w
11 /Times-Roman f
(.) 1028 6066 w
cleartomark
showpage
saveobj restore
%%EndPage: 21 21
%%Page: 22 22
/saveobj save def
mark
22 pagesetup
11 /Times-Roman f
(\255 22 \255) 2289 413 w
10 /Courier f
(; sig wlock wunlock) 786 676 w
(void wlock\(RWLock *l\)) 1266 786 w
(void wunlock\(RWLock *l\)) 1266 896 w
11 /Times-Roman f
(The) 566 1112 w
(improved) 769 1112 w
(version) 1223 1112 w
(for) 1580 1112 w
(our) 1741 1112 w
(program) 1921 1112 w
(requires) 2326 1112 w
(a) 2712 1112 w
(change) 2794 1112 w
(in) 3137 1112 w
(the) 3257 1112 w
(data) 3425 1112 w
(structure,) 3641 1112 w
(that) 4086 1112 w
(must) 566 1232 w
(use) 809 1232 w
(a) 983 1232 w
11 /Courier f
(RWLock) 1059 1232 w
11 /Times-Roman f
(now.) 1483 1232 w
10 /Courier f
(struct Msg {) 786 1402 w
(RWLock) 1266 1512 w
(lck;) 1746 1512 w
(// multiple readers/one writer.) 2226 1512 w
(char*) 1266 1622 w
(text;) 1746 1622 w
(// for the message) 2226 1622 w
(ulong) 1266 1732 w
(vers;) 1746 1732 w
(// for the message) 2226 1732 w
(}) 786 1842 w
11 /Times-Roman f
(The) 566 2058 w
(new) 775 2058 w
(code) 996 2058 w
(for) 1241 2058 w
11 /Courier f
(panelproc) 1407 2058 w
11 /Times-Roman f
(must) 2040 2058 w
(acquire) 2294 2058 w
(a) 2654 2058 w
(lock) 2741 2058 w
(for) 2969 2058 w
(reading,) 3135 2058 w
(but) 3530 2058 w
(is) 3711 2058 w
(otherwise) 3825 2058 w
(the) 566 2178 w
(same.) 728 2178 w
10 /Courier f
(void) 786 2348 w
(panelproc\(int fd\)) 786 2458 w
({) 786 2568 w
10 /Times-Italic f
(...as before...) 1266 2678 w
10 /Courier f
(rlock\(&msg.lck\);) 1746 2788 w
(if\(msg.text != nil && lastvers != msg.vers\){) 1746 2898 w
(text = strdup\(msg.text\);) 2226 3008 w
(lastvers = msg.vers;) 2226 3118 w
(}) 1746 3228 w
(runlock\(&msg.lck\);) 1746 3338 w
10 /Times-Italic f
(...as before...) 1266 3448 w
10 /Courier f
(}) 786 3558 w
11 /Times-Roman f
(And) 566 3774 w
(the) 783 3774 w
(process) 945 3774 w
(writing) 1301 3774 w
(to) 1647 3774 w
(the) 1761 3774 w
(data) 1923 3774 w
(structure) 2133 3774 w
(now) 2544 3774 w
(requires) 2761 3774 w
(a) 3141 3774 w
(write) 3217 3774 w
(lock.) 3470 3774 w
10 /Courier f
(void) 786 3944 w
(reader\(void\)) 786 4054 w
({) 786 4164 w
10 /Times-Italic f
(...as before...) 1266 4274 w
10 /Courier f
(wlock\(&msg.lck\);) 1746 4384 w
(free\(msg.text\);) 1746 4494 w
(msg.text = strdup\(buf\);) 1746 4604 w
(msg.vers++;) 1746 4714 w
(wunlock\(&msg.lck\);) 1746 4824 w
10 /Times-Italic f
(...as before...) 1266 4934 w
10 /Courier f
(}) 786 5044 w
cleartomark
showpage
saveobj restore
%%EndPage: 22 22
%%Page: 23 23
/saveobj save def
mark
23 pagesetup
11 /Times-Roman f
(\255 23 \255) 2289 413 w
(Writer) 826 888 w
1238 866 1958 866 Dl
(resource) 1414 828 w
(locked) 1452 948 w
8 /Times-Roman f
(.) 1947 869 w
(.) 1983 869 w
(.) 2019 869 w
(.) 2055 869 w
(.) 2091 869 w
(.) 2127 869 w
(.) 2163 869 w
(.) 2199 869 w
(.) 2235 869 w
(.) 2271 869 w
(.) 2307 869 w
(.) 2343 869 w
(.) 2379 869 w
(.) 2415 869 w
(.) 2451 869 w
(.) 2487 869 w
(.) 2523 869 w
(.) 2559 869 w
(.) 2595 869 w
(.) 2631 869 w
(.) 2667 869 w
(.) 2703 869 w
(.) 2739 869 w
(.) 2775 869 w
(.) 2811 869 w
(.) 2847 869 w
(.) 2883 869 w
(.) 2919 869 w
(.) 2955 869 w
(.) 2991 869 w
(.) 3027 869 w
(.) 3063 869 w
(.) 3099 869 w
(.) 3135 869 w
(.) 3171 869 w
(.) 3207 869 w
(.) 3243 869 w
(.) 3279 869 w
(.) 3315 869 w
(.) 3351 869 w
(.) 3387 869 w
(.) 3423 869 w
(.) 3459 869 w
(.) 3495 869 w
(.) 3531 869 w
(.) 3567 869 w
(.) 3603 869 w
(.) 3639 869 w
(.) 3675 869 w
(.) 3711 869 w
(.) 3747 869 w
(.) 3783 869 w
(.) 3819 869 w
(.) 3855 869 w
(.) 3891 869 w
(.) 3927 869 w
(.) 3963 869 w
(.) 3999 869 w
(.) 4035 869 w
(.) 4071 869 w
(.) 4107 869 w
11 /Times-Roman f
(Reader) 772 1248 w
(1) 1109 1248 w
8 /Times-Roman f
(.) 1227 1229 w
(.) 1263 1229 w
(.) 1299 1229 w
(.) 1335 1229 w
(.) 1371 1229 w
(.) 1407 1229 w
(.) 1443 1229 w
(.) 1479 1229 w
(.) 1515 1229 w
(.) 1551 1229 w
(.) 1587 1229 w
(.) 1623 1229 w
(.) 1659 1229 w
(.) 1695 1229 w
(.) 1731 1229 w
(.) 1767 1229 w
(.) 1803 1229 w
(.) 1839 1229 w
(.) 1875 1229 w
(.) 1911 1229 w
(.) 1947 1229 w
1958 1226 2678 1226 Dl
11 /Times-Roman f
(resource) 2134 1188 w
(locked) 2172 1308 w
8 /Times-Roman f
(.) 2667 1229 w
(.) 2703 1229 w
(.) 2739 1229 w
(.) 2775 1229 w
(.) 2811 1229 w
(.) 2847 1229 w
(.) 2883 1229 w
(.) 2919 1229 w
(.) 2955 1229 w
(.) 2991 1229 w
(.) 3027 1229 w
(.) 3063 1229 w
(.) 3099 1229 w
(.) 3135 1229 w
(.) 3171 1229 w
(.) 3207 1229 w
(.) 3243 1229 w
(.) 3279 1229 w
(.) 3315 1229 w
(.) 3351 1229 w
(.) 3387 1229 w
(.) 3423 1229 w
(.) 3459 1229 w
(.) 3495 1229 w
(.) 3531 1229 w
(.) 3567 1229 w
(.) 3603 1229 w
(.) 3639 1229 w
(.) 3675 1229 w
(.) 3711 1229 w
(.) 3747 1229 w
(.) 3783 1229 w
(.) 3819 1229 w
(.) 3855 1229 w
(.) 3891 1229 w
(.) 3927 1229 w
(.) 3963 1229 w
(.) 3999 1229 w
(.) 4035 1229 w
(.) 4071 1229 w
(.) 4107 1229 w
11 /Times-Roman f
(Reader) 772 1608 w
(2) 1109 1608 w
8 /Times-Roman f
(.) 1227 1589 w
(.) 1263 1589 w
(.) 1299 1589 w
(.) 1335 1589 w
(.) 1371 1589 w
(.) 1407 1589 w
(.) 1443 1589 w
(.) 1479 1589 w
(.) 1515 1589 w
(.) 1551 1589 w
(.) 1587 1589 w
(.) 1623 1589 w
(.) 1659 1589 w
(.) 1695 1589 w
(.) 1731 1589 w
(.) 1767 1589 w
(.) 1803 1589 w
(.) 1839 1589 w
(.) 1875 1589 w
(.) 1911 1589 w
(.) 1947 1589 w
(.) 1983 1589 w
(.) 2019 1589 w
(.) 2055 1589 w
(.) 2091 1589 w
(.) 2127 1589 w
(.) 2163 1589 w
(.) 2199 1589 w
(.) 2235 1589 w
(.) 2271 1589 w
(.) 2307 1589 w
(.) 2343 1589 w
(.) 2379 1589 w
(.) 2415 1589 w
(.) 2451 1589 w
(.) 2487 1589 w
(.) 2523 1589 w
(.) 2559 1589 w
(.) 2595 1589 w
(.) 2631 1589 w
(.) 2667 1589 w
2678 1586 3398 1586 Dl
11 /Times-Roman f
(resource) 2854 1548 w
(locked) 2892 1668 w
8 /Times-Roman f
(.) 3387 1589 w
(.) 3423 1589 w
(.) 3459 1589 w
(.) 3495 1589 w
(.) 3531 1589 w
(.) 3567 1589 w
(.) 3603 1589 w
(.) 3639 1589 w
(.) 3675 1589 w
(.) 3711 1589 w
(.) 3747 1589 w
(.) 3783 1589 w
(.) 3819 1589 w
(.) 3855 1589 w
(.) 3891 1589 w
(.) 3927 1589 w
(.) 3963 1589 w
(.) 3999 1589 w
(.) 4035 1589 w
(.) 4071 1589 w
(.) 4107 1589 w
11 /Times-Roman f
(Reader) 772 1968 w
(3) 1109 1968 w
8 /Times-Roman f
(.) 1227 1949 w
(.) 1263 1949 w
(.) 1299 1949 w
(.) 1335 1949 w
(.) 1371 1949 w
(.) 1407 1949 w
(.) 1443 1949 w
(.) 1479 1949 w
(.) 1515 1949 w
(.) 1551 1949 w
(.) 1587 1949 w
(.) 1623 1949 w
(.) 1659 1949 w
(.) 1695 1949 w
(.) 1731 1949 w
(.) 1767 1949 w
(.) 1803 1949 w
(.) 1839 1949 w
(.) 1875 1949 w
(.) 1911 1949 w
(.) 1947 1949 w
(.) 1983 1949 w
(.) 2019 1949 w
(.) 2055 1949 w
(.) 2091 1949 w
(.) 2127 1949 w
(.) 2163 1949 w
(.) 2199 1949 w
(.) 2235 1949 w
(.) 2271 1949 w
(.) 2307 1949 w
(.) 2343 1949 w
(.) 2379 1949 w
(.) 2415 1949 w
(.) 2451 1949 w
(.) 2487 1949 w
(.) 2523 1949 w
(.) 2559 1949 w
(.) 2595 1949 w
(.) 2631 1949 w
(.) 2667 1949 w
(.) 2703 1949 w
(.) 2739 1949 w
(.) 2775 1949 w
(.) 2811 1949 w
(.) 2847 1949 w
(.) 2883 1949 w
(.) 2919 1949 w
(.) 2955 1949 w
(.) 2991 1949 w
(.) 3027 1949 w
(.) 3063 1949 w
(.) 3099 1949 w
(.) 3135 1949 w
(.) 3171 1949 w
(.) 3207 1949 w
(.) 3243 1949 w
(.) 3279 1949 w
(.) 3315 1949 w
(.) 3351 1949 w
(.) 3387 1949 w
3398 1946 4118 1946 Dl
11 /Times-Roman f
(resource) 3574 1908 w
(locked) 3612 2028 w
(If) 566 2360 w
(you) 674 2360 w
(want) 875 2360 w
(to) 1124 2360 w
11 /Times-Italic f
(feel) 1246 2360 w
11 /Times-Roman f
(the) 1440 2360 w
(difference) 1610 2360 w
(between) 2087 2360 w
(the) 2487 2360 w
(version) 2658 2360 w
(using) 3018 2360 w
11 /Courier f
(QLocks) 3294 2360 w
11 /Times-Roman f
(and) 3727 2360 w
(the) 3922 2360 w
(one) 4093 2360 w
(using) 566 2480 w
11 /Courier f
(RWLocks) 867 2480 w
11 /Times-Roman f
(,) 1329 2480 w
(try) 1419 2480 w
(to) 1603 2480 w
(increase) 1751 2480 w
(the) 2170 2480 w
(number) 2365 2480 w
(of) 2761 2480 w
(panels) 2913 2480 w
(to) 3254 2480 w
(15,) 3401 2480 w
(and) 3600 2480 w
(make) 3819 2480 w
(the) 4117 2480 w
11 /Courier f
(panelprocs) 566 2600 w
11 /Times-Roman f
(take) 1278 2600 w
(a) 1512 2600 w
(little) 1612 2600 w
(bit) 1867 2600 w
(more) 2036 2600 w
(time) 2313 2600 w
(to) 2561 2600 w
(read) 2699 2600 w
11 /Courier f
(msg) 2938 2600 w
11 /Times-Roman f
(,) 3136 2600 w
(for) 3217 2600 w
(example,) 3397 2600 w
(by) 3849 2600 w
(using) 4012 2600 w
11 /Courier f
(sleep) 566 2720 w
11 /Times-Roman f
(to) 930 2720 w
(make) 1050 2720 w
(them) 1321 2720 w
(hold) 1574 2720 w
(the) 1803 2720 w
(lock) 1970 2720 w
(for) 2192 2720 w
(some) 2352 2720 w
(time.) 2617 2720 w
(In) 2874 2720 w
(the) 2998 2720 w
(first) 3165 2720 w
(time,) 3375 2720 w
(messages) 3632 2720 w
(will) 4079 2720 w
(slowly) 566 2840 w
(come) 896 2840 w
(out) 1170 2840 w
(to) 1348 2840 w
(the) 1471 2840 w
(panels) 1642 2840 w
(\(or) 1959 2840 w
(your) 2123 2840 w
(standard) 2361 2840 w
(output) 2769 2840 w
(in) 3088 2840 w
(this) 3211 2840 w
(case\).) 3408 2840 w
(If) 3724 2840 w
(each) 3833 2840 w
(pro\255) 4069 2840 w
(cess) 566 2960 w
(holds) 787 2960 w
(the) 1065 2960 w
(lock) 1238 2960 w
(for) 1466 2960 w
(a) 1632 2960 w
(second,) 1718 2960 w
(the) 2088 2960 w
(15th) 2260 2960 w
(process) 2494 2960 w
(acquiring) 2860 2960 w
(the) 3312 2960 w
(lock) 3484 2960 w
(will) 3711 2960 w
(have) 3921 2960 w
(to) 4165 2960 w
(wait) 566 3080 w
(at) 802 3080 w
(least) 928 3080 w
(15) 1176 3080 w
(seconds.) 1333 3080 w
(In) 1755 3080 w
(the) 1893 3080 w
(second) 2074 3080 w
(case,) 2425 3080 w
(all) 2688 3080 w
(of) 2846 3080 w
(the) 2985 3080 w
(pannels) 3167 3080 w
(will) 3550 3080 w
(be) 3770 3080 w
(quickly) 3921 3080 w
(updated.) 566 3200 w
(Furthermore,) 978 3200 w
(using) 1591 3200 w
(the) 1867 3200 w
11 /Courier f
(RWLock) 2038 3200 w
11 /Times-Roman f
(keeps) 2471 3200 w
(the) 2757 3200 w
(resource) 2928 3200 w
(locked) 3334 3200 w
(for) 3663 3200 w
(less) 3826 3200 w
(time,) 4027 3200 w
(because) 566 3320 w
(the) 939 3320 w
(readers) 1101 3320 w
(are) 1443 3320 w
(now) 1603 3320 w
(allowed) 1820 3320 w
(to) 2195 3320 w
(overlap.) 2309 3320 w
(This) 816 3476 w
(is) 1058 3476 w
(shown) 1179 3476 w
(in) 1513 3476 w
(figures) 1646 3476 w
([[!readers) 1997 3476 w
(queuing!]]) 2466 3476 w
(and) 2975 3476 w
([[!readers) 3180 3476 w
(share) 3649 3476 w
(lock!]].) 3926 3476 w
(Both) 566 3596 w
(figures) 819 3596 w
(assume) 1161 3596 w
(that) 1522 3596 w
(initially,) 1725 3596 w
(the) 2135 3596 w
(writer) 2307 3596 w
(and) 2606 3596 w
(all) 2802 3596 w
(the) 2950 3596 w
(readers) 3122 3596 w
(try) 3474 3596 w
(to) 3634 3596 w
(acquire) 3758 3596 w
(the) 4117 3596 w
(lock) 566 3716 w
(\(the) 794 3716 w
(time) 1003 3716 w
(advances) 1238 3716 w
(to) 1677 3716 w
(the) 1802 3716 w
(right\).) 1976 3716 w
(When) 2316 3716 w
(using) 2617 3716 w
(a) 2896 3716 w
(queueing) 2984 3716 w
(lock,) 3426 3716 w
(look) 3683 3716 w
(at) 3919 3716 w
(what) 4038 3716 w
(happens) 566 3836 w
(to) 955 3836 w
(the) 1071 3836 w
(readers.) 1235 3836 w
(Compare) 1607 3836 w
(with) 2039 3836 w
(the) 2265 3836 w
(next) 2429 3836 w
(figure,) 2647 3836 w
(which) 2965 3836 w
(corresponds) 3262 3836 w
(to) 3820 3836 w
(using) 3935 3836 w
(a) 4203 3836 w
(read/write) 566 3956 w
(lock.) 1037 3956 w
(Writer) 826 4320 w
1238 4298 1958 4298 Dl
(resource) 1414 4260 w
(locked) 1452 4380 w
8 /Times-Roman f
(.) 1947 4301 w
(.) 1983 4301 w
(.) 2019 4301 w
(.) 2055 4301 w
(.) 2091 4301 w
(.) 2127 4301 w
(.) 2163 4301 w
(.) 2199 4301 w
(.) 2235 4301 w
(.) 2271 4301 w
(.) 2307 4301 w
(.) 2343 4301 w
(.) 2379 4301 w
(.) 2415 4301 w
(.) 2451 4301 w
(.) 2487 4301 w
(.) 2523 4301 w
(.) 2559 4301 w
(.) 2595 4301 w
(.) 2631 4301 w
(.) 2667 4301 w
(.) 2703 4301 w
(.) 2739 4301 w
(.) 2775 4301 w
(.) 2811 4301 w
(.) 2847 4301 w
(.) 2883 4301 w
(.) 2919 4301 w
(.) 2955 4301 w
(.) 2991 4301 w
(.) 3027 4301 w
(.) 3063 4301 w
(.) 3099 4301 w
(.) 3135 4301 w
(.) 3171 4301 w
(.) 3207 4301 w
(.) 3243 4301 w
(.) 3279 4301 w
(.) 3315 4301 w
(.) 3351 4301 w
(.) 3387 4301 w
(.) 3423 4301 w
(.) 3459 4301 w
(.) 3495 4301 w
(.) 3531 4301 w
(.) 3567 4301 w
(.) 3603 4301 w
(.) 3639 4301 w
(.) 3675 4301 w
(.) 3711 4301 w
(.) 3747 4301 w
(.) 3783 4301 w
(.) 3819 4301 w
(.) 3855 4301 w
(.) 3891 4301 w
(.) 3927 4301 w
(.) 3963 4301 w
(.) 3999 4301 w
(.) 4035 4301 w
(.) 4071 4301 w
(.) 4107 4301 w
11 /Times-Roman f
(Reader) 772 4680 w
(1) 1109 4680 w
8 /Times-Roman f
(.) 1227 4661 w
(.) 1263 4661 w
(.) 1299 4661 w
(.) 1335 4661 w
(.) 1371 4661 w
(.) 1407 4661 w
(.) 1443 4661 w
(.) 1479 4661 w
(.) 1515 4661 w
(.) 1551 4661 w
(.) 1587 4661 w
(.) 1623 4661 w
(.) 1659 4661 w
(.) 1695 4661 w
(.) 1731 4661 w
(.) 1767 4661 w
(.) 1803 4661 w
(.) 1839 4661 w
(.) 1875 4661 w
(.) 1911 4661 w
(.) 1947 4661 w
1958 4658 2678 4658 Dl
11 /Times-Roman f
(resource) 2134 4620 w
(locked) 2172 4740 w
8 /Times-Roman f
(.) 2667 4661 w
(.) 2703 4661 w
(.) 2739 4661 w
(.) 2775 4661 w
(.) 2811 4661 w
(.) 2847 4661 w
(.) 2883 4661 w
(.) 2919 4661 w
(.) 2955 4661 w
(.) 2991 4661 w
(.) 3027 4661 w
(.) 3063 4661 w
(.) 3099 4661 w
(.) 3135 4661 w
(.) 3171 4661 w
(.) 3207 4661 w
(.) 3243 4661 w
(.) 3279 4661 w
(.) 3315 4661 w
(.) 3351 4661 w
(.) 3387 4661 w
(.) 3423 4661 w
(.) 3459 4661 w
(.) 3495 4661 w
(.) 3531 4661 w
(.) 3567 4661 w
(.) 3603 4661 w
(.) 3639 4661 w
(.) 3675 4661 w
(.) 3711 4661 w
(.) 3747 4661 w
(.) 3783 4661 w
(.) 3819 4661 w
(.) 3855 4661 w
(.) 3891 4661 w
(.) 3927 4661 w
(.) 3963 4661 w
(.) 3999 4661 w
(.) 4035 4661 w
(.) 4071 4661 w
(.) 4107 4661 w
11 /Times-Roman f
(Reader) 772 5040 w
(2) 1109 5040 w
8 /Times-Roman f
(.) 1227 5021 w
(.) 1263 5021 w
(.) 1299 5021 w
(.) 1335 5021 w
(.) 1371 5021 w
(.) 1407 5021 w
(.) 1443 5021 w
(.) 1479 5021 w
(.) 1515 5021 w
(.) 1551 5021 w
(.) 1587 5021 w
(.) 1623 5021 w
(.) 1659 5021 w
(.) 1695 5021 w
(.) 1731 5021 w
(.) 1767 5021 w
(.) 1803 5021 w
(.) 1839 5021 w
(.) 1875 5021 w
(.) 1911 5021 w
(.) 1947 5021 w
(.) 1983 5021 w
(.) 2019 5021 w
2030 5018 2750 5018 Dl
11 /Times-Roman f
(resource) 2206 4980 w
(locked) 2244 5100 w
8 /Times-Roman f
(.) 2739 5021 w
(.) 2775 5021 w
(.) 2811 5021 w
(.) 2847 5021 w
(.) 2883 5021 w
(.) 2919 5021 w
(.) 2955 5021 w
(.) 2991 5021 w
(.) 3027 5021 w
(.) 3063 5021 w
(.) 3099 5021 w
(.) 3135 5021 w
(.) 3171 5021 w
(.) 3207 5021 w
(.) 3243 5021 w
(.) 3279 5021 w
(.) 3315 5021 w
(.) 3351 5021 w
(.) 3387 5021 w
(.) 3423 5021 w
(.) 3459 5021 w
(.) 3495 5021 w
(.) 3531 5021 w
(.) 3567 5021 w
(.) 3603 5021 w
(.) 3639 5021 w
(.) 3675 5021 w
(.) 3711 5021 w
(.) 3747 5021 w
(.) 3783 5021 w
(.) 3819 5021 w
(.) 3855 5021 w
(.) 3891 5021 w
(.) 3927 5021 w
(.) 3963 5021 w
(.) 3999 5021 w
(.) 4035 5021 w
(.) 4071 5021 w
(.) 4107 5021 w
11 /Times-Roman f
(Reader) 772 5400 w
(3) 1109 5400 w
8 /Times-Roman f
(.) 1227 5381 w
(.) 1263 5381 w
(.) 1299 5381 w
(.) 1335 5381 w
(.) 1371 5381 w
(.) 1407 5381 w
(.) 1443 5381 w
(.) 1479 5381 w
(.) 1515 5381 w
(.) 1551 5381 w
(.) 1587 5381 w
(.) 1623 5381 w
(.) 1659 5381 w
(.) 1695 5381 w
(.) 1731 5381 w
(.) 1767 5381 w
(.) 1803 5381 w
(.) 1839 5381 w
(.) 1875 5381 w
(.) 1911 5381 w
(.) 1947 5381 w
(.) 1983 5381 w
(.) 2019 5381 w
(.) 2055 5381 w
(.) 2091 5381 w
2102 5378 2822 5378 Dl
11 /Times-Roman f
(resource) 2278 5340 w
(locked) 2316 5460 w
8 /Times-Roman f
(.) 2811 5381 w
(.) 2847 5381 w
(.) 2883 5381 w
(.) 2919 5381 w
(.) 2955 5381 w
(.) 2991 5381 w
(.) 3027 5381 w
(.) 3063 5381 w
(.) 3099 5381 w
(.) 3135 5381 w
(.) 3171 5381 w
(.) 3207 5381 w
(.) 3243 5381 w
(.) 3279 5381 w
(.) 3315 5381 w
(.) 3351 5381 w
(.) 3387 5381 w
(.) 3423 5381 w
(.) 3459 5381 w
(.) 3495 5381 w
(.) 3531 5381 w
(.) 3567 5381 w
(.) 3603 5381 w
(.) 3639 5381 w
(.) 3675 5381 w
(.) 3711 5381 w
(.) 3747 5381 w
(.) 3783 5381 w
(.) 3819 5381 w
(.) 3855 5381 w
(.) 3891 5381 w
(.) 3927 5381 w
(.) 3963 5381 w
(.) 3999 5381 w
(.) 4035 5381 w
(.) 4071 5381 w
(.) 4107 5381 w
11 /Times-Roman f
(When) 816 5792 w
(there) 1105 5792 w
(is) 1351 5792 w
(not) 1453 5792 w
(much) 1622 5792 w
(competition) 1894 5792 w
(to) 2448 5792 w
(acquire) 2562 5792 w
(the) 2911 5792 w
(lock,) 3073 5792 w
(or) 3318 5792 w
(when) 3437 5792 w
(there) 3702 5792 w
(are) 3949 5792 w
(not) 4110 5792 w
(many) 566 5912 w
(readers,) 846 5912 w
(the) 1224 5912 w
(difference) 1394 5912 w
(may) 1871 5912 w
(be) 2096 5912 w
(unnoticed.) 2235 5912 w
(However,) 2731 5912 w
(locks) 3194 5912 w
(heavily) 3461 5912 w
(used) 3819 5912 w
(with) 4055 5912 w
(many) 566 6032 w
(processes) 840 6032 w
(that) 1289 6032 w
(just) 1484 6032 w
(want) 1674 6032 w
(to) 1918 6032 w
(read) 2035 6032 w
(the) 2253 6032 w
(data,) 2418 6032 w
(can) 2659 6032 w
(make) 2841 6032 w
(a) 3109 6032 w
(difference) 3188 6032 w
(between) 3660 6032 w
(both) 4055 6032 w
(types) 566 6152 w
(of) 826 6152 w
(locks.) 945 6152 w
cleartomark
showpage
saveobj restore
%%EndPage: 23 23
%%Page: 24 24
/saveobj save def
mark
24 pagesetup
11 /Times-Roman f
(\255 24 \255) 2289 413 w
16 /Times-Bold f
(10.4.) 566 686 w
(Rendezvous) 966 686 w
11 /Times-Roman f
(A) 816 842 w
(primitive) 935 842 w
(provided) 1379 842 w
(to) 1809 842 w
(synchronize) 1935 842 w
(several) 2504 842 w
(processes) 2853 842 w
(is) 3312 842 w
11 /Courier f
(rendezvous) 3427 842 w
11 /Times-Roman f
(.) 4087 842 w
(It) 4184 842 w
(has) 566 962 w
(this) 742 962 w
(name) 932 962 w
(because) 1199 962 w
(it) 1574 962 w
(allows) 1666 962 w
(two) 1983 962 w
(different) 2178 962 w
(processes) 2584 962 w
(to) 3033 962 w
(rendezvous,) 3148 962 w
(i.e.,) 3703 962 w
(to) 3895 962 w
(meet,) 4010 962 w
(at) 566 1082 w
(a) 673 1082 w
(particular) 749 1082 w
(point) 1196 1082 w
(in) 1451 1082 w
(their) 1565 1082 w
(execution.) 1794 1082 w
(This) 2276 1082 w
(is) 2500 1082 w
(the) 2602 1082 w
(interface.) 2764 1082 w
10 /Courier f
(; !!sig rendezvous) 786 1252 w
(void* rendezvous\(void* tag, void* value\)) 1266 1362 w
11 /Times-Roman f
(When) 566 1578 w
(a) 870 1578 w
(process) 961 1578 w
(calls) 1332 1578 w
11 /Courier f
(rendezvous) 1576 1578 w
11 /Times-Roman f
(with) 2279 1578 w
(a) 2518 1578 w
(given) 2609 1578 w
11 /Courier f
(tag) 2897 1578 w
11 /Times-Roman f
(,) 3095 1578 w
(the) 3167 1578 w
(process) 3345 1578 w
(blocks) 3717 1578 w
(until) 4048 1578 w
(another) 566 1698 w
(process) 927 1698 w
(calls) 1288 1698 w
11 /Courier f
(rendezvous) 1521 1698 w
11 /Times-Roman f
(with) 2213 1698 w
(the) 2441 1698 w
(same) 2607 1698 w
11 /Courier f
(tag) 2864 1698 w
11 /Times-Roman f
(.) 3062 1698 w
(Thus,) 3150 1698 w
(the) 3430 1698 w
(first) 3596 1698 w
(process) 3805 1698 w
(to) 4165 1698 w
(arrive) 566 1818 w
(to) 861 1818 w
(the) 988 1818 w
11 /Courier f
(rendezvous) 1163 1818 w
11 /Times-Roman f
(will) 1864 1818 w
(block) 2077 1818 w
(and) 2362 1818 w
(wait) 2561 1818 w
(for) 2791 1818 w
(the) 2960 1818 w
(second) 3136 1818 w
(to) 3482 1818 w
(arrive.) 3610 1818 w
(At) 3934 1818 w
(that) 4086 1818 w
(point,) 566 1938 w
(the) 898 1938 w
(values) 1109 1938 w
(both) 1466 1938 w
(processes) 1739 1938 w
(gave) 2235 1938 w
(as) 2518 1938 w
11 /Courier f
(value) 2686 1938 w
11 /Times-Roman f
(are) 3093 1938 w
(exchanged.) 3301 1938 w
(That) 3872 1938 w
(is,) 4149 1938 w
11 /Courier f
(rendezvous) 566 2058 w
11 /Times-Roman f
(for) 1261 2058 w
(each) 1423 2058 w
(process) 1657 2058 w
(returns) 2020 2058 w
(the) 2360 2058 w
11 /Courier f
(value) 2530 2058 w
11 /Times-Roman f
(passed) 2896 2058 w
(to) 3224 2058 w
(the) 3346 2058 w
(call) 3516 2058 w
(by) 3710 2058 w
(the) 3856 2058 w
(other) 4026 2058 w
(process.) 566 2178 w
(See) 950 2178 w
(figure) 1136 2178 w
([[!rendezvous!]].) 1425 2178 w
9 /Times-Roman f
(Process) 1417 2358 w
(A) 1715 2358 w
1598 2340 1598 2700 Dl
(calls:) 925 2790 w
9 /Courier f
(rendezvous\(tag, "hi"\)) 1138 2790 w
6 /Times-Roman f
(.) 1589 2846 w
(.) 1589 2882 w
(.) 1589 2918 w
(.) 1589 2954 w
(.) 1589 2990 w
(.) 1589 3026 w
(.) 1589 3062 w
(.) 1589 3098 w
(.) 1589 3134 w
(.) 1589 3170 w
(.) 1589 3206 w
9 /Times-Roman f
(Waiting...) 1621 3042 w
(call) 1184 3294 w
(returns:) 1337 3294 w
9 /Courier f
("there") 1635 3294 w
1598 3348 1598 3564 Dl
1598 3564 1598 3708 Dl
1580 3636 1598 3708 Dl
1616 3636 1598 3708 Dl
9 /Times-Bold f
(time) 1621 3654 w
9 /Times-Roman f
(Process) 3039 2358 w
(B) 3337 2358 w
3218 2340 3218 3060 Dl
(calls:) 2464 3150 w
9 /Courier f
(rendezvous\(tag, "there"\)) 2677 3150 w
9 /Times-Roman f
(call) 3218 3294 w
(returns:) 3371 3294 w
9 /Courier f
("hi") 3669 3294 w
3218 3348 3218 3564 Dl
3218 3564 3218 3708 Dl
3200 3636 3218 3708 Dl
3236 3636 3218 3708 Dl
9 /Times-Bold f
(time) 3241 3654 w
2030 3258 1958 3276 Dl
2030 3294 1958 3276 Dl
1958 3276 3074 3276 Dl
3002 3294 3074 3276 Dl
3002 3258 3074 3276 Dl
9 /Times-Roman f
(rendezvous) 2311 3234 w
11 /Times-Roman f
(The) 816 3942 w
(tag) 1021 3942 w
(used) 1190 3942 w
(for) 1426 3942 w
(the) 1588 3942 w
11 /Courier f
(rendezvous) 1757 3942 w
11 /Times-Roman f
(represents) 2452 3942 w
(the) 2930 3942 w
(meeting\255point) 3100 3942 w
(where) 3753 3942 w
(both) 4055 3942 w
(processes) 566 4062 w
(want) 1021 4062 w
(to) 1270 4062 w
(rendezvous.) 1392 4062 w
(The) 1954 4062 w
(ability) 2160 4062 w
(to) 2478 4062 w
(exchange) 2600 4062 w
(values) 3048 4062 w
(makes) 3363 4062 w
(the) 3678 4062 w
(primitive) 3847 4062 w
(more) 566 4182 w
(powerful,) 835 4182 w
(and) 1303 4182 w
(converts) 1506 4182 w
(it) 1922 4182 w
(into) 2029 4182 w
(a) 2246 4182 w
(generic) 2339 4182 w
(communication) 2705 4182 w
(tool) 3434 4182 w
(for) 3651 4182 w
(use) 3823 4182 w
(when) 4014 4182 w
(synchronization) 566 4302 w
(is) 1309 4302 w
(required.) 1424 4302 w
(In) 1885 4302 w
(general,) 2017 4302 w
(any) 2407 4302 w
(two) 2606 4302 w
(processes) 2812 4302 w
(may) 3272 4302 w
(rendezvous.) 3502 4302 w
(It) 4069 4302 w
(is) 4177 4302 w
(not) 566 4422 w
(necessary) 744 4422 w
(for) 1206 4422 w
(them) 1371 4422 w
(to) 1629 4422 w
(share) 1753 4422 w
(memory.) 2021 4422 w
(Of) 2453 4422 w
(course,) 2606 4422 w
(the) 2957 4422 w
(values) 3129 4422 w
(supplied) 3447 4422 w
(as) 3858 4422 w
11 /Courier f
(tags) 3987 4422 w
11 /Times-Roman f
(and) 566 4542 w
11 /Courier f
(values) 753 4542 w
11 /Times-Roman f
(cannot) 1177 4542 w
(be) 1497 4542 w
(used) 1628 4542 w
(to) 1857 4542 w
(point) 1971 4542 w
(to) 2226 4542 w
(shared) 2340 4542 w
(variables) 2653 4542 w
(when) 3076 4542 w
(the) 3341 4542 w
(processes) 3503 4542 w
(are) 3950 4542 w
(not) 4110 4542 w
(sharing) 566 4662 w
(memory,) 918 4662 w
(but) 1341 4662 w
(that) 1511 4662 w
(is) 1705 4662 w
(the) 1808 4662 w
(only) 1971 4662 w
(limitation.) 2196 4662 w
(The) 2683 4662 w
(values) 2882 4662 w
(are) 3191 4662 w
(still) 3352 4662 w
(exchanged) 3548 4662 w
(even) 4045 4662 w
(if) 566 4782 w
(memory) 661 4782 w
(is) 1055 4782 w
(not) 1157 4782 w
(shared.) 1326 4782 w
(The) 816 4938 w
(following) 1023 4938 w
(program) 1488 4938 w
(creates) 1897 4938 w
(a) 2237 4938 w
(child) 2323 4938 w
(process,) 2581 4938 w
(which) 2975 4938 w
(is) 3281 4938 w
(supposed) 3393 4938 w
(to) 3840 4938 w
(run) 3964 4938 w
(an) 4148 4938 w
(HTTP) 566 5058 w
(server.) 886 5058 w
(To) 1225 5058 w
(execute) 1392 5058 w
(nicely) 1770 5058 w
(in) 2083 5058 w
(the) 2214 5058 w
(background,) 2393 5058 w
(all) 2983 5058 w
(the) 3138 5058 w
(work) 3317 5058 w
(is) 3587 5058 w
(done) 3706 5058 w
(by) 3963 5058 w
(the) 4117 5058 w
(child,) 566 5178 w
(and) 847 5178 w
(not) 1038 5178 w
(by) 1212 5178 w
(the) 1355 5178 w
(parent.) 1522 5178 w
(This) 1856 5178 w
(way,) 2085 5178 w
(the) 2328 5178 w
(user) 2496 5178 w
(does) 2712 5178 w
(not) 2947 5178 w
(need) 3122 5178 w
(to) 3362 5178 w
(add) 3482 5178 w
(an) 3674 5178 w
(additional) 3811 5178 w
11 /Courier f
(&) 566 5298 w
11 /Times-Roman f
(when) 683 5298 w
(starting) 971 5298 w
(the) 1352 5298 w
(program) 1537 5298 w
(from) 1959 5298 w
(the) 2223 5298 w
(shell.) 2408 5298 w
(However,) 2695 5298 w
(before) 3174 5298 w
(doing) 3503 5298 w
(the) 3805 5298 w
(actual) 3990 5298 w
(work,) 566 5418 w
(the) 851 5418 w
(child) 1017 5418 w
(must) 1269 5418 w
(initialize) 1517 5418 w
(its) 1935 5418 w
(data) 2073 5418 w
(structures) 2288 5418 w
(and) 2747 5418 w
(perhaps) 2938 5418 w
(read) 3311 5418 w
(some) 3531 5418 w
(configura\255) 3796 5418 w
(tion) 566 5538 w
(files.) 768 5538 w
(This) 1015 5538 w
(is) 1241 5538 w
(a) 1345 5538 w
(problem,) 1422 5538 w
(because) 1845 5538 w
(initialization) 2219 5538 w
(could) 2805 5538 w
(fail.) 3078 5538 w
(If) 3281 5538 w
(it) 3382 5538 w
(fails,) 3473 5538 w
(we) 3719 5538 w
(want) 3875 5538 w
(the) 4117 5538 w
(parent) 566 5658 w
(process) 872 5658 w
(to) 1233 5658 w
11 /Courier f
(exits) 1352 5658 w
11 /Times-Roman f
(with) 1715 5658 w
(a) 1944 5658 w
(non\255null) 2025 5658 w
(status,) 2431 5658 w
(to) 2743 5658 w
(let) 2862 5658 w
(the) 3005 5658 w
(shell) 3172 5658 w
(know) 3413 5658 w
(that) 3690 5658 w
(our) 3889 5658 w
(pro\255) 4069 5658 w
(gram) 566 5778 w
(failed.) 819 5778 w
(One) 816 5934 w
(way) 1036 5934 w
(to) 1256 5934 w
(overcome) 1380 5934 w
(this) 1850 5934 w
(problem) 2049 5934 w
(is) 2454 5934 w
(to) 2567 5934 w
(make) 2692 5934 w
(the) 2968 5934 w
(parent) 3141 5934 w
(process) 3453 5934 w
(wait) 3820 5934 w
(until) 4048 5934 w
(the) 566 6054 w
(child) 734 6054 w
(has) 988 6054 w
(been) 1168 6054 w
(initialized.) 1408 6054 w
(At) 1910 6054 w
(that) 2054 6054 w
(point,) 2252 6054 w
(it) 2540 6054 w
(is) 2635 6054 w
(safe) 2742 6054 w
(for) 2950 6054 w
(the) 3110 6054 w
(parent) 3277 6054 w
(to) 3583 6054 w
(call) 3702 6054 w
11 /Courier f
(exits) 3893 6054 w
11 /Times-Roman f
(,) 4223 6054 w
(and) 566 6174 w
(let) 773 6174 w
(the) 932 6174 w
(child) 1115 6174 w
(do) 1384 6174 w
(the) 1543 6174 w
(work) 1727 6174 w
(if) 2002 6174 w
(everything) 2119 6174 w
(went) 2638 6174 w
(fine.) 2901 6174 w
(This) 3149 6174 w
(can) 3395 6174 w
(be) 3596 6174 w
(done) 3749 6174 w
(using) 4012 6174 w
11 /Courier f
(rendezvous) 566 6294 w
11 /Times-Roman f
(like) 1254 6294 w
(follows.) 1447 6294 w
cleartomark
showpage
saveobj restore
%%EndPage: 24 24
%%Page: 25 25
/saveobj save def
mark
25 pagesetup
11 /Times-Roman f
(\255 25 \255) 2289 413 w
9 /S f
(\347) 566 676 w
9 /Times-Bold f
(rendez.c) 581 676 w
9 /S f
(\347) 919 676 w
(`) 566 676 w
(```````) 604 676 w
(_) 566 676 w
(_______) 604 676 w
8 /Courier f
(void) 786 784 w
(main\(int, char*[]\)) 786 892 w
({) 786 1000 w
(int) 1266 1108 w
(i;) 1746 1108 w
(int) 1266 1216 w
(childsts;) 1746 1216 w
(switch\(rfork\(RFPROC|RFNOTEG|RFNOWAIT\)\){) 1266 1432 w
(case 0:) 1266 1540 w
(if \(httpinit\(\) < 0\)) 1746 1648 w
(rendezvous\(&main, \(void*\)\2551\);) 2226 1756 w
(else) 1746 1864 w
(rendezvous\(&main, \(void*\)0\);) 2226 1972 w
(httpservice\(\);) 1746 2080 w
(// do the job.) 2706 2080 w
(exits\(nil\);) 1746 2188 w
(case \2551:) 1266 2296 w
(sysfatal\("rfork: %r"\);) 1746 2404 w
(default:) 1266 2512 w
(childsts = \(int\)rendezvous\(&main, \(void*\)0\);) 1746 2620 w
(if \(childsts == 0\)) 1746 2728 w
(exits\(nil\);) 2226 2836 w
(else {) 1746 2944 w
(fprint\(2, "httpinit failed\\n"\);) 2226 3052 w
(exits\("httpinit failed"\);) 2226 3160 w
(}) 1746 3268 w
(}) 1266 3376 w
(}) 786 3484 w
11 /Times-Roman f
(Note) 566 3700 w
(that) 809 3700 w
(each) 1004 3700 w
(process) 1233 3700 w
(calls) 1591 3700 w
11 /Courier f
(rendezvous) 1822 3700 w
11 /Times-Italic f
(once) 2513 3700 w
11 /Times-Roman f
(.) 2719 3700 w
(The) 2806 3700 w
(parent) 3007 3700 w
(calls) 3311 3700 w
(it) 3543 3700 w
(to) 3636 3700 w
(rendezvous) 3753 3700 w
(with) 566 3820 w
(the) 795 3820 w
(child,) 962 3820 w
(after) 1243 3820 w
(it) 1475 3820 w
(has) 1570 3820 w
(initialized.) 1749 3820 w
(The) 2250 3820 w
(child) 2453 3820 w
(calls) 2706 3820 w
(it) 2940 3820 w
(to) 3034 3820 w
(rendezvous) 3152 3820 w
(with) 3682 3820 w
(the) 3910 3820 w
(par\255) 4076 3820 w
(ent,) 566 3940 w
(and) 764 3940 w
(report) 958 3940 w
(its) 1255 3940 w
(initialization) 1396 3940 w
(status.) 1989 3940 w
(As) 2332 3940 w
(the) 2490 3940 w
(tag,) 2660 3940 w
(we) 2858 3940 w
(used) 3021 3940 w
(the) 3259 3940 w
(address) 3430 3940 w
(for) 3795 3940 w
11 /Courier f
(main) 3959 3940 w
11 /Times-Roman f
(.) 4223 3940 w
(It) 566 4060 w
(does) 666 4060 w
(not) 900 4060 w
(really) 1074 4060 w
(matter) 1356 4060 w
(which) 1669 4060 w
(tag) 1970 4060 w
(we) 2137 4060 w
(use,) 2297 4060 w
(as) 2503 4060 w
(long) 2626 4060 w
(as) 2854 4060 w
(it) 2977 4060 w
(is) 3071 4060 w
(the) 3177 4060 w
(same) 3343 4060 w
(address.) 3600 4060 w
(Using) 3988 4060 w
11 /Courier f
(&main) 566 4180 w
11 /Times-Roman f
(seemed) 927 4180 w
(like) 1286 4180 w
(a) 1482 4180 w
(good) 1561 4180 w
(idea) 1813 4180 w
(to) 2027 4180 w
(make) 2145 4180 w
(it) 2414 4180 w
(explicit) 2508 4180 w
(that) 2870 4180 w
(we) 3067 4180 w
(are) 3226 4180 w
(doing) 3390 4180 w
(a) 3673 4180 w
(rendezvous) 3753 4180 w
(just) 566 4300 w
(for) 759 4300 w
(this) 919 4300 w
(function.) 1112 4300 w
(As) 1539 4300 w
(values,) 1694 4300 w
(the) 2035 4300 w
(child) 2202 4300 w
(gave) 2455 4300 w
11 /Courier f
(\2551) 2694 4300 w
11 /Times-Roman f
(\(as) 2858 4300 w
(a) 3017 4300 w
(pointer,) 3097 4300 w
(sic\)) 3468 4300 w
(to) 3658 4300 w
(report) 3776 4300 w
(fail\255) 4069 4300 w
(ure,) 566 4420 w
(or) 791 4420 w
11 /Courier f
(0) 940 4420 w
11 /Times-Roman f
(\(as) 1064 4420 w
(a) 1249 4420 w
(pointer\)) 1355 4420 w
(to) 1760 4420 w
(report) 1904 4420 w
(success.) 2223 4420 w
(As) 2637 4420 w
(we) 2817 4420 w
(said,) 3002 4420 w
11 /Courier f
(rendezvous) 3265 4420 w
11 /Times-Roman f
(works) 3983 4420 w
(although) 566 4540 w
(these) 979 4540 w
(processes) 1232 4540 w
(are) 1679 4540 w
(not) 1839 4540 w
(sharing) 2008 4540 w
(memory.) 2359 4540 w
(To) 816 4696 w
(test) 966 4696 w
(this) 1147 4696 w
(program,) 1335 4696 w
(we) 1762 4696 w
(used) 1917 4696 w
(an) 2146 4696 w
(utterly) 2277 4696 w
(complex) 2592 4696 w
(implementation) 2998 4696 w
(for) 3717 4696 w
(HTTP) 3872 4696 w
10 /Courier f
(void) 786 4866 w
(httpservice\(void\)) 786 4976 w
({) 786 5086 w
(sleep\(50000\);) 1266 5196 w
(}) 786 5306 w
11 /Times-Roman f
(That) 566 5522 w
(is) 801 5522 w
(the) 909 5522 w
(best) 1077 5522 w
(we) 1288 5522 w
(could) 1449 5522 w
(do) 1727 5522 w
(given) 1871 5522 w
(the) 2149 5522 w
(so) 2317 5522 w
(many) 2449 5522 w
(standards) 2727 5522 w
(that) 3176 5522 w
(are) 3376 5522 w
(in) 3543 5522 w
(use) 3664 5522 w
(today) 3845 5522 w
(for) 4124 5522 w
(the) 566 5642 w
(Web.) 743 5642 w
(Also,) 1020 5642 w
(we) 1299 5642 w
(tried) 1469 5642 w
(the) 1713 5642 w
(program) 1890 5642 w
(with) 2304 5642 w
(two) 2543 5642 w
(implementations) 2750 5642 w
(for) 3526 5642 w
11 /Courier f
(httpinit) 3695 5642 w
11 /Times-Roman f
(,) 4223 5642 w
(one) 566 5762 w
(returning) 752 5762 w
11 /Courier f
(0) 1182 5762 w
11 /Times-Roman f
(and) 1276 5762 w
(another) 1462 5762 w
(returning) 1818 5762 w
11 /Courier f
(\2551) 2248 5762 w
11 /Times-Roman f
(,) 2380 5762 w
(like) 2436 5762 w
(this) 2629 5762 w
(one.) 2817 5762 w
cleartomark
showpage
saveobj restore
%%EndPage: 25 25
%%Page: 26 26
/saveobj save def
mark
26 pagesetup
11 /Times-Roman f
(\255 26 \255) 2289 413 w
10 /Courier f
(int) 786 676 w
(httpinit\(void\)) 786 786 w
({) 786 896 w
(sleep\(2000\);) 1266 1006 w
(return 0;) 1266 1116 w
(}) 786 1226 w
11 /Times-Roman f
(And) 566 1442 w
(this) 783 1442 w
(is) 971 1442 w
(an) 1073 1442 w
(example) 1204 1442 w
(execution) 1603 1442 w
(for) 2057 1442 w
(both) 2212 1442 w
(versions) 2436 1442 w
(of) 2830 1442 w
(the) 2949 1442 w
(program.) 3111 1442 w
10 /Courier f
(; 8.rendez) 786 1612 w
(httpinit failed) 786 1722 w
(; 8.rendez) 786 1832 w
10 /Times-Roman f
(After two seconds we got another prompt.) 2226 1832 w
10 /Courier f
(; ps | grep 8.rendez) 786 1942 w
(nemo) 786 2052 w
(7076) 1266 2052 w
(0:00) 1746 2052 w
(0:00) 2166 2052 w
(24K Sleep) 2586 2052 w
(8.rendez) 3366 2052 w
16 /Times-Bold f
(10.5.) 566 2472 w
(Sleep) 966 2472 w
(and) 1371 2472 w
(wakeup) 1671 2472 w
11 /Times-Roman f
(Going) 816 2628 w
(back) 1130 2628 w
(to) 1375 2628 w
(our) 1500 2628 w
(airport) 1685 2628 w
(panels) 2016 2628 w
(program,) 2335 2628 w
(it) 2773 2628 w
(is) 2874 2628 w
(a) 2987 2628 w
(resource) 3074 2628 w
(waste) 3482 2628 w
(to) 3770 2628 w
(keep) 3895 2628 w
(all) 4141 2628 w
(those) 566 2748 w
11 /Courier f
(panelprocs) 851 2748 w
11 /Times-Roman f
(polling) 1564 2748 w
(just) 1930 2748 w
(to) 2143 2748 w
(check) 2282 2748 w
(if) 2589 2748 w
(there) 2709 2748 w
(is) 2980 2748 w
(a) 3107 2748 w
(new) 3207 2748 w
(message.) 3441 2748 w
(Another) 3892 2748 w
(abstraction,) 566 2868 w
(provided) 1125 2868 w
(by) 1565 2868 w
(the) 1725 2868 w
(functions) 1909 2868 w
11 /Courier f
(rsleep) 2368 2868 w
11 /Times-Roman f
(,) 2764 2868 w
11 /Courier f
(rwakeup) 2842 2868 w
11 /Times-Roman f
(,) 3304 2868 w
(and) 3382 2868 w
11 /Courier f
(rwakeupall) 3591 2868 w
11 /Times-Roman f
(may) 566 2988 w
(be) 811 2988 w
(more) 970 2988 w
(appropriate.) 1251 2988 w
(By) 1833 2988 w
(the) 2018 2988 w
(way,) 2208 2988 w
(do) 2474 2988 w
(not) 2639 2988 w
(confuse) 2835 2988 w
(this) 3230 2988 w
(with) 3445 2988 w
(the) 3696 2988 w
(function) 3885 2988 w
11 /Courier f
(sleep) 566 3108 w
11 /Times-Roman f
(\(2\)) 896 3108 w
(that) 1051 3108 w
(puts) 1244 3108 w
(the) 1456 3108 w
(process) 1618 3108 w
(to) 1974 3108 w
(sleep) 2088 3108 w
(for) 2341 3108 w
(some) 2496 3108 w
(time.) 2756 3108 w
(It) 3008 3108 w
(is) 3103 3108 w
(totally) 3205 3108 w
(different.) 3515 3108 w
(The) 816 3264 w
(idea) 1029 3264 w
(is) 1254 3264 w
(that) 1371 3264 w
(a) 1579 3264 w
(process) 1670 3264 w
(that) 2041 3264 w
(wants) 2249 3264 w
(to) 2548 3264 w
(use) 2677 3264 w
(a) 2867 3264 w
(resource,) 2959 3264 w
(locks) 3400 3264 w
(the) 3676 3264 w
(resource.) 3854 3264 w
(The) 566 3384 w
(resource) 774 3384 w
(is) 1181 3384 w
(protected) 1293 3384 w
(by) 1738 3384 w
(a) 1886 3384 w
(lock,) 1972 3384 w
(and) 2226 3384 w
(all) 2421 3384 w
(operations) 2568 3384 w
(made) 3062 3384 w
(to) 3336 3384 w
(the) 3459 3384 w
(resource) 3630 3384 w
(must) 4036 3384 w
(keep) 566 3504 w
(the) 800 3504 w
(lock) 962 3504 w
(held.) 1179 3504 w
(That) 1424 3504 w
(is) 1653 3504 w
(not) 1755 3504 w
(new.) 1925 3504 w
(In) 2192 3504 w
(our) 2312 3504 w
(program,) 2487 3504 w
(processes) 2915 3504 w
(updating) 3363 3504 w
(or) 3777 3504 w
(consult\255) 3897 3504 w
(ing) 566 3624 w
11 /Courier f
(msg) 735 3624 w
11 /Times-Roman f
(must) 961 3624 w
(have) 1204 3624 w
11 /Courier f
(msg) 1438 3624 w
11 /Times-Roman f
(locked) 1664 3624 w
(during) 1984 3624 w
(these) 2299 3624 w
(operations.) 2552 3624 w
(Now) 816 3780 w
(suppose) 1058 3780 w
(that,) 1441 3780 w
(during) 1663 3780 w
(an) 1979 3780 w
(operation) 2112 3780 w
(\(like) 2556 3780 w
(consulting) 2787 3780 w
(the) 3276 3780 w
(message\),) 3440 3780 w
(the) 3905 3780 w
(pro\255) 4069 3780 w
(cess) 566 3900 w
(decides) 786 3900 w
(that) 1152 3900 w
(it) 1355 3900 w
(cannot) 1455 3900 w
(proceed) 1785 3900 w
(\(e.g.,) 2168 3900 w
(because) 2429 3900 w
(the) 2812 3900 w
(message) 2984 3900 w
(is) 3393 3900 w
(not) 3504 3900 w
(new,) 3682 3900 w
(and) 3929 3900 w
(we) 4124 3900 w
(only) 566 4020 w
(want) 798 4020 w
(new) 1047 4020 w
(messages\).) 1265 4020 w
(Instead) 1779 4020 w
(of) 2132 4020 w
(releasing) 2260 4020 w
(the) 2692 4020 w
(lock) 2863 4020 w
(and) 3089 4020 w
(trying) 3284 4020 w
(again) 3584 4020 w
(later,) 3858 4020 w
(the) 4117 4020 w
(process) 566 4140 w
(may) 941 4140 w
(call) 1177 4140 w
11 /Courier f
(rsleep) 1382 4140 w
11 /Times-Roman f
(.) 1778 4140 w
(This) 1881 4140 w
(puts) 2124 4140 w
(the) 2355 4140 w
(process) 2536 4140 w
(to) 2911 4140 w
(sleep) 3044 4140 w
(unconditionally.) 3316 4140 w
(The) 4081 4140 w
(process) 566 4260 w
(goes) 925 4260 w
(to) 1157 4260 w
(sleep) 1274 4260 w
(because) 1530 4260 w
(it) 1906 4260 w
(requires) 1999 4260 w
(some) 2382 4260 w
(condition) 2645 4260 w
(to) 3092 4260 w
(be) 3209 4260 w
(true,) 3344 4260 w
(and) 3574 4260 w
(it) 3764 4260 w
(finds) 3858 4260 w
(out) 4110 4260 w
(that) 566 4380 w
(the) 759 4380 w
(condition) 921 4380 w
(does) 1365 4380 w
(not) 1594 4380 w
(hold) 1763 4380 w
(and) 1987 4380 w
(calls) 2173 4380 w
11 /Courier f
(rsleep.) 2402 4380 w
11 /Times-Roman f
(At) 816 4536 w
(a) 963 4536 w
(later) 1048 4536 w
(time,) 1279 4536 w
(another) 1540 4536 w
(process) 1905 4536 w
(may) 2270 4536 w
(make) 2496 4536 w
(the) 2771 4536 w
(condition) 2943 4536 w
(true) 3397 4536 w
(\(e.g.,) 3605 4536 w
(the) 3866 4536 w
(mes\255) 4038 4536 w
(sage) 566 4656 w
(is) 796 4656 w
(updated\).) 906 4656 w
(This) 1353 4656 w
(other) 1585 4656 w
(process) 1845 4656 w
(calls) 2208 4656 w
11 /Courier f
(rwakeup) 2444 4656 w
11 /Times-Roman f
(,) 2906 4656 w
(to) 2969 4656 w
(wake) 3090 4656 w
(up) 3355 4656 w
(one) 3500 4656 w
(of) 3693 4656 w
(the) 3819 4656 w
(possi\255) 3988 4656 w
(bly) 566 4776 w
(many) 735 4776 w
(processes) 1007 4776 w
(waiting) 1454 4776 w
(for) 1812 4776 w
(the) 1967 4776 w
(condition) 2129 4776 w
(to) 2573 4776 w
(hold.) 2687 4776 w
(The) 816 4932 w
(idea) 1016 4932 w
(is) 1228 4932 w
(that) 1332 4932 w
11 /Courier f
(rsleep) 1527 4932 w
11 /Times-Roman f
(is) 1953 4932 w
(a) 2057 4932 w
(temporary) 2135 4932 w
(sleep) 2615 4932 w
(waiting) 2870 4932 w
(for) 3230 4932 w
(a) 3387 4932 w
(condition) 3465 4932 w
(to) 3911 4932 w
(hold.) 4027 4932 w
(And) 566 5052 w
(it) 784 5052 w
(always) 875 5052 w
(happens) 1208 5052 w
(in) 1596 5052 w
(the) 1711 5052 w
(middle) 1874 5052 w
(of) 2209 5052 w
(an) 2329 5052 w
(operation) 2461 5052 w
(on) 2904 5052 w
(the) 3042 5052 w
(resource,) 3204 5052 w
(after) 3629 5052 w
(checking) 3856 5052 w
(out) 566 5172 w
(if) 735 5172 w
(the) 830 5172 w
(condition) 993 5172 w
(holds.) 1438 5172 w
(This) 1734 5172 w
(function) 1959 5172 w
(releases) 2354 5172 w
(the) 2728 5172 w
(lock) 2891 5172 w
(before) 3109 5172 w
(going) 3416 5172 w
(to) 3696 5172 w
(sleep,) 3811 5172 w
(and) 4093 5172 w
(re\255acquires) 566 5292 w
(it) 1079 5292 w
(after) 1170 5292 w
(waking) 1397 5292 w
(up.) 1748 5292 w
(Therefore,) 1914 5292 w
(the) 2399 5292 w
(process) 2561 5292 w
(can) 2917 5292 w
(nicely) 3096 5292 w
(sleep) 3392 5292 w
(inside) 3645 5292 w
(its) 3936 5292 w
(crit\255) 4069 5292 w
(ical) 566 5412 w
(region,) 761 5412 w
(because) 1106 5412 w
(the) 1488 5412 w
(lock) 1659 5412 w
(is) 1886 5412 w
(not) 1998 5412 w
(held) 2177 5412 w
(while) 2404 5412 w
(sleeping.) 2686 5412 w
(If) 3118 5412 w
(the) 3228 5412 w
(lock) 3400 5412 w
(was) 3627 5412 w
(kept) 3835 5412 w
(held) 4062 5412 w
(while) 566 5532 w
(sleeping,) 846 5532 w
(the) 1276 5532 w
(process) 1446 5532 w
(would) 1810 5532 w
(never) 2121 5532 w
(wake) 2399 5532 w
(up.) 2665 5532 w
(To) 2839 5532 w
(wake) 2997 5532 w
(up,) 3263 5532 w
(it) 3437 5532 w
(requires) 3535 5532 w
(another) 3923 5532 w
(process) 566 5652 w
(to) 929 5652 w
(call) 1050 5652 w
11 /Courier f
(rwakeup) 1244 5652 w
11 /Times-Roman f
(.) 1706 5652 w
(Now,) 1798 5652 w
(a) 2075 5652 w
(process) 2159 5652 w
(can) 2523 5652 w
(only) 2710 5652 w
(call) 2942 5652 w
11 /Courier f
(rwakeup) 3136 5652 w
11 /Times-Roman f
(while) 3634 5652 w
(holding) 3914 5652 w
(the) 566 5772 w
(resource,) 729 5772 w
(i.e.,) 1155 5772 w
(while) 1347 5772 w
(holding) 1620 5772 w
(the) 1986 5772 w
(lock.) 2148 5772 w
(And) 2393 5772 w
(to) 2610 5772 w
(acquire) 2724 5772 w
(the) 3073 5772 w
(lock,) 3235 5772 w
(the) 3480 5772 w
(sleeper) 3642 5772 w
(had) 3979 5772 w
(to) 4165 5772 w
(release) 566 5892 w
(it) 896 5892 w
(before) 986 5892 w
(sleeping.) 1292 5892 w
(The) 816 6048 w
(behavior) 1019 6048 w
(of) 1436 6048 w
11 /Courier f
(rwakeup) 1561 6048 w
11 /Times-Roman f
(is) 2057 6048 w
(also) 2165 6048 w
(appropriate) 2376 6048 w
(with) 2908 6048 w
(respect) 3138 6048 w
(to) 3481 6048 w
(the) 3601 6048 w
(lock) 3769 6048 w
(of) 3992 6048 w
(the) 4117 6048 w
(resource.) 566 6168 w
(This) 998 6168 w
(function) 1229 6168 w
(wakes) 1630 6168 w
(up) 1938 6168 w
(one) 2082 6168 w
(of) 2274 6168 w
(the) 2399 6168 w
(sleepers,) 2567 6168 w
(but) 2981 6168 w
(the) 3156 6168 w
(caller) 3324 6168 w
(continues) 3600 6168 w
(with) 4055 6168 w
(the) 566 6288 w
(resource) 730 6288 w
(locked) 1129 6288 w
(and) 1451 6288 w
(can) 1639 6288 w
(complete) 1820 6288 w
(whatever) 2252 6288 w
(remains) 2682 6288 w
(of) 3059 6288 w
(its) 3180 6288 w
(critical) 3316 6288 w
(region.) 3651 6288 w
(When) 3990 6288 w
cleartomark
showpage
saveobj restore
%%EndPage: 26 26
%%Page: 27 27
/saveobj save def
mark
27 pagesetup
11 /Times-Roman f
(\255 27 \255) 2289 413 w
(this) 566 686 w
(process) 763 686 w
(completes) 1127 686 w
(the) 1608 686 w
(operation) 1778 686 w
(and) 2228 686 w
(releases) 2422 686 w
(the) 2803 686 w
(lock,) 2973 686 w
(the) 3226 686 w
(awakened) 3396 686 w
(one) 3868 686 w
(may) 4062 686 w
(re\255acquire) 566 806 w
(it) 1035 806 w
(and) 1125 806 w
(continue.) 1311 806 w
(Re\255acquiring) 816 962 w
(the) 1420 962 w
(lock) 1586 962 w
(after) 1807 962 w
(waking) 2038 962 w
(up) 2394 962 w
(might) 2537 962 w
(lead) 2828 962 w
(to) 3043 962 w
(starvation,) 3162 962 w
(when) 3656 962 w
(there) 3926 962 w
(is) 4177 962 w
(always) 566 1082 w
(some) 909 1082 w
(process) 1180 1082 w
(coming) 1547 1082 w
(fast) 1915 1082 w
(to) 2111 1082 w
(use) 2235 1082 w
(the) 2419 1082 w
(resource) 2591 1082 w
(and) 2998 1082 w
(acquiring) 3194 1082 w
(the) 3646 1082 w
(lock) 3818 1082 w
(even) 4045 1082 w
(before) 566 1202 w
(the) 882 1202 w
(poor) 1054 1202 w
(process) 1293 1202 w
(that) 1659 1202 w
(did) 1862 1202 w
(wake) 2041 1202 w
(up) 2309 1202 w
(can) 2457 1202 w
(acquire) 2646 1202 w
(it) 3005 1202 w
(again.) 3105 1202 w
(To) 3408 1202 w
(avoid) 3568 1202 w
(this,) 3850 1202 w
(it) 4076 1202 w
(is) 4177 1202 w
(guaranteed) 566 1322 w
(that) 1087 1322 w
(a) 1294 1322 w
(process) 1383 1322 w
(that) 1752 1322 w
(is) 1958 1322 w
(awakened) 2073 1322 w
(will) 2550 1322 w
(acquire) 2763 1322 w
(the) 3125 1322 w
(lock) 3300 1322 w
(sooner) 3530 1322 w
(than) 3863 1322 w
(any) 4093 1322 w
(other) 566 1442 w
(newcomer.) 819 1442 w
(In) 1330 1442 w
(few) 1449 1442 w
(words,) 1640 1442 w
(you) 1964 1442 w
(do) 2157 1442 w
(not) 2295 1442 w
(have) 2464 1442 w
(to) 2698 1442 w
(worry) 2812 1442 w
(about) 3101 1442 w
(this.) 3373 1442 w
(A) 816 1598 w
(variant) 941 1598 w
(of) 1292 1598 w
11 /Courier f
(rwakeup) 1430 1598 w
11 /Times-Roman f
(,) 1892 1598 w
(called) 1967 1598 w
11 /Courier f
(rwakeupall) 2275 1598 w
11 /Times-Roman f
(,) 2935 1598 w
(wakes) 3010 1598 w
(up) 3330 1598 w
11 /Times-Italic f
(all) 3487 1598 w
11 /Times-Roman f
(the) 3651 1598 w
(processes) 3832 1598 w
(sleeping) 566 1718 w
(waiting) 963 1718 w
(for) 1324 1718 w
(the) 1482 1718 w
(condition) 1647 1718 w
(to) 2094 1718 w
(hold.) 2210 1718 w
(Although) 2464 1718 w
(many) 2910 1718 w
(processes) 3184 1718 w
(may) 3633 1718 w
(be) 3852 1718 w
(awak\255) 3985 1718 w
(ened,) 566 1838 w
(they) 829 1838 w
(will) 1047 1838 w
(re\255acquire) 1249 1838 w
(the) 1720 1838 w
(lock) 1884 1838 w
(before) 2103 1838 w
(returning) 2411 1838 w
(from) 2843 1838 w
11 /Courier f
(rsleep) 3086 1838 w
11 /Times-Roman f
(.) 3482 1838 w
(Therefore,) 3568 1838 w
(only) 4055 1838 w
(one) 566 1958 w
(process) 761 1958 w
(is) 1126 1958 w
(using) 1237 1958 w
(the) 1513 1958 w
(resource) 1684 1958 w
(at) 2090 1958 w
(a) 2206 1958 w
(time) 2291 1958 w
(and) 2523 1958 w
(we) 2717 1958 w
(still) 2880 1958 w
(have) 3083 1958 w
(mutual) 3325 1958 w
(exclusion) 3667 1958 w
(for) 4124 1958 w
(the) 566 2078 w
(critical) 728 2078 w
(region.) 1060 2078 w
(The) 816 2234 w
(data) 1021 2234 w
(structure) 1238 2234 w
11 /Courier f
(Rendez) 1656 2234 w
11 /Times-Roman f
(represents) 2087 2234 w
(the) 2565 2234 w
(rendezvous) 2734 2234 w
(point) 3267 2234 w
(where) 3530 2234 w
(processes) 3832 2234 w
(sleeping) 566 2354 w
(and) 964 2354 w
(processes) 1154 2354 w
(waking) 1605 2354 w
(up) 1960 2354 w
(meet.) 2101 2354 w
(You) 2373 2354 w
(can) 2593 2354 w
(think) 2775 2354 w
(of) 3033 2354 w
(it) 3155 2354 w
(as) 3248 2354 w
(a) 3370 2354 w
(data) 3449 2354 w
(structure) 3662 2354 w
(rep\255) 4076 2354 w
(resenting) 566 2474 w
(the) 996 2474 w
(condition) 1158 2474 w
(that) 1602 2474 w
(makes) 1795 2474 w
(one) 2103 2474 w
(process) 2289 2474 w
(go) 2645 2474 w
(to) 2783 2474 w
(sleep.) 2897 2474 w
10 /Courier f
(typedef) 786 2644 w
(struct Rendez) 786 2754 w
({) 786 2864 w
(QLock) 1266 2974 w
(*l;) 1746 2974 w
10 /Times-Italic f
(...) 1266 3084 w
10 /Courier f
(} Rendez;) 786 3194 w
11 /Times-Roman f
(The) 566 3410 w
(field) 772 3410 w
11 /Courier f
(l) 1009 3410 w
11 /Times-Roman f
(must) 1111 3410 w
(point) 1362 3410 w
(to) 1625 3410 w
(the) 1747 3410 w
11 /Courier f
(QLock) 1917 3410 w
11 /Times-Roman f
(protecting) 2283 3410 w
(the) 2764 3410 w
(resource) 2934 3410 w
(\(used) 3339 3410 w
(also) 3612 3410 w
(to) 3825 3410 w
(protect) 3947 3410 w
(the) 566 3530 w
11 /Courier f
(Rendez) 728 3530 w
11 /Times-Roman f
(\).) 1124 3530 w
(Using) 1244 3530 w
(this) 1535 3530 w
(abstraction,) 1723 3530 w
(and) 2260 3530 w
(its) 2446 3530 w
(operations,) 2579 3530 w
10 /Courier f
(; sig rsleep rwakeup rwakeupall) 786 3700 w
(void rsleep\(Rendez *r\)) 1266 3810 w
(int rwakeup\(Rendez *r\)) 1266 3920 w
(int rwakeupall\(Rendez *r\)) 1266 4030 w
11 /Times-Roman f
(we) 566 4246 w
(can) 735 4246 w
(reimplement) 928 4246 w
(our) 1525 4246 w
(airport) 1713 4246 w
(panels) 2047 4246 w
(program.) 2369 4246 w
(We) 2810 4246 w
(start) 3003 4246 w
(by) 3234 4246 w
(redefining) 3387 4246 w
(our) 3880 4246 w
(data) 4069 4246 w
(structure) 566 4366 w
(and) 977 4366 w
(providing) 1163 4366 w
(two) 1619 4366 w
(operations) 1812 4366 w
(for) 2297 4366 w
(using) 2452 4366 w
(it.) 2719 4366 w
10 /Courier f
(typedef struct Msg Msg;) 786 4536 w
(struct Msg {) 786 4646 w
(QLock) 1266 4756 w
(lck;) 1746 4756 w
(// to protect the other fields) 2226 4756 w
(Rendez) 1266 4866 w
(newmsg; // to sleep waiting for a new message.) 1746 4866 w
(char*) 1266 4976 w
(text;) 1746 4976 w
(// for the message) 2226 4976 w
(};) 786 5086 w
(void) 786 5316 w
(wmsg\(Msg* m, char* newtext\);) 1266 5316 w
(char*) 786 5426 w
(rmsg\(Msg* m\);) 1266 5426 w
11 /Times-Roman f
(The) 566 5642 w
(operation) 776 5642 w
11 /Courier f
(wmsg) 1231 5642 w
11 /Times-Roman f
(writes) 1536 5642 w
(a) 1845 5642 w
(new) 1934 5642 w
(the) 2157 5642 w
(text) 2332 5642 w
(for) 2538 5642 w
(the) 2706 5642 w
(message.) 2881 5642 w
(The) 3321 5642 w
(operation) 3532 5642 w
11 /Courier f
(rmsg) 3987 5642 w
11 /Times-Roman f
(reads) 566 5762 w
(a) 829 5762 w
(new) 910 5762 w
(text) 1125 5762 w
(for) 1323 5762 w
(the) 1483 5762 w
(message.) 1650 5762 w
(The) 2082 5762 w
(idea) 2285 5762 w
(is) 2499 5762 w
(that) 2605 5762 w
(a) 2802 5762 w
(call) 2882 5762 w
(to) 3072 5762 w
11 /Courier f
(rmsg) 3190 5762 w
11 /Times-Roman f
(will) 3486 5762 w
(always) 3690 5762 w
(sleep) 4026 5762 w
(until) 566 5882 w
(the) 807 5882 w
(message) 979 5882 w
(changes.) 1388 5882 w
(When) 1806 5882 w
11 /Courier f
(wmsg) 2106 5882 w
11 /Times-Roman f
(changes) 2409 5882 w
(the) 2800 5882 w
(message,) 2973 5882 w
(it) 3411 5882 w
(will) 3512 5882 w
(wake) 3723 5882 w
(up) 3992 5882 w
(all) 4141 5882 w
(the) 566 6002 w
(processes) 728 6002 w
(waiting) 1175 6002 w
(for) 1533 6002 w
(the) 1688 6002 w
(new) 1850 6002 w
(message.) 2060 6002 w
(This) 816 6158 w
(is) 1045 6158 w
11 /Courier f
(rmsg) 1152 6158 w
11 /Times-Roman f
(.) 1416 6158 w
(It) 1505 6158 w
(locks) 1605 6158 w
(the) 1871 6158 w
(message,) 2039 6158 w
(and) 2472 6158 w
(goes) 2664 6158 w
(to) 2899 6158 w
(sleep) 3019 6158 w
(waiting) 3278 6158 w
(for) 3642 6158 w
(the) 3803 6158 w
(condi\255) 3971 6158 w
(tion) 566 6278 w
(\(need) 781 6278 w
(a) 1066 6278 w
(new) 1157 6278 w
(message\)) 1382 6278 w
(to) 1832 6278 w
(hold.) 1961 6278 w
(After) 2228 6278 w
(waking) 2501 6278 w
(up,) 2867 6278 w
(we) 3047 6278 w
(still) 3216 6278 w
(have) 3425 6278 w
(the) 3673 6278 w
(lock.) 3849 6278 w
(Of) 4136 6278 w
cleartomark
showpage
saveobj restore
%%EndPage: 27 27
%%Page: 28 28
/saveobj save def
mark
28 pagesetup
11 /Times-Roman f
(\255 28 \255) 2289 413 w
(course,) 566 686 w
(any) 908 686 w
(other) 1095 686 w
(process) 1349 686 w
(could) 1707 686 w
(use) 1981 686 w
(the) 2157 686 w
(resource) 2321 686 w
(while) 2720 686 w
(we) 2994 686 w
(were) 3151 686 w
(sleeping,) 3392 686 w
(but) 3816 686 w
(this) 3987 686 w
(is) 4177 686 w
(not) 566 806 w
(a) 742 806 w
(problem) 825 806 w
(because) 1226 806 w
(all) 1606 806 w
(we) 1751 806 w
(wanted) 1913 806 w
(was) 2264 806 w
(to) 2469 806 w
(wait) 2590 806 w
(for) 2814 806 w
(a) 2976 806 w
(new) 3059 806 w
(message,) 3276 806 w
(and) 3709 806 w
(now) 3901 806 w
(we) 4124 806 w
(have) 566 926 w
(it.) 801 926 w
(Thus,) 920 926 w
(the) 1197 926 w
(function) 1360 926 w
(makes) 1755 926 w
(a) 2064 926 w
(copy) 2141 926 w
(of) 2383 926 w
(the) 2503 926 w
(new) 2666 926 w
(message,) 2878 926 w
(releases) 3307 926 w
(the) 3682 926 w
(lock,) 3846 926 w
(and) 4093 926 w
(returns) 566 1046 w
(the) 898 1046 w
(new) 1060 1046 w
(message) 1270 1046 w
(to) 1669 1046 w
(the) 1783 1046 w
(caller.) 1945 1046 w
10 /Courier f
(char*) 786 1216 w
(rmsg\(Msg* m\)) 786 1326 w
({) 786 1436 w
(char*) 1266 1546 w
(new;) 1746 1546 w
(qlock\(&m\255>lck\);) 1266 1766 w
(rsleep\(&m\255>newmsg\);) 1266 1876 w
(new = strdup\(m\255>text\);) 1266 1986 w
(qunlock\(&m\255>lck\);) 1266 2096 w
(return new;) 1266 2206 w
(}) 786 2316 w
11 /Times-Roman f
(And) 566 2532 w
(this) 792 2532 w
(is) 989 2532 w
11 /Courier f
(wmsg) 1101 2532 w
11 /Times-Roman f
(.) 1365 2532 w
(It) 1459 2532 w
(locks) 1564 2532 w
(the) 1834 2532 w
(resource,) 2006 2532 w
(and) 2441 2532 w
(updates) 2637 2532 w
(the) 3010 2532 w
(message.) 3182 2532 w
(Before) 3619 2532 w
(return\255) 3954 2532 w
(ing,) 566 2652 w
(it) 763 2652 w
(wakes) 853 2652 w
(up) 1154 2652 w
(anyone) 1292 2652 w
(waiting) 1636 2652 w
(for) 1994 2652 w
(a) 2149 2652 w
(new) 2225 2652 w
(message.) 2435 2652 w
10 /Courier f
(void) 786 2822 w
(wmsg\(Msg* m, char* newtext\)) 786 2932 w
({) 786 3042 w
(qlock\(&m\255>lck\);) 1266 3152 w
(free\(m\255>text\);) 1266 3262 w
(m\255>text = strdup\(newtext\);) 1266 3372 w
(rwakeupall\(&m\255>newmsg\);) 1266 3482 w
(qunlock\(&m\255>lck\);) 1266 3592 w
(}) 786 3702 w
11 /Times-Roman f
(Now) 566 3918 w
(things) 816 3918 w
(are) 1123 3918 w
(simple) 1292 3918 w
(for) 1623 3918 w
(our) 1787 3918 w
(program,) 1970 3918 w
(the) 2406 3918 w
(panel) 2577 3918 w
(process) 2851 3918 w
(may) 3244 3918 w
(just) 3470 3918 w
(call) 3667 3918 w
11 /Courier f
(rmsg) 3863 3918 w
11 /Times-Roman f
(to) 4165 3918 w
(obtain) 566 4038 w
(a) 884 4038 w
(new) 975 4038 w
(message.) 1200 4038 w
(There) 1642 4038 w
(is) 1939 4038 w
(no) 2056 4038 w
(need) 2209 4038 w
(to) 2458 4038 w
(bother) 2587 4038 w
(with) 2910 4038 w
(concurrency) 3149 4038 w
(issues) 3731 4038 w
(here.) 4036 4038 w
(The) 566 4158 w
(function) 764 4158 w
11 /Courier f
(rmsg) 1158 4158 w
11 /Times-Roman f
(is) 1450 4158 w
(our) 1552 4158 w
(interface) 1726 4158 w
(for) 2135 4158 w
(the) 2290 4158 w
(message,) 2452 4158 w
(and) 2879 4158 w
(it) 3065 4158 w
(cares) 3155 4158 w
(about) 3406 4158 w
(it) 3678 4158 w
(all.) 3768 4158 w
10 /Courier f
(void) 786 4328 w
(panelproc\(int fd\)) 786 4438 w
({) 786 4548 w
(ulong) 1266 4658 w
(lastvers = \2551;) 1746 4658 w
(char*) 1266 4768 w
(text;) 1746 4768 w
(while\(!exiting\){) 1266 4988 w
(text = rmsg\(&msg\);) 1746 5098 w
(write\(fd, text, strlen\(text\)\);) 1746 5208 w
(free\(text\);) 1746 5318 w
(}) 1266 5428 w
(fprint\(2, "panel exiting\\n"\);) 1266 5538 w
(exits\(nil\);) 1266 5648 w
(}) 786 5758 w
11 /Times-Roman f
(In) 566 5938 w
(the) 697 5938 w
(same) 871 5938 w
(way,) 1137 5938 w
(the) 1388 5938 w
(reader) 1563 5938 w
(process) 1875 5938 w
(is) 2244 5938 w
(also) 2359 5938 w
(simplified.) 2577 5938 w
(It) 3093 5938 w
(calls) 3201 5938 w
11 /Courier f
(wmsg) 3443 5938 w
11 /Times-Roman f
(and) 3748 5938 w
(forgets) 3947 5938 w
(about) 566 6058 w
(concurrency) 838 6058 w
(as) 1405 6058 w
(well.) 1524 6058 w
cleartomark
showpage
saveobj restore
%%EndPage: 28 28
%%Page: 29 29
/saveobj save def
mark
29 pagesetup
11 /Times-Roman f
(\255 29 \255) 2289 413 w
10 /Courier f
(void) 786 676 w
(reader\(void\)) 786 786 w
({) 786 896 w
(char) 1266 1006 w
(buf[512];) 1746 1006 w
(int) 1266 1116 w
(nr;) 1746 1116 w
(for\(;;\){) 1266 1336 w
(nr = read\(0, buf, sizeof\(buf\)\2551\);) 1746 1446 w
(if \(nr <= 0\)) 1746 1556 w
(break;) 2226 1666 w
(buf[nr] = 0;) 1746 1776 w
(wmsg\(&msg, buf\);) 1746 1886 w
(}) 1266 1996 w
(exiting = 1;) 1266 2106 w
(exits\(nil\);) 1266 2216 w
(}) 786 2326 w
11 /Times-Roman f
(The) 566 2542 w
(rest) 772 2542 w
(of) 966 2542 w
(the) 1093 2542 w
(program) 1263 2542 w
(stays) 1670 2542 w
(the) 1926 2542 w
(same.) 2096 2542 w
(However,) 2385 2542 w
(this) 2849 2542 w
(initialization) 3045 2542 w
(is) 3638 2542 w
(now) 3748 2542 w
(neces\255) 3973 2542 w
(sary,) 566 2662 w
(because) 804 2662 w
(the) 1177 2662 w
11 /Courier f
(Rendez) 1339 2662 w
11 /Times-Roman f
(needs) 1763 2662 w
(a) 2040 2662 w
(pointer) 2116 2662 w
(to) 2455 2662 w
(the) 2569 2662 w
(lock.) 2731 2662 w
10 /Courier f
(msg.newmsg.l = &msg.lck;) 786 2832 w
11 /Times-Roman f
(If) 566 3048 w
(you) 676 3048 w
(try) 879 3048 w
(this) 1039 3048 w
(program,) 1237 3048 w
(you) 1674 3048 w
(will) 1878 3048 w
(notice) 2089 3048 w
(a) 2396 3048 w
(difference) 2483 3048 w
(regarding) 2963 3048 w
(its) 3421 3048 w
(responsiveness.) 3565 3048 w
(There) 566 3168 w
(are) 856 3168 w
(no) 1024 3168 w
(polls) 1170 3168 w
(now,) 1421 3168 w
(and) 1674 3168 w
(no) 1868 3168 w
(delays.) 2014 3168 w
(As) 2358 3168 w
(soon) 2516 3168 w
(as) 2760 3168 w
(a) 2887 3168 w
(new) 2971 3168 w
(message) 3189 3168 w
(is) 3596 3168 w
(updated,) 3706 3168 w
(the) 4117 3168 w
(panels) 566 3288 w
(are) 880 3288 w
(updated) 1046 3288 w
(as) 1427 3288 w
(well.) 1552 3288 w
(Because) 1803 3288 w
(of) 2201 3288 w
(the) 2326 3288 w
(interface) 2495 3288 w
(we) 2911 3288 w
(provided,) 3073 3288 w
(the) 3526 3288 w
(write) 3695 3288 w
(for) 3955 3288 w
(the) 4117 3288 w
(panels) 566 3408 w
(is) 886 3408 w
(kept) 1000 3408 w
(outside) 1229 3408 w
(of) 1586 3408 w
(the) 1716 3408 w
(critical) 1889 3408 w
(region.) 2232 3408 w
(And) 2579 3408 w
(because) 2807 3408 w
(of) 3191 3408 w
(dealing) 3321 3408 w
(with) 3683 3408 w
(concur\255) 3918 3408 w
(rency) 566 3528 w
(inside) 844 3528 w
(the) 1143 3528 w
(resource) 1313 3528 w
(operations,) 1718 3528 w
(callers) 2239 3528 w
(may) 2560 3528 w
(be) 2785 3528 w
(kept) 2924 3528 w
(unaware) 3149 3528 w
(of) 3554 3528 w
(it.) 3681 3528 w
(That) 3808 3528 w
(said,) 4046 3528 w
(note) 566 3648 w
(that) 797 3648 w
(the) 1004 3648 w
(program) 1180 3648 w
(still) 1593 3648 w
(must) 1802 3648 w
(care) 2058 3648 w
(about) 2279 3648 w
(how) 2564 3648 w
(to) 2794 3648 w
(start) 2921 3648 w
(and) 3151 3648 w
(terminate) 3350 3648 w
(in) 3805 3648 w
(a) 3932 3648 w
(clean) 4021 3648 w
(way.) 566 3768 w
(It) 816 3924 w
(is) 924 3924 w
(very) 1039 3924 w
(usual) 1274 3924 w
(to) 1547 3924 w
(handle) 1674 3924 w
(concurrency) 2007 3924 w
(in) 2587 3924 w
(this) 2714 3924 w
(way,) 2915 3924 w
(by) 3167 3924 w
(implementing) 3319 3924 w
(opera\255) 3973 3924 w
(tions) 566 4044 w
(that) 809 4044 w
(lock) 1002 4044 w
(the) 1219 4044 w
(resource) 1381 4044 w
(before) 1778 4044 w
(they) 2084 4044 w
(do) 2301 4044 w
(anything) 2439 4044 w
(else,) 2852 4044 w
(and) 3078 4044 w
(release) 3264 4044 w
(the) 3594 4044 w
(lock) 3756 4044 w
(before) 3973 4044 w
(returning.) 566 4164 w
(A) 1047 4164 w
(module) 1177 4164 w
(implemented) 1558 4164 w
(following) 2183 4164 w
(this) 2662 4164 w
(behavior) 2873 4164 w
(is) 3307 4164 w
(called) 3432 4164 w
(a) 3745 4164 w
11 /Times-Bold f
(monitor) 3845 4164 w
11 /Times-Roman f
(.) 4223 4164 w
(This) 566 4284 w
(name) 794 4284 w
(was) 1063 4284 w
(used) 1264 4284 w
(by) 1496 4284 w
(some) 1637 4284 w
(programming) 1900 4284 w
(languages) 2529 4284 w
(that) 2998 4284 w
(provided) 3194 4284 w
(syntax) 3615 4284 w
(for) 3933 4284 w
(this) 4091 4284 w
(construct,) 566 4404 w
(without) 1029 4404 w
(requiring) 1399 4404 w
(you) 1834 4404 w
(to) 2032 4404 w
(manually) 2151 4404 w
(lock) 2593 4404 w
(and) 2815 4404 w
(unlock) 3006 4404 w
(the) 3338 4404 w
(resource) 3505 4404 w
(on) 3908 4404 w
(each) 4052 4404 w
(operation.) 566 4524 w
(The) 1068 4524 w
(abstractions) 1270 4524 w
(used) 1826 4524 w
(to) 2059 4524 w
(wait) 2177 4524 w
(for) 2398 4524 w
(conditions) 2557 4524 w
(inside) 3047 4524 w
(a) 3341 4524 w
(monitor,) 3420 4524 w
(similar) 3828 4524 w
(to) 4165 4524 w
(our) 566 4644 w
11 /Courier f
(Rendez) 756 4644 w
11 /Times-Roman f
(,) 1152 4644 w
(are) 1224 4644 w
(called) 1401 4644 w
11 /Times-Bold f
(condition) 1707 4644 w
(variables) 2194 4644 w
11 /Times-Roman f
(,) 2622 4644 w
(because) 2695 4644 w
(those) 3085 4644 w
(languages) 3362 4644 w
(used) 3845 4644 w
(this) 4091 4644 w
(name) 566 4764 w
(for) 831 4764 w
(such) 986 4764 w
(time.) 1215 4764 w
16 /Times-Bold f
(10.6.) 566 5124 w
(Shared) 966 5124 w
(buffers) 1496 5124 w
11 /Times-Roman f
(The) 816 5280 w
(bounded) 1022 5280 w
(buffer) 1436 5280 w
(is) 1738 5280 w
(a) 1848 5280 w
(classical) 1932 5280 w
(problem,) 2339 5280 w
(useful) 2769 5280 w
(to) 3073 5280 w
(learn) 3195 5280 w
(a) 3450 5280 w
(little) 3535 5280 w
(bit) 3775 5280 w
(of) 3929 5280 w
(con\255) 4057 5280 w
(current) 566 5400 w
(programming,) 905 5400 w
(and) 1561 5400 w
(also) 1749 5400 w
(useful) 1956 5400 w
(for) 2254 5400 w
(the) 2411 5400 w
(real) 2575 5400 w
(life.) 2768 5400 w
(The) 2972 5400 w
(problem) 3171 5400 w
(states) 3566 5400 w
(that) 3839 5400 w
(there) 4033 5400 w
(is) 566 5520 w
(a) 688 5520 w
(shared) 784 5520 w
(buffer) 1117 5520 w
(\(bounded) 1432 5520 w
(in) 1895 5520 w
(size\).) 2030 5520 w
(Some) 2313 5520 w
(processes) 2613 5520 w
(try) 3081 5520 w
(to) 3252 5520 w
(put) 3387 5520 w
(things) 3577 5520 w
(into) 3896 5520 w
(the) 4117 5520 w
(buffer,) 566 5640 w
(and) 907 5640 w
(other) 1112 5640 w
(processes) 1384 5640 w
(try) 1849 5640 w
(to) 2017 5640 w
(get) 2149 5640 w
(things) 2329 5640 w
(out) 2645 5640 w
(of) 2832 5640 w
(the) 2969 5640 w
(buffer.) 3149 5640 w
(The) 3517 5640 w
(formers) 3733 5640 w
(are) 4119 5640 w
(called) 566 5760 w
11 /Times-Italic f
(producers) 888 5760 w
11 /Times-Roman f
(,) 1333 5760 w
(and) 1422 5760 w
(the) 1641 5760 w
(latter) 1836 5760 w
(are) 2122 5760 w
(called) 2315 5760 w
11 /Times-Italic f
(consumers) 2637 5760 w
11 /Times-Roman f
(.) 3106 5760 w
(See) 3223 5760 w
(figure) 3442 5760 w
([[!bounded) 3765 5760 w
(buffer!]]) 566 5880 w
cleartomark
showpage
saveobj restore
%%EndPage: 29 29
%%Page: 30 30
/saveobj save def
mark
30 pagesetup
11 /Times-Roman f
(\255 30 \255) 2289 413 w
680 902 432 432 De
(producer) 702 924 w
680 1478 432 432 De
(producer) 702 1500 w
680 2054 432 432 De
(producer) 702 2076 w
gsave
newpath
1472 1550 m
/inpath true def
 0.7 setgray
1472 1550 1472 1406 Dl
1472 1406 1616 1406 Dl
1616 1406 1616 1550 Dl
1616 1550 1472 1550 Dl
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
1616 1550 m
/inpath true def
 0.7 setgray
1616 1550 1616 1406 Dl
1616 1406 1760 1406 Dl
1760 1406 1760 1550 Dl
1760 1550 1616 1550 Dl
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
1760 1550 m
/inpath true def
 0.7 setgray
1760 1550 1760 1406 Dl
1760 1406 1904 1406 Dl
1904 1406 1904 1550 Dl
1904 1550 1760 1550 Dl
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
gsave
newpath
1904 1550 m
/inpath true def
 0.7 setgray
1904 1550 1904 1406 Dl
1904 1406 2048 1406 Dl
2048 1406 2048 1550 Dl
2048 1550 1904 1550 Dl
 gsave eofill grestore 0 setgray stroke
grestore
/inpath false def
2048 1550 2048 1406 Dl
2048 1406 2192 1406 Dl
2192 1406 2192 1550 Dl
2192 1550 2048 1550 Dl
2192 1550 2192 1406 Dl
2192 1406 2336 1406 Dl
2336 1406 2336 1550 Dl
2336 1550 2192 1550 Dl
2336 1550 2336 1406 Dl
2336 1406 2480 1406 Dl
2480 1406 2480 1550 Dl
2480 1550 2336 1550 Dl
2480 1550 2480 1406 Dl
2480 1406 2624 1406 Dl
2624 1406 2624 1550 Dl
2624 1550 2480 1550 Dl
2624 1550 2624 1406 Dl
2624 1406 2768 1406 Dl
2768 1406 2768 1550 Dl
2768 1550 2624 1550 Dl
2768 1550 2768 1406 Dl
2768 1406 2912 1406 Dl
2912 1406 2912 1550 Dl
2912 1550 2768 1550 Dl
2912 1550 2912 1406 Dl
2912 1406 3056 1406 Dl
3056 1406 3056 1550 Dl
3056 1550 2912 1550 Dl
3056 1550 3056 1406 Dl
3056 1406 3200 1406 Dl
3200 1406 3200 1550 Dl
3200 1550 3056 1550 Dl
3200 1550 3200 1406 Dl
3200 1406 3344 1406 Dl
3344 1406 3344 1550 Dl
3344 1550 3200 1550 Dl
3704 1190 432 432 De
(consumer) 3707 1212 w
3704 1766 432 432 De
(consumer) 3707 1788 w
1058 1044 1308 1263 Dl
1243 1229 1309 1262 Dl
1266 1202 1308 1263 Dl
1112 1478 1256 1478 Dl
1184 1496 1256 1478 Dl
1184 1460 1256 1478 Dl
1058 1911 1308 1692 Dl
1266 1753 1308 1692 Dl
1243 1726 1309 1693 Dl
3536 1381 3725 1286 Dl
3670 1334 3726 1286 Dl
3654 1303 3726 1288 Dl
3536 1574 3725 1669 Dl
3654 1652 3726 1667 Dl
3670 1621 3726 1669 Dl
(The) 816 2504 w
(problem) 1029 2504 w
(is) 1438 2504 w
(synchronizing) 1555 2504 w
(both) 2220 2504 w
(producers) 2459 2504 w
(and) 2933 2504 w
(consumers.) 3134 2504 w
(When) 3674 2504 w
(a) 3978 2504 w
(pro\255) 4069 2504 w
(ducer) 566 2624 w
(wants) 838 2624 w
(to) 1124 2624 w
(put) 1239 2624 w
(something) 1409 2624 w
(in) 1897 2624 w
(the) 2012 2624 w
(buffer,) 2175 2624 w
(and) 2498 2624 w
(the) 2685 2624 w
(buffer) 2848 2624 w
(is) 3143 2624 w
(full,) 3246 2624 w
(the) 3456 2624 w
(producer) 3619 2624 w
(must) 4036 2624 w
(wait) 566 2744 w
(until) 788 2744 w
(there) 1024 2744 w
(is) 1276 2744 w
(room) 1384 2744 w
(in) 1650 2744 w
(the) 1770 2744 w
(buffer.) 1938 2744 w
(In) 2266 2744 w
(the) 2391 2744 w
(same) 2559 2744 w
(way,) 2818 2744 w
(when) 3062 2744 w
(a) 3333 2744 w
(consumer) 3415 2744 w
(wants) 3875 2744 w
(to) 4165 2744 w
(take) 566 2864 w
(something) 780 2864 w
(from) 1271 2864 w
(an) 1516 2864 w
(empty) 1651 2864 w
(buffer,) 1958 2864 w
(it) 2284 2864 w
(must) 2378 2864 w
(wait) 2625 2864 w
(until) 2846 2864 w
(there) 3080 2864 w
(is) 3329 2864 w
(something) 3434 2864 w
(to) 3924 2864 w
(take.) 4041 2864 w
(This) 566 2984 w
(problem) 792 2984 w
(happens) 1188 2984 w
(for) 1577 2984 w
(many) 1734 2984 w
(real) 2008 2984 w
(life) 2201 2984 w
(situations,) 2377 2984 w
(whenever) 2858 2984 w
(some) 3312 2984 w
(kind) 3574 2984 w
(of) 3801 2984 w
(process) 3923 2984 w
(produces) 566 3104 w
(something) 1007 3104 w
(that) 1512 3104 w
(is) 1723 3104 w
(to) 1843 3104 w
(be) 1975 3104 w
(consumed) 2124 3104 w
(by) 2615 3104 w
(other) 2771 3104 w
(processes.) 3042 3104 w
(The) 3535 3104 w
(buffer) 3751 3104 w
(kept) 4062 3104 w
(inside) 566 3224 w
(a) 857 3224 w
(pipe,) 933 3224 w
(together) 1178 3224 w
(with) 1565 3224 w
(the) 1789 3224 w
(process\(es\)) 1952 3224 w
(writing) 2472 3224 w
(to) 2819 3224 w
(the) 2934 3224 w
(pipe,) 3097 3224 w
(and) 3343 3224 w
(the) 3530 3224 w
(ones) 3693 3224 w
(reading) 3923 3224 w
(from) 566 3344 w
(it,) 807 3344 w
(make) 925 3344 w
(up) 1190 3344 w
(just) 1328 3344 w
(the) 1516 3344 w
(same) 1678 3344 w
(problem.) 1931 3344 w
(To) 816 3500 w
(solve) 974 3500 w
(this) 1242 3500 w
(problem,) 1438 3500 w
(we) 1868 3500 w
(must) 2031 3500 w
(declare) 2282 3500 w
(our) 2633 3500 w
(data) 2816 3500 w
(structure) 3035 3500 w
(for) 3455 3500 w
(the) 3619 3500 w
(buffer) 3790 3500 w
(and) 4093 3500 w
(two) 566 3620 w
(operations) 774 3620 w
(for) 1274 3620 w
(it,) 1444 3620 w
11 /Courier f
(put) 1577 3620 w
11 /Times-Roman f
(,) 1775 3620 w
(and) 1846 3620 w
11 /Courier f
(get) 2047 3620 w
11 /Times-Roman f
(.) 2245 3620 w
(The) 2344 3620 w
(buffer) 2557 3620 w
(must) 2866 3620 w
(be) 3124 3620 w
(protected,) 3270 3620 w
(and) 3748 3620 w
(we) 3949 3620 w
(are) 4119 3620 w
(going) 566 3740 w
(to) 867 3740 w
(use) 1003 3740 w
(a) 1199 3740 w
11 /Courier f
(QLock) 1297 3740 w
11 /Times-Roman f
(for) 1677 3740 w
(that) 1854 3740 w
(purpose) 2069 3740 w
(\(because) 2466 3740 w
(we) 2897 3740 w
(plan) 3074 3740 w
(to) 3313 3740 w
(use) 3449 3740 w
11 /Courier f
(rsleep) 3646 3740 w
11 /Times-Roman f
(and) 4093 3740 w
11 /Courier f
(rwakeup) 566 3860 w
11 /Times-Roman f
(\).) 1028 3860 w
(The) 1155 3860 w
(operation) 1360 3860 w
11 /Courier f
(put) 1809 3860 w
11 /Times-Roman f
(will) 2042 3860 w
(have) 2249 3860 w
(to) 2490 3860 w
(sleep) 2611 3860 w
(when) 2870 3860 w
(the) 3141 3860 w
(buffer) 3309 3860 w
(is) 3609 3860 w
(full,) 3717 3860 w
(and) 3932 3860 w
(we) 4124 3860 w
(need) 566 3980 w
(a) 800 3980 w
11 /Courier f
(Rendez) 876 3980 w
11 /Times-Roman f
(called) 1300 3980 w
11 /Courier f
(isfull) 1589 3980 w
11 /Times-Roman f
(to) 2013 3980 w
(sleep) 2127 3980 w
(because) 2381 3980 w
(of) 2755 3980 w
(that) 2875 3980 w
(reason.) 3069 3980 w
(The) 3411 3980 w
(operation) 3610 3980 w
11 /Courier f
(get) 4053 3980 w
11 /Times-Roman f
(will) 566 4100 w
(go) 803 4100 w
(to) 978 4100 w
(sleep) 1129 4100 w
(when) 1419 4100 w
(the) 1721 4100 w
(buffer) 1920 4100 w
(is) 2251 4100 w
(empty,) 2390 4100 w
(which) 2758 4100 w
(makes) 3091 4100 w
(necessary) 3435 4100 w
(another) 3923 4100 w
11 /Courier f
(isempty) 566 4220 w
(Rendez) 1058 4220 w
11 /Times-Roman f
(.) 1454 4220 w
(To) 1540 4220 w
(store) 1692 4220 w
(the) 1935 4220 w
(messages) 2099 4220 w
(we) 2543 4220 w
(use) 2700 4220 w
(an) 2876 4220 w
(array) 3010 4220 w
(to) 3264 4220 w
(implement) 3381 4220 w
(a) 3883 4220 w
(queue.) 3962 4220 w
(The) 566 4340 w
(array) 787 4340 w
(is) 1061 4340 w
(used) 1186 4340 w
(in) 1438 4340 w
(a) 1575 4340 w
(circular) 1674 4340 w
(way,) 2058 4340 w
(with) 2319 4340 w
(new) 2566 4340 w
(messages) 2799 4340 w
(added) 3264 4340 w
(to) 3575 4340 w
(the) 3711 4340 w
(position) 3895 4340 w
(pointed) 566 4460 w
(to) 924 4460 w
(by) 1038 4460 w
11 /Courier f
(tl) 1176 4460 w
11 /Times-Roman f
(.) 1308 4460 w
(Messages) 1392 4460 w
(are) 1846 4460 w
(extracted) 2006 4460 w
(from) 2434 4460 w
(the) 2675 4460 w
(head,) 2837 4460 w
(pointed) 3099 4460 w
(to) 3457 4460 w
(by) 3571 4460 w
11 /Courier f
(hd) 3709 4460 w
11 /Times-Roman f
(.) 3841 4460 w
9 /Courier f
(typedef struct Buffer Buffer;) 786 4630 w
(struct Buffer {) 786 4740 w
(QLock) 1266 4850 w
(lck;) 1746 4850 w
(char*) 1266 4960 w
(msgs[Nmsgs];) 1746 4960 w
(// messages in buffer) 2706 4960 w
(int) 1266 5070 w
(hd;) 1746 5070 w
(// head of the queue) 2706 5070 w
(int) 1266 5180 w
(tl;) 1746 5180 w
(// tail. First empty slot.) 2706 5180 w
(int) 1266 5290 w
(nmsgs;) 1746 5290 w
(// number of messages.) 2706 5290 w
(Rendez) 1266 5400 w
(isfull;) 1746 5400 w
(// wait for room) 2706 5400 w
(Rendez) 1266 5510 w
(isempty;) 1746 5510 w
(// wait for item to get) 2226 5510 w
(};) 786 5620 w
11 /Times-Roman f
(This) 566 5836 w
(is) 795 5836 w
(our) 902 5836 w
(first) 1082 5836 w
(operation,) 1293 5836 w
11 /Courier f
(put) 1769 5836 w
11 /Times-Roman f
(.) 1967 5836 w
(It) 2057 5836 w
(checks) 2158 5836 w
(that) 2489 5836 w
(the) 2688 5836 w
(buffer) 2856 5836 w
(is) 3156 5836 w
(full,) 3264 5836 w
(and) 3479 5836 w
(goes) 3671 5836 w
(to) 3906 5836 w
(sleep) 4026 5836 w
(if) 566 5956 w
(that) 674 5956 w
(is) 880 5956 w
(the) 995 5956 w
(case.) 1170 5956 w
(If) 1453 5956 w
(the) 1565 5956 w
(buffer) 1739 5956 w
(was) 2045 5956 w
(not) 2255 5956 w
(full,) 2436 5956 w
(or) 2657 5956 w
(after) 2788 5956 w
(waking) 3027 5956 w
(up) 3390 5956 w
(because) 3540 5956 w
(it) 3925 5956 w
(is) 4027 5956 w
(no) 4141 5956 w
(longer) 566 6076 w
(full,) 874 6076 w
(the) 1083 6076 w
(message) 1245 6076 w
(is) 1644 6076 w
(added) 1746 6076 w
(to) 2035 6076 w
(the) 2149 6076 w
(queue.) 2311 6076 w
cleartomark
showpage
saveobj restore
%%EndPage: 30 30
%%Page: 31 31
/saveobj save def
mark
31 pagesetup
11 /Times-Roman f
(\255 31 \255) 2289 413 w
10 /Courier f
(void) 786 676 w
(put\(Buffer* b, char* msg\)) 786 786 w
({) 786 896 w
(qlock\(&b\255>lck\);) 1266 1006 w
(if \(b\255>nmsgs == Nmsgs\)) 1266 1116 w
(rsleep\(&b\255>isfull\);) 1746 1226 w
(b\255>msgs[b\255>tl] = strdup\(msg\);) 1266 1336 w
(b\255>tl = ++b\255>tl % Nmsgs;) 1266 1446 w
(b\255>nmsgs++;) 1266 1556 w
(if \(b\255>nmsgs == 1\)) 1266 1666 w
(rwakeup\(&b\255>isempty\);) 1746 1776 w
(qunlock\(&b\255>lck\);) 1266 1886 w
(}) 786 1996 w
11 /Times-Roman f
(Note) 566 2212 w
(how) 814 2212 w
(this) 1038 2212 w
(function) 1233 2212 w
(calls) 1635 2212 w
11 /Courier f
(rwakeup\(&b\255>isempty\)) 1872 2212 w
11 /Times-Roman f
(when) 3228 2212 w
(the) 3501 2212 w
(buffer) 3671 2212 w
(ceases) 3973 2212 w
(to) 566 2332 w
(be) 682 2332 w
(empty.) 815 2332 w
(It) 1148 2332 w
(could) 1245 2332 w
(be) 1519 2332 w
(that) 1652 2332 w
(some) 1847 2332 w
(processes) 2109 2332 w
(were) 2558 2332 w
(sleeping) 2799 2332 w
(trying) 3194 2332 w
(to) 3486 2332 w
(get) 3601 2332 w
(something,) 3764 2332 w
(because) 566 2452 w
(the) 963 2452 w
(buffer) 1149 2452 w
(was) 1467 2452 w
(empty.) 1689 2452 w
(This) 2044 2452 w
(function,) 2292 2452 w
(which) 2738 2452 w
(changes) 3058 2452 w
(that) 3462 2452 w
(condition,) 3680 2452 w
(is) 4177 2452 w
(responsible) 566 2572 w
(for) 1112 2572 w
(waking) 1285 2572 w
(up) 1653 2572 w
(one) 1808 2572 w
(of) 2011 2572 w
(such) 2147 2572 w
(processes.) 2393 2572 w
(It) 2885 2572 w
(wakes) 2997 2572 w
(up) 3315 2572 w
(just) 3470 2572 w
(one,) 3675 2572 w
(because) 3906 2572 w
(there) 566 2692 w
(is) 816 2692 w
(only) 922 2692 w
(one) 1150 2692 w
(thing) 1340 2692 w
(to) 1600 2692 w
(get) 1719 2692 w
(from) 1886 2692 w
(the) 2132 2692 w
(buffer.) 2299 2692 w
(If) 2626 2692 w
(there) 2731 2692 w
(are) 2982 2692 w
(more) 3147 2692 w
(processes) 3405 2692 w
(sleeping,) 3857 2692 w
(trying) 566 2812 w
(to) 861 2812 w
(get,) 979 2812 w
(they) 1172 2812 w
(will) 1392 2812 w
(be) 1595 2812 w
(waken) 1729 2812 w
(up) 2045 2812 w
(as) 2186 2812 w
(more) 2308 2812 w
(messages) 2564 2812 w
(are) 3009 2812 w
(added) 3172 2812 w
(by) 3464 2812 w
(further) 3605 2812 w
(calls) 3933 2812 w
(to) 4165 2812 w
11 /Courier f
(put) 566 2932 w
11 /Times-Roman f
(in) 792 2932 w
(the) 906 2932 w
(future.) 1068 2932 w
(The) 816 3088 w
(function) 1024 3088 w
11 /Courier f
(get) 1428 3088 w
11 /Times-Roman f
(is) 1664 3088 w
(the) 1776 3088 w
(counterpart) 1948 3088 w
(for) 2484 3088 w
11 /Courier f
(put) 2649 3088 w
11 /Times-Roman f
(.) 2847 3088 w
(When) 2941 3088 w
(there) 3240 3088 w
(is) 3496 3088 w
(no) 3608 3088 w
(message) 3756 3088 w
(to) 4165 3088 w
(get,) 566 3208 w
(it) 765 3208 w
(sleeps) 864 3208 w
(at) 1168 3208 w
11 /Courier f
(isempty) 1283 3208 w
11 /Times-Roman f
(.) 1745 3208 w
(Once) 1837 3208 w
(we) 2103 3208 w
(know) 2266 3208 w
(for) 2546 3208 w
(sure) 2709 3208 w
(that) 2927 3208 w
(there) 3128 3208 w
(is) 3382 3208 w
(at) 3492 3208 w
(least) 3607 3208 w
(one) 3844 3208 w
(mes\255) 4038 3208 w
(sage) 566 3328 w
(to) 805 3328 w
(consume,) 936 3328 w
(it) 1399 3328 w
(is) 1507 3328 w
(removed) 1627 3328 w
(from) 2056 3328 w
(the) 2315 3328 w
(head) 2495 3328 w
(of) 2747 3328 w
(the) 2884 3328 w
(queue) 3064 3328 w
(and) 3371 3328 w
(returned) 3575 3328 w
(to) 3985 3328 w
(the) 4117 3328 w
(caller.) 566 3448 w
10 /Courier f
(char*) 786 3618 w
(get\(Buffer* b\)) 786 3728 w
({) 786 3838 w
(char*) 1266 3948 w
(msg;) 1746 3948 w
(qlock\(&b\255>lck\);) 1266 4168 w
(if \(b\255>nmsgs == 0\)) 1266 4278 w
(rsleep\(&b\255>isempty\);) 1746 4388 w
(msg = b\255>msgs[b\255>hd];) 1266 4498 w
(b\255>hd = ++b\255>hd % Nmsgs;) 1266 4608 w
(b\255>nmsgs\255\255;) 1266 4718 w
(if \(b\255>nmsgs == Nmsgs \255 1\)) 1266 4828 w
(rwakeup\(&b\255>isfull\);) 1746 4938 w
(qunlock\(&b\255>lck\);) 1266 5048 w
(return msg;) 1266 5158 w
(}) 786 5268 w
11 /Times-Roman f
(Note) 566 5484 w
(how) 811 5484 w
11 /Courier f
(get) 1032 5484 w
11 /Times-Roman f
(is) 1262 5484 w
(also) 1368 5484 w
(responsible) 1577 5484 w
(for) 2110 5484 w
(awakening) 2270 5484 w
(one) 2777 5484 w
(process) 2968 5484 w
(\(that) 3329 5484 w
(might) 3563 5484 w
(be) 3854 5484 w
(sleep\255) 3990 5484 w
(ing\)) 566 5604 w
(when) 771 5604 w
(the) 1036 5604 w
(buffer) 1198 5604 w
(is) 1492 5604 w
(no) 1594 5604 w
(longer) 1732 5604 w
(full.) 2040 5604 w
(Both) 2249 5604 w
(functions) 2492 5604 w
(are) 2929 5604 w
(quite) 3089 5604 w
(symmetric.) 3337 5604 w
(One) 3857 5604 w
(puts) 4067 5604 w
(items) 566 5724 w
(in) 850 5724 w
(the) 981 5724 w
(buffer) 1160 5724 w
(\(and) 1471 5724 w
(requires) 1710 5724 w
(empty) 2107 5724 w
(slots\),) 2427 5724 w
(the) 2739 5724 w
(other) 2918 5724 w
(puts) 3188 5724 w
(empty) 3417 5724 w
(slots) 3737 5724 w
(in) 3985 5724 w
(the) 4117 5724 w
(buffer) 566 5844 w
(\(and) 860 5844 w
(requires) 1082 5844 w
(items\).) 1462 5844 w
(The) 816 6000 w
(data) 1014 6000 w
(structure) 1224 6000 w
(is) 1635 6000 w
(initialized) 1737 6000 w
(by) 2205 6000 w
(calling) 2343 6000 w
11 /Courier f
(init) 2670 6000 w
11 /Times-Roman f
(.) 2934 6000 w
cleartomark
showpage
saveobj restore
%%EndPage: 31 31
%%Page: 32 32
/saveobj save def
mark
32 pagesetup
11 /Times-Roman f
(\255 32 \255) 2289 413 w
10 /Courier f
(void) 786 676 w
(init\(Buffer *b\)) 786 786 w
({) 786 896 w
(// release all locks, set everything to null values.) 1266 1006 w
(memset\(b, 0, sizeof\(*b\)\);) 1266 1116 w
(// set the locks used by the Rendezes) 1266 1226 w
(b\255>isempty.l = &b\255>lck;) 1266 1336 w
(b\255>isfull.l = &b\255>lck;) 1266 1446 w
(}) 786 1556 w
11 /Times-Roman f
(To) 566 1772 w
(play) 717 1772 w
(with) 935 1772 w
(our) 1161 1772 w
(implementation,) 1337 1772 w
(we) 2086 1772 w
(are) 2243 1772 w
(going) 2405 1772 w
(to) 2686 1772 w
(create) 2802 1772 w
(two) 3091 1772 w
(processes) 3286 1772 w
(the) 3735 1772 w
(produce) 3899 1772 w
(messages) 566 1892 w
(and) 1010 1892 w
(two) 1198 1892 w
(more) 1393 1892 w
(process) 1648 1892 w
(that) 2006 1892 w
(consume) 2201 1892 w
(them) 2621 1892 w
(and) 2871 1892 w
(print) 3059 1892 w
(the) 3297 1892 w
(consumed) 3461 1892 w
(ones) 3935 1892 w
(to) 4165 1892 w
(standard) 566 2012 w
(output.) 984 2012 w
(Also,) 1341 2012 w
(to) 1624 2012 w
(exercise) 1758 2012 w
(the) 2163 2012 w
(code) 2345 2012 w
(when) 2599 2012 w
(the) 2884 2012 w
(buffer) 3066 2012 w
(gets) 3380 2012 w
(full,) 3605 2012 w
(we) 3834 2012 w
(use) 4009 2012 w
(a) 4203 2012 w
(ridiculous) 566 2132 w
(low) 1034 2132 w
(size.) 1227 2132 w
cleartomark
showpage
saveobj restore
%%EndPage: 32 32
%%Page: 33 33
/saveobj save def
mark
33 pagesetup
11 /Times-Roman f
(\255 33 \255) 2289 413 w
9 /S f
(\347) 566 676 w
9 /Times-Bold f
(pc.c) 581 676 w
9 /S f
(\347) 749 676 w
(`) 566 676 w
(````) 569 676 w
(_) 566 676 w
(____) 569 676 w
8 /Courier f
(#include <u.h>) 786 784 w
(#include <libc.h>) 786 892 w
(enum {Nmsgs = 4 };) 786 1108 w
(typedef struct Buffer Buffer;) 786 1324 w
(struct Buffer {) 786 1432 w
(QLock) 1266 1540 w
(lck;) 1746 1540 w
(char*) 1266 1648 w
(msgs[Nmsgs];) 1746 1648 w
(// messages in buffer) 2706 1648 w
(int) 1266 1756 w
(hd;) 1746 1756 w
(// head of the queue) 2706 1756 w
(int) 1266 1864 w
(tl;) 1746 1864 w
(// tail. First empty slot.) 2706 1864 w
(int) 1266 1972 w
(nmsgs;) 1746 1972 w
(// number of messages in buffer.) 2706 1972 w
(Rendez) 1266 2080 w
(isfull;) 1746 2080 w
(// to sleep because of no room for put) 2706 2080 w
(Rendez) 1266 2188 w
(isempty;) 1746 2188 w
(// to sleep when nothing to get) 2226 2188 w
(};) 786 2296 w
(/* b\255>lck must be held by caller) 786 2512 w
(*/) 834 2620 w
(void) 786 2728 w
(dump\(int fd, char* msg, Buffer* b\)) 786 2836 w
({) 786 2944 w
(int) 1266 3052 w
(i;) 1746 3052 w
(char) 1266 3160 w
(buf[512];) 1746 3160 w
(char*) 1266 3268 w
(s;) 1746 3268 w
(s = seprint\(buf, buf+sizeof\(buf\), "%s [", msg\);) 1266 3484 w
(for \(i = b\255>hd; i != b\255>tl; i = ++i%Nmsgs\)) 1266 3592 w
(s = seprint\(s, buf+sizeof\(buf\),"%s ", b\255>msgs[i]\);) 1746 3700 w
(s = seprint\(s, buf+sizeof\(buf\), "]\\n"\);) 1266 3808 w
(write\(fd, buf, s\255buf\);) 1266 3916 w
(}) 786 4024 w
(void) 786 4240 w
(put\(Buffer* b, char* msg\)) 786 4348 w
({) 786 4456 w
(qlock\(&b\255>lck\);) 1266 4564 w
(if \(b\255>nmsgs == Nmsgs\){) 1266 4672 w
(print\("<full>\\n"\);) 1746 4780 w
(rsleep\(&b\255>isfull\);) 1746 4888 w
(}) 1266 4996 w
(if \(msg == nil\)) 1266 5104 w
(b\255>msgs[b\255>tl] = nil;) 1746 5212 w
(else) 1266 5320 w
(b\255>msgs[b\255>tl] = strdup\(msg\);) 1746 5428 w
(b\255>tl = ++b\255>tl % Nmsgs;) 1266 5536 w
(b\255>nmsgs++;) 1266 5644 w
(if \(b\255>nmsgs == 1\)) 1266 5752 w
(rwakeup\(&b\255>isempty\);) 1746 5860 w
(dump\(1, "put:", b\);) 1266 5968 w
(qunlock\(&b\255>lck\);) 1266 6076 w
(}) 786 6184 w
cleartomark
showpage
saveobj restore
%%EndPage: 33 33
%%Page: 34 34
/saveobj save def
mark
34 pagesetup
11 /Times-Roman f
(\255 34 \255) 2289 413 w
8 /Courier f
(void) 786 674 w
(init\(Buffer *b\)) 786 782 w
({) 786 890 w
(// release all locks, set everything to null values.) 1266 998 w
(memset\(b, 0, sizeof\(*b\)\);) 1266 1106 w
(// set the locks used by the Rendezes) 1266 1214 w
(b\255>isempty.l = &b\255>lck;) 1266 1322 w
(b\255>isfull.l = &b\255>lck;) 1266 1430 w
(}) 786 1538 w
(char*) 786 1754 w
(get\(Buffer* b\)) 786 1862 w
({) 786 1970 w
(char*) 1266 2078 w
(msg;) 1746 2078 w
(qlock\(&b\255>lck\);) 1266 2294 w
(if \(b\255>nmsgs == 0\){) 1266 2402 w
(print\("<empty>\\n"\);) 1746 2510 w
(rsleep\(&b\255>isempty\);) 1746 2618 w
(}) 1266 2726 w
(msg = b\255>msgs[b\255>hd];) 1266 2834 w
(b\255>hd = ++b\255>hd % Nmsgs;) 1266 2942 w
(b\255>nmsgs\255\255;) 1266 3050 w
(if \(b\255>nmsgs == Nmsgs \255 1\)) 1266 3158 w
(rwakeup\(&b\255>isfull\);) 1746 3266 w
(dump\(1, "get:", b\);) 1266 3374 w
(qunlock\(&b\255>lck\);) 1266 3482 w
(return msg;) 1266 3590 w
(}) 786 3698 w
(void) 786 4022 w
(producer\(Buffer* b, char id\)) 786 4130 w
({) 786 4238 w
(char) 1266 4346 w
(msg[20];) 1746 4346 w
(int) 1266 4454 w
(i;) 1746 4454 w
(for \(i = 0; i < 5 ; i++\){) 1266 4670 w
(seprint\(msg, msg+20, "%c%d", id, i\);) 1746 4778 w
(put\(b, msg\);) 1746 4886 w
(}) 1266 4994 w
(put\(b, nil\);) 1266 5102 w
(exits\(nil\);) 1266 5210 w
(}) 786 5318 w
(void) 786 5534 w
(consumer\(Buffer* b\)) 786 5642 w
({) 786 5750 w
(char*) 1266 5858 w
(msg;) 1746 5858 w
(while\(msg = get\(b\)\){) 1266 5966 w
(// consume it) 1746 6074 w
(free\(msg\);) 1746 6182 w
(}) 1266 6290 w
cleartomark
showpage
saveobj restore
%%EndPage: 34 34
%%Page: 35 35
/saveobj save def
mark
35 pagesetup
11 /Times-Roman f
(\255 35 \255) 2289 413 w
8 /Courier f
(exits\(nil\);) 1266 674 w
(}) 786 782 w
(Buffer buf;) 786 998 w
(void) 786 1214 w
(main\(int, char*[]\)) 786 1322 w
({) 786 1430 w
(init\(&buf\);) 1266 1538 w
(if \(rfork\(RFPROC|RFMEM|RFNOWAIT\) == 0\)) 1266 1646 w
(producer\(&buf, 'a'\);) 1746 1754 w
(if \(rfork\(RFPROC|RFMEM|RFNOWAIT\) == 0\)) 1266 1862 w
(producer\(&buf, 'b'\);) 1746 1970 w
(if \(rfork\(RFPROC|RFMEM|RFNOWAIT\) == 0\)) 1266 2078 w
(consumer\(&buf\);) 1746 2186 w
(else) 1266 2294 w
(consumer\(&buf\);) 1746 2402 w
(}) 786 2510 w
11 /Times-Roman f
(The) 566 2726 w
(producers) 766 2726 w
(receive) 1227 2726 w
(a) 1571 2726 w
(letter) 1649 2726 w
(as) 1904 2726 w
(their) 2025 2726 w
(name,) 2256 2726 w
(to) 2551 2726 w
(produce) 2667 2726 w
(messages) 3049 2726 w
(like) 3493 2726 w
11 /Courier f
(a0) 3688 2726 w
11 /Times-Roman f
(,) 3820 2726 w
11 /Courier f
(a1) 3878 2726 w
11 /Times-Roman f
(,) 4010 2726 w
(etc.,) 4068 2726 w
(and) 566 2846 w
11 /Courier f
(b0) 760 2846 w
11 /Times-Roman f
(,) 892 2846 w
11 /Courier f
(b1) 956 2846 w
11 /Times-Roman f
(,) 1088 2846 w
(etc.) 1152 2846 w
(To) 1371 2846 w
(terminate) 1529 2846 w
(the) 1979 2846 w
(program) 2149 2846 w
(cleanly,) 2556 2846 w
(each) 2936 2846 w
(producer) 3171 2846 w
(puts) 3595 2846 w
(a) 3815 2846 w
(final) 3898 2846 w
(nil) 4134 2846 w
(message.) 566 2966 w
(When) 1029 2966 w
(a) 1326 2966 w
(consumer) 1411 2966 w
(receives) 1874 2966 w
(a) 2268 2966 w
(nil) 2353 2966 w
(message) 2507 2966 w
(from) 2915 2966 w
(the) 3165 2966 w
(buffer,) 3336 2966 w
(it) 3667 2966 w
(terminates.) 3766 2966 w
(And) 566 3086 w
(this) 783 3086 w
(is) 971 3086 w
(the) 1073 3086 w
(program) 1235 3086 w
(output.) 1634 3086 w
10 /Courier f
(; 8.pc) 786 3256 w
(a0 b0 a1 b1 a2 b2 a3 b3 a4 b4 ;) 786 3366 w
11 /Times-Roman f
(As) 566 3582 w
(you) 716 3582 w
(can) 909 3582 w
(see,) 1088 3582 w
(messages) 1283 3582 w
(are) 1725 3582 w
(inserted) 1885 3582 w
(in) 2260 3582 w
(a) 2374 3582 w
(very) 2450 3582 w
(fair) 2672 3582 w
(way.) 2851 3582 w
(Changing) 3117 3582 w
(a) 3573 3582 w
(little) 3649 3582 w
(bit) 3880 3582 w
11 /Courier f
(put) 4025 3582 w
11 /Times-Roman f
(,) 4223 3582 w
(and) 566 3702 w
11 /Courier f
(get) 757 3702 w
11 /Times-Roman f
(,) 955 3702 w
(would) 1016 3702 w
(let) 1324 3702 w
(us) 1467 3702 w
(know) 1598 3702 w
(if) 1875 3702 w
(the) 1975 3702 w
(buffer) 2142 3702 w
(is) 2440 3702 w
(ever) 2546 3702 w
(found) 2765 3702 w
(to) 3053 3702 w
(be) 3171 3702 w
(full) 3306 3702 w
(or) 3491 3702 w
(empty.) 3614 3702 w
(This) 3949 3702 w
(is) 4177 3702 w
(the) 566 3822 w
(change) 728 3822 w
(for) 1065 3822 w
11 /Courier f
(get) 1220 3822 w
11 /Times-Roman f
(.) 1418 3822 w
10 /Courier f
(char*) 786 3992 w
(get\(Buffer* b\)) 786 4102 w
({) 786 4212 w
10 /Times-Italic f
(...as before...) 1266 4322 w
10 /Courier f
(if \(b\255>nmsgs == 0\){) 1266 4432 w
(print\("<empty>\\n"\);) 1746 4542 w
(rsleep\(&b\255>isempty\);) 1746 4652 w
(}) 1266 4762 w
10 /Times-Italic f
(...as before...) 1266 4872 w
10 /Courier f
(}) 786 4982 w
11 /Times-Roman f
(The) 566 5198 w
(change) 773 5198 w
(for) 1119 5198 w
11 /Courier f
(put) 1284 5198 w
11 /Times-Roman f
(is) 1520 5198 w
(done) 1632 5198 w
(in) 1883 5198 w
(a) 2007 5198 w
(similar) 2093 5198 w
(way,) 2437 5198 w
(but) 2685 5198 w
(printing) 2864 5198 w
11 /Courier f
(<full>) 3251 5198 w
11 /Times-Roman f
(instead.) 3685 5198 w
(And) 4062 5198 w
(this) 566 5318 w
(is) 754 5318 w
(what) 856 5318 w
(we) 1097 5318 w
(find) 1252 5318 w
(out.) 1457 5318 w
10 /Courier f
(; 8.pc) 786 5488 w
(<empty> <empty> a0 b0 <full> <full>) 786 5598 w
10 /Times-Italic f
(newline supplied by us) 3186 5598 w
10 /Courier f
(a1 b1 <full> <full> a2 b2 <full> <full> a3 b3 a4 b4 ;) 786 5708 w
11 /Times-Roman f
(It) 566 5924 w
(seems) 676 5924 w
(that) 987 5924 w
(initially) 1195 5924 w
(both) 1582 5924 w
(consumers) 1821 5924 w
(try) 2333 5924 w
(to) 2498 5924 w
(get) 2627 5924 w
(messages) 2804 5924 w
(out) 3261 5924 w
(of) 3445 5924 w
(the) 3579 5924 w
(buffer,) 3756 5924 w
(and) 4093 5924 w
(they) 566 6044 w
(find) 785 6044 w
(the) 992 6044 w
(buffer) 1156 6044 w
(empty.) 1452 6044 w
(Later,) 1784 6044 w
(producers) 2071 6044 w
(insert) 2531 6044 w
11 /Courier f
(a0) 2804 6044 w
11 /Times-Roman f
(and) 2965 6044 w
11 /Courier f
(b0) 3152 6044 w
11 /Times-Roman f
(,) 3284 6044 w
(and) 3341 6044 w
(consumers) 3528 6044 w
(seem) 4026 6044 w
(to) 566 6164 w
(be) 681 6164 w
(awaken) 813 6164 w
(and) 1175 6164 w
(proceed.) 1362 6164 w
(Because) 1764 6164 w
(both) 2157 6164 w
(consumers) 2382 6164 w
(were) 2880 6164 w
(sleeping) 3120 6164 w
(and) 3516 6164 w
(the) 3704 6164 w
(synchro\255) 3868 6164 w
(nization) 566 6284 w
(mechanism) 954 6284 w
(seems) 1488 6284 w
(to) 1790 6284 w
(be) 1910 6284 w
(fair,) 2047 6284 w
(we) 2260 6284 w
(can) 2421 6284 w
(assume) 2606 6284 w
(that) 2963 6284 w
11 /Courier f
(a0) 3162 6284 w
11 /Times-Roman f
(is) 3328 6284 w
(printed) 3436 6284 w
(by) 3781 6284 w
(the) 3925 6284 w
(one) 4093 6284 w
cleartomark
showpage
saveobj restore
%%EndPage: 35 35
%%Page: 36 36
/saveobj save def
mark
36 pagesetup
11 /Times-Roman f
(\255 36 \255) 2289 413 w
(consumer) 566 686 w
(and) 1029 686 w
11 /Courier f
(b0) 1224 686 w
11 /Times-Roman f
(by) 1393 686 w
(the) 1540 686 w
(other.) 1711 686 w
(It) 2001 686 w
(seems) 2105 686 w
(that) 2411 686 w
(by) 2614 686 w
(this) 2762 686 w
(time) 2960 686 w
(both) 3194 686 w
(producers) 3428 686 w
(keep) 3897 686 w
(on) 4141 686 w
(inserting) 566 806 w
(items) 986 806 w
(in) 1260 806 w
(the) 1381 806 w
(buffer) 1550 806 w
(until) 1851 806 w
(it) 2089 806 w
(gets) 2186 806 w
(full.) 2398 806 w
(Both) 2614 806 w
(go) 2864 806 w
(to) 3009 806 w
(sleep.) 3129 806 w
(And) 3416 806 w
(for) 3639 806 w
(the) 3800 806 w
(rest) 3968 806 w
(of) 4160 806 w
(the) 566 926 w
(time) 739 926 w
(it) 974 926 w
(looks) 1075 926 w
(like) 1353 926 w
(producers) 1557 926 w
(are) 2027 926 w
(faster) 2198 926 w
(and) 2479 926 w
(manage) 2676 926 w
(to) 3056 926 w
(fill) 3182 926 w
(the) 3351 926 w
(buffer,) 3525 926 w
(and) 3859 926 w
(con\255) 4057 926 w
(sumers) 566 1046 w
(have) 918 1046 w
(no) 1165 1046 w
(further) 1316 1046 w
(problems) 1654 1046 w
(and) 2104 1046 w
(will) 2303 1046 w
(never) 2515 1046 w
(find) 2797 1046 w
(the) 3014 1046 w
(buffer) 3188 1046 w
(empty) 3494 1046 w
(from) 3809 1046 w
(now) 4062 1046 w
(on.) 566 1166 w
(In) 816 1322 w
(any) 940 1322 w
(case,) 1131 1322 w
(the) 1379 1322 w
(only) 1546 1322 w
(thing) 1775 1322 w
(we) 2035 1322 w
(can) 2195 1322 w
(say) 2379 1322 w
(is) 2558 1322 w
(that) 2665 1322 w
(the) 2863 1322 w
(code) 3030 1322 w
(for) 3269 1322 w
(dealing) 3429 1322 w
(with) 3786 1322 w
(a) 4016 1322 w
(full) 4098 1322 w
(buffer) 566 1442 w
(\(and) 864 1442 w
(an) 1090 1442 w
(empty) 1225 1442 w
(buffer\)) 1531 1442 w
(has) 1864 1442 w
(been) 2041 1442 w
(exercised) 2278 1442 w
(a) 2721 1442 w
(little) 2800 1442 w
(bit.) 3034 1442 w
(We) 3210 1442 w
(can) 3392 1442 w
(also) 3574 1442 w
(affirm) 3782 1442 w
(that) 4086 1442 w
(no) 566 1562 w
(process) 704 1562 w
(seems) 1060 1562 w
(to) 1356 1562 w
(remain) 1470 1562 w
(waiting) 1802 1562 w
(forever,) 2160 1562 w
(at) 2530 1562 w
(least) 2637 1562 w
(for) 2866 1562 w
(this) 3021 1562 w
(run.) 3209 1562 w
10 /Courier f
(; ps | grep 8.pc) 786 1732 w
(;) 786 1842 w
11 /Times-Roman f
(However,) 566 2058 w
(to) 1023 2058 w
(see) 1138 2058 w
(if) 1306 2058 w
(the) 1402 2058 w
(program) 1565 2058 w
(is) 1965 2058 w
(correct) 2068 2058 w
(or) 2399 2058 w
(not,) 2519 2058 w
(the) 2718 2058 w
(only) 2882 2058 w
(tool) 3108 2058 w
(you) 3310 2058 w
(have) 3505 2058 w
(is) 3741 2058 w
(just) 3845 2058 w
(care\255) 4035 2058 w
(ful) 566 2178 w
(thinking) 726 2178 w
(about) 1132 2178 w
(the) 1414 2178 w
(program) 1586 2178 w
(code.) 1995 2178 w
(Playing) 2267 2178 w
(with) 2642 2178 w
(example) 2876 2178 w
(scenarios,) 3285 2178 w
(trying) 3757 2178 w
(hard) 4057 2178 w
(to) 566 2298 w
(show) 688 2298 w
(that) 956 2298 w
(the) 1157 2298 w
(program) 1327 2298 w
(fails.) 1735 2298 w
(There) 1989 2298 w
(are) 2280 2298 w
(some) 2449 2298 w
(formal) 2718 2298 w
(tools) 3047 2298 w
(to) 3299 2298 w
(verify) 3422 2298 w
(if) 3720 2298 w
(an) 3824 2298 w
(imple\255) 3964 2298 w
(mentation) 566 2418 w
(for) 1056 2418 w
(a) 1233 2418 w
(concurrent) 1331 2418 w
(program) 1848 2418 w
(has) 2269 2418 w
(certain) 2465 2418 w
(properties) 2812 2418 w
(or) 3300 2418 w
(not,) 3440 2418 w
(but) 3658 2418 w
(you) 3848 2418 w
(may) 4062 2418 w
(make) 566 2538 w
(mistakes) 835 2538 w
(when) 1252 2538 w
(using) 1521 2538 w
(such) 1792 2538 w
(tools,) 2025 2538 w
(and) 2300 2538 w
(therefore,) 2491 2538 w
(you) 2945 2538 w
(are) 3143 2538 w
(on) 3308 2538 w
(your) 3451 2538 w
(own) 3685 2538 w
(to) 3907 2538 w
(write) 4026 2538 w
(correct) 566 2658 w
(concurrent) 896 2658 w
(programs.) 1391 2658 w
16 /Times-Bold f
(10.7.) 566 3018 w
(Other tools) 966 3018 w
11 /Times-Roman f
(A) 566 3174 w
(popular) 677 3174 w
(synchronization) 1044 3174 w
(tool,) 1777 3174 w
(not) 2009 3174 w
(provided) 2182 3174 w
(by) 2604 3174 w
(Plan) 2746 3174 w
(9,) 2974 3174 w
(is) 3089 3174 w
(a) 3196 3174 w
11 /Times-Bold f
(semaphore) 3277 3174 w
11 /Times-Roman f
(.) 3789 3174 w
(A) 3878 3174 w
(sema\255) 3990 3174 w
(phore) 566 3294 w
(is) 846 3294 w
(an) 951 3294 w
(abstraction) 1085 3294 w
(that) 1597 3294 w
(corresponds) 1793 3294 w
(to) 2352 3294 w
(a) 2468 3294 w
(box) 2546 3294 w
(with) 2741 3294 w
(tickets) 2967 3294 w
(to) 3284 3294 w
(use) 3400 3294 w
(a) 3576 3294 w
(resource.) 3654 3294 w
(The) 4081 3294 w
(inventor) 566 3414 w
(of) 965 3414 w
(this) 1089 3414 w
(abstraction) 1282 3414 w
(made) 1797 3414 w
(an) 2068 3414 w
(analogy) 2205 3414 w
(with) 2586 3414 w
(train) 2816 3414 w
(semaphores,) 3051 3414 w
(but) 3630 3414 w
(we) 3805 3414 w
(do) 3966 3414 w
(not) 4110 3414 w
(like) 566 3534 w
(trains.) 759 3534 w
(The) 816 3690 w
(idea) 1019 3690 w
(behind) 1234 3690 w
(a) 1566 3690 w
(semaphore) 1647 3690 w
(is) 2154 3690 w
(simple.) 2261 3690 w
(To) 2616 3690 w
(use) 2771 3690 w
(a) 2950 3690 w
(resource,) 3031 3690 w
(you) 3461 3690 w
(need) 3659 3690 w
(a) 3898 3690 w
(ticket.) 3979 3690 w
(The) 566 3810 w
(operation) 779 3810 w
11 /Courier f
(wait) 1236 3810 w
11 /Times-Roman f
(waits) 1543 3810 w
(until) 1818 3810 w
(there) 2064 3810 w
(is) 2325 3810 w
(a) 2442 3810 w
(ticket) 2533 3810 w
(in) 2819 3810 w
(the) 2947 3810 w
(semaphore,) 3123 3810 w
(and) 3667 3810 w
(picks) 3867 3810 w
(up) 4141 3810 w
(one.) 566 3930 w
(When) 808 3930 w
(you) 1097 3930 w
(are) 1290 3930 w
(no) 1450 3930 w
(longer) 1588 3930 w
(using) 1896 3930 w
(the) 2163 3930 w
(resource,) 2325 3930 w
(you) 2750 3930 w
(may) 2943 3930 w
(put) 3161 3930 w
(a) 3331 3930 w
(ticket) 3408 3930 w
(back) 3681 3930 w
(into) 3916 3930 w
(the) 4117 3930 w
(semaphore.) 566 4050 w
(The) 1102 4050 w
(operation) 1306 4050 w
11 /Courier f
(signal) 1754 4050 w
11 /Times-Roman f
(puts) 2184 4050 w
(a) 2402 4050 w
(new) 2484 4050 w
(ticket) 2700 4050 w
(into) 2978 4050 w
(the) 3184 4050 w
(semaphore.) 3352 4050 w
(Because) 3887 4050 w
(of) 566 4170 w
(the) 698 4170 w
(analogy) 873 4170 w
(with) 1261 4170 w
(train) 1498 4170 w
(semaphores,) 1740 4170 w
11 /Courier f
(wait) 2327 4170 w
11 /Times-Roman f
(is) 2633 4170 w
(also) 2749 4170 w
(known) 2968 4170 w
(as) 3309 4170 w
11 /Courier f
(down) 3442 4170 w
11 /Times-Roman f
(\(to) 3748 4170 w
(lower) 3912 4170 w
(a) 4203 4170 w
(barrier\)) 566 4290 w
(and) 929 4290 w
11 /Courier f
(signal) 1124 4290 w
11 /Times-Roman f
(is) 1557 4290 w
(also) 1668 4290 w
(known) 1882 4290 w
(as) 2218 4290 w
11 /Courier f
(up) 2346 4290 w
11 /Times-Roman f
(\(to) 2515 4290 w
(move) 2674 4290 w
(up) 2954 4290 w
(a) 3100 4290 w
(barrier\).) 3184 4290 w
(In) 3574 4290 w
(general,) 3701 4290 w
(you) 4086 4290 w
(will) 566 4410 w
(find) 766 4410 w
(either) 971 4410 w
11 /Courier f
(up) 1248 4410 w
11 /Times-Roman f
(and) 1408 4410 w
11 /Courier f
(down) 1594 4410 w
11 /Times-Roman f
(or) 1886 4410 w
11 /Courier f
(signal) 2005 4410 w
11 /Times-Roman f
(and) 2429 4410 w
11 /Courier f
(wait) 2615 4410 w
11 /Times-Roman f
(as) 2907 4410 w
(operations.) 3026 4410 w
(Internally,) 816 4566 w
(a) 1310 4566 w
(semaphore) 1398 4566 w
(is) 1913 4566 w
(codified) 2028 4566 w
(using) 2428 4566 w
(an) 2708 4566 w
(integer) 2852 4566 w
(to) 3197 4566 w
(count) 3324 4566 w
(the) 3609 4566 w
(number) 3784 4566 w
(of) 4160 4566 w
(tickets) 566 4686 w
(in) 895 4686 w
(the) 1023 4686 w
(box) 1199 4686 w
(represented) 1406 4686 w
(by) 1951 4686 w
(the) 2103 4686 w
(semaphore.) 2279 4686 w
(When) 2823 4686 w
(processes) 3126 4686 w
(call) 3587 4686 w
11 /Courier f
(wait) 3787 4686 w
11 /Times-Roman f
(and) 4093 4686 w
(find) 566 4806 w
(no) 772 4806 w
(tickets) 911 4806 w
(in) 1227 4806 w
(the) 1343 4806 w
(semaphore,) 1507 4806 w
11 /Courier f
(wait) 2039 4806 w
11 /Times-Roman f
(guarantees) 2333 4806 w
(that) 2830 4806 w
(they) 3025 4806 w
(are) 3244 4806 w
(put) 3406 4806 w
(into) 3577 4806 w
(sleep.) 3779 4806 w
(Fur\255) 4062 4806 w
(thermore,) 566 4926 w
(such) 1029 4926 w
(processes) 1270 4926 w
(will) 1728 4926 w
(be) 1939 4926 w
(awakened) 2081 4926 w
(\(upon) 2556 4926 w
(arrival) 2851 4926 w
(of) 3175 4926 w
(new) 3305 4926 w
(tickets\)) 3526 4926 w
(in) 3888 4926 w
(a) 4013 4926 w
(fair) 4100 4926 w
(way.) 566 5046 w
(An) 811 5046 w
(initial) 980 5046 w
(integer) 1273 5046 w
(value) 1612 5046 w
(may) 1884 5046 w
(be) 2108 5046 w
(given) 2246 5046 w
(to) 2525 5046 w
(a) 2646 5046 w
(semaphore,) 2729 5046 w
(to) 3266 5046 w
(represent) 3387 5046 w
(the) 3823 5046 w
(initial) 3993 5046 w
(number) 566 5166 w
(of) 929 5166 w
(tickets) 1048 5166 w
(in) 1363 5166 w
(the) 1477 5166 w
(box.) 1639 5166 w
(This) 1860 5166 w
(could) 2084 5166 w
(be) 2356 5166 w
(the) 2487 5166 w
(interface) 2649 5166 w
(for) 3058 5166 w
(this) 3213 5166 w
(abstraction.) 3401 5166 w
9 /Courier f
(Sem*) 786 5336 w
(newsem\(int n\);) 1266 5336 w
(// create a semaphore with n tickets) 2226 5336 w
(void) 786 5446 w
(wait\(Sem* s\);) 1266 5446 w
(// acquire a ticket \(may wait for it\)) 2226 5446 w
(void) 786 5556 w
(signal\(Sem* s\);) 1266 5556 w
(// add a ticket to the semaphore.) 2226 5556 w
11 /Times-Roman f
(Mutual) 566 5772 w
(exclusion) 935 5772 w
(can) 1408 5772 w
(be) 1611 5772 w
(implemented) 1766 5772 w
(using) 2392 5772 w
(a) 2683 5772 w
(semaphore) 2783 5772 w
(with) 3309 5772 w
(just) 3557 5772 w
(one) 3769 5772 w
(ticket.) 3979 5772 w
(Because) 566 5892 w
(there) 967 5892 w
(is) 1222 5892 w
(only) 1333 5892 w
(one) 1565 5892 w
(ticket,) 1759 5892 w
(only) 2067 5892 w
(one) 2299 5892 w
(process) 2493 5892 w
(will) 2857 5892 w
(be) 3065 5892 w
(able) 3204 5892 w
(to) 3422 5892 w
(acquire) 3544 5892 w
(it.) 3901 5892 w
(This) 4055 5892 w
(should) 566 6012 w
(be) 895 6012 w
(done) 1033 6012 w
(before) 1281 6012 w
(entering) 1594 6012 w
(the) 1988 6012 w
(critical) 2157 6012 w
(region,) 2496 6012 w
(and) 2839 6012 w
(the) 3032 6012 w
(ticket) 3201 6012 w
(must) 3480 6012 w
(be) 3730 6012 w
(put) 3868 6012 w
(back) 4045 6012 w
(into) 566 6132 w
(the) 772 6132 w
(semaphore) 940 6132 w
(after) 1448 6132 w
(exiting) 1681 6132 w
(from) 2021 6132 w
(the) 2268 6132 w
(critical) 2436 6132 w
(region.) 2773 6132 w
(Such) 3114 6132 w
(a) 3367 6132 w
(semaphore) 3448 6132 w
(is) 3955 6132 w
(usu\255) 4062 6132 w
(ally) 566 6252 w
(called) 759 6252 w
(a) 1048 6252 w
11 /Courier f
(mutex) 1124 6252 w
11 /Times-Roman f
(.) 1454 6252 w
(This) 1538 6252 w
(is) 1762 6252 w
(an) 1864 6252 w
(example.) 1995 6252 w
cleartomark
showpage
saveobj restore
%%EndPage: 36 36
%%Page: 37 37
/saveobj save def
mark
37 pagesetup
11 /Times-Roman f
(\255 37 \255) 2289 413 w
10 /Courier f
(Sem* mutex = newsem\(1\);) 786 676 w
10 /Times-Italic f
(...) 786 786 w
10 /Courier f
(wait\(mutex\);) 786 896 w
10 /Times-Italic f
(critical region here) 786 1006 w
10 /Courier f
(signal\(mutex\);) 786 1116 w
10 /Times-Italic f
(...) 786 1226 w
11 /Times-Roman f
(Also,) 566 1406 w
(because) 831 1406 w
(a) 1205 1406 w
11 /Courier f
(wait) 1282 1406 w
11 /Times-Roman f
(on) 1575 1406 w
(an) 1714 1406 w
(empty) 1846 1406 w
(semaphore) 2150 1406 w
(puts) 2653 1406 w
(a) 2866 1406 w
(process) 2943 1406 w
(to) 3300 1406 w
(sleep,) 3416 1406 w
(a) 3699 1406 w
(semaphore) 3777 1406 w
(with) 566 1526 w
(no) 800 1526 w
(tickets) 948 1526 w
(can) 1273 1526 w
(be) 1461 1526 w
(used) 1601 1526 w
(to) 1839 1526 w
(sleep) 1962 1526 w
(processes.) 2224 1526 w
(For) 2708 1526 w
(example,) 2898 1526 w
(this) 3334 1526 w
(puts) 3531 1526 w
(the) 3752 1526 w
(process) 3923 1526 w
(executing) 566 1646 w
(this) 1020 1646 w
(code) 1208 1646 w
(to) 1442 1646 w
(sleep,) 1556 1646 w
(until) 1837 1646 w
(another) 2068 1646 w
(process) 2424 1646 w
(calls) 2780 1646 w
11 /Courier f
(signal\(w\);) 3009 1646 w
10 /Courier f
(Sem* w = newsem\(0\);) 786 1816 w
10 /Times-Italic f
(...) 786 1926 w
10 /Courier f
(wait\(w\);) 786 2036 w
10 /Times-Italic f
(...) 786 2146 w
11 /Times-Roman f
(This) 566 2362 w
(tool) 803 2362 w
(can) 1016 2362 w
(be) 1208 2362 w
(used) 1352 2362 w
(to) 1594 2362 w
(synchronize) 1721 2362 w
(two) 2291 2362 w
(processes,) 2497 2362 w
(to) 2986 2362 w
(make) 3114 2362 w
(one) 3393 2362 w
(await) 3593 2362 w
(until) 3872 2362 w
(the) 4117 2362 w
(other) 566 2482 w
(executes) 844 2482 w
(certain) 1272 2482 w
(code.) 1621 2482 w
(Remember) 1907 2482 w
(the) 2440 2482 w
(HTTP) 2626 2482 w
(server) 2953 2482 w
(initialization) 3271 2482 w
(example) 3880 2482 w
(shown) 566 2602 w
(before.) 881 2602 w
(We) 1215 2602 w
(could) 1394 2602 w
(use) 1666 2602 w
(an) 1840 2602 w
(empty) 1971 2602 w
(semaphore,) 2274 2602 w
(and) 2804 2602 w
(make) 2990 2602 w
(the) 3255 2602 w
(parent) 3417 2602 w
(call) 3718 2602 w
10 /Courier f
(wait\(w\)) 786 2772 w
11 /Times-Roman f
(to) 566 2952 w
(await) 680 2952 w
(for) 945 2952 w
(the) 1100 2952 w
(initialization) 1262 2952 w
(of) 1847 2952 w
(the) 1966 2952 w
(child.) 2128 2952 w
(Then,) 2404 2952 w
(the) 2685 2952 w
(child) 2847 2952 w
(could) 3095 2952 w
(call) 3367 2952 w
10 /Courier f
(signal\(w\)) 786 3122 w
11 /Times-Roman f
(to) 566 3338 w
(awake) 681 3338 w
(the) 989 3338 w
(parent) 1153 3338 w
(once) 1456 3338 w
(it) 1692 3338 w
(has) 1784 3338 w
(initialized.) 1960 3338 w
(However,) 2458 3338 w
(this) 2916 3338 w
(time,) 3106 3338 w
(we) 3360 3338 w
(cannot) 3517 3338 w
(exchange) 3839 3338 w
(a) 566 3458 w
(value) 642 3458 w
(as) 907 3458 w
(we) 1026 3458 w
(could) 1181 3458 w
(using) 1453 3458 w
11 /Courier f
(rendezvous) 1720 3458 w
11 /Times-Roman f
(.) 2380 3458 w
(As) 816 3614 w
(a) 976 3614 w
(further) 1062 3614 w
(example,) 1397 3614 w
(we) 1834 3614 w
(can) 1999 3614 w
(implement) 2188 3614 w
(our) 2698 3614 w
(bounded\255buffer) 2883 3614 w
(program) 3602 3614 w
(using) 4012 3614 w
(semaphores.) 566 3734 w
(The) 1149 3734 w
(data) 1357 3734 w
(type) 1577 3734 w
(must) 1804 3734 w
(have) 2056 3734 w
(now) 2299 3734 w
(one) 2525 3734 w
(semaphore) 2720 3734 w
(with) 3231 3734 w
(just) 3464 3734 w
(one) 3661 3734 w
(ticket,) 3856 3734 w
(to) 4165 3734 w
(achieve) 566 3854 w
(mutual) 932 3854 w
(exclusion) 1271 3854 w
(for) 1725 3854 w
(the) 1885 3854 w
(buffer.) 2052 3854 w
(And) 2380 3854 w
(we) 2603 3854 w
(need) 2764 3854 w
(two) 3004 3854 w
(extra) 3203 3854 w
(semaphores.) 3455 3854 w
(Pro\255) 4062 3854 w
(cesses) 566 3974 w
(that) 870 3974 w
(want) 1066 3974 w
(to) 1310 3974 w
(put) 1427 3974 w
(an) 1599 3974 w
(item) 1733 3974 w
(in) 1960 3974 w
(the) 2077 3974 w
(buffer) 2242 3974 w
(require) 2539 3974 w
(a) 2879 3974 w
(hole) 2958 3974 w
(where) 3178 3974 w
(to) 3475 3974 w
(put) 3591 3974 w
(it.) 3762 3974 w
(Using) 3910 3974 w
(a) 4203 3974 w
(semaphore) 566 4094 w
(with) 1091 4094 w
(initially) 1338 4094 w
11 /Courier f
(Nmsgs) 1733 4094 w
11 /Times-Roman f
(tickets,) 2114 4094 w
(we) 2480 4094 w
(can) 2658 4094 w
(make) 2860 4094 w
(the) 3148 4094 w
(producer) 3333 4094 w
(acquire) 3773 4094 w
(its) 4146 4094 w
(holds) 566 4214 w
(nicely.) 839 4214 w
(One) 1169 4214 w
(ticket) 1384 4214 w
(per) 1661 4214 w
(hole.) 1833 4214 w
(When) 2111 4214 w
(no) 2405 4214 w
(more) 2548 4214 w
(holes) 2806 4214 w
(are) 3071 4214 w
(available) 3236 4214 w
(to) 3664 4214 w
(put) 3783 4214 w
(a) 3957 4214 w
(mes\255) 4038 4214 w
(sage,) 566 4334 w
(the) 828 4334 w
(producer) 1002 4334 w
(will) 1430 4334 w
(sleep) 1642 4334 w
(upon) 1907 4334 w
(a) 2167 4334 w
(call) 2255 4334 w
(to) 2453 4334 w
11 /Courier f
(wait\(sholes\)) 2579 4334 w
11 /Times-Roman f
(.) 3371 4334 w
(In) 3468 4334 w
(the) 3600 4334 w
(same) 3775 4334 w
(way,) 4041 4334 w
(the) 566 4454 w
(consumer) 746 4454 w
(requires) 1218 4454 w
(messages,) 1616 4454 w
(and) 2104 4454 w
(there) 2308 4454 w
(will) 2572 4454 w
(be) 2790 4454 w
(zero) 2939 4454 w
(messages) 3171 4454 w
(available,) 3630 4454 w
(ini\255) 4098 4454 w
(tially.) 566 4574 w
8 /Courier f
(typedef struct Buffer Buffer;) 786 4744 w
(struct Buffer {) 786 4854 w
(Sem*) 1266 4964 w
(mutex;) 1746 4964 w
(// for mutual exclusion) 2706 4964 w
(char*) 1266 5074 w
(msgs[Nmsgs];) 1746 5074 w
(// messages in buffer) 2706 5074 w
(int) 1266 5184 w
(hd;) 1746 5184 w
(// head of the queue) 2706 5184 w
(int) 1266 5294 w
(tl;) 1746 5294 w
(// tail. First empty slot) 2706 5294 w
(int) 1266 5404 w
(nmsgs;) 1746 5404 w
(// number of messages) 2706 5404 w
(Sem*) 1266 5514 w
(smsgs;) 1746 5514 w
(// \(0 tickets\) acquire a msg) 2706 5514 w
(Sem*) 1266 5624 w
(sholes;;) 1746 5624 w
(// \(Nmsgs tickets\) acquire a hole) 2226 5624 w
(};) 786 5734 w
11 /Times-Roman f
(The) 566 5950 w
(implementation) 777 5950 w
(for) 1509 5950 w
11 /Courier f
(put) 1677 5950 w
11 /Times-Roman f
(is) 1916 5950 w
(similar) 2031 5950 w
(to) 2378 5950 w
(before.) 2505 5950 w
(But) 2852 5950 w
(there) 3053 5950 w
(are) 3312 5950 w
(some) 3486 5950 w
(remarkable) 3760 5950 w
(differences.) 566 6070 w
cleartomark
showpage
saveobj restore
%%EndPage: 37 37
%%Page: 38 38
/saveobj save def
mark
38 pagesetup
11 /Times-Roman f
(\255 38 \255) 2289 413 w
10 /Courier f
(void) 786 676 w
(put\(Buffer* b, char* msg\)) 786 786 w
({) 786 896 w
(wait\(b\255>sholes\);) 1266 1006 w
(wait\(b\255>mutex\);) 1266 1116 w
(b\255>msgs[b\255>tl] = strdup\(msg\);) 1266 1226 w
(b\255>tl = ++b\255>tl % Nmsgs;) 1266 1336 w
(b\255>nmsgs++;) 1266 1446 w
(signal\(b\255>mutex\);) 1266 1556 w
(signal\(b\255>smsgs\);) 1266 1666 w
(}) 786 1776 w
11 /Times-Roman f
(Before) 566 1992 w
(even) 892 1992 w
(trying) 1127 1992 w
(to) 1419 1992 w
(put) 1534 1992 w
(anything) 1704 1992 w
(in) 2119 1992 w
(the) 2235 1992 w
(buffer,) 2399 1992 w
(the) 2723 1992 w
(producer) 2887 1992 w
(tries) 3305 1992 w
(to) 3524 1992 w
(get) 3640 1992 w
(a) 3804 1992 w
(hole.) 3882 1992 w
(To) 4129 1992 w
(do) 566 2112 w
(so,) 716 2112 w
(it) 881 2112 w
(acquires) 982 2112 w
(a) 1385 2112 w
(ticket) 1472 2112 w
(from) 1755 2112 w
(the) 2007 2112 w
(semaphore) 2180 2112 w
(representing) 2693 2112 w
(the) 3273 2112 w
(holes) 3446 2112 w
(available.) 3717 2112 w
(If) 4179 2112 w
(there) 566 2232 w
(are) 832 2232 w
(no) 1012 2232 w
(tickets,) 1170 2232 w
(the) 1533 2232 w
(producer) 1715 2232 w
(sleeps.) 2151 2232 w
(Otherwise,) 2495 2232 w
(there) 3021 2232 w
(is) 3287 2232 w
(a) 3409 2232 w
(hole) 3506 2232 w
(guaranteed.) 3744 2232 w
(Now,) 566 2352 w
(to) 836 2352 w
(put) 951 2352 w
(the) 1121 2352 w
(message) 1284 2352 w
(in) 1684 2352 w
(the) 1799 2352 w
(hole) 1962 2352 w
(acquired,) 2180 2352 w
(a) 2613 2352 w
(semaphore) 2690 2352 w
(called) 3192 2352 w
11 /Courier f
(mutex) 3481 2352 w
11 /Times-Roman f
(,) 3811 2352 w
(with) 3867 2352 w
(just) 4091 2352 w
(one) 566 2472 w
(ticket) 752 2472 w
(for) 1024 2472 w
(providing) 1179 2472 w
(mutual) 1635 2472 w
(exclusion,) 1969 2472 w
(is) 2474 2472 w
(used.) 2576 2472 w
(Upon) 2833 2472 w
(acquiring) 3105 2472 w
(the) 3547 2472 w
(only) 3710 2472 w
(slot) 3935 2472 w
(for) 4124 2472 w
(executing) 566 2592 w
(in) 1025 2592 w
(the) 1144 2592 w
(critical) 1311 2592 w
(region,) 1648 2592 w
(the) 1989 2592 w
(producer) 2155 2592 w
(adds) 2575 2592 w
(the) 2808 2592 w
(message) 2974 2592 w
(to) 3377 2592 w
(the) 3495 2592 w
(buffer.) 3661 2592 w
(Also,) 4015 2592 w
(once) 566 2712 w
(we) 804 2712 w
(have) 963 2712 w
(done) 1201 2712 w
(our) 1446 2712 w
(work,) 1624 2712 w
(there) 1909 2712 w
(is) 2159 2712 w
(a) 2265 2712 w
(new) 2345 2712 w
(message) 2559 2712 w
(in) 2962 2712 w
(the) 3080 2712 w
(buffer.) 3246 2712 w
(A) 3573 2712 w
(new) 3685 2712 w
(ticket) 3900 2712 w
(is) 4177 2712 w
(added) 566 2832 w
(to) 861 2832 w
(the) 981 2832 w
(semaphore) 1149 2832 w
(representing) 1657 2832 w
(tickets) 2231 2832 w
(to) 2551 2832 w
(maintain) 2670 2832 w
(it) 3088 2832 w
(consistent) 3183 2832 w
(with) 3656 2832 w
(the) 3885 2832 w
(real\255) 4052 2832 w
(ity.) 566 2952 w
(The) 816 3108 w
(code) 1014 3108 w
(for) 1248 3108 w
(a) 1403 3108 w
(consumer) 1479 3108 w
(is) 1933 3108 w
(equivalent.) 2035 3108 w
10 /Courier f
(char*) 786 3278 w
(get\(Buffer* b\)) 786 3388 w
({) 786 3498 w
(char*) 1266 3608 w
(msg;) 1746 3608 w
(wait\(b\255>smsgs\);) 1266 3828 w
(wait\(b\255>mutex\);) 1266 3938 w
(msg = b\255>msgs[b\255>hd];) 1266 4048 w
(b\255>hd = ++b\255>hd % Nmsgs;) 1266 4158 w
(b\255>nmsgs\255\255;) 1266 4268 w
(signal\(b\255>mutex\);) 1266 4378 w
(signal\(b\255>sholes\);) 1266 4488 w
(return msg;) 1266 4598 w
(}) 786 4708 w
11 /Times-Roman f
(Semaphores) 566 4924 w
(are) 1135 4924 w
(to) 1300 4924 w
(be) 1419 4924 w
(handled) 1556 4924 w
(with) 1937 4924 w
(care.) 2167 4924 w
(For) 2409 4924 w
(example,) 2596 4924 w
(changing) 3029 4924 w
(the) 3465 4924 w
(first) 3633 4924 w
(two) 3844 4924 w
(lines) 4043 4924 w
(above) 566 5044 w
(with) 855 5044 w
10 /Courier f
(wait\(b\255>mutex\);) 786 5214 w
(wait\(b\255>smsgs\);) 786 5324 w
11 /Times-Roman f
(is) 566 5540 w
(going) 682 5540 w
(to) 975 5540 w
(produce) 1103 5540 w
(a) 1497 5540 w
11 /Times-Italic f
(deadlock) 1588 5540 w
11 /Times-Roman f
(.) 1983 5540 w
(First,) 2082 5540 w
(the) 2356 5540 w
(consumer) 2533 5540 w
(takes) 3002 5540 w
(the) 3270 5540 w
(mutex) 3447 5540 w
(\(ticket\)) 3765 5540 w
(for) 4124 5540 w
(itself.) 566 5660 w
(If) 856 5660 w
(it) 970 5660 w
(happens) 1074 5660 w
(now) 1475 5660 w
(that) 1706 5660 w
(the) 1912 5660 w
(buffer) 2087 5660 w
(is) 2394 5660 w
(empty,) 2509 5660 w
(and) 2853 5660 w
11 /Courier f
(smsgs) 3052 5660 w
11 /Times-Roman f
(has) 3423 5660 w
(no) 3610 5660 w
(tickets,) 3761 5660 w
(the) 4117 5660 w
(consumer) 566 5780 w
(will) 1021 5780 w
(block) 1222 5780 w
(forever.) 1495 5780 w
(Nobody) 1866 5780 w
(would) 2249 5780 w
(be) 2553 5780 w
(able) 2685 5780 w
(to) 2896 5780 w
(wake) 3011 5780 w
(it) 3270 5780 w
(up,) 3362 5780 w
(because) 3530 5780 w
(the) 3905 5780 w
(pro\255) 4069 5780 w
(ducer) 566 5900 w
(will) 840 5900 w
(not) 1044 5900 w
(be) 1217 5900 w
(able) 1352 5900 w
(to) 1566 5900 w
(acquire) 1684 5900 w
(the) 2037 5900 w
11 /Courier f
(mutex) 2203 5900 w
11 /Times-Roman f
(for) 2565 5900 w
(itself.) 2724 5900 w
(It) 3004 5900 w
(is) 3103 5900 w
11 /Times-Italic f
(very) 3208 5900 w
11 /Times-Roman f
(dangerous) 3426 5900 w
(to) 3907 5900 w
(go) 4024 5900 w
(to) 4165 5900 w
(sleep) 566 6020 w
(with) 830 6020 w
(a) 1065 6020 w
(lock) 1152 6020 w
(held,) 1380 6020 w
(and) 1636 6020 w
(it) 1833 6020 w
(is) 1934 6020 w
(also) 2047 6020 w
(very) 2263 6020 w
(dangerous) 2496 6020 w
(to) 2985 6020 w
(go) 3111 6020 w
(to) 3261 6020 w
(sleep) 3387 6020 w
(with) 3652 6020 w
(a) 3888 6020 w
(mutex) 3976 6020 w
(taken.) 566 6140 w
(Only) 862 6140 w
(a) 1113 6140 w
(few) 1192 6140 w
(times) 1386 6140 w
(it) 1656 6140 w
(might) 1749 6140 w
(be) 2037 6140 w
(the) 2170 6140 w
(right) 2334 6140 w
(thing) 2572 6140 w
(to) 2829 6140 w
(do,) 2945 6140 w
(and) 3113 6140 w
(you) 3301 6140 w
(must) 3496 6140 w
(be) 3741 6140 w
(sure) 3874 6140 w
(that) 4086 6140 w
(there) 566 6260 w
(is) 812 6260 w
(no) 914 6260 w
(deadlock) 1052 6260 w
(produced) 1475 6260 w
(as) 1910 6260 w
(a) 2029 6260 w
(result.) 2105 6260 w
cleartomark
showpage
saveobj restore
%%EndPage: 38 38
%%Page: 39 39
/saveobj save def
mark
39 pagesetup
11 /Times-Roman f
(\255 39 \255) 2289 413 w
(Note) 816 686 w
(that) 1072 686 w
(a) 1280 686 w
(semaphore) 1371 686 w
(is) 1889 686 w
(by) 2007 686 w
(no) 2161 686 w
(means) 2315 686 w
(similar) 2639 686 w
(to) 2989 686 w
11 /Courier f
(rsleep) 3119 686 w
11 /Times-Roman f
(and) 3559 686 w
11 /Courier f
(rwakeup) 3761 686 w
11 /Times-Roman f
(.) 4223 686 w
(Compare) 566 806 w
10 /Courier f
(rwakeup\(r\);) 786 976 w
(rsleep\(r\);) 786 1086 w
11 /Times-Roman f
(with) 566 1302 w
10 /Courier f
(signal\(s\);) 786 1472 w
(wait\(s\);) 786 1582 w
11 /Times-Roman f
(The) 566 1798 w
(former) 779 1798 w
(wakes) 1119 1798 w
(up) 1435 1798 w
(any) 1588 1798 w
(sleeper) 1789 1798 w
(at) 2141 1798 w
11 /Courier f
(r) 2263 1798 w
11 /Times-Roman f
(,) 2329 1798 w
(and) 2401 1798 w
(then) 2603 1798 w
(goes) 2836 1798 w
(to) 3081 1798 w
(sleep.) 3211 1798 w
(Unconditionally.) 3508 1798 w
(The) 566 1918 w
(latter,) 777 1918 w
(adds) 1071 1918 w
(a) 1313 1918 w
(ticket) 1402 1918 w
(to) 1687 1918 w
(a) 1814 1918 w
(semaphore.) 1903 1918 w
(If) 2446 1918 w
(nobody) 2559 1918 w
(consumes) 2930 1918 w
(it) 3404 1918 w
(between) 3507 1918 w
(the) 3912 1918 w
(two) 4086 1918 w
(sentences,) 566 2038 w
(the) 1046 2038 w
(call) 1213 2038 w
(to) 1404 2038 w
11 /Courier f
(wait) 1524 2038 w
11 /Times-Roman f
(will) 1822 2038 w
11 /Times-Italic f
(not) 2028 2038 w
11 /Times-Roman f
(sleep.) 2203 2038 w
(Remember) 2518 2038 w
(that) 3033 2038 w
(a) 3232 2038 w
(semaphore) 3314 2038 w
(is) 3822 2038 w
(used) 3930 2038 w
(to) 4165 2038 w
(model) 566 2158 w
(slots) 919 2158 w
(available) 1199 2158 w
(for) 1671 2158 w
(using) 1875 2158 w
(a) 2191 2158 w
(particular) 2316 2158 w
(resource.) 2812 2158 w
(On) 3286 2158 w
(the) 3497 2158 w
(other) 3708 2158 w
(hand,) 4010 2158 w
(sleep/wakeup) 566 2278 w
(are) 1211 2278 w
(more) 1392 2278 w
(related) 1666 2278 w
(to) 2012 2278 w
(conditions) 2147 2278 w
(that) 2655 2278 w
(must) 2869 2278 w
(hold) 3133 2278 w
(for) 3378 2278 w
(you) 3555 2278 w
(to) 3770 2278 w
(proceed) 3906 2278 w
(doing) 566 2398 w
(something.) 845 2398 w
(We) 816 2554 w
(said) 999 2554 w
(that) 1208 2554 w
(Plan) 1406 2554 w
(9) 1635 2554 w
(does) 1723 2554 w
(not) 1957 2554 w
(supply) 2131 2554 w
(semaphores.) 2458 2554 w
(But) 3036 2554 w
(there) 3229 2554 w
(is) 3480 2554 w
(an) 3587 2554 w
(easy) 3723 2554 w
(way) 3950 2554 w
(to) 4165 2554 w
(implement) 566 2674 w
(them.) 1085 2674 w
(You) 1380 2674 w
(need) 1616 2674 w
(something) 1869 2674 w
(to) 2375 2674 w
(put) 2508 2674 w
(tickets) 2696 2674 w
(into.) 3030 2674 w
(Something) 3277 2674 w
(that) 3802 2674 w
(when) 4014 2674 w
(wanting) 566 2794 w
(to) 958 2794 w
(get) 1082 2794 w
(a) 1254 2794 w
(ticket,) 1340 2794 w
(blocks) 1650 2794 w
(until) 1975 2794 w
(there) 2216 2794 w
(is) 2472 2794 w
(one) 2584 2794 w
(ticket) 2780 2794 w
(available.) 3062 2794 w
(And) 3523 2794 w
(returns) 3750 2794 w
(any) 4093 2794 w
(ticket) 566 2914 w
(available) 855 2914 w
(immediately) 1294 2914 w
(otherwise.) 1888 2914 w
(It) 2386 2914 w
(seems) 2497 2914 w
(that) 2809 2914 w
(pipes) 3018 2914 w
(fit) 3294 2914 w
(right) 3436 2914 w
(into) 3688 2914 w
(the) 3904 2914 w
(job.) 4082 2914 w
(This) 566 3034 w
(is) 790 3034 w
(our) 892 3034 w
(semaphore:) 1066 3034 w
10 /Courier f
(typedef struct Sem Sem;) 786 3204 w
(struct Sem {) 786 3314 w
(int fd[2];) 1266 3424 w
(};) 786 3534 w
11 /Times-Roman f
(To) 566 3750 w
(create) 718 3750 w
(a) 1007 3750 w
(semaphore,) 1085 3750 w
(we) 1618 3750 w
(create) 1776 3750 w
(a) 2066 3750 w
(pipe) 2145 3750 w
(and) 2365 3750 w
(put) 2554 3750 w
(as) 2726 3750 w
(many) 2848 3750 w
(bytes) 3123 3750 w
(in) 3386 3750 w
(it) 3503 3750 w
(as) 3596 3750 w
(tickets) 3718 3750 w
(must) 4036 3750 w
(be) 566 3870 w
(initially) 697 3870 w
(in) 1069 3870 w
(the) 1183 3870 w
(semaphore.) 1345 3870 w
10 /Courier f
(Sem*) 786 4040 w
(newsem\(int n\)) 786 4150 w
({) 786 4260 w
(Sem*) 1266 4370 w
(s;) 1746 4370 w
(s = malloc\(sizeof\(Sem\)\);) 1266 4590 w
(if \(pipe\(s\255>fd\) < 0\){) 1266 4700 w
(free\(s\);) 1746 4810 w
(return nil;) 1746 4920 w
(}) 1266 5030 w
(while\(n\255\255 > 0\)) 1266 5140 w
(write\(s\255>fd[1], "x", 1\);) 1746 5250 w
(return s;) 1266 5360 w
(}) 786 5470 w
11 /Times-Roman f
(A) 566 5686 w
11 /Courier f
(signal) 673 5686 w
11 /Times-Roman f
(must) 1097 5686 w
(just) 1340 5686 w
(put) 1528 5686 w
(a) 1697 5686 w
(ticket) 1773 5686 w
(in) 2045 5686 w
(the) 2159 5686 w
(semaphore.) 2321 5686 w
cleartomark
showpage
saveobj restore
%%EndPage: 39 39
%%Page: 40 40
/saveobj save def
mark
40 pagesetup
11 /Times-Roman f
(\255 40 \255) 2289 413 w
10 /Courier f
(void) 786 676 w
(signal\(Sem* s\)) 786 786 w
({) 786 896 w
(write\(s\255>fd[1], "x", 1\);) 1266 1006 w
(}) 786 1116 w
11 /Times-Roman f
(A) 566 1332 w
11 /Courier f
(wait) 673 1332 w
11 /Times-Roman f
(must) 965 1332 w
(acquire) 1208 1332 w
(one) 1557 1332 w
(ticket.) 1743 1332 w
10 /Courier f
(void) 786 1502 w
(wait\(Sem* s\)) 786 1612 w
({) 786 1722 w
(char buf[1];) 1266 1832 w
(read\(s\255>fd[0], buf, 1\);) 1266 2052 w
(}) 786 2162 w
11 /Times-Roman f
(We) 566 2378 w
(do) 751 2378 w
(not) 895 2378 w
(show) 1070 2378 w
(it,) 1336 2378 w
(but) 1460 2378 w
(to) 1635 2378 w
(destroy) 1755 2378 w
(a) 2112 2378 w
(semaphore) 2194 2378 w
(it) 2702 2378 w
(suffices) 2798 2378 w
(to) 3172 2378 w
(close) 3292 2378 w
(the) 3551 2378 w
(pipe) 3719 2378 w
(at) 3942 2378 w
(both) 4055 2378 w
(ends) 566 2498 w
(and) 805 2498 w
(release) 1001 2498 w
(the) 1341 2498 w
(memory) 1513 2498 w
(for) 1917 2498 w
(the) 2082 2498 w
(data) 2253 2498 w
(structure.) 2472 2498 w
(Given) 2920 2498 w
(the) 3225 2498 w
(implementation) 3396 2498 w
(we) 4124 2498 w
(made,) 566 2618 w
(the) 864 2618 w
(only) 1031 2618 w
(limitation) 1260 2618 w
(is) 1723 2618 w
(that) 1830 2618 w
(a) 2029 2618 w
(semaphore) 2111 2618 w
(may) 2619 2618 w
(hold) 2842 2618 w
(no) 3072 2618 w
(more) 3216 2618 w
(tickets) 3475 2618 w
(than) 3796 2618 w
(bytes) 4019 2618 w
(are) 566 2738 w
(provided) 732 2738 w
(by) 1156 2738 w
(the) 1300 2738 w
(buffering) 1468 2738 w
(in) 1909 2738 w
(the) 2029 2738 w
(pipe.) 2197 2738 w
(But) 2448 2738 w
(that) 2642 2738 w
(seems) 2841 2738 w
(like) 3142 2738 w
(a) 3340 2738 w
(reasonable) 3421 2738 w
(amount) 3921 2738 w
(of) 566 2858 w
(tickets) 685 2858 w
(for) 1000 2858 w
(most) 1155 2858 w
(purposes.) 1398 2858 w
(Another) 816 3014 w
(restriction) 1207 3014 w
(to) 1684 3014 w
(this) 1803 3014 w
(implementation) 1996 3014 w
(is) 2720 3014 w
(that) 2827 3014 w
(the) 3025 3014 w
(semaphore) 3192 3014 w
(must) 3699 3014 w
(be) 3947 3014 w
(cre\255) 4083 3014 w
(ated) 566 3134 w
(by) 785 3134 w
(a) 932 3134 w
(common) 1017 3134 w
(ancestor) 1439 3134 w
(\(e.g.,) 1840 3134 w
(the) 2100 3134 w
(parent\)) 2271 3134 w
(of) 2617 3134 w
(processes) 2745 3134 w
(sharing) 3201 3134 w
(it.) 3561 3134 w
(Unless) 3715 3134 w
(such) 4050 3134 w
(processes) 566 3254 w
(are) 1013 3254 w
(sharing) 1173 3254 w
(their) 1524 3254 w
(file) 1753 3254 w
(descriptor) 1927 3254 w
(set.) 2393 3254 w
11 /Times-Bold f
(Problems) 566 3494 w
11 /Times-Roman f
(1) 566 3650 w
(Locate) 816 3650 w
(the) 1141 3650 w
(synchronization) 1303 3650 w
(construct) 2032 3650 w
(in) 2462 3650 w
(programming) 2576 3650 w
(languages) 3202 3650 w
(you) 3668 3650 w
(use.) 3861 3650 w
(2) 566 3806 w
(Do) 816 3806 w
(shell) 978 3806 w
(programs) 1214 3806 w
(have) 1656 3806 w
(race) 1890 3806 w
(conditions?) 2098 3806 w
(3) 566 3962 w
(Implement) 816 3962 w
(a) 1334 3962 w
(concurrent) 1424 3962 w
(program) 1934 3962 w
(simulating) 2348 3962 w
(a) 2857 3962 w
(printer) 2948 3962 w
(spooler.) 3283 3962 w
(It) 3677 3962 w
(must) 3787 3962 w
(have) 4045 3962 w
(several) 816 4082 w
(processes.) 1160 4082 w
(Some) 1642 4082 w
(of) 1928 4082 w
(them) 2054 4082 w
(generate) 2309 4082 w
(jobs) 2713 4082 w
(for) 2932 4082 w
(printing) 3094 4082 w
(\(spool) 3478 4082 w
(print) 3788 4082 w
(jobs\)) 4031 4082 w
(and) 816 4202 w
(two) 1003 4202 w
(other) 1197 4202 w
(ones) 1451 4202 w
(print) 1681 4202 w
(jobs.) 1918 4202 w
(Needless) 2159 4202 w
(to) 2583 4202 w
(say) 2698 4202 w
(that) 2873 4202 w
(the) 3067 4202 w
(program) 3230 4202 w
(must) 3630 4202 w
(not) 3874 4202 w
(have) 4045 4202 w
(race) 816 4322 w
(conditions.) 1024 4322 w
(4) 566 4478 w
(Implement) 816 4478 w
(a) 1336 4478 w
(semaphore) 1428 4478 w
(using) 1946 4478 w
(shared) 2229 4478 w
(variables) 2558 4478 w
(protected) 2997 4478 w
(with) 3449 4478 w
(\(spin\)) 3690 4478 w
(locks.) 3991 4478 w
(Would) 816 4598 w
(you) 1143 4598 w
(use) 1336 4598 w
(it?) 1510 4598 w
(Why?) 1648 4598 w
(5) 566 4754 w
(Assume) 816 4754 w
(you) 1198 4754 w
(have) 1391 4754 w
(monitors) 1625 4754 w
(\(invent) 2045 4754 w
(the) 2384 4754 w
(syntax\).) 2547 4754 w
(Implement) 2927 4754 w
(a) 3432 4754 w
(sempahore) 3509 4754 w
(using) 4012 4754 w
(monitors.) 816 4874 w
cleartomark
showpage
saveobj restore
%%EndPage: 40 40
%%Page: 41 41
/saveobj save def
mark
41 pagesetup
11 /Times-Roman f
(\255 41 \255) 2289 413 w
(.) 844 686 w
cleartomark
showpage
saveobj restore
%%EndPage: 41 41
%%Page: 42 42
/saveobj save def
mark
42 pagesetup
11 /Times-Roman f
(\255 42 \255) 2289 413 w
cleartomark
showpage
saveobj restore
%%EndPage: 42 42
%%Trailer
done
%%DocumentFonts: Times-Roman LucidaSansUnicode20 Times-Italic Times-Bold Courier S1 S
%%Pages: 42
