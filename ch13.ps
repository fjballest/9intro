%!PS-Adobe-2.0
%%Version: 0.1
%%DocumentFonts: (atend)
%%Pages: (atend)
%%EndComments
%
% Version 3.3.2 prologue for troff files.
%

/#copies 1 store
/aspectratio 1 def
/formsperpage 1 def
/landscape false def
/linewidth .3 def
/magnification 1 def
/margin 0 def
/orientation 0 def
/resolution 720 def
/rotation 1 def
/xoffset 0 def
/yoffset 0 def

/roundpage true def
/useclippath true def
/pagebbox [0 0 612 792] def

/R  /Times-Roman def
/I  /Times-Italic def
/B  /Times-Bold def
/BI /Times-BoldItalic def
/H  /Helvetica def
/HI /Helvetica-Oblique def
/HB /Helvetica-Bold def
/HX /Helvetica-BoldOblique def
/CW /Courier def
/CO /Courier def
/CI /Courier-Oblique def
/CB /Courier-Bold def
/CX /Courier-BoldOblique def
/PA /Palatino-Roman def
/PI /Palatino-Italic def
/PB /Palatino-Bold def
/PX /Palatino-BoldItalic def
/Hr /Helvetica-Narrow def
/Hi /Helvetica-Narrow-Oblique def
/Hb /Helvetica-Narrow-Bold def
/Hx /Helvetica-Narrow-BoldOblique def
/KR /Bookman-Light def
/KI /Bookman-LightItalic def
/KB /Bookman-Demi def
/KX /Bookman-DemiItalic def
/AR /AvantGarde-Book def
/AI /AvantGarde-BookOblique def
/AB /AvantGarde-Demi def
/AX /AvantGarde-DemiOblique def
/NR /NewCenturySchlbk-Roman def
/NI /NewCenturySchlbk-Italic def
/NB /NewCenturySchlbk-Bold def
/NX /NewCenturySchlbk-BoldItalic def
/ZD /ZapfDingbats def
/ZI /ZapfChancery-MediumItalic def
/S  /S def
/S1 /S1 def
/GR /Symbol def

/inch {72 mul} bind def
/min {2 copy gt {exch} if pop} bind def

/setup {
	counttomark 2 idiv {def} repeat pop

	landscape {/orientation 90 orientation add def} if
	/scaling 72 resolution div def
	linewidth setlinewidth
	1 setlinecap

	pagedimensions
	xcenter ycenter translate
	orientation rotation mul rotate
	width 2 div neg height 2 div translate
	xoffset inch yoffset inch neg translate
	margin 2 div dup neg translate
	magnification dup aspectratio mul scale
	scaling scaling scale

	addmetrics
	0 0 moveto
} def

/pagedimensions {
	useclippath userdict /gotpagebbox known not and {
		/pagebbox [clippath pathbbox newpath] def
		roundpage currentdict /roundpagebbox known and {roundpagebbox} if
	} if
	pagebbox aload pop
	4 -1 roll exch 4 1 roll 4 copy
	landscape {4 2 roll} if
	sub /width exch def
	sub /height exch def
	add 2 div /xcenter exch def
	add 2 div /ycenter exch def
	userdict /gotpagebbox true put
} def

/addmetrics {
	/Symbol /S null Sdefs cf
	/Times-Roman /S1 StandardEncoding dup length array copy S1defs cf
} def

/pagesetup {
	/page exch def
	currentdict /pagedict known currentdict page known and {
		page load pagedict exch get cvx exec
	} if
} def

/decodingdefs [
	{counttomark 2 idiv {y moveto show} repeat}
	{neg /y exch def counttomark 2 idiv {y moveto show} repeat}
	{neg moveto {2 index stringwidth pop sub exch div 0 32 4 -1 roll widthshow} repeat}
	{neg moveto {spacewidth sub 0.0 32 4 -1 roll widthshow} repeat}
	{counttomark 2 idiv {y moveto show} repeat}
	{neg setfunnytext}
] def

/setdecoding {/t decodingdefs 3 -1 roll get bind def} bind def

/w {neg moveto show} bind def
/m {neg dup /y exch def moveto} bind def
/done {/lastpage where {pop lastpage} if} def

/f {
	dup /font exch def findfont exch
	dup /ptsize exch def scaling div dup /size exch def scalefont setfont
	linewidth ptsize mul scaling 10 mul div setlinewidth
	/spacewidth ( ) stringwidth pop def
} bind def

/changefont {
	/fontheight exch def
	/fontslant exch def
	currentfont [
		1 0
		fontheight ptsize div fontslant sin mul fontslant cos div
		fontheight ptsize div
		0 0
	] makefont setfont
} bind def

/sf {f} bind def

/cf {
	dup length 2 idiv
	/entries exch def
	/chtab exch def
	/newencoding exch def
	/newfont exch def

	findfont dup length 1 add dict
	/newdict exch def
	{1 index /FID ne {newdict 3 1 roll put}{pop pop} ifelse} forall

	newencoding type /arraytype eq {newdict /Encoding newencoding put} if

	newdict /Metrics entries dict put
	newdict /Metrics get
	begin
		chtab aload pop
		1 1 entries {pop def} for
		newfont newdict definefont pop
	end
} bind def

%
% A few arrays used to adjust reference points and character widths in some
% of the printer resident fonts. If square roots are too high try changing
% the lines describing /radical and /radicalex to,
%
%	/radical	[0 -75 550 0]
%	/radicalex	[-50 -75 500 0]
%
% Move braceleftbt a bit - default PostScript character is off a bit.
%

/Sdefs [
	/bracketlefttp		[201 500]
	/bracketleftbt		[201 500]
	/bracketrighttp		[-81 380]
	/bracketrightbt		[-83 380]
	/braceleftbt		[203 490]
	/bracketrightex		[220 -125 500 0]
	/radical		[0 0 550 0]
	/radicalex		[-50 0 500 0]
	/parenleftex		[-20 -170 0 0]
	/integral		[100 -50 500 0]
	/infinity		[10 -75 730 0]
] def

/S1defs [
	/underscore		[0 80 500 0]
	/endash			[7 90 650 0]
] def
%
% Version 3.3.2 drawing procedures for dpost. Automatically pulled in when
% needed.
%

/inpath false def
/savematrix matrix def

/Dl {
	inpath
		{neg lineto pop pop}
		{newpath neg moveto neg lineto stroke}
	ifelse
} bind def

/De {
	/y1 exch 2 div def
	/x1 exch 2 div def
	/savematrix savematrix currentmatrix def
	neg exch x1 add exch translate
	x1 y1 scale
	0 0 1 0 360
	inpath
		{1 0 moveto arc savematrix setmatrix}
		{newpath arc savematrix setmatrix stroke}
	ifelse
} bind def

/Da {
	/dy2 exch def
	/dx2 exch def
	/dy1 exch def
	/dx1 exch def
	dy1 add neg exch dx1 add exch
	dx1 dx1 mul dy1 dy1 mul add sqrt
	dy1 dx1 neg atan
	dy2 neg dx2 atan
	inpath
		{arc}
		{newpath arc stroke}
	ifelse
} bind def

/DA {
	/dy2 exch def
	/dx2 exch def
	/dy1 exch def
	/dx1 exch def
	dy1 add neg exch dx1 add exch
	dx1 dx1 mul dy1 dy1 mul add sqrt
	dy1 dx1 neg atan
	dy2 neg dx2 atan
	inpath
		{arcn}
		{newpath arcn stroke}
	ifelse
} bind def

/Ds {
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	/y0 exch def
	/x0 exch def
	x0 5 x1 mul add 6 div
	y0 5 y1 mul add -6 div
	x2 5 x1 mul add 6 div
	y2 5 y1 mul add -6 div
	x1 x2 add 2 div
	y1 y2 add -2 div
	inpath
		{curveto}
		{newpath x0 x1 add 2 div y0 y1 add -2 div moveto curveto stroke}
	ifelse
} bind def
%
% Tries to round clipping path dimensions, as stored in array pagebbox, so they
% match one of the known sizes in the papersizes array. Lower left coordinates
% are always set to 0.
%

/roundpagebbox {
    7 dict begin
	/papersizes [8.5 inch 11 inch 14 inch 17 inch] def

	/mappapersize {
		/val exch def
		/slop .5 inch def
		/diff slop def
		/j 0 def
		0 1 papersizes length 1 sub {
			/i exch def
			papersizes i get val sub abs
			dup diff le {/diff exch def /j i def} {pop} ifelse
		} for
		diff slop lt {papersizes j get} {val} ifelse
	} def

	pagebbox 0 0 put
	pagebbox 1 0 put
	pagebbox dup 2 get mappapersize 2 exch put
	pagebbox dup 3 get mappapersize 3 exch put
    end
} bind def

%%EndProlog
%%BeginSetup
mark
%
% Encoding vector and redefinition of findfont for the ISO Latin1 standard.
% The 18 characters missing from ROM based fonts on older printers are noted
% below.
%

/ISOLatin1Encoding [
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/space
	/exclam
	/quotedbl
	/numbersign
	/dollar
	/percent
	/ampersand
	/quoteright
	/parenleft
	/parenright
	/asterisk
	/plus
	/comma
	/minus
	/period
	/slash
	/zero
	/one
	/two
	/three
	/four
	/five
	/six
	/seven
	/eight
	/nine
	/colon
	/semicolon
	/less
	/equal
	/greater
	/question
	/at
	/A
	/B
	/C
	/D
	/E
	/F
	/G
	/H
	/I
	/J
	/K
	/L
	/M
	/N
	/O
	/P
	/Q
	/R
	/S
	/T
	/U
	/V
	/W
	/X
	/Y
	/Z
	/bracketleft
	/backslash
	/bracketright
	/asciicircum
	/underscore
	/quoteleft
	/a
	/b
	/c
	/d
	/e
	/f
	/g
	/h
	/i
	/j
	/k
	/l
	/m
	/n
	/o
	/p
	/q
	/r
	/s
	/t
	/u
	/v
	/w
	/x
	/y
	/z
	/braceleft
	/bar
	/braceright
	/asciitilde
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/.notdef
	/dotlessi
	/grave
	/acute
	/circumflex
	/tilde
	/macron
	/breve
	/dotaccent
	/dieresis
	/.notdef
	/ring
	/cedilla
	/.notdef
	/hungarumlaut
	/ogonek
	/caron
	/space
	/exclamdown
	/cent
	/sterling
	/currency
	/yen
	/brokenbar		% missing
	/section
	/dieresis
	/copyright
	/ordfeminine
	/guillemotleft
	/logicalnot
	/hyphen
	/registered
	/macron
	/degree			% missing
	/plusminus		% missing
	/twosuperior		% missing
	/threesuperior		% missing
	/acute
	/mu			% missing
	/paragraph
	/periodcentered
	/cedilla
	/onesuperior		% missing
	/ordmasculine
	/guillemotright
	/onequarter		% missing
	/onehalf		% missing
	/threequarters		% missing
	/questiondown
	/Agrave
	/Aacute
	/Acircumflex
	/Atilde
	/Adieresis
	/Aring
	/AE
	/Ccedilla
	/Egrave
	/Eacute
	/Ecircumflex
	/Edieresis
	/Igrave
	/Iacute
	/Icircumflex
	/Idieresis
	/Eth			% missing
	/Ntilde
	/Ograve
	/Oacute
	/Ocircumflex
	/Otilde
	/Odieresis
	/multiply		% missing
	/Oslash
	/Ugrave
	/Uacute
	/Ucircumflex
	/Udieresis
	/Yacute			% missing
	/Thorn			% missing
	/germandbls
	/agrave
	/aacute
	/acircumflex
	/atilde
	/adieresis
	/aring
	/ae
	/ccedilla
	/egrave
	/eacute
	/ecircumflex
	/edieresis
	/igrave
	/iacute
	/icircumflex
	/idieresis
	/eth			% missing
	/ntilde
	/ograve
	/oacute
	/ocircumflex
	/otilde
	/odieresis
	/divide			% missing
	/oslash
	/ugrave
	/uacute
	/ucircumflex
	/udieresis
	/yacute			% missing
	/thorn			% missing
	/ydieresis
] def

/NewFontDirectory FontDirectory maxlength dict def

%
% Apparently no guarantee findfont is defined in systemdict so the obvious
%
%	systemdict /findfont get exec
%
% can generate an error. So far the only exception is a VT600 (version 48.0).
%

userdict /@RealFindfont known not {
	userdict begin
		/@RealFindfont systemdict begin /findfont load end def
	end
} if

/findfont {
	dup NewFontDirectory exch known not {
		dup
		%dup systemdict /findfont get exec	% not always in systemdict
		dup userdict /@RealFindfont get exec
		dup /Encoding get StandardEncoding eq {
			dup length dict begin
				{1 index /FID ne {def}{pop pop} ifelse} forall
				/Encoding ISOLatin1Encoding def
				currentdict
			end
			/DummyFontName exch definefont
		} if
		NewFontDirectory 3 1 roll put
	} if
	NewFontDirectory exch get
} bind def

%%Patch from lp
%%EndPatch from lp

setup
%%EndSetup
%%Page: 1 1
/saveobj save def
mark
1 pagesetup
30 /Times-Roman f
(13 ) 566 686 w
30 /LucidaSansUnicode20 f
(\024) 941 686 w
30 /Times-Roman f
(Building a File Server) 1316 686 w
30 /S1 f
(______) 566 902 w
16 /Times-Bold f
(13.1.) 566 1262 w
(Disk) 966 1262 w
(storage) 1318 1262 w
11 /Times-Roman f
(The) 566 1418 w
(file) 764 1418 w
(server) 938 1418 w
(we) 1232 1418 w
(are) 1387 1418 w
(going) 1547 1418 w
(to) 1826 1418 w
(build) 1940 1418 w
(will) 2195 1418 w
(not) 2395 1418 w
(be) 2564 1418 w
(using) 2695 1418 w
(a) 2963 1418 w
(disk) 3040 1418 w
(to) 3253 1418 w
(provide) 3368 1418 w
(file) 3732 1418 w
(storage,) 3907 1418 w
(it) 566 1538 w
(will) 662 1538 w
(provide) 868 1538 w
(a) 1237 1538 w
(rather) 1318 1538 w
(different) 1605 1538 w
(service.) 2014 1538 w
(But) 2384 1538 w
(before) 2577 1538 w
(building) 2888 1538 w
(our) 3289 1538 w
(new) 3468 1538 w
(file) 3683 1538 w
(server,) 3862 1538 w
(it) 4189 1538 w
(may) 566 1658 w
(be) 783 1658 w
(instructive) 914 1658 w
(to) 1406 1658 w
(look) 1520 1658 w
(a) 1744 1658 w
(little) 1820 1658 w
(bit) 2052 1658 w
(to) 2198 1658 w
(what) 2313 1658 w
(would) 2555 1658 w
(be) 2859 1658 w
(needed) 2991 1658 w
(to) 3329 1658 w
(actually) 3444 1658 w
(store) 3820 1658 w
(files) 4062 1658 w
(on) 566 1778 w
(a) 704 1778 w
(disk.) 780 1778 w
(There) 816 1934 w
(are) 1108 1934 w
(many) 1278 1934 w
(file) 1560 1934 w
(servers) 1744 1934 w
(involved) 2091 1934 w
(in) 2514 1934 w
(disk) 2639 1934 w
(storage,) 2862 1934 w
(not) 3245 1934 w
(just) 3425 1934 w
(one.) 3624 1934 w
(To) 3877 1934 w
(store) 4038 1934 w
(files) 566 2054 w
(on) 787 2054 w
(disk,) 929 2054 w
(you) 1173 2054 w
(need) 1370 2054 w
(a) 1608 2054 w
(disk.) 1688 2054 w
(Like) 1932 2054 w
(all) 2165 2054 w
(other) 2307 2054 w
(devices,) 2564 2054 w
(disks) 2952 2054 w
(are) 3211 2054 w
(files) 3375 2054 w
(in) 3596 2054 w
(Plan) 3714 2054 w
(9.) 3941 2054 w
(This) 4055 2054 w
(may) 566 2174 w
(be) 791 2174 w
(a) 930 2174 w
(surprise,) 1014 2174 w
(as) 1425 2174 w
(disks) 1552 2174 w
(are) 1815 2174 w
(also) 1983 2174 w
(used) 2196 2174 w
(to) 2433 2174 w
(store) 2555 2174 w
(files.) 2804 2174 w
(The) 3085 2174 w
(device) 3291 2174 w
11 /Times-Italic f
(sd) 3612 2174 w
11 /Times-Roman f
(\(3\)) 3710 2174 w
(provides) 3873 2174 w
(storage) 566 2294 w
(devices.) 910 2294 w
(This) 1294 2294 w
(is) 1518 2294 w
(a) 1620 2294 w
(list) 1696 2294 w
(of) 1860 2294 w
(files) 1979 2294 w
(served) 2196 2294 w
(by) 2509 2294 w
(the) 2647 2294 w
(device) 2809 2294 w
(driver.) 3122 2294 w
10 /Courier f
(; lc '#S') 786 2464 w
(sdC0) 786 2574 w
(sdC1) 1266 2574 w
(sdD0) 1746 2574 w
(sdctl) 2226 2574 w
11 /Times-Roman f
(Each) 566 2790 w
(such) 823 2790 w
(file) 1063 2790 w
(\(but) 1248 2790 w
(for) 1464 2790 w
11 /Courier f
(sdctl) 1630 2790 w
11 /Times-Roman f
(\)) 1960 2790 w
(is) 2035 2790 w
(a) 2148 2790 w
(directory) 2235 2790 w
(that) 2669 2790 w
(represents) 2873 2790 w
(a) 3355 2790 w
(disk,) 3442 2790 w
(or) 3693 2790 w
(perhaps) 3823 2790 w
(a) 4203 2790 w
(CD) 566 2910 w
(or) 762 2910 w
(DVD) 895 2910 w
(reader) 1174 2910 w
(or) 1487 2910 w
(writer.) 1620 2910 w
(The) 1951 2910 w
(file) 2163 2910 w
(name) 2351 2910 w
(for) 2630 2910 w
(each) 2799 2910 w
(device) 3040 2910 w
(is) 3367 2910 w
(similar) 3483 2910 w
(to) 3831 2910 w
11 /Courier f
(sdC0) 3959 2910 w
11 /Times-Roman f
(,) 4223 2910 w
(where) 566 3030 w
(the) 865 3030 w
11 /Courier f
(C0) 1032 3030 w
11 /Times-Roman f
(names) 1197 3030 w
(the) 1510 3030 w
(particular) 1677 3030 w
(hardware) 2130 3030 w
(device.) 2569 3030 w
(In) 2916 3030 w
(this) 3041 3030 w
(case,) 3235 3030 w
(it) 3484 3030 w
(is) 3580 3030 w
(the) 3688 3030 w
(first) 3856 3030 w
(disk) 4067 3030 w
(\() 566 3150 w
11 /Courier f
(0) 602 3150 w
11 /Times-Roman f
(\)) 668 3150 w
(in) 743 3150 w
(the) 868 3150 w
(first) 1041 3150 w
(controller) 1257 3150 w
(board) 1722 3150 w
(\() 2010 3150 w
11 /Courier f
(C) 2046 3150 w
11 /Times-Roman f
(\).) 2112 3150 w
(The) 2243 3150 w
(tree) 2452 3150 w
(from) 2654 3150 w
11 /Courier f
(#S) 2906 3150 w
11 /Times-Roman f
(is) 3077 3150 w
(bound) 3190 3150 w
(at) 3503 3150 w
11 /Courier f
(/dev) 3620 3150 w
11 /Times-Roman f
(,) 3884 3150 w
(so) 3950 3150 w
(that) 4086 3150 w
11 /Courier f
(/dev/sdC0) 566 3270 w
11 /Times-Roman f
(is) 1188 3270 w
(the) 1290 3270 w
(conventional) 1452 3270 w
(name) 2047 3270 w
(for) 2312 3270 w
11 /Courier f
(#S/sdC0) 2467 3270 w
11 /Times-Roman f
(.) 2929 3270 w
(Each) 816 3426 w
(directory) 1067 3426 w
(for) 1495 3426 w
(a) 1655 3426 w
(disk) 1736 3426 w
(contains) 1953 3426 w
(several) 2352 3426 w
(files.) 2694 3426 w
(At) 2973 3426 w
(the) 3117 3426 w
(terminal) 3285 3426 w
(we) 3685 3426 w
(are) 3846 3426 w
(using) 4012 3426 w
(now,) 566 3546 w
11 /Courier f
(sdD0) 811 3546 w
11 /Times-Roman f
(is) 1103 3546 w
(a) 1205 3546 w
(CD) 1281 3546 w
(reader.) 1462 3546 w
(These) 1789 3546 w
(are) 2078 3546 w
(the) 2238 3546 w
(files) 2400 3546 w
(used) 2617 3546 w
(as) 2846 3546 w
(its) 2965 3546 w
(interface.) 3098 3546 w
10 /Courier f
(; lc /dev/sdD0) 786 3716 w
(ctl) 786 3826 w
(data) 1266 3826 w
(raw) 1746 3826 w
11 /Times-Roman f
(Reading) 566 4042 w
(the) 960 4042 w
(control) 1122 4042 w
(file) 1461 4042 w
(reports) 1635 4042 w
(some) 1967 4042 w
(information) 2227 4042 w
(about) 2774 4042 w
(the) 3046 4042 w
(device,) 3208 4042 w
10 /Courier f
(; cat /dev/sdD0/ctl) 786 4212 w
(inquiry NECVMWarVMware IDE CDR101.00) 786 4322 w
(config 85C4 capabilities 0F00 dma 00550004 dmactl 00550004) 786 4432 w
(part data 0 54656) 786 4542 w
11 /Times-Roman f
(The) 566 4758 w
(line) 777 4758 w
(starting) 983 4758 w
(with) 1354 4758 w
11 /Courier f
(inquiry) 1592 4758 w
11 /Times-Roman f
(describes) 2096 4758 w
(the) 2545 4758 w
(disk.) 2721 4758 w
(It) 3003 4758 w
(seems) 3112 4758 w
(to) 3422 4758 w
(be) 3550 4758 w
(a) 3695 4758 w
(CD) 3785 4758 w
(reader) 3980 4758 w
(\() 566 4878 w
11 /Courier f
(CDR) 602 4878 w
11 /Times-Roman f
(\)) 800 4878 w
(plugged) 865 4878 w
(to) 1248 4878 w
(an) 1363 4878 w
(IDE) 1495 4878 w
(controller) 1705 4878 w
(board.) 2159 4878 w
(Here,) 2464 4878 w
11 /Courier f
(NECVMWarVMware) 2731 4878 w
11 /Times-Roman f
(is) 3683 4878 w
(the) 3785 4878 w
(vendor) 3947 4878 w
(name) 566 4998 w
(for) 831 4998 w
(the) 986 4998 w
(disk,) 1148 4998 w
(which) 1388 4998 w
(is) 1684 4998 w
(funny) 1786 4998 w
(for) 2070 4998 w
(this) 2225 4998 w
(one.) 2413 4998 w
(The) 816 5154 w
(line) 1019 5154 w
(starting) 1217 5154 w
(with) 1580 5154 w
11 /Courier f
(config) 1809 5154 w
11 /Times-Roman f
(describes) 2239 5154 w
(some) 2680 5154 w
(capabilities) 2946 5154 w
(for) 3480 5154 w
(the) 3641 5154 w
(device.) 3809 5154 w
(It) 4184 5154 w
(seems) 566 5274 w
(that) 864 5274 w
(the) 1059 5274 w
(device) 1223 5274 w
(knows) 1538 5274 w
(how) 1855 5274 w
(to) 2074 5274 w
(do) 2190 5274 w
(DMA,) 2330 5274 w
(to) 2644 5274 w
(transfer) 2760 5274 w
(bytes) 3123 5274 w
(from) 3384 5274 w
(the) 3626 5274 w
(disk) 3789 5274 w
(to) 4002 5274 w
(the) 4117 5274 w
(memory) 566 5394 w
(of) 969 5394 w
(the) 1098 5394 w
(machine) 1270 5394 w
(without) 1679 5394 w
(direct) 2054 5394 w
(intervention) 2341 5394 w
(from) 2910 5394 w
(the) 3161 5394 w
(processor.) 3333 5394 w
(We) 3818 5394 w
(know) 4007 5394 w
(this) 566 5514 w
(because) 756 5514 w
(the) 1131 5514 w
(number) 1294 5514 w
(right) 1658 5514 w
(after) 1895 5514 w
11 /Courier f
(dmactl) 2123 5514 w
11 /Times-Roman f
(is) 2548 5514 w
(not) 2651 5514 w
(zero.) 2821 5514 w
(We) 3065 5514 w
(can) 3245 5514 w
(use) 3425 5514 w
(the) 3600 5514 w
11 /Courier f
(ctl) 3763 5514 w
11 /Times-Roman f
(file) 3990 5514 w
(to) 4165 5514 w
(ask) 566 5634 w
(the) 740 5634 w
(device) 902 5634 w
(driver) 1215 5634 w
(not) 1504 5634 w
(to) 1673 5634 w
(use) 1787 5634 w
(DMA) 1961 5634 w
(for) 2245 5634 w
(this) 2400 5634 w
(device) 2588 5634 w
8 /Courier f
(; echo dma off >/dev/sdD0/ctl) 786 5804 w
(; grep dma /dev/sdD0/ctl) 786 5914 w
(config 85C4 capabilities 0F00 dma 00550004 dmactl 00000000) 786 6024 w
11 /Times-Roman f
(And) 566 6240 w
(this) 785 6240 w
(time) 975 6240 w
(we) 1201 6240 w
(see) 1358 6240 w
11 /Courier f
(00000000) 1528 6240 w
11 /Times-Roman f
(and) 2087 6240 w
(not) 2276 6240 w
11 /Courier f
(00550004) 2448 6240 w
11 /Times-Roman f
(as) 3007 6240 w
(the) 3129 6240 w
(value) 3294 6240 w
(for) 3562 6240 w
(the) 3720 6240 w
(attribute) 3885 6240 w
cleartomark
showpage
saveobj restore
%%EndPage: 1 1
%%Page: 2 2
/saveobj save def
mark
2 pagesetup
11 /Times-Roman f
(\255 2 \255) 2317 413 w
11 /Courier f
(dmactl) 566 686 w
11 /Times-Roman f
(.) 962 686 w
(It) 1050 686 w
(does) 1149 686 w
(not) 1382 686 w
(really) 1555 686 w
(matter) 1836 686 w
(what) 2148 686 w
(this) 2393 686 w
(is,) 2585 686 w
(but) 2719 686 w
(it) 2891 686 w
(matters) 2984 686 w
(that) 3338 686 w
(it) 3534 686 w
(is) 3627 686 w
(zero,) 3732 686 w
(mean\255) 3978 686 w
(ing) 566 806 w
(that) 738 806 w
(there) 935 806 w
(would) 1185 806 w
(be) 1492 806 w
(no) 1627 806 w
(further) 1769 806 w
(DMA) 2098 806 w
(for) 2386 806 w
(this) 2545 806 w
(disk.) 2737 806 w
(This) 2981 806 w
(can) 3209 806 w
(slow) 3392 806 w
(down) 3632 806 w
(the) 3908 806 w
(sys\255) 4074 806 w
(tem,) 566 926 w
(and) 787 926 w
(it) 973 926 w
(is) 1063 926 w
(better) 1165 926 w
(to) 1442 926 w
(enable) 1556 926 w
(it) 1869 926 w
(again.) 1959 926 w
8 /Courier f
(; echo dma on >/dev/sdD0/ctl) 786 1096 w
(; grep dma /dev/sdD0/ctl) 786 1206 w
(config 85C4 capabilities 0F00 dma 00550004 dmactl 00550004) 786 1316 w
11 /Times-Roman f
(Lines) 566 1532 w
(starting) 838 1532 w
(with) 1196 1532 w
11 /Courier f
(part) 1420 1532 w
11 /Times-Roman f
(,) 1684 1532 w
(read) 1740 1532 w
(from) 1955 1532 w
(the) 2196 1532 w
11 /Courier f
(ctl) 2358 1532 w
11 /Times-Roman f
(file,) 2584 1532 w
(deserve) 2786 1532 w
(further) 3147 1532 w
(explanation.) 3472 1532 w
(The) 816 1688 w
(abstraction) 1014 1688 w
(provided) 1523 1688 w
(by) 1941 1688 w
(the) 2079 1688 w
(hardware) 2242 1688 w
(for) 2676 1688 w
(a) 2832 1688 w
(disk) 2909 1688 w
(is) 3122 1688 w
(usually) 3225 1688 w
(an) 3572 1688 w
(array) 3704 1688 w
(of) 3956 1688 w
(sec\255) 4076 1688 w
(tors.) 566 1808 w
(Each) 826 1808 w
(sector) 1083 1808 w
(is) 1383 1808 w
(typically) 1496 1808 w
(an) 1920 1808 w
(array) 2062 1808 w
(of) 2324 1808 w
(512) 2454 1808 w
(bytes.) 2658 1808 w
(The) 2957 1808 w
(disk) 3166 1808 w
(knows) 3388 1808 w
(how) 3713 1808 w
(to) 3940 1808 w
(read) 4064 1808 w
(from) 566 1928 w
(disk) 807 1928 w
(into) 1019 1928 w
(memory) 1219 1928 w
(a) 1613 1928 w
(given) 1689 1928 w
(sector,) 1961 1928 w
(and) 2278 1928 w
(how) 2464 1928 w
(to) 2681 1928 w
(write) 2795 1928 w
(it.) 3048 1928 w
(The) 816 2084 w
(last) 1028 2084 w
(line) 1223 2084 w
(read) 1430 2084 w
(from) 1659 2084 w
(the) 1915 2084 w
11 /Courier f
(ctl) 2092 2084 w
11 /Times-Roman f
(file) 2333 2084 w
(describes) 2522 2084 w
(a) 2972 2084 w
(part) 3063 2084 w
(of) 3276 2084 w
(the) 3410 2084 w
(disk,) 3587 2084 w
(that) 3842 2084 w
(goes) 4050 2084 w
(from) 566 2204 w
(sector) 812 2204 w
(number) 1106 2204 w
(0) 1474 2204 w
(to) 1561 2204 w
(sector) 1679 2204 w
(number) 1972 2204 w
(54656.) 2339 2204 w
(Such) 2702 2204 w
(part) 2954 2204 w
(has) 3156 2204 w
(the) 3334 2204 w
(name) 3500 2204 w
11 /Courier f
(data) 3769 2204 w
11 /Times-Roman f
(,) 4033 2204 w
(and) 4093 2204 w
(represents) 566 2324 w
(the) 1077 2324 w
(actual) 1279 2324 w
(data) 1608 2324 w
(on) 1858 2324 w
(the) 2036 2324 w
(disk.) 2238 2324 w
(Did) 2519 2324 w
(you) 2753 2324 w
(notice) 2987 2324 w
(that) 3324 2324 w
(there) 3558 2324 w
(is) 3845 2324 w
(a) 3988 2324 w
(file) 4105 2324 w
11 /Courier f
(/dev/sdD0/data) 566 2444 w
11 /Times-Roman f
(?) 1490 2444 w
(That) 1596 2444 w
(is) 1826 2444 w
(the) 1929 2444 w
(abstraction) 2092 2444 w
(for) 2602 2444 w
(using) 2758 2444 w
(this) 3026 2444 w
(disk) 3215 2444 w
(in) 3428 2444 w
(Plan) 3543 2444 w
(9.) 3768 2444 w
(This) 3880 2444 w
(file) 4105 2444 w
11 /Times-Italic f
(is) 566 2564 w
11 /Times-Roman f
(the) 675 2564 w
(data) 844 2564 w
(in) 1061 2564 w
(the) 1182 2564 w
(disk.) 1351 2564 w
(Reading) 1598 2564 w
(the) 1999 2564 w
(first) 2168 2564 w
(512) 2380 2564 w
(bytes) 2580 2564 w
(from) 2847 2564 w
(this) 3095 2564 w
(file) 3291 2564 w
(would) 3473 2564 w
(be) 3784 2564 w
(reading) 3923 2564 w
(the) 566 2684 w
(first) 737 2684 w
(sector) 951 2684 w
(from) 1249 2684 w
(the) 1499 2684 w
(disk's) 1669 2684 w
(data.) 1968 2684 w
(To) 2242 2684 w
(read) 2400 2684 w
(or) 2623 2684 w
(write) 2750 2684 w
(a) 3011 2684 w
(particular) 3095 2684 w
(sector,) 3550 2684 w
(any) 3875 2684 w
(pro\255) 4069 2684 w
(gram) 566 2804 w
(can) 828 2804 w
(use) 1016 2804 w
11 /Courier f
(seek) 1199 2804 w
11 /Times-Roman f
(to) 1500 2804 w
(set) 1623 2804 w
(the) 1782 2804 w
(file) 1953 2804 w
(position) 2136 2804 w
(at) 2530 2804 w
(the) 2647 2804 w
(appropriate) 2819 2804 w
(offset,) 3355 2804 w
(and) 3670 2804 w
(then) 3866 2804 w
(call) 4093 2804 w
11 /Courier f
(read) 566 2924 w
11 /Times-Roman f
(or) 869 2924 w
11 /Courier f
(write) 999 2924 w
11 /Times-Roman f
(.) 1329 2924 w
(The) 1424 2924 w
(device) 1633 2924 w
(driver) 1956 2924 w
(would) 2255 2924 w
(understand) 2568 2924 w
(that) 3087 2924 w
(the) 3290 2924 w
(program) 3462 2924 w
(wants) 3871 2924 w
(to) 4165 2924 w
(read) 566 3044 w
(or) 781 3044 w
(write) 900 3044 w
(from) 1153 3044 w
(the) 1394 3044 w
(disk,) 1556 3044 w
(and) 1796 3044 w
(would) 1982 3044 w
(do) 2285 3044 w
(just) 2423 3044 w
(that.) 2611 3044 w
(In) 816 3200 w
(case) 937 3200 w
(you) 1154 3200 w
(wonder,) 1349 3200 w
(the) 1735 3200 w
(file) 1899 3200 w
11 /Courier f
(raw) 2075 3200 w
11 /Times-Roman f
(is) 2303 3200 w
(used) 2407 3200 w
(to) 2638 3200 w
(execute) 2754 3200 w
(commands) 3117 3200 w
(understood) 3623 3200 w
(by) 4141 3200 w
(the) 566 3320 w
(device) 734 3320 w
(that) 1053 3320 w
(have) 1252 3320 w
(a) 1492 3320 w
(very) 1574 3320 w
(low\255level) 1802 3320 w
(of) 2250 3320 w
(abstraction,) 2375 3320 w
(as) 2918 3320 w
(a) 3043 3320 w
(back\255door) 3125 3320 w
(to) 3601 3320 w
(provide) 3720 3320 w
(raw) 4088 3320 w
(access) 566 3440 w
(to) 872 3440 w
(the) 986 3440 w
(device,) 1148 3440 w
(without) 1489 3440 w
(the) 1854 3440 w
(cooking) 2016 3440 w
(provided) 2398 3440 w
(by) 2816 3440 w
(the) 2954 3440 w
(abstraction.) 3116 3440 w
(Disks) 816 3596 w
(may) 1114 3596 w
(contain) 1350 3596 w
(multiple) 1720 3596 w
(parts,) 2135 3596 w
(named) 2423 3596 w
11 /Times-Bold f
(partitions) 2762 3596 w
11 /Times-Roman f
(.) 3221 3596 w
(A) 3325 3596 w
(partition) 3452 3596 w
(is) 3873 3596 w
(just) 3995 3596 w
(a) 4203 3596 w
(contiguous) 566 3716 w
(portion) 1079 3716 w
(of) 1427 3716 w
(the) 1548 3716 w
(disk) 1712 3716 w
(kept) 1926 3716 w
(separate) 2145 3716 w
(for) 2532 3716 w
(administrative) 2689 3716 w
(purposes.) 3348 3716 w
(For) 3796 3716 w
(exam\255) 3978 3716 w
(ple,) 566 3836 w
(most) 770 3836 w
(machines) 1027 3836 w
(with) 1483 3836 w
(Windows) 1721 3836 w
(come) 2184 3836 w
(preinstalled) 2463 3836 w
(with) 3017 3836 w
(two) 3255 3836 w
(partitions) 3462 3836 w
(in) 3921 3836 w
(your) 4050 3836 w
(hard) 566 3956 w
(disk.) 795 3956 w
(One) 1042 3956 w
(of) 1259 3956 w
(them) 1385 3956 w
(corresponds) 1640 3956 w
(to) 2204 3956 w
(the) 2325 3956 w
11 /Courier f
(C:) 2494 3956 w
11 /Times-Roman f
(unit,) 2661 3956 w
(and) 2896 3956 w
(contains) 3089 3956 w
(system) 3490 3956 w
(files.) 3830 3956 w
(The) 4081 3956 w
(other) 566 4076 w
(corresponds) 827 4076 w
(to) 1392 4076 w
(the) 1514 4076 w
11 /Courier f
(D:) 1684 4076 w
11 /Times-Roman f
(unit,) 1852 4076 w
(and) 2088 4076 w
(contains) 2282 4076 w
(user) 2685 4076 w
(files.) 2904 4076 w
(Both) 3158 4076 w
(ones) 3410 4076 w
(are) 3648 4076 w
(just) 3817 4076 w
(parti\255) 4014 4076 w
(tions) 566 4196 w
(in) 809 4196 w
(the) 923 4196 w
(hard) 1085 4196 w
(disk.) 1307 4196 w
(Reading) 816 4352 w
(the) 1226 4352 w
11 /Courier f
(ctl) 1404 4352 w
11 /Times-Roman f
(file) 1646 4352 w
(for) 1836 4352 w
(a) 2007 4352 w
(disk) 2099 4352 w
(reports) 2327 4352 w
(all) 2675 4352 w
(the) 2829 4352 w
(list) 3007 4352 w
(of) 3187 4352 w
(partitions,) 3322 4352 w
(with) 3810 4352 w
(their) 4050 4352 w
(names,) 566 4472 w
(start) 902 4472 w
(sector,) 1119 4472 w
(and) 1436 4472 w
(end) 1622 4472 w
(sector.) 1808 4472 w
(This) 2125 4472 w
(is) 2349 4472 w
(the) 2451 4472 w
(one) 2613 4472 w
(for) 2799 4472 w
(our) 2954 4472 w
(hard) 3128 4472 w
(disk.) 3350 4472 w
9 /Courier f
(; cat /dev/sdC0/ctl) 786 4642 w
(inquiry VMware Virtual IDE Hard Drive) 786 4752 w
(config 427A capabilities 2F00 dma 00550004) 786 4862 w
(dmactl 00550004 rwm 16 rwmctl 0) 1266 4972 w
(geometry 16777216 512 17475 15 63) 786 5082 w
(part data 0 16777216) 786 5192 w
(part plan9 63 16771860) 786 5302 w
(part 9fat 63 204863) 786 5412 w
(part fs 204863 13626132) 786 5522 w
(part swap 13626132 14674708) 786 5632 w
(part cache 14674708 16771860) 786 5742 w
11 /Times-Roman f
(Although) 566 5958 w
(we) 1010 5958 w
(might) 1165 5958 w
(have) 1451 5958 w
(listed) 1685 5958 w
(them,) 1952 5958 w
(perhaps) 2228 5958 w
(just) 2596 5958 w
(to) 2784 5958 w
(see) 2898 5958 w
(the) 3065 5958 w
(file) 3227 5958 w
(sizes.) 3401 5958 w
cleartomark
showpage
saveobj restore
%%EndPage: 2 2
%%Page: 3 3
/saveobj save def
mark
3 pagesetup
11 /Times-Roman f
(\255 3 \255) 2317 413 w
8 /Courier f
(; ls \255l /dev/sdC0) 786 676 w
(\255\255rw\255r\255\255\255\255\255 S 0 nemo nemo) 786 786 w
(104857600 May 23 17:44 /dev/sdC0/9fat) 2082 786 w
(\255\255rw\255r\255\255\255\255\255 S 0 nemo nemo 1073741824 May 23 17:44 /dev/sdC0/cache) 786 896 w
(\255\255rw\255r\255\255\255\255\255 S 0 nemo nemo) 786 1006 w
(0 May 23 17:44 /dev/sdC0/ctl) 2466 1006 w
(\255\255rw\255r\255\255\255\255\255 S 0 nemo nemo 8589934592 May 23 17:44 /dev/sdC0/data) 786 1116 w
(\255\255rw\255r\255\255\255\255\255 S 0 nemo nemo 6871689728 May 23 17:44 /dev/sdC0/fs) 786 1226 w
(\255\255rw\255r\255\255\255\255\255 S 0 nemo nemo 8587160064 May 23 17:44 /dev/sdC0/plan9) 786 1336 w
(\255lrw\255\255\255\255\255\255\255 S 0 nemo nemo) 786 1446 w
(0 May 23 17:44 /dev/sdC0/raw) 2466 1446 w
(\255\255rw\255r\255\255\255\255\255 S 0 nemo nemo) 786 1556 w
(536870912 May 23 17:44 /dev/sdC0/swap) 2082 1556 w
11 /Times-Roman f
(For) 566 1772 w
(each) 768 1772 w
(file) 1016 1772 w
(representing) 1211 1772 w
(a) 1801 1772 w
(partition,) 1898 1772 w
(the) 2348 1772 w
(file) 2532 1772 w
(size) 2728 1772 w
(reports) 2948 1772 w
(the) 3302 1772 w
(partition) 3486 1772 w
(size) 3909 1772 w
(\(in) 4129 1772 w
(bytes\),) 566 1892 w
(as) 908 1892 w
(could) 1045 1892 w
(be) 1335 1892 w
(expected.) 1484 1892 w
(This) 1974 1892 w
(disk) 2216 1892 w
(has) 2446 1892 w
(just) 2638 1892 w
(8) 2844 1892 w
(Gbytes) 2945 1892 w
(of) 3302 1892 w
(data) 3438 1892 w
(\(8589934592) 3665 1892 w
(bytes\).) 566 2012 w
(That) 892 2012 w
(would) 1123 2012 w
(be) 1428 2012 w
(the) 1561 2012 w
11 /Courier f
(data) 1725 2012 w
11 /Times-Roman f
(file.) 2019 2012 w
(Some) 2223 2012 w
(partitions) 2504 2012 w
(have) 2950 2012 w
(been) 3186 2012 w
(made) 3422 2012 w
(for) 3690 2012 w
(this) 3848 2012 w
(disk,) 4039 2012 w
(to) 566 2132 w
(name) 701 2132 w
(different) 987 2132 w
(parts) 1412 2132 w
(of) 1674 2132 w
(it) 1814 2132 w
(and) 1925 2132 w
(use) 2131 2132 w
(them) 2325 2132 w
(separatedly.) 2593 2132 w
(For) 3167 2132 w
(example,) 3368 2132 w
(there) 3815 2132 w
(is) 4081 2132 w
(a) 4203 2132 w
11 /Courier f
(9fat) 566 2252 w
11 /Times-Roman f
(partition) 872 2252 w
(going) 1287 2252 w
(from) 1580 2252 w
(sector) 1835 2252 w
(63) 2138 2252 w
(\(included\)) 2290 2252 w
(to) 2783 2252 w
(sector) 2912 2252 w
(204863) 3216 2252 w
(\(not) 3589 2252 w
(included\).) 3809 2252 w
(And) 566 2372 w
(then) 793 2372 w
(a) 1020 2372 w
11 /Courier f
(fs) 1106 2372 w
11 /Times-Roman f
(partition,) 1276 2372 w
(going) 1714 2372 w
(from) 2002 2372 w
(sector) 2252 2372 w
(204863) 2550 2372 w
(to) 2917 2372 w
(sector) 3040 2372 w
(13626132.) 3338 2372 w
(And) 3843 2372 w
(sev\255) 4069 2372 w
(eral) 566 2492 w
(other) 757 2492 w
(ones.) 1010 2492 w
(For) 816 2648 w
(us,) 1000 2648 w
11 /Courier f
(/dev/sdC0/9fat) 1157 2648 w
11 /Times-Roman f
(is) 2112 2648 w
(just) 2217 2648 w
(a) 2408 2648 w
(like) 2487 2648 w
(a) 2683 2648 w
(little) 2763 2648 w
(disk) 2998 2648 w
(\(that) 3214 2648 w
(is) 3447 2648 w
(what) 3553 2648 w
(a) 3798 2648 w
(partition) 3878 2648 w
(is) 566 2768 w
(for\),) 685 2768 w
(only) 921 2768 w
(that) 1162 2768 w
(it) 1372 2768 w
(lives) 1478 2768 w
(inside) 1730 2768 w
11 /Courier f
(/dev/sdC0/data) 2037 2768 w
11 /Times-Roman f
(.) 2961 2768 w
(Also,) 3061 2768 w
11 /Courier f
(/dev/sdC0/fs) 3341 2768 w
11 /Times-Roman f
(is) 4177 2768 w
(another) 566 2888 w
(little) 926 2888 w
(disk,) 1161 2888 w
(also) 1405 2888 w
(living) 1614 2888 w
(inside) 1904 2888 w
11 /Courier f
(/dev/sdC0/data) 2199 2888 w
11 /Times-Roman f
(.) 3123 2888 w
(Indeed,) 3211 2888 w
(both) 3568 2888 w
11 /Courier f
(9fat) 3796 2888 w
11 /Times-Roman f
(and) 4093 2888 w
11 /Courier f
(fs) 566 3008 w
11 /Times-Roman f
(live) 736 3008 w
(inside) 939 3008 w
(a) 1240 3008 w
(partition) 1326 3008 w
(named) 1737 3008 w
11 /Courier f
(plan9) 2067 3008 w
11 /Times-Roman f
(,) 2397 3008 w
(as) 2463 3008 w
(you) 2592 3008 w
(may) 2795 3008 w
(see) 3022 3008 w
(by) 3199 3008 w
(looking) 3347 3008 w
(where) 3722 3008 w
(these) 4026 3008 w
(partitions) 566 3128 w
(start) 1010 3128 w
(and) 1227 3128 w
(end.) 1413 3128 w
(The) 816 3284 w
(convention) 1022 3284 w
(in) 1546 3284 w
(Plan) 1668 3284 w
(9) 1900 3284 w
(is) 1991 3284 w
(to) 2101 3284 w
(make) 2224 3284 w
(a) 2498 3284 w
(partition,) 2583 3284 w
(named) 3021 3284 w
11 /Courier f
(plan9) 3350 3284 w
11 /Times-Roman f
(,) 3680 3284 w
(in) 3745 3284 w
(the) 3868 3284 w
(disk.) 4039 3284 w
(This) 566 3404 w
(partition) 801 3404 w
(is) 1213 3404 w
(known) 1326 3404 w
(to) 1664 3404 w
(other) 1789 3404 w
(operating) 2053 3404 w
(systems,) 2506 3404 w
(because) 2922 3404 w
(it) 3306 3404 w
(is) 3407 3404 w
(declared) 3519 3404 w
(using) 3926 3404 w
(a) 4203 3404 w
(partition) 566 3524 w
(table) 980 3524 w
(\(kept) 1234 3524 w
(in) 1500 3524 w
(the) 1627 3524 w
(disk\)) 1802 3524 w
(following) 2063 3524 w
(a) 2532 3524 w
(particular) 2621 3524 w
(convention) 3081 3524 w
(that) 3610 3524 w
(most) 3817 3524 w
(sys\255) 4074 3524 w
(tems) 566 3644 w
(follow.) 805 3644 w
(Within) 1150 3644 w
(this) 1486 3644 w
(partition,) 1676 3644 w
(Plan) 2107 3644 w
(9) 2333 3644 w
(maintains) 2418 3644 w
(its) 2876 3644 w
(own) 3011 3644 w
(partitions,) 3230 3644 w
(by) 3704 3644 w
(declaring) 3844 3644 w
(them) 566 3764 w
(in) 821 3764 w
(another) 942 3764 w
(table) 1305 3764 w
(known) 1553 3764 w
(to) 1887 3764 w
(the) 2008 3764 w
(storage) 2177 3764 w
(device) 2528 3764 w
(driver) 2848 3764 w
(\(kept) 3144 3764 w
(in) 3405 3764 w
(disk,) 3527 3764 w
(of) 3775 3764 w
(course\).) 3902 3764 w
(This) 566 3884 w
(is) 798 3884 w
(done) 908 3884 w
(so) 1157 3884 w
(because) 1291 3884 w
(many) 1671 3884 w
(disks) 1950 3884 w
(are) 2212 3884 w
(only) 2379 3884 w
(able) 2610 3884 w
(to) 2827 3884 w
(support) 2948 3884 w
(4) 3313 3884 w
(\(so) 3403 3884 w
(called\)) 3572 3884 w
(primary) 3904 3884 w
(partitions.) 566 4004 w
(How) 816 4160 w
(can) 1069 4160 w
(we) 1261 4160 w
(create) 1429 4160 w
(a) 1729 4160 w
(partition?) 1818 4160 w
(By) 2280 4160 w
(filling) 2450 4160 w
(an) 2761 4160 w
(entry) 2905 4160 w
(in) 3171 4160 w
(the) 3298 4160 w
(partition) 3473 4160 w
(name) 3887 4160 w
(to) 4165 4160 w
(declare) 566 4280 w
(it,) 924 4280 w
(including) 1058 4280 w
(the) 1518 4280 w
(information) 1696 4280 w
(about) 2258 4280 w
(where) 2545 4280 w
(does) 2854 4280 w
(it) 3098 4280 w
(start) 3203 4280 w
(and) 3435 4280 w
(where) 3636 4280 w
(does) 3945 4280 w
(it) 4189 4280 w
(end.) 566 4400 w
(The) 784 4400 w
(command) 986 4400 w
11 /Courier f
(fdisk) 1451 4400 w
11 /Times-Roman f
(can) 1813 4400 w
(be) 1997 4400 w
(used) 2133 4400 w
(to) 2367 4400 w
(modify) 2486 4400 w
(the) 2837 4400 w
(partition) 3004 4400 w
(table) 3410 4400 w
(for) 3656 4400 w
(the) 3816 4400 w
(whole) 3983 4400 w
(disk.) 566 4520 w
(The) 823 4520 w
(command) 1038 4520 w
11 /Courier f
(prep) 1516 4520 w
11 /Times-Roman f
(can) 1825 4520 w
(be) 2021 4520 w
(used) 2169 4520 w
(to) 2415 4520 w
(modify) 2546 4520 w
(the) 2908 4520 w
(one) 3086 4520 w
(used) 3288 4520 w
(by) 3533 4520 w
(Plan) 3687 4520 w
(9) 3927 4520 w
(\(kept) 4026 4520 w
(within) 566 4640 w
(the) 876 4640 w
(the) 1038 4640 w
(Plan) 1200 4640 w
(9) 1424 4640 w
(partition) 1507 4640 w
(in) 1908 4640 w
(the) 2022 4640 w
(disk\).) 2184 4640 w
(In) 816 4796 w
(any) 938 4796 w
(case,) 1127 4796 w
(we) 1374 4796 w
(can) 1533 4796 w
(add) 1716 4796 w
(a) 1906 4796 w
(partition) 1986 4796 w
(to) 2391 4796 w
(our) 2509 4796 w
(disk) 2687 4796 w
(by) 2903 4796 w
(writing) 3045 4796 w
(a) 3395 4796 w
(control) 3475 4796 w
(command) 3818 4796 w
(to) 566 4916 w
(the) 690 4916 w
(disk's) 862 4916 w
11 /Courier f
(ctl) 1163 4916 w
11 /Times-Roman f
(file.) 1399 4916 w
(For) 1611 4916 w
(example,) 1802 4916 w
(this) 2239 4916 w
(creates) 2437 4916 w
(a) 2777 4916 w
(partition) 2863 4916 w
(named) 3274 4916 w
11 /Courier f
(check) 3603 4916 w
11 /Times-Roman f
(on) 3970 4916 w
(the) 4117 4916 w
11 /Courier f
(sdC1) 566 5036 w
11 /Times-Roman f
(disk.) 858 5036 w
10 /Courier f
(; echo part check 63 2001 >/dev/sdC1/ctl) 786 5206 w
(; grep check /dev/sdC1/ctl) 786 5316 w
(part check 63 2001) 786 5426 w
11 /Times-Roman f
(To) 566 5642 w
(remove) 716 5642 w
(it,) 1072 5642 w
(we) 1190 5642 w
(may) 1345 5642 w
(write) 1562 5642 w
(a) 1815 5642 w
11 /Courier f
(delpart) 1891 5642 w
11 /Times-Roman f
(command) 2381 5642 w
(to) 2842 5642 w
(the) 2956 5642 w
(disk's) 3118 5642 w
(control) 3409 5642 w
(file.) 3748 5642 w
10 /Courier f
(; echo delpart check >/dev/sdC1/ctl) 786 5812 w
11 /Times-Roman f
(In) 566 6028 w
(general,) 696 6028 w
(it) 1084 6028 w
(is) 1185 6028 w
(wiser) 1298 6028 w
(to) 1574 6028 w
(use) 1699 6028 w
(the) 1884 6028 w
(programs) 2057 6028 w
11 /Courier f
(fdisk) 2510 6028 w
11 /Times-Roman f
(and) 2880 6028 w
11 /Courier f
(prep) 3078 6028 w
11 /Times-Roman f
(to) 3382 6028 w
(create) 3508 6028 w
(partitions,) 3807 6028 w
(because) 566 6148 w
(they) 946 6148 w
(update) 1170 6148 w
(the) 1497 6148 w
(tables) 1665 6148 w
(besides) 1955 6148 w
(informing) 2312 6148 w
(the) 2786 6148 w
(storage) 2954 6148 w
(device) 3304 6148 w
(about) 3623 6148 w
(the) 3901 6148 w
(new) 4069 6148 w
(partitions.) 566 6268 w
(We) 1046 6268 w
(are) 1233 6268 w
(going) 1401 6268 w
(to) 1688 6268 w
(create) 1810 6268 w
(some) 2105 6268 w
(partition) 2373 6268 w
(for) 2782 6268 w
(a) 2945 6268 w
(new) 3029 6268 w
(disk.) 3248 6268 w
(As) 3497 6268 w
(you) 3656 6268 w
(may) 3858 6268 w
(see,) 4084 6268 w
cleartomark
showpage
saveobj restore
%%EndPage: 3 3
%%Page: 4 4
/saveobj save def
mark
4 pagesetup
11 /Times-Roman f
(\255 4 \255) 2317 413 w
(we) 566 686 w
(tell) 727 686 w
11 /Courier f
(fdisk) 902 686 w
11 /Times-Roman f
(that) 1266 686 w
(the) 1465 686 w
(disk) 1633 686 w
(to) 1851 686 w
(use) 1971 686 w
(is) 2151 686 w
11 /Courier f
(/dev/sdC1/data) 2259 686 w
11 /Times-Roman f
(.) 3183 686 w
(That) 3273 686 w
(is) 3508 686 w
(just) 3616 686 w
(a) 3810 686 w
(file.) 3891 686 w
(For) 4098 686 w
11 /Courier f
(fdisk) 566 806 w
11 /Times-Roman f
(,) 896 806 w
(that) 952 806 w
(would) 1145 806 w
(be) 1448 806 w
(the) 1579 806 w
(disk.) 1741 806 w
9 /Courier f
(; disk/fdisk /dev/sdC1/data) 786 976 w
(cylinder = 8225280 bytes) 786 1086 w
(empty) 948 1196 w
(0 522) 1434 1196 w
(\(522 cylinders, 3.99 GB\)) 1920 1196 w
(>>>) 786 1306 w
11 /Times-Roman f
(After) 566 1522 w
(running) 826 1522 w
11 /Courier f
(fdisk) 1198 1522 w
11 /Times-Roman f
(,) 1528 1522 w
(it) 1586 1522 w
(prints) 1678 1522 w
(the) 1959 1522 w
(list) 2123 1522 w
(of) 2289 1522 w
(partitions) 2410 1522 w
(found.) 2856 1522 w
(None) 3171 1522 w
(so) 3439 1522 w
(far.) 3568 1522 w
(The) 3747 1522 w
11 /Courier f
(>>>) 3948 1522 w
11 /Times-Roman f
(is) 4177 1522 w
(the) 566 1642 w
(prompt) 743 1642 w
(from) 1104 1642 w
11 /Courier f
(fdisk) 1360 1642 w
11 /Times-Roman f
(,) 1690 1642 w
(where) 1761 1642 w
(we) 2070 1642 w
(can) 2240 1642 w
(type) 2434 1642 w
(commands) 2666 1642 w
(to) 3185 1642 w
(handle) 3314 1642 w
(the) 3649 1642 w
(disk.) 3826 1642 w
(The) 4081 1642 w
(command) 566 1762 w
11 /Courier f
(a) 1027 1762 w
11 /Times-Roman f
(,) 1093 1762 w
(adds) 1149 1762 w
(a) 1378 1762 w
(new) 1454 1762 w
(partition.) 1664 1762 w
10 /Courier f
(>>> !!a p1) 786 1932 w
(start cylinder: !!0) 786 2042 w
(end [0..522] !!522) 786 2152 w
11 /Times-Roman f
(We) 566 2368 w
(added) 755 2368 w
(a) 1055 2368 w
(partition) 1142 2368 w
(called) 1554 2368 w
11 /Courier f
(p1) 1854 2368 w
11 /Times-Roman f
(occupying) 2025 2368 w
(the) 2521 2368 w
(entire) 2694 2368 w
(disk.) 2982 2368 w
(Following) 3233 2368 w
(the) 3726 2368 w
(conven\255) 3899 2368 w
(tion) 566 2488 w
(used) 768 2488 w
(for) 999 2488 w
(IDE) 1156 2488 w
(disks) 1368 2488 w
(on) 1625 2488 w
(PCs,) 1765 2488 w
(the) 2002 2488 w
(table) 2166 2488 w
(may) 2409 2488 w
(name) 2628 2488 w
(up) 2894 2488 w
(to) 3033 2488 w
(4) 3148 2488 w
(primary) 3232 2488 w
(partitions.) 3608 2488 w
(The) 4081 2488 w
(name) 566 2608 w
11 /Courier f
(p1) 831 2608 w
11 /Times-Roman f
(identifies) 991 2608 w
(this) 1428 2608 w
(partition) 1616 2608 w
(as) 2017 2608 w
(the) 2136 2608 w
(primary) 2298 2608 w
(partition) 2673 2608 w
(number) 3074 2608 w
(1.) 3437 2608 w
(Now,) 816 2764 w
(we) 1097 2764 w
(can) 1264 2764 w
(print) 1455 2764 w
(the) 1703 2764 w
(new) 1878 2764 w
(table,) 2101 2764 w
(write) 2383 2764 w
(it) 2649 2764 w
(to) 2752 2764 w
(disk) 2879 2764 w
(after) 3104 2764 w
(being) 3344 2764 w
(sure,) 3629 2764 w
(and) 3880 2764 w
(quit) 4079 2764 w
(from) 566 2884 w
(this) 807 2884 w
(program.) 995 2884 w
10 /Courier f
(>>> !!p) 786 3054 w
(') 846 3164 w
(p1) 1026 3164 w
(0 522 \(522 cylinders, 3.99 GB\) PLAN9) 1386 3164 w
(>>> !!w) 786 3274 w
(>>> !!q) 786 3384 w
11 /Times-Roman f
(And) 566 3600 w
(this) 783 3600 w
(is) 971 3600 w
(what) 1073 3600 w
(we) 1314 3600 w
(can) 1469 3600 w
(see) 1648 3600 w
(now.) 1815 3600 w
8 /Courier f
(; cat /dev/sdC1/ctl) 786 3770 w
(inquiry VMware Virtual IDE Hard Drive) 786 3880 w
(config 427A capabilities 2F00 dma 00550004 dmactl 00550004 rwm 16 rwmctl 0) 786 3990 w
(geometry 8388608 512 8322 16 63) 786 4100 w
(part data 0 8388608) 786 4210 w
(part plan9 63 8385930) 786 4320 w
(; lc /dev/sdC1) 786 4430 w
(ctl) 786 4540 w
(data) 1266 4540 w
(plan9) 1746 4540 w
(raw) 2226 4540 w
11 /Times-Roman f
(There) 566 4756 w
(is) 857 4756 w
(a) 968 4756 w
(new) 1053 4756 w
(partition,) 1272 4756 w
(a) 1710 4756 w
(new) 1795 4756 w
(file) 2014 4756 w
(at) 2198 4756 w
11 /Courier f
(/dev/sdC1) 2315 4756 w
11 /Times-Roman f
(.) 2909 4756 w
(Its) 3003 4756 w
(name) 3151 4756 w
(is) 3426 4756 w
11 /Courier f
(plan9) 3538 4756 w
11 /Times-Roman f
(because) 3906 4756 w
11 /Courier f
(fdisk) 566 4876 w
11 /Times-Roman f
(declared) 939 4876 w
(the) 1351 4876 w
(partition) 1528 4876 w
(to) 1943 4876 w
(be) 2071 4876 w
(one) 2216 4876 w
(for) 2416 4876 w
(use) 2585 4876 w
(with) 2773 4876 w
(Plan) 3011 4876 w
(9) 3249 4876 w
(\(writing) 3346 4876 w
(a) 3742 4876 w
(particular) 3832 4876 w
(integer) 566 4996 w
(value) 898 4996 w
(in) 1163 4996 w
(the) 1277 4996 w
(partition) 1439 4996 w
(entry) 1840 4996 w
(that) 2093 4996 w
(identifies) 2286 4996 w
(the) 2723 4996 w
(type) 2885 4996 w
(for) 3102 4996 w
(the) 3257 4996 w
(partition\).) 3419 4996 w
(Within) 816 5152 w
(this) 1155 5152 w
(partition) 1348 5152 w
(\(known) 1754 5152 w
(to) 2122 5152 w
(any) 2241 5152 w
(other) 2433 5152 w
(system) 2692 5152 w
(sharing) 3032 5152 w
(the) 3389 5152 w
(same) 3557 5152 w
(machine\),) 3816 5152 w
(we) 566 5272 w
(can) 721 5272 w
(create) 900 5272 w
(several) 1187 5272 w
(Plan) 1524 5272 w
(9) 1748 5272 w
(partitions) 1831 5272 w
(using) 2275 5272 w
11 /Courier f
(prep) 2542 5272 w
11 /Times-Roman f
(.) 2806 5272 w
9 /Courier f
(; disk/prep \255a 9fat \255a fs /dev/sdC1/plan9) 786 5442 w
(no plan9 partition table found) 786 5552 w
(9fat 204800) 786 5662 w
(fs 8181067) 786 5772 w
(' 9fat) 840 5882 w
(0 204800) 1488 5882 w
(\(204800 sectors, 100.00 MB\)) 2190 5882 w
(' fs) 840 5992 w
(204800 8385867) 1218 5992 w
(\(8181067 sectors, 3.90 GB\)) 2190 5992 w
(>>>) 786 6102 w
11 /Times-Roman f
(Note) 566 6318 w
(how) 814 6318 w
11 /Courier f
(prep) 1038 6318 w
11 /Times-Roman f
(uses) 1337 6318 w
11 /Courier f
(/dev/sdC1/plan9) 1562 6318 w
11 /Times-Roman f
(as) 2588 6318 w
(its) 2715 6318 w
(disk!) 2856 6318 w
(It) 3112 6318 w
(is) 3215 6318 w
(just) 3325 6318 w
(a) 3521 6318 w
(file.) 3605 6318 w
(We) 3815 6318 w
(asked) 4002 6318 w
cleartomark
showpage
saveobj restore
%%EndPage: 4 4
%%Page: 5 5
/saveobj save def
mark
5 pagesetup
11 /Times-Roman f
(\255 5 \255) 2317 413 w
11 /Courier f
(prep) 566 686 w
11 /Times-Roman f
(to) 864 686 w
(automatically) 984 686 w
(choose) 1615 686 w
(appropriate) 1952 686 w
(sizes) 2483 686 w
(and) 2729 686 w
(locations) 2920 686 w
(for) 3350 686 w
(partitions) 3510 686 w
(named) 3959 686 w
11 /Courier f
(9fat) 566 806 w
11 /Times-Roman f
(and) 869 806 w
11 /Courier f
(fs) 1066 806 w
11 /Times-Roman f
(within) 1238 806 w
11 /Courier f
(/dev/sdC1/plan9) 1560 806 w
11 /Times-Roman f
(.) 2550 806 w
(It) 2646 806 w
(printed) 2753 806 w
(the) 3104 806 w
(proposed) 3278 806 w
(table) 3720 806 w
(before) 3973 806 w
(prompting) 566 926 w
(for) 1067 926 w
(more) 1236 926 w
(commands.) 1503 926 w
(And) 2077 926 w
(finally,) 2308 926 w
(we) 2665 926 w
(can) 2834 926 w
(write) 3027 926 w
(this) 3294 926 w
(partition) 3496 926 w
(table) 3911 926 w
(to) 4165 926 w
(disk) 566 1046 w
(and) 778 1046 w
(quit.) 964 1046 w
10 /Courier f
(>>> !!w) 786 1216 w
(>>> !!q) 786 1326 w
11 /Times-Roman f
(That) 566 1542 w
(before) 795 1542 w
(seeing) 1101 1542 w
(the) 1409 1542 w
(effect.) 1571 1542 w
10 /Courier f
(; lc /dev/sdC1) 786 1712 w
(9fat) 786 1822 w
(ctl) 1266 1822 w
(data) 1746 1822 w
(fs) 2226 1822 w
(plan9) 2706 1822 w
(raw) 3186 1822 w
11 /Times-Roman f
(At) 566 2038 w
(this) 721 2038 w
(point) 926 2038 w
(we) 1198 2038 w
(have) 1370 2038 w
(two) 1621 2038 w
(partitions) 1831 2038 w
(named) 2292 2038 w
11 /Courier f
(fs) 2629 2038 w
11 /Times-Roman f
(and) 2806 2038 w
11 /Courier f
(9fat) 3010 2038 w
11 /Times-Roman f
(that) 3320 2038 w
(can) 3531 2038 w
(be) 3728 2038 w
(used) 3877 2038 w
(for) 4124 2038 w
(example) 566 2158 w
(to) 968 2158 w
(install) 1084 2158 w
(a) 1384 2158 w
(stand\255alone) 1462 2158 w
(Plan) 1997 2158 w
(9) 2223 2158 w
(on) 2308 2158 w
(them) 2448 2158 w
(\(one) 2698 2158 w
(that) 2922 2158 w
(may) 3117 2158 w
(run) 3336 2158 w
(without) 3512 2158 w
(using) 3879 2158 w
(an) 4148 2158 w
(external) 566 2278 w
(file) 958 2278 w
(server\).) 1144 2278 w
(Both) 1514 2278 w
(programs,) 1769 2278 w
11 /Courier f
(fdisk) 2252 2278 w
11 /Times-Roman f
(and) 2623 2278 w
11 /Courier f
(prep) 2822 2278 w
11 /Times-Roman f
(used) 3127 2278 w
(the) 3369 2278 w
(file) 3544 2278 w
(given) 3731 2278 w
(as) 4016 2278 w
(an) 4148 2278 w
(argument) 566 2398 w
(to) 1026 2398 w
(access) 1158 2398 w
(the) 1482 2398 w
(disk.) 1662 2398 w
(That) 1920 2398 w
(file) 2167 2398 w
(was) 2359 2398 w
(the) 2575 2398 w
(disk.) 2754 2398 w
(They) 3039 2398 w
(informed) 3309 2398 w
(the) 3756 2398 w
(storage) 3935 2398 w
(device) 566 2518 w
(about) 884 2518 w
(the) 1161 2518 w
(new) 1328 2518 w
(partitions) 1543 2518 w
(by) 1992 2518 w
(writing) 2135 2518 w
(control) 2486 2518 w
(commands) 2830 2518 w
(to) 3339 2518 w
(the) 3459 2518 w
(disk) 3627 2518 w
11 /Courier f
(ctl) 3845 2518 w
11 /Times-Roman f
(file.) 4077 2518 w
(At) 566 2638 w
(last,) 704 2638 w
(we) 913 2638 w
(can) 1068 2638 w
(use) 1247 2638 w
(the) 1421 2638 w
(files) 1583 2638 w
(supplied) 1800 2638 w
(at) 2201 2638 w
11 /Courier f
(#S) 2308 2638 w
11 /Times-Roman f
(to) 2468 2638 w
(use) 2582 2638 w
(our) 2756 2638 w
(new) 2930 2638 w
(partitions.) 3140 2638 w
(But) 816 2794 w
(how) 1010 2794 w
(can) 1233 2794 w
(we) 1418 2794 w
(create) 1579 2794 w
(files) 1872 2794 w
(in) 2095 2794 w
(our) 2215 2794 w
(partition?) 2395 2794 w
(We) 2850 2794 w
(need) 3035 2794 w
(a) 3275 2794 w
(program) 3358 2794 w
(that) 3764 2794 w
(knows) 3964 2794 w
(how) 566 2914 w
(to) 799 2914 w
(store) 929 2914 w
(files) 1186 2914 w
(on) 1419 2914 w
(disk,) 1573 2914 w
(using) 1828 2914 w
(a) 2110 2914 w
(particular) 2201 2914 w
(data) 2663 2914 w
(structure) 2888 2914 w
(to) 3314 2914 w
(keep) 3443 2914 w
(them) 3692 2914 w
(stored,) 3955 2914 w
(access) 566 3034 w
(them,) 887 3034 w
(and) 1178 3034 w
(update) 1379 3034 w
(them.) 1714 3034 w
(This) 2005 3034 w
(is) 2245 3034 w
(what) 2363 3034 w
(a) 2620 3034 w
(file) 2712 3034 w
(server) 2902 3034 w
(is.) 3212 3034 w
(But) 3386 3034 w
(this) 3590 3034 w
(time,) 3794 3034 w
(files) 4062 3034 w
(served) 566 3154 w
(by) 879 3154 w
(this) 1017 3154 w
(program) 1205 3154 w
(would) 1604 3154 w
(be) 1907 3154 w
(actual) 2038 3154 w
(files) 2327 3154 w
(in) 2544 3154 w
(a) 2658 3154 w
(disk.) 2734 3154 w
(There) 816 3310 w
(are) 1108 3310 w
(several) 1278 3310 w
(programs) 1625 3310 w
(that) 2077 3310 w
(can) 2280 3310 w
(be) 2469 3310 w
(used) 2610 3310 w
(for) 2849 3310 w
(this) 3015 3310 w
(task.) 3214 3310 w
(The) 3486 3310 w
(standard) 3695 3310 w
(file) 4105 3310 w
(server) 566 3430 w
(for) 879 3430 w
(Plan) 1053 3430 w
(9) 1296 3430 w
(is) 1398 3430 w
11 /Courier f
(fossil) 1518 3430 w
11 /Times-Roman f
(.) 1914 3430 w
(This) 2016 3430 w
(program) 2258 3430 w
(is) 2675 3430 w
(used) 2795 3430 w
(by) 3042 3430 w
(the) 3198 3430 w
(\(central\)) 3378 3430 w
(file) 3793 3430 w
(server) 3985 3430 w
(machine) 566 3550 w
(to) 965 3550 w
(serve) 1080 3550 w
(files) 1339 3550 w
(to) 1557 3550 w
(terminals.) 1672 3550 w
(Another,) 2138 3550 w
(more) 2554 3550 w
(ancient) 2808 3550 w
(program) 3153 3550 w
(is) 3553 3550 w
11 /Courier f
(kfs) 3656 3550 w
11 /Times-Roman f
(.) 3854 3550 w
(We) 3939 3550 w
(are) 4119 3550 w
(going) 566 3670 w
(to) 845 3670 w
(use) 959 3670 w
(this) 1133 3670 w
(one.) 1321 3670 w
10 /Courier f
(; disk/kfs \255f /dev/sdC1/fs) 786 3840 w
(File system main inconsistent) 786 3950 w
(Would you like to ream it \(y/n\)?) 786 4060 w
11 /Times-Roman f
(This) 566 4276 w
(command) 799 4276 w
(started) 1269 4276 w
11 /Courier f
(kfs) 1598 4276 w
11 /Times-Roman f
(\(a) 1833 4276 w
(file) 1954 4276 w
(server) 2137 4276 w
(program\)) 2440 4276 w
(using) 2884 4276 w
11 /Courier f
(/dev/sdC1/fs) 3160 4276 w
11 /Times-Roman f
(as) 3989 4276 w
(the) 4117 4276 w
(disk) 566 4396 w
(\(partition\)) 790 4396 w
(where) 1275 4396 w
(to) 1581 4396 w
(keep) 1707 4396 w
(files.) 1953 4396 w
(For) 2210 4396 w
11 /Courier f
(kfs) 2402 4396 w
11 /Times-Roman f
(,) 2600 4396 w
(it) 2667 4396 w
(does) 2768 4396 w
(not) 3008 4396 w
(matter) 3188 4396 w
(what) 3507 4396 w
11 /Courier f
(fs) 3759 4396 w
11 /Times-Roman f
(is.) 3930 4396 w
(It) 4071 4396 w
(is) 4177 4396 w
(just) 566 4516 w
(a) 767 4516 w
(file.) 856 4516 w
(Upon) 1099 4516 w
(starting,) 1384 4516 w
11 /Courier f
(kfs) 1783 4516 w
11 /Times-Roman f
(noticed) 2022 4516 w
(that) 2387 4516 w
(there) 2594 4516 w
(was) 2854 4516 w
(none) 3066 4516 w
(of) 3321 4516 w
(its) 3454 4516 w
(data) 3601 4516 w
(structures) 3825 4516 w
(stored) 566 4636 w
(in) 872 4636 w
11 /Courier f
(fs) 996 4636 w
11 /Times-Roman f
(.) 1128 4636 w
(It) 1222 4636 w
(understood) 1327 4636 w
(that) 1853 4636 w
(there) 2056 4636 w
(was) 2312 4636 w
(an) 2520 4636 w
(inconsistent) 2661 4636 w
(\(corrupt\)) 3224 4636 w
(data) 3649 4636 w
(structure) 3868 4636 w
(stored) 566 4756 w
(in) 862 4756 w
(the) 976 4756 w
(disk,) 1138 4756 w
(and) 1378 4756 w
(asks) 1564 4756 w
(us) 1781 4756 w
(to) 1907 4756 w
(reinitialize) 2021 4756 w
(it.) 2518 4756 w
(We) 2636 4756 w
(will) 2815 4756 w
(let) 3015 4756 w
(it) 3153 4756 w
(do) 3243 4756 w
(it.) 3381 4756 w
10 /Courier f
(Would you like to ream it \(y/n\)? !!y) 786 4926 w
(kfs: reaming the file system using 1024 byte blocks) 786 5036 w
11 /Times-Roman f
(Now) 566 5252 w
11 /Courier f
(kfs) 820 5252 w
11 /Times-Roman f
(is) 1059 5252 w
(initializing) 1174 5252 w
(the) 1693 5252 w
(data) 1868 5252 w
(in) 2091 5252 w
11 /Courier f
(fs) 2218 5252 w
11 /Times-Roman f
(,) 2350 5252 w
(as) 2419 5252 w
(it) 2551 5252 w
(pleases) 2654 5252 w
(to) 3011 5252 w
(store) 3139 5252 w
(a) 3394 5252 w
(file) 3484 5252 w
(tree) 3672 5252 w
(in) 3877 5252 w
(there.) 4005 5252 w
(After) 566 5372 w
(finishing) 826 5372 w
(with) 1248 5372 w
(disk) 1473 5372 w
(initialization,) 1686 5372 w
(the) 2300 5372 w
(partition) 2463 5372 w
(contains) 2865 5372 w
(the) 3260 5372 w
(kfs) 3423 5372 w
(data) 3586 5372 w
(structures.) 3797 5372 w
(It) 566 5492 w
(is) 661 5492 w
(said) 763 5492 w
(that) 968 5492 w
(the) 1161 5492 w
(partition) 1323 5492 w
(has) 1724 5492 w
(been) 1898 5492 w
11 /Times-Bold f
(formatted) 2132 5492 w
11 /Times-Roman f
(for) 2627 5492 w
11 /Courier f
(kfs) 2782 5492 w
11 /Times-Roman f
(,) 2980 5492 w
(or) 3036 5492 w
(that) 3155 5492 w
(it) 3348 5492 w
(has) 3438 5492 w
(a) 3612 5492 w
11 /Times-Italic f
(kfs) 3688 5492 w
11 /Times-Roman f
(format.) 3838 5492 w
(At) 816 5648 w
(last,) 961 5648 w
(we) 1177 5648 w
(can) 1339 5648 w
(mount) 1525 5648 w
(the) 1842 5648 w
(\(empty\)) 2011 5648 w
(file) 2394 5648 w
(tree) 2576 5648 w
(served) 2775 5648 w
(by) 3096 5648 w
11 /Courier f
(kfs) 3242 5648 w
11 /Times-Roman f
(.) 3440 5648 w
(When) 3532 5648 w
(we) 3829 5648 w
(create) 3992 5648 w
(files) 566 5768 w
(in) 793 5768 w
(the) 917 5768 w
(new) 1089 5768 w
(mounted) 1309 5768 w
(directory,) 1732 5768 w
11 /Courier f
(kfs) 2193 5768 w
11 /Times-Roman f
(will) 2429 5768 w
(use) 2639 5768 w
11 /Courier f
(write) 2822 5768 w
11 /Times-Roman f
(on) 3189 5768 w
11 /Courier f
(/dev/sdC1/fs) 3336 5768 w
11 /Times-Roman f
(to) 4165 5768 w
(keep) 566 5888 w
(them) 804 5888 w
(stored) 1056 5888 w
(in) 1356 5888 w
(that) 1474 5888 w
(partition.) 1671 5888 w
(Indeed,) 2104 5888 w
(it) 2461 5888 w
(will) 2555 5888 w
(be) 2759 5888 w
(the) 2894 5888 w
(storage) 3061 5888 w
(device) 3410 5888 w
(the) 3728 5888 w
(one) 3895 5888 w
(that) 4086 5888 w
(will) 566 6008 w
(update) 766 6008 w
(the) 1086 6008 w
(disk,) 1248 6008 w
(upon) 1488 6008 w
(calls) 1736 6008 w
(to) 1965 6008 w
11 /Courier f
(write) 2079 6008 w
11 /Times-Roman f
(for) 2437 6008 w
(one) 2592 6008 w
(of) 2778 6008 w
(its) 2897 6008 w
(files.) 3030 6008 w
cleartomark
showpage
saveobj restore
%%EndPage: 5 5
%%Page: 6 6
/saveobj save def
mark
6 pagesetup
11 /Times-Roman f
(\255 6 \255) 2317 413 w
10 /Courier f
(; mount \255c /srv/kfs /n/kfs) 786 676 w
(; touch /n/kfs/anewfile) 786 786 w
(;) 786 896 w
11 /Times-Roman f
(All) 566 1112 w
(other) 738 1112 w
(file) 994 1112 w
(systems) 1171 1112 w
(\(stored) 1551 1112 w
(in) 1886 1112 w
(disk\)) 2003 1112 w
(work) 2254 1112 w
(along) 2510 1112 w
(the) 2785 1112 w
(same) 2950 1112 w
(lines.) 3206 1112 w
(All) 3473 1112 w
(other) 3645 1112 w
(systems) 3902 1112 w
(include) 566 1232 w
(programs) 923 1232 w
(that) 1371 1232 w
(understand) 1570 1232 w
(how) 2085 1232 w
(to) 2307 1232 w
(use) 2426 1232 w
(the) 2605 1232 w
(disk) 2772 1232 w
(\(like) 2989 1232 w
(the) 3223 1232 w
(storage) 3390 1232 w
(device\)) 3739 1232 w
(and) 4093 1232 w
(how) 566 1352 w
(to) 803 1352 w
(store) 937 1352 w
(files) 1198 1352 w
(in) 1435 1352 w
(it) 1569 1352 w
(\(like) 1679 1352 w
11 /Courier f
(kfs) 1928 1352 w
11 /Times-Roman f
(\).) 2126 1352 w
(As) 2266 1352 w
(you) 2436 1352 w
(see,) 2649 1352 w
(each) 2864 1352 w
(program) 3111 1352 w
(is) 3530 1352 w
(just) 3652 1352 w
(using) 3860 1352 w
(an) 4148 1352 w
(abstraction) 566 1472 w
(provided) 1090 1472 w
(by) 1523 1472 w
(yet) 1676 1472 w
(another) 1853 1472 w
(program.) 2224 1472 w
(Even) 2665 1472 w
(inside) 2932 1472 w
(the) 3237 1472 w
(disk) 3413 1472 w
(hardware) 3639 1472 w
(you) 4086 1472 w
(may) 566 1592 w
(find) 793 1592 w
(programs) 1008 1592 w
(that) 1460 1592 w
(provide) 1663 1592 w
(the) 2036 1592 w
(abstraction) 2208 1592 w
(of) 2727 1592 w
(a) 2856 1592 w
(contiguous) 2942 1592 w
(array) 3463 1592 w
(of) 3724 1592 w
(disk) 3853 1592 w
(sec\255) 4076 1592 w
(tors.) 566 1712 w
16 /Times-Bold f
(13.2.) 566 2072 w
(The file system) 966 2072 w
(protocol) 2026 2072 w
11 /Times-Roman f
(So) 566 2228 w
(far,) 724 2228 w
(we) 913 2228 w
(have) 1081 2228 w
(seen) 1328 2228 w
(two) 1563 2228 w
(interfaces) 1769 2228 w
(for) 2235 2228 w
(using) 2404 2228 w
(Plan) 2685 2228 w
(9,) 2923 2228 w
(system) 3048 2228 w
(calls) 3396 2228 w
(and) 3639 2228 w
(the) 3839 2228 w
(shell.) 4015 2228 w
(There) 566 2348 w
(is) 868 2348 w
(another) 990 2348 w
(interface:) 1366 2348 w
(the) 1826 2348 w
(9P) 2008 2348 w
(file) 2201 2348 w
(system) 2395 2348 w
(protocol.) 2749 2348 w
(Plan) 3190 2348 w
(9) 3433 2348 w
(provides) 3535 2348 w
(all) 3960 2348 w
(the) 4117 2348 w
(abstractions) 566 2468 w
(needed) 1119 2468 w
(to) 1457 2468 w
(use) 1572 2468 w
(the) 1747 2468 w
(machine,) 1911 2468 w
(including) 2340 2468 w
(processes,) 2786 2468 w
(virtual) 3263 2468 w
(address) 3580 2468 w
(spaces,) 3938 2468 w
(devices,) 566 2588 w
(etc.) 955 2588 w
(However,) 1142 2588 w
(many) 1602 2588 w
(abstractions) 1878 2588 w
(are) 2434 2588 w
(provided) 2598 2588 w
(by) 3020 2588 w
(external) 3162 2588 w
(file) 3546 2588 w
(servers,) 3724 2588 w
(and) 4093 2588 w
(not) 566 2708 w
(by) 735 2708 w
(the) 873 2708 w
(system) 1035 2708 w
(itself.) 1369 2708 w
(The) 816 2864 w
(protocol) 1017 2864 w
(spoken) 1414 2864 w
(between) 1756 2864 w
(Plan) 2152 2864 w
(9) 2380 2864 w
(and) 2467 2864 w
(any) 2657 2864 w
(external) 2847 2864 w
(file) 3231 2864 w
(server) 3409 2864 w
(is) 3707 2864 w
(called) 3813 2864 w
(9P,) 4106 2864 w
(and) 566 2984 w
(is) 763 2984 w
(documented) 876 2984 w
(in) 1451 2984 w
(the) 1576 2984 w
(section) 1749 2984 w
(5) 2099 2984 w
(of) 2193 2984 w
(the) 2323 2984 w
(manual.) 2496 2984 w
(For) 2886 2984 w
(example,) 3078 2984 w
11 /Times-Italic f
(intro) 3516 2984 w
11 /Times-Roman f
(\(5\)) 3731 2984 w
(summa\255) 3897 2984 w
(rizes) 566 3104 w
(the) 800 3104 w
(protocol) 962 3104 w
(and) 1356 3104 w
(provides) 1542 3104 w
(a) 1948 3104 w
(good) 2024 3104 w
(introduction) 2272 3104 w
(to) 2838 3104 w
(it.) 2952 3104 w
(A) 816 3260 w
(word) 934 3260 w
(of) 1198 3260 w
(caution.) 1328 3260 w
(If) 1718 3260 w
(you) 1829 3260 w
(ever) 2034 3260 w
(have) 2261 3260 w
(to) 2507 3260 w
(implement) 2633 3260 w
(a) 3144 3260 w
(file) 3232 3260 w
(server,) 3418 3260 w
(you) 3752 3260 w
(should) 3957 3260 w
(read) 566 3380 w
(the) 793 3380 w
(whole) 967 3380 w
(section) 1275 3380 w
(5) 1626 3380 w
(of) 1721 3380 w
(the) 1852 3380 w
(manual) 2026 3380 w
(before) 2389 3380 w
(doing) 2707 3380 w
(so.) 2998 3380 w
(It) 3164 3380 w
(describes) 3270 3380 w
(all) 3716 3380 w
(the) 3865 3380 w
(mes\255) 4038 3380 w
(sages) 566 3500 w
(in) 837 3500 w
(the) 957 3500 w
(protocol,) 1125 3500 w
(what) 1553 3500 w
(they) 1800 3500 w
(do,) 2023 3500 w
(and) 2195 3500 w
(how) 2388 3500 w
(a) 2612 3500 w
(file) 2695 3500 w
(server) 2876 3500 w
(should) 3177 3500 w
(behave.) 3506 3500 w
(Here) 3878 3500 w
(we) 4124 3500 w
(are) 566 3620 w
(interested) 736 3620 w
(just) 1200 3620 w
(in) 1398 3620 w
(describing) 1522 3620 w
(how) 2017 3620 w
(the) 2244 3620 w
(protocol) 2416 3620 w
(works,) 2819 3620 w
(and) 3152 3620 w
(how) 3347 3620 w
(it) 3573 3620 w
(relates) 3672 3620 w
(to) 3994 3620 w
(the) 4117 3620 w
(system) 566 3740 w
(calls) 908 3740 w
(made) 1145 3740 w
(to) 1418 3740 w
(Plan) 1540 3740 w
(9.) 1772 3740 w
(The) 1891 3740 w
(description) 2097 3740 w
(here) 2621 3740 w
(is) 2844 3740 w
(far) 2955 3740 w
(from) 3112 3740 w
(being) 3362 3740 w
(complete,) 3643 3740 w
(but) 4110 3740 w
(you) 566 3860 w
(have) 759 3860 w
(the) 993 3860 w
(manual.) 1155 3860 w
(As) 816 4016 w
(a) 972 4016 w
(user,) 1054 4016 w
(you) 1298 4016 w
(might) 1497 4016 w
(probably) 1789 4016 w
(ignore) 2213 4016 w
(which) 2528 4016 w
(particular) 2831 4016 w
(protocol) 3285 4016 w
(is) 3686 4016 w
(spoken) 3795 4016 w
(by) 4141 4016 w
(your) 566 4136 w
(system.) 800 4136 w
(Windows) 1167 4136 w
(speaks) 1621 4136 w
(CIFS,) 1946 4136 w
(Linux) 2241 4136 w
(speaks) 2537 4136 w
(NFS,) 2862 4136 w
(and) 3126 4136 w
(Plan) 3316 4136 w
(9) 3544 4136 w
(speaks) 3631 4136 w
(9P.) 3955 4136 w
(In) 4160 4136 w
(general,) 566 4256 w
(you) 950 4256 w
(do) 1150 4256 w
(not) 1296 4256 w
(have) 1473 4256 w
(to) 1715 4256 w
(care.) 1837 4256 w
(However,) 2081 4256 w
(this) 2545 4256 w
(is) 2741 4256 w
(a) 2851 4256 w
(good) 2935 4256 w
(time) 3191 4256 w
(to) 3423 4256 w
(take) 3545 4256 w
(a) 3763 4256 w
(look) 3847 4256 w
(into) 4079 4256 w
(9P) 566 4376 w
(for) 722 4376 w
(two) 888 4376 w
(different) 1092 4376 w
(reasons.) 1507 4376 w
(First,) 1902 4376 w
(it) 2172 4376 w
(might) 2273 4376 w
(give) 2570 4376 w
(you) 2798 4376 w
(more) 3002 4376 w
(insight) 3266 4376 w
(regarding) 3605 4376 w
(how) 4062 4376 w
(the) 566 4496 w
(system) 730 4496 w
(works) 1066 4496 w
(and) 1364 4496 w
(how) 1553 4496 w
(to) 1773 4496 w
(use) 1890 4496 w
(it) 2067 4496 w
(more) 2160 4496 w
(effectively.) 2416 4496 w
(Second,) 2942 4496 w
(looking) 3324 4496 w
(into) 3692 4496 w
(9P) 3895 4496 w
(is) 4043 4496 w
(an) 4148 4496 w
(excellent) 566 4616 w
(excuse) 1010 4616 w
(to) 1356 4616 w
(learn) 1491 4616 w
(how) 1758 4616 w
(to) 1996 4616 w
(develop) 2130 4616 w
(a) 2525 4616 w
(file) 2621 4616 w
(server) 2815 4616 w
(program,) 3129 4616 w
(using) 3576 4616 w
(what) 3863 4616 w
(we) 4124 4616 w
(learned) 566 4736 w
(so) 915 4736 w
(far.) 1041 4736 w
(Looking) 816 4892 w
(back) 1232 4892 w
(at) 1481 4892 w
(figure) 1603 4892 w
([[!remote) 1907 4892 w
(procedure) 2362 4892 w
(call!]]) 2841 4892 w
(will) 3150 4892 w
(let) 3365 4892 w
(you) 3518 4892 w
(see) 3727 4892 w
(the) 3910 4892 w
(ele\255) 4088 4892 w
(ments) 566 5012 w
(involved.) 888 5012 w
(Processes) 1388 5012 w
(using) 1873 5012 w
(Plan) 2171 5012 w
(9) 2426 5012 w
(make) 2539 5012 w
(system) 2834 5012 w
(calls,) 3198 5012 w
(including) 3485 5012 w
11 /Courier f
(open) 3959 5012 w
11 /Times-Roman f
(,) 4223 5012 w
11 /Courier f
(close) 566 5132 w
11 /Times-Roman f
(,) 896 5132 w
11 /Courier f
(read) 957 5132 w
11 /Times-Roman f
(,) 1221 5132 w
(and) 1282 5132 w
11 /Courier f
(write) 1473 5132 w
11 /Times-Roman f
(.) 1803 5132 w
(Plan) 1892 5132 w
(9) 2121 5132 w
(implements) 2209 5132 w
(such) 2756 5132 w
(system) 2991 5132 w
(calls) 3331 5132 w
(by) 3566 5132 w
(speaking) 3710 5132 w
(9P) 4134 5132 w
(with) 566 5252 w
(the) 802 5252 w
(file) 976 5252 w
(server) 1162 5252 w
(involved.) 1468 5252 w
(In) 1949 5252 w
(the) 2080 5252 w
(figure,) 2254 5252 w
(steps) 2583 5252 w
(3) 2843 5252 w
(and) 2938 5252 w
(4) 3136 5252 w
(correspond) 3231 5252 w
(to) 3757 5252 w
(9P) 3882 5252 w
(mes\255) 4038 5252 w
(sages) 566 5372 w
(exchanged) 833 5372 w
(to) 1330 5372 w
(implement) 1446 5372 w
11 /Courier f
(write) 1947 5372 w
11 /Times-Roman f
(.) 2277 5372 w
(The) 2363 5372 w
(last) 2563 5372 w
(element) 2746 5372 w
(involved) 3123 5372 w
(is) 3538 5372 w
(the) 3643 5372 w
(file) 3808 5372 w
(server) 3985 5372 w
(process,) 566 5492 w
(which) 977 5492 w
(handles) 1300 5492 w
(the) 1690 5492 w
(messages) 1879 5492 w
(sent) 2348 5492 w
(by) 2579 5492 w
(Plan) 2743 5492 w
(9) 2993 5492 w
(to) 3102 5492 w
(do) 3242 5492 w
(the) 3406 5492 w
(file) 3594 5492 w
(operations) 3794 5492 w
(requested) 566 5612 w
(by) 1013 5612 w
(Plan) 1151 5612 w
(9.) 1375 5612 w
(All) 816 5768 w
(the) 991 5768 w
(9P) 1159 5768 w
(dialog) 1310 5768 w
(between) 1619 5768 w
(Plan) 2017 5768 w
(9) 2248 5768 w
(and) 2338 5768 w
(a) 2531 5768 w
(file) 2614 5768 w
(server) 2795 5768 w
(is) 3096 5768 w
(based) 3205 5768 w
(on) 3489 5768 w
(remote) 3634 5768 w
(proce\255) 3973 5768 w
(dure) 566 5888 w
(calls.) 790 5888 w
(Plan) 1049 5888 w
(9) 1275 5888 w
(sends) 1360 5888 w
(a) 1634 5888 w
(request) 1712 5888 w
(to) 2058 5888 w
(the) 2174 5888 w
(server) 2338 5888 w
(and) 2634 5888 w
(receives) 2822 5888 w
(a) 3209 5888 w
(reply) 3287 5888 w
(from) 3542 5888 w
(it.) 3785 5888 w
(The) 3905 5888 w
(file) 4105 5888 w
(server) 566 6008 w
(is) 863 6008 w
(called) 968 6008 w
(a) 1260 6008 w
11 /Times-Bold f
(server) 1339 6008 w
11 /Times-Roman f
(because) 1660 6008 w
(it) 2036 6008 w
(accepts) 2129 6008 w
(requests) 2481 6008 w
(\(represented) 2871 6008 w
(by) 3441 6008 w
(messages\),) 3583 6008 w
(and) 4093 6008 w
(it) 566 6128 w
(handles) 657 6128 w
(each) 1020 6128 w
(request) 1247 6128 w
(before) 1591 6128 w
(sending) 1897 6128 w
(a) 2267 6128 w
(reply) 2343 6128 w
(back) 2596 6128 w
(\(also) 2830 6128 w
(represented) 3071 6128 w
(by) 3602 6128 w
(a) 3740 6128 w
(message\).) 3816 6128 w
(In) 566 6248 w
(the) 703 6248 w
(same) 883 6248 w
(way,) 1154 6248 w
(the) 1410 6248 w
(program) 1590 6248 w
(making) 2007 6248 w
(requests) 2383 6248 w
(\(Plan) 2788 6248 w
(9) 3066 6248 w
(in) 3167 6248 w
(this) 3299 6248 w
(case\)) 3505 6248 w
(is) 3774 6248 w
(called) 3895 6248 w
(a) 4203 6248 w
cleartomark
showpage
saveobj restore
%%EndPage: 6 6
%%Page: 7 7
/saveobj save def
mark
7 pagesetup
11 /Times-Roman f
(\255 7 \255) 2317 413 w
11 /Times-Bold f
(client) 566 686 w
11 /Times-Roman f
(because) 858 686 w
(of) 1239 686 w
(a) 1366 686 w
(similar) 1450 686 w
(reason.) 1792 686 w
(Each) 2169 686 w
(request) 2423 686 w
(and) 2775 686 w
(reply) 2968 686 w
(is) 3228 686 w
(just) 3337 686 w
(a) 3532 686 w
(particular) 3615 686 w
(data) 4069 686 w
(structure,) 566 806 w
(sent) 1018 806 w
(as) 1236 806 w
(an) 1368 806 w
(array) 1513 806 w
(of) 1778 806 w
(bytes) 1911 806 w
(through) 2185 806 w
(a) 2569 806 w
(network) 2659 806 w
(connection,) 3060 806 w
(a) 3611 806 w
(pipe,) 3701 806 w
(or) 3960 806 w
(any) 4093 806 w
(other) 566 926 w
(communication) 819 926 w
(means.) 1531 926 w
(Before) 816 1082 w
(discussing) 1150 1082 w
(9P) 1646 1082 w
(any) 1800 1082 w
(further,) 1995 1082 w
(let's) 2357 1082 w
(take) 2583 1082 w
(a) 2803 1082 w
(look) 2889 1082 w
(at) 3123 1082 w
(an) 3240 1082 w
(example.) 3381 1082 w
(The) 3818 1082 w
(com\255) 4026 1082 w
(mand) 566 1202 w
11 /Courier f
(ramfs) 842 1202 w
11 /Times-Roman f
(,) 1172 1202 w
(as) 1231 1202 w
(many) 1353 1202 w
(other) 1628 1202 w
(file) 1884 1202 w
(servers,) 2061 1202 w
(prints) 2429 1202 w
(the) 2711 1202 w
(9P) 2876 1202 w
(dialog) 3024 1202 w
(when) 3330 1202 w
(called) 3598 1202 w
(with) 3890 1202 w
(the) 4117 1202 w
(flag) 566 1322 w
11 /Courier f
(\255D) 775 1322 w
11 /Times-Roman f
(.) 907 1322 w
(Any) 1002 1322 w
(9P) 1230 1322 w
(message) 1386 1322 w
(received) 1796 1322 w
(by) 2204 1322 w
11 /Courier f
(ramfs) 2354 1322 w
11 /Times-Roman f
(,) 2684 1322 w
(carrying) 2752 1322 w
(a) 3156 1322 w
(request,) 3244 1322 w
(is) 3628 1322 w
(printed) 3742 1322 w
(and) 4093 1322 w
(then) 566 1442 w
(processed.) 798 1442 w
(Any) 1300 1442 w
(9P) 1532 1442 w
(message) 1692 1442 w
(sent) 2106 1442 w
(back) 2326 1442 w
(as) 2574 1442 w
(a) 2707 1442 w
(reply) 2797 1442 w
(from) 3064 1442 w
11 /Courier f
(ramfs) 3319 1442 w
11 /Times-Roman f
(is) 3691 1442 w
(printed) 3807 1442 w
(as) 4160 1442 w
(well.) 566 1562 w
(Of) 837 1562 w
(course,) 1006 1562 w
11 /Courier f
(ramfs) 1373 1562 w
11 /Times-Roman f
(does) 1757 1562 w
(not) 2012 1562 w
(print) 2207 1562 w
(in) 2469 1562 w
(the) 2609 1562 w
(console) 2797 1562 w
(the) 3186 1562 w
(actual) 3375 1562 w
(messages) 3691 1562 w
(as) 4160 1562 w
(exchanged) 566 1682 w
(through) 1068 1682 w
(the) 1445 1682 w
(network.) 1614 1682 w
(Instead,) 2036 1682 w
(it) 2415 1682 w
(prints) 2512 1682 w
(the) 2798 1682 w
(relevant) 2967 1682 w
(data) 3354 1682 w
(carried) 3571 1682 w
(by) 3908 1682 w
(each) 4052 1682 w
(message) 566 1802 w
(in) 965 1802 w
(a) 1079 1802 w
(format) 1155 1802 w
(that) 1475 1802 w
(could) 1668 1802 w
(be) 1940 1802 w
(understood) 2071 1802 w
(by) 2587 1802 w
(a) 2725 1802 w
(human.) 2801 1802 w
10 /Courier f
(; ramfs \255D \255s ram) 786 1972 w
(postfd /srv/ram) 786 2082 w
(postfd successful) 786 2192 w
(;) 786 2302 w
11 /Times-Roman f
(Using) 566 2518 w
11 /Courier f
(\255s) 869 2518 w
11 /Times-Roman f
(we) 1041 2518 w
(asked) 1208 2518 w
11 /Courier f
(ramfs) 1497 2518 w
11 /Times-Roman f
(to) 1867 2518 w
(post) 1993 2518 w
(at) 2217 2518 w
11 /Courier f
(/srv/ram) 2336 2518 w
11 /Times-Roman f
(the) 2904 2518 w
(end) 3078 2518 w
(of) 3276 2518 w
(a) 3407 2518 w
(pipe) 3496 2518 w
(that) 3726 2518 w
(we) 3932 2518 w
(can) 4100 2518 w
(mount) 566 2638 w
(to) 882 2638 w
(access) 1002 2638 w
(the) 1314 2638 w
(files) 1482 2638 w
(it) 1705 2638 w
(provides.) 1801 2638 w
(This) 2241 2638 w
(is) 2471 2638 w
(what) 2579 2638 w
(happens) 2826 2638 w
(when) 3219 2638 w
(we) 3490 2638 w
(mount) 3651 2638 w
(its) 3967 2638 w
(file) 4105 2638 w
(tree.) 566 2758 w
10 /Courier f
(; !!mount \255c /srv/ram /n/ram) 786 2928 w
(<\25512\255 Tversion tag 65535 msize 8216 version '9P2000') 786 3038 w
(\25512\255> Rversion tag 65535 msize 8216 version '9P2000') 786 3148 w
(<\25512\255 Tauth tag 16 afid 435 uname nemo aname) 786 3258 w
(\25512\255> Rerror tag 16 ename auth no required) 786 3368 w
(<\25512\255 Tattach tag 16 fid 435 afid \2551 uname nemo aname) 786 3478 w
(\25512\255> Rattach tag 16 qid \(0000000000000000 0 d\)) 786 3588 w
(;) 786 3698 w
11 /Times-Roman f
(The) 566 3914 w
11 /Courier f
(mount) 774 3914 w
11 /Times-Roman f
(command) 1142 3914 w
(makes) 1613 3914 w
(a) 1931 3914 w
11 /Courier f
(mount) 2017 3914 w
11 /Times-Roman f
(system) 2385 3914 w
(call.) 2729 3914 w
(To) 2981 3914 w
(perform) 3141 3914 w
(the) 3532 3914 w
11 /Courier f
(mount) 3705 3914 w
11 /Times-Roman f
(sys\255) 4074 3914 w
(tem) 566 4034 w
(call,) 776 4034 w
(Plan) 1007 4034 w
(9) 1248 4034 w
(sent) 1348 4034 w
(three) 1570 4034 w
(different) 1832 4034 w
(requests) 2252 4034 w
(to) 2655 4034 w
(this) 2785 4034 w
11 /Courier f
(ramfs) 2989 4034 w
11 /Times-Roman f
(file) 3363 4034 w
(server.) 3553 4034 w
(The) 3891 4034 w
(file) 4105 4034 w
(server) 566 4154 w
(printed) 869 4154 w
(the) 1217 4154 w
(messages) 1388 4154 w
(\(and) 1839 4154 w
(handled) 2070 4154 w
(the) 2455 4154 w
(requests) 2627 4154 w
(and) 3024 4154 w
(sent) 3220 4154 w
(the) 3435 4154 w
(replies\)) 3607 4154 w
(before) 3973 4154 w
(Plan) 566 4274 w
(9) 790 4274 w
(could) 873 4274 w
(complete) 1145 4274 w
(the) 1575 4274 w
11 /Courier f
(mount) 1737 4274 w
11 /Times-Roman f
(call.) 2095 4274 w
11 /Courier f
(Ramfs) 816 4430 w
11 /Times-Roman f
(prints) 1181 4430 w
(a) 1467 4430 w
(line) 1551 4430 w
(for) 1752 4430 w
(each) 1915 4430 w
(9P) 2150 4430 w
(message) 2303 4430 w
(exchanged.) 2710 4430 w
(The) 3269 4430 w
(first) 3475 4430 w
(field) 3688 4430 w
(of) 3925 4430 w
(each) 4052 4430 w
(line) 566 4550 w
(shows) 767 4550 w
(if) 1078 4550 w
(it) 1181 4550 w
(is) 1279 4550 w
(a) 1389 4550 w
(message) 1473 4550 w
(received) 1880 4550 w
(from) 2285 4550 w
(Plan) 2533 4550 w
(9) 2764 4550 w
(\(the) 2854 4550 w
(arrow) 3059 4550 w
(points) 3348 4550 w
(to) 3653 4550 w
(the) 3774 4550 w
(left\)) 3943 4550 w
(or) 4160 4550 w
(sent) 566 4670 w
(by) 774 4670 w
(the) 915 4670 w
(server) 1080 4670 w
(\(the) 1377 4670 w
(arrow) 1578 4670 w
(points) 1863 4670 w
(to) 2164 4670 w
(the) 2281 4670 w
(right\).) 2446 4670 w
(The) 2749 4670 w
(former) 2950 4670 w
(ones) 3278 4670 w
(are) 3510 4670 w
(requests,) 3674 4670 w
(and) 4093 4670 w
(the) 566 4790 w
(latter) 733 4790 w
(ones) 990 4790 w
(are) 1223 4790 w
(replies.) 1387 4790 w
(The) 1739 4790 w
(file) 1941 4790 w
(descriptor) 2119 4790 w
(used) 2589 4790 w
(to) 2822 4790 w
(receive) 2940 4790 w
(\(or) 3286 4790 w
(send\)) 3445 4790 w
(the) 3714 4790 w
(message) 3880 4790 w
(is) 566 4910 w
(the) 670 4910 w
(number) 834 4910 w
(printed) 1199 4910 w
(in) 1540 4910 w
(the) 1656 4910 w
(middle) 1820 4910 w
(of) 2156 4910 w
(each) 2277 4910 w
(arrow.) 2506 4910 w
(In) 2818 4910 w
(this) 2939 4910 w
(case,) 3130 4910 w
11 /Courier f
(ramfs) 3376 4910 w
11 /Times-Roman f
(is) 3737 4910 w
(attending) 3842 4910 w
(an) 566 5030 w
(end) 700 5030 w
(of) 889 5030 w
(a) 1011 5030 w
(pipe,) 1090 5030 w
(open) 1337 5030 w
(in) 1580 5030 w
(file) 1696 5030 w
(descriptor) 1872 5030 w
(12.) 2340 5030 w
(The) 2508 5030 w
(other) 2708 5030 w
(end) 2963 5030 w
(of) 3151 5030 w
(the) 3272 5030 w
(pipe) 3436 5030 w
(was) 3655 5030 w
(posted) 3855 5030 w
(at) 4172 5030 w
11 /Courier f
(/srv/ram) 566 5150 w
11 /Times-Roman f
(,) 1094 5150 w
(which) 1150 5150 w
(is) 1446 5150 w
(the) 1548 5150 w
(file) 1710 5150 w
(we) 1884 5150 w
(used) 2039 5150 w
(in) 2268 5150 w
11 /Courier f
(mount) 2382 5150 w
11 /Times-Roman f
(.) 2712 5150 w
(The) 816 5306 w
(second) 1028 5306 w
(field) 1374 5306 w
(printed) 1617 5306 w
(for) 1970 5306 w
(each) 2139 5306 w
(9P) 2380 5306 w
(message) 2539 5306 w
(shows) 2952 5306 w
(the) 3269 5306 w
11 /Times-Bold f
(message) 3446 5306 w
(type) 3872 5306 w
11 /Times-Roman f
(.) 4073 5306 w
(A) 4172 5306 w
(message) 566 5426 w
(is) 992 5426 w
(just) 1121 5426 w
(a) 1336 5426 w
(data) 1439 5426 w
(structure.) 1676 5426 w
(Different) 2142 5426 w
(messages) 2597 5426 w
(for) 3066 5426 w
(different) 3248 5426 w
(requests) 3679 5426 w
(and) 4093 5426 w
(replies) 566 5546 w
(mean) 890 5546 w
(different) 1159 5546 w
(things,) 1567 5546 w
(and) 1897 5546 w
(have) 2087 5546 w
(different) 2325 5546 w
(data) 2733 5546 w
(fields.) 2947 5546 w
(The) 3251 5546 w
(type) 3453 5546 w
(of) 3675 5546 w
(a) 3799 5546 w
(message) 3880 5546 w
(is) 566 5666 w
(identified) 677 5666 w
(by) 1135 5666 w
(a) 1282 5666 w
(number.) 1367 5666 w
(However,) 1767 5666 w
11 /Courier f
(ramfs) 2231 5666 w
11 /Times-Roman f
(printed) 2597 5666 w
(a) 2944 5666 w
(string) 3028 5666 w
(with) 3315 5666 w
(the) 3547 5666 w
(name) 3717 5666 w
(of) 3990 5666 w
(the) 4117 5666 w
(type,) 566 5786 w
(instead) 814 5786 w
(of) 1156 5786 w
(the) 1278 5786 w
(number.) 1443 5786 w
(In) 1865 5786 w
(our) 1987 5786 w
(case,) 2165 5786 w
(three) 2412 5786 w
(different) 2662 5786 w
(requests) 3070 5786 w
(were) 3461 5786 w
(sent) 3704 5786 w
(by) 3913 5786 w
(Plan) 4055 5786 w
(9,) 566 5906 w
11 /Courier f
(Tversion) 680 5906 w
11 /Times-Roman f
(,) 1208 5906 w
11 /Courier f
(Tauth) 1267 5906 w
11 /Times-Roman f
(,) 1597 5906 w
(and) 1656 5906 w
11 /Courier f
(Tattach) 1845 5906 w
11 /Times-Roman f
(.) 2307 5906 w
(The) 2394 5906 w
(file) 2595 5906 w
(server) 2771 5906 w
(replied) 3067 5906 w
(with) 3401 5906 w
(three) 3627 5906 w
(different) 3875 5906 w
(replies,) 566 6026 w
11 /Courier f
(Rversion) 930 6026 w
11 /Times-Roman f
(,) 1458 6026 w
11 /Courier f
(Rerror) 1530 6026 w
11 /Times-Roman f
(,) 1926 6026 w
(and) 1998 6026 w
11 /Courier f
(Rattach) 2200 6026 w
11 /Times-Roman f
(.) 2662 6026 w
(All) 2762 6026 w
(9P) 2947 6026 w
(requests) 3108 6026 w
(have) 3511 6026 w
(names) 3761 6026 w
(that) 4086 6026 w
(start) 566 6146 w
(with) 803 6146 w
11 /Courier f
(T) 1047 6146 w
11 /Times-Roman f
(,) 1113 6146 w
(for) 1189 6146 w
(transaction.) 1364 6146 w
(The) 1921 6146 w
(replies) 2139 6146 w
(for) 2478 6146 w
(each) 2652 6146 w
(request) 2898 6146 w
(have) 3261 6146 w
(the) 3514 6146 w
(name) 3695 6146 w
(of) 3979 6146 w
(the) 4117 6146 w
(request,) 566 6266 w
(but) 955 6266 w
(starting) 1141 6266 w
(with) 1516 6266 w
11 /Courier f
(R) 1757 6266 w
11 /Times-Roman f
(instead.) 1868 6266 w
(Thus,) 2252 6266 w
11 /Courier f
(Tversion) 2546 6266 w
11 /Times-Roman f
(is) 3120 6266 w
(a) 3240 6266 w
11 /Times-Italic f
(version) 3334 6266 w
11 /Times-Roman f
(request,) 3703 6266 w
(and) 4093 6266 w
cleartomark
showpage
saveobj restore
%%EndPage: 7 7
%%Page: 8 8
/saveobj save def
mark
8 pagesetup
11 /Times-Roman f
(\255 8 \255) 2317 413 w
11 /Courier f
(Rversion) 566 686 w
11 /Times-Roman f
(is) 1122 686 w
(a) 1224 686 w
11 /Times-Italic f
(version) 1300 686 w
11 /Times-Roman f
(reply.) 1651 686 w
(Following) 816 842 w
(the) 1301 842 w
(message) 1466 842 w
(type,) 1868 842 w
(the) 2116 842 w
(names) 2281 842 w
(and) 2592 842 w
(contents) 2781 842 w
(of) 3178 842 w
(most) 3300 842 w
(important) 3547 842 w
(fields) 4007 842 w
(for) 566 962 w
(each) 722 962 w
(message) 950 962 w
(are) 1350 962 w
(printed) 1511 962 w
(as) 1851 962 w
(well.) 1971 962 w
(For) 2217 962 w
(example,) 2398 962 w
(the) 2825 962 w
11 /Courier f
(tag) 2987 962 w
11 /Times-Roman f
(field) 3213 962 w
(of) 3442 962 w
(the) 3561 962 w
11 /Courier f
(Tversion) 3723 962 w
11 /Times-Roman f
(message) 566 1082 w
(had) 978 1082 w
11 /Courier f
(65535) 1177 1082 w
11 /Times-Roman f
(as) 1548 1082 w
(its) 1680 1082 w
(value.) 1826 1082 w
(As) 2160 1082 w
(you) 2323 1082 w
(can) 2529 1082 w
(see,) 2722 1082 w
(all) 2931 1082 w
(the) 3083 1082 w
(messages) 3259 1082 w
(have) 3715 1082 w
(a) 3963 1082 w
11 /Courier f
(tag) 4053 1082 w
11 /Times-Roman f
(field,) 566 1202 w
(besides) 825 1202 w
(a) 1178 1202 w
(type) 1256 1202 w
(field.) 1475 1202 w
(The) 1733 1202 w
(protocol) 1932 1202 w
(dictates) 2327 1202 w
(that) 2691 1202 w
(each) 2885 1202 w
(reply) 3113 1202 w
(must) 3367 1202 w
(carry) 3611 1202 w
(the) 3863 1202 w
(same) 4026 1202 w
(number) 566 1322 w
(in) 942 1322 w
(the) 1069 1322 w
11 /Courier f
(tag) 1245 1322 w
11 /Times-Roman f
(that) 1485 1322 w
(was) 1692 1322 w
(used) 1904 1322 w
(by) 2147 1322 w
(its) 2299 1322 w
(corresponding) 2446 1322 w
(request.) 3115 1322 w
(This) 3501 1322 w
(is) 3739 1322 w
(useful) 3855 1322 w
(to) 4165 1322 w
(have) 566 1442 w
(multiple) 810 1442 w
(outstanding) 1216 1442 w
(\(not) 1768 1442 w
(yet) 1983 1442 w
(replied\)) 2155 1442 w
(requests) 2533 1442 w
(through) 2930 1442 w
(the) 3309 1442 w
(same) 3480 1442 w
(connection.) 3742 1442 w
11 /Times-Bold f
(Tags) 566 1562 w
11 /Times-Roman f
(let) 826 1562 w
(the) 969 1562 w
(client) 1136 1562 w
(know) 1413 1562 w
(which) 1690 1562 w
(reply) 1991 1562 w
(corresponds) 2249 1562 w
(to) 2811 1562 w
(each) 2930 1562 w
(request.) 3162 1562 w
(Because) 3540 1562 w
(of) 3938 1562 w
(this,) 4063 1562 w
(a) 566 1682 w
(tag) 642 1682 w
(used) 804 1682 w
(in) 1033 1682 w
(a) 1147 1682 w
(request) 1223 1682 w
(cannot) 1567 1682 w
(be) 1887 1682 w
(used) 2018 1682 w
(again) 2247 1682 w
(until) 2512 1682 w
(its) 2743 1682 w
(reply) 2876 1682 w
(has) 3129 1682 w
(been) 3303 1682 w
(received.) 3537 1682 w
(Before) 816 1838 w
(anything) 1155 1838 w
(else,) 1582 1838 w
(Plan) 1822 1838 w
(9) 2060 1838 w
(sent) 2157 1838 w
(a) 2377 1838 w
11 /Courier f
(Tversion) 2468 1838 w
11 /Times-Roman f
(message) 3039 1838 w
(to) 3453 1838 w
11 /Courier f
(ramfs) 3582 1838 w
11 /Times-Roman f
(,) 3912 1838 w
(which) 3983 1838 w
(replied) 566 1958 w
(by) 903 1958 w
(sending) 1046 1958 w
(an) 1421 1958 w
11 /Courier f
(Rversion) 1557 1958 w
11 /Times-Roman f
(message) 2117 1958 w
(back.) 2520 1958 w
(This) 2786 1958 w
(message) 3014 1958 w
(is) 3417 1958 w
(used) 3523 1958 w
(to) 3756 1958 w
(agree) 3874 1958 w
(on) 4141 1958 w
(a) 566 2078 w
(particular) 654 2078 w
(version) 1113 2078 w
(of) 1476 2078 w
(the) 1607 2078 w
(protocol) 1781 2078 w
(to) 2187 2078 w
(speak.) 2313 2078 w
(The) 2631 2078 w
(request) 2842 2078 w
(carries) 3199 2078 w
(the) 3530 2078 w
(version) 3705 2078 w
(pro\255) 4069 2078 w
(posed) 566 2198 w
(by) 861 2198 w
(Plan) 1010 2198 w
(9.) 1245 2198 w
(The) 1367 2198 w
(reply) 1576 2198 w
(carries) 1839 2198 w
(the) 2167 2198 w
(version) 2339 2198 w
(proposed) 2700 2198 w
(by) 3140 2198 w
(the) 3288 2198 w
(server.) 3460 2198 w
(The) 3792 2198 w
(string) 4000 2198 w
11 /Courier f
(9P2000) 566 2318 w
11 /Times-Roman f
(,) 962 2318 w
(sent) 1029 2318 w
(by) 1245 2318 w
(Plan) 1394 2318 w
(9) 1629 2318 w
(\(and) 1723 2318 w
(acknowledged) 1956 2318 w
(by) 2627 2318 w
11 /Courier f
(ramfs) 2776 2318 w
11 /Times-Roman f
(\)) 3106 2318 w
(identifies) 3181 2318 w
(the) 3629 2318 w
(version) 3802 2318 w
(in) 4165 2318 w
(this) 566 2438 w
(case.) 756 2438 w
(For) 1001 2438 w
(the) 1184 2438 w
(rest) 1348 2438 w
(of) 1536 2438 w
(the) 1657 2438 w
(conversation,) 1821 2438 w
(both) 2439 2438 w
(programs) 2665 2438 w
(agreed) 3108 2438 w
(to) 3427 2438 w
(use) 3542 2438 w
(messages) 3717 2438 w
(as) 4160 2438 w
(defined) 566 2558 w
(in) 922 2558 w
(the) 1036 2558 w
(9P2000) 1198 2558 w
(version) 1563 2558 w
(of) 1914 2558 w
(the) 2033 2558 w
(9P) 2195 2558 w
(protocol.) 2340 2558 w
(Furthermore,) 816 2714 w
(this) 1426 2714 w
(message) 1620 2714 w
(is) 2025 2714 w
(also) 2133 2714 w
(used) 2344 2714 w
(to) 2579 2714 w
(agree) 2699 2714 w
(on) 2968 2714 w
(a) 3112 2714 w
(maximum) 3194 2714 w
(message) 3675 2714 w
(size) 4081 2714 w
(for) 566 2834 w
(the) 726 2834 w
(9P) 893 2834 w
(conversation) 1043 2834 w
(that) 1636 2834 w
(follows.) 1834 2834 w
(In) 2225 2834 w
(our) 2349 2834 w
(case,) 2527 2834 w
(they) 2774 2834 w
(agreed) 2995 2834 w
(on) 3317 2834 w
(using) 3459 2834 w
(8) 3730 2834 w
(Kbytes) 3817 2834 w
(as) 4160 2834 w
(the) 566 2954 w
(maximum) 729 2954 w
(size) 1205 2954 w
(for) 1404 2954 w
(a) 1560 2954 w
(message) 1637 2954 w
(\(the) 2037 2954 w
(value) 2236 2954 w
(of) 2502 2954 w
(the) 2622 2954 w
11 /Courier f
(msize) 2785 2954 w
11 /Times-Roman f
(fields) 3145 2954 w
(in) 3419 2954 w
11 /Courier f
(Tversion) 3535 2954 w
11 /Times-Roman f
(and) 4093 2954 w
11 /Courier f
(Rversion) 566 3074 w
11 /Times-Roman f
(\).) 1094 3074 w
(This) 1222 3074 w
(is) 1454 3074 w
(useful) 1564 3074 w
(to) 1868 3074 w
(let) 1990 3074 w
(both) 2136 3074 w
(parties) 2368 3074 w
(know) 2696 3074 w
(how) 2976 3074 w
(big) 3201 3074 w
(their) 3377 3074 w
(buffers) 3613 3074 w
(should) 3957 3074 w
(be) 566 3194 w
(for) 697 3194 w
(holding) 852 3194 w
(data) 1217 3194 w
(being) 1427 3194 w
(exchanged.) 1699 3194 w
(The) 816 3350 w
(second) 1017 3350 w
(request) 1352 3350 w
(sent) 1699 3350 w
(by) 1907 3350 w
(Plan) 2048 3350 w
(9) 2275 3350 w
(was) 2362 3350 w
11 /Courier f
(Tauth) 2564 3350 w
11 /Times-Roman f
(.) 2894 3350 w
(This) 2982 3350 w
(has) 3210 3350 w
(to) 3388 3350 w
(do) 3506 3350 w
(with) 3648 3350 w
(security,) 3876 3350 w
(which) 566 3470 w
(is) 869 3470 w
(discussed) 978 3470 w
(later.) 1434 3470 w
(The) 1691 3470 w
(purpose) 1896 3470 w
(of) 2278 3470 w
(the) 2404 3470 w
(message) 2573 3470 w
(is) 2979 3470 w
(to) 3088 3470 w
(convince) 3208 3470 w
(the) 3637 3470 w
(file) 3805 3470 w
(server) 3985 3470 w
(that) 566 3590 w
(the) 771 3590 w
(user) 945 3590 w
(mounting) 1167 3590 w
(the) 1630 3590 w
(file) 1804 3590 w
(tree) 1990 3590 w
(is) 2193 3590 w
(who) 2307 3590 w
(he) 2536 3590 w
(says) 2679 3590 w
(he) 2908 3590 w
(is.) 3051 3590 w
(In) 3221 3590 w
(this) 3352 3590 w
(case,) 3552 3590 w
11 /Courier f
(ramfs) 3807 3590 w
11 /Times-Roman f
(is) 4177 3590 w
(credulous) 566 3710 w
(and) 1035 3710 w
(does) 1236 3710 w
(not) 1480 3710 w
(need) 1664 3710 w
(any) 1913 3710 w
(proof) 2114 3710 w
(to) 2394 3710 w
(let) 2523 3710 w
(Plan) 2676 3710 w
(9) 2915 3710 w
(use) 3012 3710 w
(it,) 3200 3710 w
(so) 3332 3710 w
(it) 3472 3710 w
(replies) 3576 3710 w
(with) 3910 3710 w
(an) 4148 3710 w
(diagnostic) 566 3830 w
(message) 1056 3830 w
(that) 1465 3830 w
(states) 1668 3830 w
(that) 1950 3830 w
(there) 2153 3830 w
(is) 2409 3830 w
(no) 2521 3830 w
(need) 2669 3830 w
(for) 2914 3830 w
(authentication.) 3080 3830 w
(This) 3769 3830 w
(is) 4004 3830 w
(the) 4117 3830 w
11 /Courier f
(Rerror) 566 3950 w
11 /Times-Roman f
(message) 1010 3950 w
(that) 1429 3950 w
(you) 1641 3950 w
(see.) 1853 3950 w
(When) 2095 3950 w
(a) 2403 3950 w
(request) 2498 3950 w
(cannot) 2861 3950 w
(be) 3200 3950 w
(processed) 3350 3950 w
(or) 3828 3950 w
(causes) 3966 3950 w
(some) 566 4070 w
(error,) 844 4070 w
(the) 1130 4070 w
(file) 1311 4070 w
(server) 1504 4070 w
(does) 1817 4070 w
(not) 2065 4070 w
(send) 2253 4070 w
(its) 2501 4070 w
(corresponding) 2653 4070 w
(reply) 3327 4070 w
(message) 3599 4070 w
(back.) 4017 4070 w
(Instead,) 566 4190 w
(it) 951 4190 w
(sends) 1054 4190 w
(an) 1339 4190 w
11 /Courier f
(Rerror) 1483 4190 w
11 /Times-Roman f
(message) 1920 4190 w
(to) 2332 4190 w
(the) 2459 4190 w
(client) 2634 4190 w
(that) 2919 4190 w
(both) 3125 4190 w
(indicates) 3362 4190 w
(the) 3792 4190 w
(failure) 3966 4190 w
(and) 566 4310 w
(explains) 762 4310 w
(its) 1166 4310 w
(cause.) 1309 4310 w
(The) 1617 4310 w
(explanation) 1825 4310 w
(is) 2375 4310 w
(just) 2487 4310 w
(an) 2685 4310 w
(string,) 2826 4310 w
(sent) 3143 4310 w
(in) 3358 4310 w
(the) 3482 4310 w
11 /Courier f
(ename) 3654 4310 w
11 /Times-Roman f
(field.) 4022 4310 w
(The) 566 4430 w
(error) 764 4430 w
(was) 1003 4430 w
11 /Courier f
(auth not required) 1201 4430 w
11 /Times-Roman f
(in) 2351 4430 w
(this) 2465 4430 w
(case.) 2653 4430 w
(The) 816 4586 w
(first) 1020 4586 w
(two) 1231 4586 w
(requests) 1430 4586 w
(were) 1824 4586 w
(just) 2070 4586 w
(establishing) 2265 4586 w
(a) 2826 4586 w
(9P) 2909 4586 w
(conversation) 3061 4586 w
(between) 3656 4586 w
(both) 4055 4586 w
(parties.) 566 4706 w
(The) 929 4706 w
(third) 1142 4706 w
(one,) 1393 4706 w
11 /Courier f
(Tattach) 1622 4706 w
11 /Times-Roman f
(,) 2084 4706 w
(was) 2155 4706 w
(the) 2368 4706 w
(one) 2545 4706 w
(used) 2746 4706 w
(by) 2990 4706 w
(Plan) 3142 4706 w
(9) 3380 4706 w
(to) 3477 4706 w
(mount) 3605 4706 w
(the) 3929 4706 w
(file) 4105 4706 w
(tree:) 566 4826 w
10 /Courier f
(<\25512\255 Tattach tag 16 fid 435 afid \2551 uname nemo aname) 786 4996 w
(\25512\255> Rattach tag 16 qid \(0000000000000000 0 d\)) 786 5106 w
11 /Times-Roman f
(The) 566 5322 w
(attach) 767 5322 w
(request) 1059 5322 w
(lets) 1406 5322 w
(Plan) 1590 5322 w
(9) 1817 5322 w
(obtain) 1903 5322 w
(a) 2209 5322 w
(reference) 2288 5322 w
(to) 2722 5322 w
(the) 2839 5322 w
(root) 3004 5322 w
(of) 3212 5322 w
(the) 3334 5322 w
(file) 3499 5322 w
(tree) 3677 5322 w
(from) 3872 5322 w
(the) 4117 5322 w
(server.) 566 5442 w
(The) 891 5442 w
(field) 1092 5442 w
11 /Courier f
(uname) 1324 5442 w
11 /Times-Roman f
(tells) 1684 5442 w
(the) 1898 5442 w
(file) 2062 5442 w
(server) 2238 5442 w
(which) 2534 5442 w
(user) 2832 5442 w
(is) 3044 5442 w
(attaching) 3148 5442 w
(to) 3580 5442 w
(the) 3696 5442 w
(tree.) 3860 5442 w
(The) 4081 5442 w
(field) 566 5562 w
11 /Courier f
(aname) 797 5562 w
11 /Times-Roman f
(tells) 1157 5562 w
(to) 1371 5562 w
(which) 1487 5562 w
(file) 1785 5562 w
(tree) 1961 5562 w
(in) 2154 5562 w
(the) 2270 5562 w
(server) 2434 5562 w
(we) 2730 5562 w
(are) 2887 5562 w
(attaching.) 3049 5562 w
(It) 3509 5562 w
(corresponds) 3606 5562 w
(to) 4165 5562 w
(the) 566 5682 w
(last) 737 5682 w
(\(optional\)) 927 5682 w
(argument) 1397 5682 w
(for) 1848 5682 w
11 /Courier f
(mount) 2012 5682 w
11 /Times-Roman f
(.) 2342 5682 w
(In) 2435 5682 w
(this) 2562 5682 w
(case,) 2758 5682 w
(the) 3009 5682 w
(empty) 3179 5682 w
(string) 3490 5682 w
(is) 3777 5682 w
(the) 3887 5682 w
(con\255) 4057 5682 w
(ventional) 566 5802 w
(name) 1003 5802 w
(for) 1268 5802 w
(the) 1423 5802 w
(main) 1585 5802 w
(file) 1833 5802 w
(server's) 2007 5802 w
(tree.) 2380 5802 w
(How) 816 5958 w
(can) 1074 5958 w
(Plan) 1270 5958 w
(9) 1511 5958 w
(obtain) 1611 5958 w
(a) 1931 5958 w
(reference) 2024 5958 w
(to) 2472 5958 w
(a) 2603 5958 w
(file) 2697 5958 w
(in) 2889 5958 w
(the) 3021 5958 w
(server?) 3201 5958 w
(References) 3589 5958 w
(are) 4119 5958 w
(pointers,) 566 6078 w
(which) 977 6078 w
(point) 1274 6078 w
(into) 1530 6078 w
(memory,) 1731 6078 w
(and) 2154 6078 w
(cannot) 2341 6078 w
(cross) 2662 6078 w
(the) 2916 6078 w
(network!) 3079 6078 w
(Numbers,) 3531 6078 w
(called) 3990 6078 w
11 /Times-Bold f
(fids) 566 6198 w
11 /Times-Roman f
(\(or) 766 6198 w
(file) 921 6198 w
(identifiers\)) 1095 6198 w
(are) 1604 6198 w
(used) 1764 6198 w
(to) 1993 6198 w
(do) 2108 6198 w
(that.) 2247 6198 w
(The) 2469 6198 w
(point) 2668 6198 w
(is) 2924 6198 w
(that) 3027 6198 w
(both) 3221 6198 w
(Plan) 3446 6198 w
(9) 3671 6198 w
(and) 3755 6198 w
(the) 3942 6198 w
(file) 4105 6198 w
(server) 566 6318 w
(may) 884 6318 w
(agree) 1124 6318 w
(that) 1410 6318 w
(a) 1626 6318 w
(particular) 1725 6318 w
(fid) 2195 6318 w
(number) 2368 6318 w
(identifies) 2754 6318 w
(a) 3214 6318 w
(particular) 3313 6318 w
(file) 3783 6318 w
(in) 3980 6318 w
(the) 4117 6318 w
cleartomark
showpage
saveobj restore
%%EndPage: 8 8
%%Page: 9 9
/saveobj save def
mark
9 pagesetup
11 /Times-Roman f
(\255 9 \255) 2317 413 w
(server.) 566 686 w
(As) 816 842 w
(figure) 975 842 w
([[!attach) 1273 842 w
(fid!]]) 1679 842 w
(and) 1946 842 w
(the) 2141 842 w
(attach) 2313 842 w
(messages) 2612 842 w
(above) 3064 842 w
(show,) 3363 842 w
(Plan) 3661 842 w
(9) 3895 842 w
(sent) 3988 842 w
(a) 4203 842 w
(fid) 566 962 w
(number) 717 962 w
(in) 1081 962 w
11 /Courier f
(Tattach) 1196 962 w
11 /Times-Roman f
(.) 1658 962 w
(It) 1743 962 w
(was) 1839 962 w
(435.) 2038 962 w
(Which) 2259 962 w
(number) 2579 962 w
(it) 2942 962 w
(was,) 3032 962 w
(it) 3258 962 w
(does) 3348 962 w
(not) 3577 962 w
(matter.) 3746 962 w
(It) 4082 962 w
(is) 4177 962 w
(just) 566 1082 w
(a) 759 1082 w
(number) 840 1082 w
(proposed) 1208 1082 w
(as) 1643 1082 w
(a) 1767 1082 w
(fid) 1848 1082 w
(\(i.e.,) 2003 1082 w
(a) 2236 1082 w
(file) 2318 1082 w
(identifier,) 2498 1082 w
(or) 2962 1082 w
(a) 3087 1082 w
(file) 3169 1082 w
(reference\)) 3349 1082 w
(by) 3822 1082 w
(Plan) 3966 1082 w
(9) 4196 1082 w
(to) 566 1202 w
(the) 703 1202 w
(file) 888 1202 w
(server.) 1085 1202 w
(After) 1458 1202 w
(the) 1739 1202 w
(server) 1924 1202 w
(accepts) 2241 1202 w
(the) 2613 1202 w
(attach) 2798 1202 w
(request,) 3110 1202 w
(and) 3505 1202 w
(replies) 3713 1202 w
(with) 4055 1202 w
11 /Courier f
(Rattach) 566 1322 w
11 /Times-Roman f
(,) 1028 1322 w
(both) 1085 1322 w
(Plan) 1310 1322 w
(9) 1535 1322 w
(and) 1619 1322 w
(the) 1806 1322 w
(server) 1969 1322 w
(agree) 2264 1322 w
(that) 2528 1322 w
(the) 2722 1322 w
(fid) 2885 1322 w
(proposed) 3036 1322 w
(will) 3467 1322 w
(now) 3668 1322 w
(be) 3886 1322 w
(a) 4018 1322 w
(ref\255) 4095 1322 w
(erence) 566 1442 w
(to) 891 1442 w
(the) 1018 1442 w
(root) 1193 1442 w
(of) 1411 1442 w
(the) 1543 1442 w
(file) 1718 1442 w
(tree) 1905 1442 w
(mounted.) 2109 1442 w
(So,) 2563 1442 w
(from) 2749 1442 w
(now) 3003 1442 w
(on,) 3233 1442 w
(the) 3412 1442 w
(fid) 3587 1442 w
(435) 3750 1442 w
(can) 3956 1442 w
(be) 4148 1442 w
(used) 566 1562 w
(in) 795 1562 w
(other) 909 1562 w
(9P) 1162 1562 w
(requests) 1307 1562 w
(to) 1694 1562 w
(mean) 1808 1562 w
11 /Courier f
(/) 2073 1562 w
11 /Times-Roman f
(within) 2167 1562 w
(the) 2477 1562 w
(file) 2639 1562 w
(server.) 2813 1562 w
916 2433 916 2150 Dl
916 2150 1342 2150 Dl
1343 2150 1343 2433 Dl
1343 2433 917 2433 Dl
10 /Times-Roman f
(Chan for) 954 2252 w
10 /Courier f
(/n/ram) 950 2372 w
1343 2292 1626 2292 Dl
1569 2306 1625 2292 Dl
1569 2277 1625 2291 Dl
1626 2433 1626 2150 Dl
1626 2150 2194 2150 Dl
2194 2150 2194 2433 Dl
2194 2433 1626 2433 Dl
10 /Times-Roman f
(Chan for) 1735 2252 w
(fid 435) 1768 2372 w
10 /Times-Bold f
(/) 3430 2141 w
10 /Times-Roman f
(x) 3135 2482 w
(y) 3419 2482 w
(z) 3706 2482 w
3372 2209 3234 2375 Dl
3444 2235 3444 2348 Dl
3517 2209 3655 2375 Dl
2933 2292 1022 1022 De
10 /Times-Bold f
(Ramfs) 3306 1772 w
7 /Times-Roman f
(.) 2184 2295 w
(.) 2213 2295 w
(.) 2241 2295 w
(.) 2269 2295 w
(.) 2298 2295 w
(.) 2326 2295 w
(.) 2355 2295 w
(.) 2383 2295 w
(.) 2412 2295 w
(.) 2440 2295 w
(.) 2469 2295 w
(.) 2469 2295 w
(.) 2496 2289 w
(.) 2524 2284 w
(.) 2551 2278 w
(.) 2578 2272 w
(.) 2606 2267 w
(.) 2634 2261 w
(.) 2661 2256 w
(.) 2688 2251 w
(.) 2716 2245 w
(.) 2743 2240 w
(.) 2771 2234 w
(.) 2799 2228 w
(.) 2826 2223 w
(.) 2853 2218 w
(.) 2881 2212 w
(.) 2908 2207 w
(.) 2936 2201 w
(.) 2963 2196 w
(.) 2991 2190 w
(.) 3018 2184 w
(.) 3046 2179 w
(.) 3074 2174 w
(.) 3101 2168 w
(.) 3128 2163 w
(.) 3156 2157 w
(.) 3183 2151 w
(.) 3210 2146 w
(.) 3238 2141 w
(.) 3266 2135 w
(.) 3293 2130 w
(.) 3321 2124 w
3278 2146 3330 2121 Dl
3272 2118 3330 2120 Dl
10 /Times-Roman f
(fid 435) 2619 2227 w
860 2718 860 1980 Dl
860 1979 2279 1979 Dl
2279 1979 2279 2717 Dl
2279 2718 860 2718 Dl
10 /Times-Bold f
(Plan 9) 1434 2880 w
10 /Times-Roman f
(Mount table entry) 1130 2135 w
11 /Times-Roman f
(The) 816 3236 w
(figure) 1023 3236 w
(depicts) 1321 3236 w
(the) 1669 3236 w
(scenario) 1840 3236 w
(after) 2241 3236 w
(completing) 2477 3236 w
(the) 3009 3236 w
11 /Courier f
(mount) 3180 3236 w
11 /Times-Roman f
(system) 3547 3236 w
(call) 3890 3236 w
(that) 4086 3236 w
(issued) 566 3356 w
(the) 898 3356 w
(attach) 1089 3356 w
(request.) 1407 3356 w
(There) 1808 3356 w
(is) 2119 3356 w
(a) 2250 3356 w
(new) 2355 3356 w
(entry) 2594 3356 w
(in) 2876 3356 w
(the) 3019 3356 w
(name) 3210 3356 w
(space) 3504 3356 w
(where) 3802 3356 w
(we) 4124 3356 w
(mounted) 566 3476 w
(the) 988 3476 w
(file) 1159 3476 w
(server.) 1342 3476 w
(The) 1674 3476 w
(new) 1882 3476 w
(entry) 2102 3476 w
(in) 2365 3476 w
(the) 2489 3476 w
(mount) 2661 3476 w
(table) 2981 3476 w
(says) 3232 3476 w
(that) 3459 3476 w
(whenever) 3662 3476 w
(we) 4124 3476 w
(reach) 566 3596 w
(the) 833 3596 w
(file) 999 3596 w
11 /Courier f
(/n/ram) 1177 3596 w
11 /Times-Roman f
(,) 1573 3596 w
(while) 1633 3596 w
(resolving) 1909 3596 w
(a) 2350 3596 w
(file) 2430 3596 w
(name,) 2608 3596 w
(we) 2905 3596 w
(should) 3064 3596 w
(continue) 3390 3596 w
(at) 3799 3596 w
(the) 3909 3596 w
(root) 4074 3596 w
(for) 566 3716 w
(the) 729 3716 w
(file) 899 3716 w
(server) 1081 3716 w
(instead.) 1383 3716 w
(As) 1786 3716 w
(we) 1944 3716 w
(saw) 2107 3716 w
(earlier,) 2313 3716 w
(a) 2655 3716 w
(Chan) 2739 3716 w
(is) 3007 3716 w
(the) 3117 3716 w
(data) 3288 3716 w
(structure) 3507 3716 w
(used) 3927 3716 w
(in) 4165 3716 w
(Plan) 566 3836 w
(9) 792 3836 w
(to) 877 3836 w
(refer) 992 3836 w
(to) 1225 3836 w
(a) 1340 3836 w
(file) 1417 3836 w
(in) 1592 3836 w
(a) 1707 3836 w
(particular) 1784 3836 w
(server.) 2232 3836 w
(The) 2555 3836 w
(Chan) 2754 3836 w
(identifies) 3015 3836 w
(the) 3453 3836 w
(file) 3616 3836 w
(server) 3791 3836 w
(that) 4086 3836 w
(contains) 566 3956 w
(the) 963 3956 w
(file,) 1128 3956 w
(and) 1333 3956 w
(also) 1522 3956 w
(includes) 1730 3956 w
(a) 2127 3956 w
(fid) 2206 3956 w
(number.) 2359 3956 w
(The) 2753 3956 w
(fid) 2954 3956 w
(is) 3107 3956 w
(used) 3212 3956 w
(when) 3444 3956 w
(speaking) 3712 3956 w
(9P) 4134 3956 w
(with) 566 4076 w
(the) 790 4076 w
(file) 952 4076 w
(server) 1126 4076 w
(containing) 1420 4076 w
(the) 1912 4076 w
(file,) 2074 4076 w
(to) 2276 4076 w
(identify) 2390 4076 w
(the) 2760 4076 w
(file.) 2922 4076 w
(Fids) 816 4232 w
(let) 1056 4232 w
(the) 1215 4232 w
(9P) 1398 4232 w
(client) 1564 4232 w
(refer) 1857 4232 w
(to) 2110 4232 w
(a) 2246 4232 w
(file) 2344 4232 w
(in) 2540 4232 w
(a) 2676 4232 w
(request) 2774 4232 w
(made) 3140 4232 w
(to) 3427 4232 w
(the) 3563 4232 w
(server.) 3747 4232 w
(But) 4091 4232 w
(another) 566 4352 w
(kind) 932 4352 w
(of) 1166 4352 w
(file) 1295 4352 w
(identifier) 1479 4352 w
(is) 1919 4352 w
(needed.) 2031 4352 w
(Consider) 2405 4352 w
(the) 2839 4352 w
(mount) 3010 4352 w
(table) 3329 4352 w
(entry) 3579 4352 w
(shown) 3841 4352 w
(in) 4165 4352 w
(the) 566 4472 w
(figure.) 732 4472 w
(It) 1081 4472 w
(says,) 1180 4472 w
11 /LucidaSansUnicode20 f
(\034) 1429 4472 w
11 /Times-Roman f
(when) 1470 4472 w
(you) 1740 4472 w
(get) 1938 4472 w
(to) 2105 4472 w
(a) 2224 4472 w
(file) 2305 4472 w
(that) 2484 4472 w
(is) 2682 4472 w
11 /Courier f
(/n/ram) 2789 4472 w
11 /Times-Roman f
(,) 3185 4472 w
(you) 3246 4472 w
(must) 3444 4472 w
(continue) 3692 4472 w
(at) 4103 4472 w
([) 4215 4472 w
(...) 566 4592 w
(]) 683 4592 w
11 /LucidaSansUnicode20 f
(\035) 719 4592 w
11 /Times-Roman f
(.) 760 4592 w
(How) 849 4592 w
(can) 1095 4592 w
(Plan) 1279 4592 w
(9) 1507 4592 w
(know) 1594 4592 w
(that) 1870 4592 w
(it) 2067 4592 w
(has) 2161 4592 w
(reached) 2339 4592 w
(the) 2709 4592 w
(file) 2875 4592 w
11 /Courier f
(/n/ram) 3053 4592 w
11 /Times-Roman f
(?) 3449 4592 w
(To) 3557 4592 w
(know) 3711 4592 w
(if) 3987 4592 w
(that) 4086 4592 w
(happens,) 566 4712 w
(Plan) 990 4712 w
(9) 1223 4712 w
(must) 1315 4712 w
(check) 1567 4712 w
(if) 1858 4712 w
(the) 1962 4712 w
(Chan) 2133 4712 w
(\(i.e.,) 2402 4712 w
(the) 2638 4712 w
(file\)) 2810 4712 w
(it) 3030 4712 w
(is) 3130 4712 w
(working) 3242 4712 w
(with) 3646 4712 w
(refers) 3880 4712 w
(to) 4165 4712 w
(the) 566 4832 w
(file) 734 4832 w
11 /Courier f
(/n/ram) 914 4832 w
11 /Times-Roman f
(.) 1310 4832 w
(Plan) 1400 4832 w
(9) 1630 4832 w
(needs) 1719 4832 w
(to) 2002 4832 w
(be) 2122 4832 w
(able) 2259 4832 w
(to) 2475 4832 w
(compare) 2595 4832 w
(two) 3005 4832 w
(Chans) 3203 4832 w
(for) 3511 4832 w
(equality,) 3671 4832 w
(that) 4086 4832 w
(is,) 566 4952 w
(to) 696 4952 w
(determine) 810 4952 w
(if) 1276 4952 w
(they) 1371 4952 w
(refer) 1588 4952 w
(to) 1820 4952 w
(the) 1934 4952 w
(same) 2096 4952 w
(file.) 2349 4952 w
(To) 816 5108 w
(help) 984 5108 w
(with) 1219 5108 w
(this,) 1461 5108 w
(other) 1695 5108 w
(type) 1966 5108 w
(of) 2201 5108 w
(file) 2338 5108 w
(identifiers,) 2530 5108 w
(called) 3049 5108 w
11 /Times-Bold f
(qids) 3356 5108 w
11 /Times-Roman f
(,) 3554 5108 w
(unequivocally) 3629 5108 w
(identify) 566 5228 w
(files) 942 5228 w
(within) 1165 5228 w
(a) 1481 5228 w
(file) 1563 5228 w
(server.) 1743 5228 w
(All) 2099 5228 w
(9P) 2274 5228 w
(file) 2425 5228 w
(servers) 2605 5228 w
(promise) 2947 5228 w
(that) 3334 5228 w
(each) 3532 5228 w
(file) 3764 5228 w
(will) 3943 5228 w
(be) 4148 5228 w
(assigned) 566 5348 w
(an) 983 5348 w
(unique) 1125 5348 w
(number,) 1463 5348 w
(called) 1865 5348 w
(its) 2165 5348 w
(qid.) 2309 5348 w
(Furthermore,) 2517 5348 w
(a) 3132 5348 w
(qid) 3219 5348 w
(used) 3399 5348 w
(for) 3639 5348 w
(a) 3805 5348 w
(file) 3893 5348 w
(will) 4079 5348 w
(not) 566 5468 w
(be) 742 5468 w
(used) 880 5468 w
(for) 1116 5468 w
(any) 1278 5468 w
(other) 1471 5468 w
(file) 1731 5468 w
(even) 1912 5468 w
(after) 2152 5468 w
(the) 2385 5468 w
(file) 2553 5468 w
(is) 2733 5468 w
(removed.) 2841 5468 w
(So,) 3286 5468 w
(two) 3465 5468 w
(files) 3664 5468 w
(with) 3887 5468 w
(the) 4117 5468 w
(same) 566 5588 w
(qid) 819 5588 w
(within) 988 5588 w
(the) 1298 5588 w
(same) 1460 5588 w
(file) 1713 5588 w
(server) 1887 5588 w
(are) 2181 5588 w
(the) 2341 5588 w
(same) 2503 5588 w
(file.) 2756 5588 w
(Otherwise,) 2958 5588 w
(files) 3464 5588 w
(are) 3681 5588 w
(different.) 3841 5588 w
(Each) 816 5744 w
(Chan) 1082 5744 w
(contains) 1362 5744 w
(the) 1776 5744 w
(qid) 1958 5744 w
(for) 2147 5744 w
(the) 2322 5744 w
(file) 2504 5744 w
(it) 2698 5744 w
(refers) 2808 5744 w
(to.) 3103 5744 w
(In) 3265 5744 w
(our) 3404 5744 w
(9P) 3599 5744 w
(dialog,) 3765 5744 w
(the) 4117 5744 w
11 /Courier f
(Rattach) 566 5864 w
11 /Times-Roman f
(message) 1059 5864 w
(sent) 1460 5864 w
(a) 1667 5864 w
11 /Courier f
(qid) 1745 5864 w
11 /Times-Roman f
(back) 1973 5864 w
(to) 2209 5864 w
(the) 2325 5864 w
(client,) 2489 5864 w
(and) 2791 5864 w
(Plan) 2979 5864 w
(9) 3205 5864 w
(knows) 3290 5864 w
(which) 3607 5864 w
(qid) 3905 5864 w
(cor\255) 4076 5864 w
(responds) 566 5984 w
(to) 997 5984 w
(the) 1124 5984 w
11 /Courier f
(/) 1299 5984 w
11 /Times-Roman f
(of) 1406 5984 w
(our) 1538 5984 w
11 /Courier f
(ramfs) 1725 5984 w
11 /Times-Roman f
(file) 2096 5984 w
(tree.) 2283 5984 w
(If) 2543 5984 w
(you) 2656 5984 w
(look) 2862 5984 w
(back) 3099 5984 w
(to) 3346 5984 w
(see) 3473 5984 w
(the) 3653 5984 w
11 /Courier f
(Dir) 3829 5984 w
11 /Times-Roman f
(data) 4069 5984 w
(structure) 566 6104 w
(returned) 985 6104 w
(by) 1385 6104 w
11 /Courier f
(dirstat) 1531 6104 w
11 /Times-Roman f
(,) 1993 6104 w
(with) 2057 6104 w
(attributes) 2288 6104 w
(for) 2732 6104 w
(a) 2894 6104 w
(file,) 2977 6104 w
(you) 3186 6104 w
(will) 3386 6104 w
(see) 3593 6104 w
(that) 3767 6104 w
(one) 3967 6104 w
(of) 4160 6104 w
(the) 566 6224 w
(fields) 728 6224 w
(is) 1000 6224 w
(a) 1102 6224 w
11 /Courier f
(Qid) 1178 6224 w
11 /Times-Roman f
(.) 1376 6224 w
cleartomark
showpage
saveobj restore
%%EndPage: 9 9
%%Page: 10 10
/saveobj save def
mark
10 pagesetup
11 /Times-Roman f
(\255 10 \255) 2289 413 w
(We) 816 686 w
(said) 1001 686 w
(that) 1212 686 w
(a) 1411 686 w
(qid) 1493 686 w
(is) 1669 686 w
(a) 1778 686 w
(number.) 1861 686 w
(But) 2259 686 w
(a) 2454 686 w
(qid) 2537 686 w
(is) 2713 686 w
(indeed) 2822 686 w
(a) 3149 686 w
(tiny) 3232 686 w
(structure) 3439 686 w
(that) 3857 686 w
(con\255) 4057 686 w
(tains) 566 806 w
(three) 802 806 w
(numbers.) 1048 806 w
10 /Courier f
(typedef) 786 976 w
(struct Qid) 786 1086 w
({) 786 1196 w
(uvlong) 1266 1306 w
(path;) 1746 1306 w
(ulong) 1266 1416 w
(vers;) 1746 1416 w
(uchar) 1266 1526 w
(type;) 1746 1526 w
(} Qid;) 786 1636 w
11 /Times-Roman f
(The) 566 1852 w
11 /Courier f
(path) 764 1852 w
11 /Times-Roman f
(field) 1056 1852 w
(is) 1285 1852 w
(the) 1387 1852 w
(actual) 1549 1852 w
(value) 1838 1852 w
(for) 2103 1852 w
(the) 2259 1852 w
(qid,) 2422 1852 w
(the) 2620 1852 w
(unique) 2783 1852 w
(number) 3111 1852 w
(for) 3475 1852 w
(the) 3631 1852 w
(file) 3794 1852 w
(within) 3969 1852 w
(its) 566 1972 w
(file) 702 1972 w
(server.) 879 1972 w
(Beware,) 1204 1972 w
(this) 1596 1972 w
(is) 1787 1972 w
(not) 1892 1972 w
(a) 2064 1972 w
(string) 2143 1972 w
(with) 2425 1972 w
(a) 2652 1972 w
(file) 2731 1972 w
(name,) 2908 1972 w
(but) 3204 1972 w
(it) 3376 1972 w
(identifies) 3469 1972 w
(a) 3909 1972 w
(file) 3988 1972 w
(in) 4165 1972 w
(the) 566 2092 w
(file) 730 2092 w
(server) 907 2092 w
(and) 1204 2092 w
(that) 1393 2092 w
(is) 1589 2092 w
(the) 1694 2092 w
(reason) 1859 2092 w
(for) 2175 2092 w
(calling) 2333 2092 w
(it) 2663 2092 w
11 /Courier f
(path) 2756 2092 w
11 /Times-Roman f
(.) 3020 2092 w
(The) 3107 2092 w
11 /Courier f
(vers) 3308 2092 w
11 /Times-Roman f
(field) 3603 2092 w
(is) 3835 2092 w
(a) 3940 2092 w
(num\255) 4019 2092 w
(ber) 566 2212 w
(that) 734 2212 w
(represents) 928 2212 w
(the) 1400 2212 w
(version) 1563 2212 w
(for) 1915 2212 w
(the) 2071 2212 w
(file.) 2234 2212 w
(It) 2437 2212 w
(is) 2533 2212 w
(incremented) 2636 2212 w
(by) 3206 2212 w
(the) 3345 2212 w
(file) 3508 2212 w
(server) 3683 2212 w
(when\255) 3978 2212 w
(ever) 566 2332 w
(the) 790 2332 w
(file) 961 2332 w
(is) 1144 2332 w
(updated.) 1255 2332 w
(This) 1667 2332 w
(is) 1900 2332 w
(useful) 2011 2332 w
(to) 2316 2332 w
(let) 2439 2332 w
(Plan) 2586 2332 w
(9) 2819 2332 w
(know) 2911 2332 w
(if) 3192 2332 w
(a) 3296 2332 w
(cached) 3381 2332 w
(file) 3721 2332 w
(is) 3905 2332 w
(up) 4017 2332 w
(to) 4165 2332 w
(date) 566 2452 w
(or) 787 2452 w
(not.) 917 2452 w
(It) 1125 2452 w
(is) 1231 2452 w
(also) 1344 2452 w
(useful) 1560 2452 w
(to) 1867 2452 w
(let) 1992 2452 w
(applications) 2141 2452 w
(know) 2710 2452 w
(if) 2992 2452 w
(a) 3097 2452 w
(file) 3183 2452 w
(has) 3367 2452 w
(changed) 3551 2452 w
(or) 3953 2452 w
(not.) 4082 2452 w
(The) 566 2572 w
(field) 774 2572 w
11 /Courier f
(type) 1014 2572 w
11 /Times-Roman f
(contains) 1317 2572 w
(bits) 1722 2572 w
(that) 1921 2572 w
(are) 2125 2572 w
(set) 2296 2572 w
(to) 2457 2572 w
(indicate) 2582 2572 w
(the) 2968 2572 w
(type) 3141 2572 w
(for) 3369 2572 w
(a) 3535 2572 w
(file,) 3622 2572 w
(including) 3835 2572 w
(these) 566 2692 w
(ones:) 819 2692 w
8 /Courier f
(#define QTDIR) 786 2862 w
(0x80) 1602 2862 w
(/* type bit for directories */) 2226 2862 w
(#define QTAPPEND 0x40) 786 2972 w
(/* type bit for append only files */) 2226 2972 w
(#define QTEXCL) 786 3082 w
(0x20) 1602 3082 w
(/* type bit for exclusive use files */) 2226 3082 w
11 /Times-Roman f
(For) 566 3298 w
(example,) 760 3298 w
(the) 1200 3298 w
11 /Courier f
(QTDIR) 1375 3298 w
11 /Times-Roman f
(bit) 1746 3298 w
(is) 1904 3298 w
(set) 2020 3298 w
(in) 2184 3298 w
11 /Courier f
(Qid.type) 2312 3298 w
11 /Times-Roman f
(for) 2882 3298 w
(directories,) 3051 3298 w
(unset) 3583 3298 w
(for) 3857 3298 w
(other) 4026 3298 w
(files.) 566 3418 w
(The) 823 3418 w
11 /Courier f
(QTAPPEND) 1033 3418 w
11 /Times-Roman f
(bit) 1601 3418 w
(is) 1758 3418 w
(set) 1872 3418 w
(for) 2034 3418 w
(append\255only) 2201 3418 w
(files.) 2789 3418 w
(The) 3046 3418 w
11 /Courier f
(QTEXCL) 3256 3418 w
11 /Times-Roman f
(bit) 3692 3418 w
(is) 3849 3418 w
(set) 3963 3418 w
(for) 4124 3418 w
(files) 566 3538 w
(with) 793 3538 w
(the) 1027 3538 w
(exclusive) 1199 3538 w
(use) 1652 3538 w
(permission) 1837 3538 w
(set) 2359 3538 w
(\(files) 2520 3538 w
(that) 2784 3538 w
(can) 2988 3538 w
(be) 3178 3538 w
(open) 3320 3538 w
(by) 3572 3538 w
(at) 3721 3538 w
(most) 3839 3538 w
(one) 4093 3538 w
(process) 566 3658 w
(at) 954 3658 w
(the) 1093 3658 w
(same) 1287 3658 w
(time\).) 1572 3658 w
(Looking) 1919 3658 w
(back) 2351 3658 w
(to) 2616 3658 w
(the) 2761 3658 w
11 /Courier f
(Rattach) 2954 3658 w
11 /Times-Roman f
(message) 3475 3658 w
(sent) 3905 3658 w
(by) 4141 3658 w
11 /Courier f
(ramfs) 566 3778 w
11 /Times-Roman f
(,) 896 3778 w
(its) 956 3778 w
(root) 1093 3778 w
(directory) 1302 3778 w
(has) 1729 3778 w
(a) 1907 3778 w
(qid) 1987 3778 w
(whose) 2160 3778 w
11 /Courier f
(path) 2472 3778 w
11 /Times-Roman f
(was) 2768 3778 w
11 /Courier f
(0000000000000000) 2971 3778 w
11 /Times-Roman f
(,) 4027 3778 w
(i.e.,) 4088 3778 w
11 /Courier f
(0) 566 3898 w
11 /Times-Roman f
(.) 632 3898 w
(Its) 716 3898 w
(version) 854 3898 w
(was) 1205 3898 w
11 /Courier f
(0) 1403 3898 w
11 /Times-Roman f
(,) 1469 3898 w
(and) 1525 3898 w
(it) 1711 3898 w
(had) 1801 3898 w
(the) 1987 3898 w
11 /Courier f
(QTDIR) 2149 3898 w
11 /Times-Roman f
(bit) 2507 3898 w
(set) 2652 3898 w
(\(printed) 2802 3898 w
(as) 3177 3898 w
(a) 3296 3898 w
11 /Courier f
(d) 3372 3898 w
11 /Times-Roman f
(\).) 3438 3898 w
(In) 816 4054 w
(the) 946 4054 w
(figure) 1119 4054 w
([[!attach) 1419 4054 w
(fid!]]) 1827 4054 w
(we) 2096 4054 w
(assumed) 2262 4054 w
(that) 2679 4054 w
(the) 2883 4054 w
(file) 3057 4054 w
(tree) 3243 4054 w
(served) 3446 4054 w
(by) 3771 4054 w
11 /Courier f
(ramfs) 3921 4054 w
11 /Times-Roman f
(had) 566 4174 w
(three) 757 4174 w
(files) 1008 4174 w
(in) 1230 4174 w
(its) 1349 4174 w
(root) 1487 4174 w
(directory.) 1697 4174 w
(Before) 2153 4174 w
(continuing,) 2483 4174 w
(we) 3015 4174 w
(are) 3175 4174 w
(going) 3340 4174 w
(to) 3624 4174 w
(create) 3742 4174 w
(three) 4033 4174 w
(such) 566 4294 w
(empty) 795 4294 w
(files) 1098 4294 w
(using) 1315 4294 w
(this) 1582 4294 w
(command:) 1770 4294 w
10 /Courier f
(; touch /n/ram/^\(x y z\)) 786 4464 w
10 /Times-Italic f
(...9P dialog omitted...) 786 4574 w
10 /Courier f
(;) 786 4684 w
11 /Times-Roman f
(What) 566 4900 w
(would) 831 4900 w
(now) 1134 4900 w
(happen) 1351 4900 w
(if) 1695 4900 w
(we) 1790 4900 w
(write) 1945 4900 w
(the) 2198 4900 w
(string) 2360 4900 w
11 /Courier f
(hello) 2639 4900 w
11 /Times-Roman f
(to) 2997 4900 w
11 /Courier f
(/n/ram/x) 3112 4900 w
11 /Times-Roman f
(?) 3640 4900 w
(We) 3745 4900 w
(can) 3925 4900 w
(use) 4105 4900 w
11 /Courier f
(echo) 566 5020 w
11 /Times-Roman f
(to) 860 5020 w
(do) 976 5020 w
(it.) 1116 5020 w
(The) 1236 5020 w
(shell) 1436 5020 w
(will) 1674 5020 w
(open) 1876 5020 w
11 /Courier f
(/n/ram/x) 2119 5020 w
11 /Times-Roman f
(for) 2677 5020 w
(writing,) 2834 5020 w
(and) 3210 5020 w
11 /Courier f
(echo) 3398 5020 w
11 /Times-Roman f
(will) 3691 5020 w
(write) 3892 5020 w
(its) 4146 5020 w
(argument) 566 5140 w
(to) 1034 5140 w
(the) 1174 5140 w
(file.) 1362 5140 w
(This) 1591 5140 w
(is) 1842 5140 w
(the) 1971 5140 w
(9P) 2160 5140 w
(conversation) 2332 5140 w
(spoken) 2947 5140 w
(between) 3313 5140 w
(Plan) 3732 5140 w
(9) 3983 5140 w
(and) 4093 5140 w
11 /Courier f
(ramfs) 566 5260 w
11 /Times-Roman f
(as) 924 5260 w
(a) 1043 5260 w
(result.) 1119 5260 w
cleartomark
showpage
saveobj restore
%%EndPage: 10 10
%%Page: 11 11
/saveobj save def
mark
11 pagesetup
11 /Times-Roman f
(\255 11 \255) 2289 413 w
10 /Courier f
(; echo \255n hola >/n/ram/x) 786 676 w
(<\25512\255 Twalk tag 14 fid 435 newfid 476 nwname 1 0:x) 786 786 w
(\25512\255> Rwalk tag 14 nwqid 1 0:\(0000000000000000 1 \)) 786 896 w
(<\25512\255 Topen tag 14 fid 476 mode 17) 786 1006 w
(\25512\255> Ropen tag 14 qid \(0000000000000000 1 \) iounit 0) 786 1116 w
(<\25512\255 Twrite tag 14 fid 476 offset 0 count 4 'hola') 786 1226 w
(\25512\255> Rwrite tag 14 count 4) 786 1336 w
(<\25512\255 Tclunk tag 14 fid 476) 786 1446 w
(\25512\255> Rclunk tag 14) 786 1556 w
11 /Times-Roman f
(First,) 566 1772 w
(Plan) 832 1772 w
(9) 1063 1772 w
(took) 1153 1772 w
(the) 1384 1772 w
(name) 1553 1772 w
11 /Courier f
(/n/ram/x) 1825 1772 w
11 /Times-Roman f
(and) 2388 1772 w
(tried) 2581 1772 w
(to) 2818 1772 w
(open) 2940 1772 w
(it) 3189 1772 w
(for) 3287 1772 w
(writing.) 3450 1772 w
(It) 3832 1772 w
(walked) 3935 1772 w
(the) 566 1892 w
(file) 731 1892 w
(tree) 908 1892 w
(using) 1102 1892 w
(the) 1372 1892 w
(name) 1537 1892 w
(space,) 1804 1892 w
(as) 2104 1892 w
(we) 2225 1892 w
(learned) 2382 1892 w
(before.) 2733 1892 w
(After) 3069 1892 w
(reaching) 3329 1892 w
11 /Courier f
(/n/ram) 3735 1892 w
11 /Times-Roman f
(,) 4131 1892 w
(it) 4189 1892 w
(knows) 566 2012 w
(it) 892 2012 w
(has) 993 2012 w
(to) 1178 2012 w
(continue) 1303 2012 w
(the) 1720 2012 w
(walk) 1893 2012 w
(at) 2145 2012 w
(the) 2263 2012 w
(root) 2436 2012 w
(for) 2652 2012 w
(our) 2818 2012 w
(file) 3003 2012 w
(server.) 3188 2012 w
(So,) 3521 2012 w
(Plan) 3705 2012 w
(9) 3941 2012 w
(must) 4036 2012 w
(walk) 566 2132 w
(to) 807 2132 w
(the) 921 2132 w
(file) 1083 2132 w
11 /Courier f
(/x) 1257 2132 w
11 /Times-Roman f
(of) 1417 2132 w
(the) 1536 2132 w
(file) 1698 2132 w
(server.) 1872 2132 w
(That) 2194 2132 w
(is) 2423 2132 w
(what) 2525 2132 w
11 /Courier f
(Twalk) 2766 2132 w
11 /Times-Roman f
(is) 3124 2132 w
(for.) 3226 2132 w
(The) 816 2288 w
(first) 1018 2288 w
(9P) 1227 2288 w
(request,) 1376 2288 w
11 /Courier f
(Twalk) 1752 2288 w
11 /Times-Roman f
(,) 2082 2288 w
(is) 2142 2288 w
(used) 2248 2288 w
(to) 2481 2288 w
(walk) 2599 2288 w
(the) 2844 2288 w
(file) 3010 2288 w
(tree) 3188 2288 w
(in) 3383 2288 w
11 /Courier f
(ramfs) 3501 2288 w
11 /Times-Roman f
(.) 3831 2288 w
(It) 3919 2288 w
(starts) 4019 2288 w
(walking) 566 2408 w
(from) 956 2408 w
(the) 1205 2408 w
(file) 1375 2408 w
(with) 1557 2408 w
(fid) 1789 2408 w
(435.) 1947 2408 w
(That) 2176 2408 w
(is) 2413 2408 w
(the) 2523 2408 w
(root) 2693 2408 w
(of) 2906 2408 w
(the) 3032 2408 w
(tree.) 3201 2408 w
(The) 3427 2408 w
(walk) 3632 2408 w
(message) 3880 2408 w
(contains) 566 2528 w
(a) 975 2528 w
(single) 1066 2528 w
(step,) 1372 2528 w
(walking) 1620 2528 w
(to) 2017 2528 w
11 /Courier f
(x) 2146 2528 w
11 /Times-Roman f
(,) 2212 2528 w
(relative) 2283 2528 w
(to) 2655 2528 w
(wherever) 2785 2528 w
(fid) 3234 2528 w
(435) 3400 2528 w
(points) 3609 2528 w
(to.) 3923 2528 w
(The) 4081 2528 w
(field) 566 2648 w
11 /Courier f
(nwname) 805 2648 w
11 /Times-Roman f
(contains) 1239 2648 w
(how) 1643 2648 w
(many) 1870 2648 w
(steps,) 2152 2648 w
(or) 2438 2648 w
(names,) 2566 2648 w
(to) 2911 2648 w
(walk.) 3034 2648 w
(Just) 3312 2648 w
(one) 3521 2648 w
(in) 3716 2648 w
(this) 3839 2648 w
(case.) 4036 2648 w
(The) 566 2768 w
(field) 767 2768 w
11 /Courier f
(wname) 1000 2768 w
11 /Times-Roman f
(in) 1362 2768 w
(the) 1480 2768 w
(message) 1646 2768 w
(is) 2049 2768 w
(an) 2155 2768 w
(array) 2290 2768 w
(with) 2545 2768 w
(that) 2773 2768 w
(number) 2970 2768 w
(of) 3337 2768 w
(names.) 3460 2768 w
(This) 3800 2768 w
(array) 4028 2768 w
(was) 566 2888 w
(printed) 768 2888 w
(in) 1111 2888 w
(the) 1229 2888 w
(right) 1395 2888 w
(part) 1635 2888 w
(of) 1837 2888 w
(the) 1960 2888 w
(line) 2126 2888 w
(for) 2322 2888 w
(the) 2480 2888 w
(message.) 2645 2888 w
(It) 3075 2888 w
(had) 3173 2888 w
(a) 3362 2888 w
(single) 3441 2888 w
(component,) 3735 2888 w
11 /Courier f
(wname[0]) 566 3008 w
11 /Times-Roman f
(,) 1094 3008 w
(containing) 1159 3008 w
(the) 1660 3008 w
(name) 1831 3008 w
11 /Courier f
(x) 2106 3008 w
11 /Times-Roman f
(.) 2172 3008 w
(If) 2266 3008 w
(the) 2376 3008 w
(file) 2548 3008 w
(exists,) 2732 3008 w
(and) 3049 3008 w
(there) 3245 3008 w
(is) 3501 3008 w
(no) 3613 3008 w
(problem) 3761 3008 w
(in) 4165 3008 w
(walking) 566 3128 w
(to) 954 3128 w
(it,) 1074 3128 w
(both) 1198 3128 w
(Plan) 1427 3128 w
(9) 1656 3128 w
(and) 1744 3128 w
(the) 1935 3128 w
(file) 2102 3128 w
(server) 2281 3128 w
(agree) 2580 3128 w
(that) 2848 3128 w
(the) 3046 3128 w
(fid) 3213 3128 w
(number) 3368 3128 w
(in) 3736 3128 w
11 /Courier f
(newfid) 3855 3128 w
11 /Times-Roman f
(\(476) 566 3248 w
(in) 813 3248 w
(this) 945 3248 w
(case\)) 1151 3248 w
(refers) 1420 3248 w
(to) 1713 3248 w
(the) 1845 3248 w
(resulting) 2025 3248 w
(file) 2456 3248 w
(after) 2648 3248 w
(the) 2894 3248 w
(walk.) 3075 3248 w
(The) 3363 3248 w
(reply) 3580 3248 w
(message,) 3852 3248 w
11 /Courier f
(Rwalk) 566 3368 w
11 /Times-Roman f
(,) 896 3368 w
(mentions) 956 3368 w
(the) 1392 3368 w
(qids) 1558 3368 w
(for) 1774 3368 w
(the) 1933 3368 w
(files) 2099 3368 w
(visited) 2320 3368 w
(during) 2645 3368 w
(the) 2963 3368 w
(walk.) 3128 3368 w
(After) 3400 3368 w
(this) 3661 3368 w
(message,) 3852 3368 w
(things) 566 3488 w
(stand) 864 3488 w
(as) 1124 3488 w
(shown) 1243 3488 w
(in) 1558 3488 w
(figure) 1672 3488 w
([[!fids) 1961 3488 w
(after) 2262 3488 w
(walking!]].) 2489 3488 w
860 4562 860 3844 Dl
860 3843 2242 3843 Dl
2242 3843 2242 4561 Dl
2242 4562 860 4562 Dl
10 /Times-Roman f
(Plan 9) 1425 4222 w
10 /Times-Bold f
(/) 3444 4057 w
10 /Times-Roman f
(x) 3157 4388 w
(y) 3433 4388 w
(z) 3712 4388 w
3387 4121 3253 4283 Dl
3458 4147 3458 4257 Dl
3529 4121 3663 4283 Dl
2960 4202 995 995 De
10 /Times-Bold f
(Ramfs) 3320 3697 w
7 /Times-Roman f
(.) 1651 4196 w
(.) 1678 4193 w
(.) 1706 4191 w
(.) 1734 4189 w
(.) 1761 4186 w
(.) 1789 4184 w
(.) 1816 4182 w
(.) 1845 4179 w
(.) 1872 4177 w
(.) 1900 4174 w
(.) 1927 4172 w
(.) 1955 4169 w
(.) 1983 4167 w
(.) 2010 4164 w
(.) 2038 4162 w
(.) 2066 4159 w
(.) 2093 4157 w
(.) 2121 4155 w
(.) 2148 4152 w
(.) 2176 4150 w
(.) 2204 4148 w
(.) 2231 4145 w
(.) 2259 4143 w
(.) 2287 4141 w
(.) 2315 4138 w
(.) 2342 4136 w
(.) 2370 4133 w
(.) 2398 4131 w
(.) 2425 4128 w
(.) 2453 4126 w
(.) 2480 4123 w
(.) 2508 4121 w
(.) 2536 4119 w
(.) 2563 4116 w
(.) 2591 4114 w
(.) 2619 4112 w
(.) 2647 4109 w
(.) 2674 4107 w
(.) 2701 4105 w
(.) 2729 4102 w
(.) 2757 4100 w
(.) 2785 4097 w
(.) 2812 4095 w
(.) 2840 4092 w
(.) 2868 4090 w
(.) 2895 4087 w
(.) 2923 4085 w
(.) 2950 4083 w
(.) 2979 4080 w
(.) 3006 4078 w
(.) 3033 4076 w
(.) 3061 4073 w
(.) 3089 4071 w
(.) 3117 4069 w
(.) 3144 4066 w
(.) 3172 4064 w
(.) 3200 4061 w
(.) 3227 4059 w
(.) 3255 4056 w
(.) 3282 4054 w
(.) 3310 4051 w
(.) 3338 4049 w
3294 4065 3348 4047 Dl
3292 4037 3348 4045 Dl
10 /Times-Roman f
(fid 435) 2361 4140 w
7 /Times-Roman f
(.) 1651 4216 w
(.) 1678 4219 w
(.) 1706 4222 w
(.) 1734 4225 w
(.) 1761 4228 w
(.) 1789 4231 w
(.) 1816 4234 w
(.) 1845 4236 w
(.) 1872 4239 w
(.) 1899 4242 w
(.) 1927 4244 w
(.) 1955 4247 w
(.) 1983 4250 w
(.) 2010 4253 w
(.) 2038 4256 w
(.) 2066 4259 w
(.) 2093 4262 w
(.) 2121 4265 w
(.) 2148 4267 w
(.) 2176 4270 w
(.) 2204 4273 w
(.) 2232 4275 w
(.) 2259 4278 w
(.) 2287 4281 w
(.) 2315 4284 w
(.) 2342 4287 w
(.) 2370 4290 w
(.) 2398 4293 w
(.) 2425 4295 w
(.) 2453 4298 w
(.) 2480 4301 w
(.) 2508 4304 w
(.) 2536 4306 w
(.) 2564 4309 w
(.) 2591 4312 w
(.) 2619 4315 w
(.) 2647 4318 w
(.) 2674 4321 w
(.) 2702 4324 w
(.) 2729 4326 w
(.) 2758 4329 w
(.) 2785 4332 w
(.) 2812 4335 w
(.) 2840 4337 w
(.) 2868 4340 w
(.) 2896 4343 w
(.) 2923 4346 w
(.) 2951 4349 w
(.) 2979 4352 w
(.) 3006 4355 w
(.) 3034 4357 w
(.) 3061 4360 w
3015 4365 3071 4358 Dl
3018 4338 3071 4357 Dl
10 /Times-Roman f
(fid 476) 2223 4305 w
11 /Times-Roman f
(After) 816 4934 w
(the) 1074 4934 w
(walk,) 1237 4934 w
(Plan) 1507 4934 w
(9) 1732 4934 w
(sent) 1816 4934 w
(a) 2022 4934 w
11 /Courier f
(Topen) 2099 4934 w
11 /Times-Roman f
(request) 2458 4934 w
(to) 2803 4934 w
(open) 2918 4934 w
(the) 3160 4934 w
(file.) 3323 4934 w
(Actually,) 3526 4934 w
(to) 3961 4934 w
(pre\255) 4076 4934 w
(pare) 566 5054 w
(the) 789 5054 w
(fid) 959 5054 w
(for) 1117 5054 w
(doing) 1280 5054 w
(further) 1567 5054 w
(reads) 1900 5054 w
(and) 2166 5054 w
(writes) 2360 5054 w
(on) 2663 5054 w
(it.) 2808 5054 w
(The) 2933 5054 w
(message) 3138 5054 w
(mentions) 3544 5054 w
(which) 3983 5054 w
(fid) 566 5174 w
(to) 726 5174 w
(open,) 850 5174 w
(476) 1129 5174 w
(in) 1332 5174 w
(this) 1456 5174 w
(case,) 1654 5174 w
(or) 1907 5174 w
11 /Courier f
(/x) 2036 5174 w
11 /Times-Roman f
(within) 2206 5174 w
(the) 2527 5174 w
(file) 2700 5174 w
(server.) 2885 5174 w
(It) 3218 5174 w
(also) 3324 5174 w
(mentions) 3540 5174 w
(which) 3983 5174 w
(mode) 566 5294 w
(to) 846 5294 w
(use.) 968 5294 w
(The) 1178 5294 w
(mode) 1384 5294 w
(corresponds) 1664 5294 w
(to) 2229 5294 w
(the) 2351 5294 w
(flags) 2521 5294 w
(given) 2770 5294 w
(to) 3050 5294 w
11 /Times-Italic f
(open) 3172 5294 w
11 /Times-Roman f
(\(2\),) 3385 5294 w
(or) 3576 5294 w
(to) 3702 5294 w
11 /Times-Italic f
(create) 3823 5294 w
11 /Times-Roman f
(\(2\).) 4096 5294 w
(The) 566 5414 w
(reply) 771 5414 w
(informs) 1032 5414 w
(about) 1410 5414 w
(the) 1690 5414 w
(qid) 1860 5414 w
(for) 2037 5414 w
(the) 2200 5414 w
(file) 2370 5414 w
(just) 2552 5414 w
(open.) 2748 5414 w
(Both) 3053 5414 w
(requests,) 3304 5414 w
11 /Courier f
(Twalk) 3727 5414 w
11 /Times-Roman f
(and) 4093 5414 w
11 /Courier f
(Topen) 566 5534 w
11 /Times-Roman f
(are) 924 5534 w
(the) 1084 5534 w
(result) 1246 5534 w
(of) 1518 5534 w
(the) 1637 5534 w
(system) 1799 5534 w
(call) 2133 5534 w
(made) 2319 5534 w
(from) 2584 5534 w
(the) 2825 5534 w
(shell) 2987 5534 w
(to) 3223 5534 w
(create) 3337 5534 w
(the) 3624 5534 w
(file.) 3786 5534 w
(Now) 816 5690 w
(its) 1062 5690 w
(time) 1200 5690 w
(for) 1429 5690 w
11 /Courier f
(echo) 1589 5690 w
11 /Times-Roman f
(to) 1886 5690 w
(write) 2005 5690 w
(to) 2263 5690 w
(the) 2382 5690 w
(file.) 2549 5690 w
(To) 2756 5690 w
(implement) 2911 5690 w
(the) 3415 5690 w
11 /Courier f
(write) 3582 5690 w
11 /Times-Roman f
(system) 3945 5690 w
(call,) 566 5810 w
(Plan) 793 5810 w
(9) 1030 5810 w
(sent) 1126 5810 w
(a) 1344 5810 w
11 /Courier f
(Twrite) 1432 5810 w
11 /Times-Roman f
(9P) 1868 5810 w
(request.) 2025 5810 w
(It) 2409 5810 w
(mentions) 2516 5810 w
(to) 2960 5810 w
(which) 3086 5810 w
(fid) 3394 5810 w
(to) 3556 5810 w
(write) 3682 5810 w
(\(which) 3947 5810 w
(must) 566 5930 w
(be) 820 5930 w
(open\),) 963 5930 w
(at) 1280 5930 w
(which) 1399 5930 w
(offset) 1707 5930 w
(to) 1996 5930 w
(write,) 2122 5930 w
(how) 2415 5930 w
(many) 2644 5930 w
(bytes,) 2928 5930 w
(and) 3228 5930 w
(the) 3426 5930 w
(bytes) 3600 5930 w
(to) 3872 5930 w
(write.) 3998 5930 w
(The) 566 6050 w
(reply,) 764 6050 w
11 /Courier f
(Rwrite) 1045 6050 w
11 /Times-Roman f
(,) 1441 6050 w
(indicates) 1497 6050 w
(how) 1915 6050 w
(many) 2132 6050 w
(bytes) 2404 6050 w
(were) 2664 6050 w
(written.) 2903 6050 w
(The) 816 6206 w
(last) 1014 6206 w
(request,) 1195 6206 w
11 /Courier f
(Tclunk) 1567 6206 w
11 /Times-Roman f
(,) 1963 6206 w
(releases) 2019 6206 w
(a) 2392 6206 w
(fid.) 2468 6206 w
(It) 2646 6206 w
(was) 2741 6206 w
(sent) 2939 6206 w
(when) 3144 6206 w
(the) 3409 6206 w
(file) 3571 6206 w
(was) 3745 6206 w
(closed,) 3943 6206 w
(after) 566 6326 w
11 /Courier f
(echo) 793 6326 w
11 /Times-Roman f
(exited) 1085 6326 w
(and) 1381 6326 w
(its) 1567 6326 w
(standard) 1700 6326 w
(output) 2099 6326 w
(was) 2409 6326 w
(closed.) 2607 6326 w
cleartomark
showpage
saveobj restore
%%EndPage: 11 11
%%Page: 12 12
/saveobj save def
mark
12 pagesetup
11 /Times-Roman f
(\255 12 \255) 2289 413 w
(The) 816 686 w
(dialog) 1032 686 w
(for) 1354 686 w
(reading) 1528 686 w
(a) 1903 686 w
(file) 1998 686 w
(would) 2191 686 w
(be) 2513 686 w
(similar.) 2663 686 w
(Of) 3044 686 w
(course,) 3206 686 w
(the) 3566 686 w
(open) 3747 686 w
(mode) 4007 686 w
(would) 566 806 w
(differ,) 869 806 w
(and) 1167 806 w
11 /Courier f
(Tread) 1353 806 w
11 /Times-Roman f
(will) 1711 806 w
(be) 1911 806 w
(used) 2042 806 w
(instead) 2271 806 w
(of) 2610 806 w
11 /Courier f
(Twrite) 2729 806 w
11 /Times-Roman f
(.) 3125 806 w
(Look) 3209 806 w
(this) 3469 806 w
(for) 3657 806 w
(example.) 3812 806 w
10 /Courier f
(; cat /n/ram/x) 786 976 w
(<\25512\255 Twalk tag 14 fid 435 newfid 486 nwname 1 0:x) 786 1086 w
(\25512\255> Rwalk tag 14 nwqid 1 0:\(0000000000000000 2 \)) 786 1196 w
(<\25512\255 Topen tag 14 fid 486 mode 0) 786 1306 w
(\25512\255> Ropen tag 14 qid \(0000000000000000 2 \) iounit 0) 786 1416 w
(<\25512\255 Tread tag 14 fid 486 offset 0 count 8192) 786 1526 w
(\25512\255> Rread tag 14 count 4 'hola') 786 1636 w
(hola<\25512\255 Tread tag 14 fid 486 offset 4 count 8192) 786 1746 w
(\25512\255> Rread tag 14 count 0 '') 786 1856 w
(<\25512\255 Tclunk tag 14 fid 486) 786 1966 w
(\25512\255> Rclunk tag 14) 786 2076 w
11 /Times-Roman f
(The) 566 2292 w
(program) 767 2292 w
11 /Courier f
(cat) 1169 2292 w
11 /Times-Roman f
(opens) 1398 2292 w
11 /Courier f
(/n/ram/x) 1685 2292 w
11 /Times-Roman f
(.) 2213 2292 w
(It) 2300 2292 w
(all) 2398 2292 w
(works) 2539 2292 w
(like) 2838 2292 w
(before.) 3034 2292 w
(The) 3371 2292 w
11 /Courier f
(Twalk) 3573 2292 w
11 /Times-Roman f
(request) 3935 2292 w
(manages) 566 2412 w
(to) 981 2412 w
(get) 1099 2412 w
(a) 1265 2412 w
(new) 1345 2412 w
(fid,) 1559 2412 w
(486,) 1741 2412 w
(referring) 1966 2412 w
(to) 2379 2412 w
(file) 2497 2412 w
11 /Courier f
(/x) 2675 2412 w
11 /Times-Roman f
(within) 2839 2412 w
(the) 3153 2412 w
(file) 3319 2412 w
(server.) 3497 2412 w
(However,) 3823 2412 w
(the) 566 2532 w
(following) 743 2532 w
11 /Courier f
(Topen) 1214 2532 w
11 /Times-Roman f
(opens) 1588 2532 w
(the) 1888 2532 w
(file) 2066 2532 w
(just) 2256 2532 w
(for) 2460 2532 w
(reading) 2631 2532 w
(\(mode) 3003 2532 w
(is) 3327 2532 w
(zero\).) 3445 2532 w
(Now,) 3768 2532 w
11 /Courier f
(cat) 4053 2532 w
11 /Times-Roman f
(calls) 566 2652 w
11 /Courier f
(read) 799 2652 w
11 /Times-Roman f
(,) 1063 2652 w
(to) 1123 2652 w
(read) 1241 2652 w
(a) 1460 2652 w
(chunk) 1540 2652 w
(of) 1840 2652 w
(bytes) 1963 2652 w
(from) 2227 2652 w
(the) 2472 2652 w
(file.) 2638 2652 w
(It) 2844 2652 w
(asked) 2943 2652 w
(for) 3223 2652 w
(reading) 3381 2652 w
(8192) 3740 2652 w
(bytes.) 3991 2652 w
(The) 566 2772 w
(reply,) 783 2772 w
11 /Courier f
(Rread) 1083 2772 w
11 /Times-Roman f
(,) 1413 2772 w
(sent) 1488 2772 w
(only) 1712 2772 w
(4) 1955 2772 w
(bytes) 2057 2772 w
(as) 2336 2772 w
(a) 2474 2772 w
(result.) 2569 2772 w
(At) 2888 2772 w
(this) 3046 2772 w
(point,) 3254 2772 w
(the) 3557 2772 w
(system) 3739 2772 w
(call) 4093 2772 w
11 /Courier f
(read) 566 2892 w
11 /Times-Roman f
(terminated) 871 2892 w
(and) 1381 2892 w
11 /Courier f
(cat) 1580 2892 w
11 /Times-Roman f
(printed) 1819 2892 w
(what) 2171 2892 w
(it) 2424 2892 w
(could) 2526 2892 w
(read,) 2810 2892 w
(the) 3065 2892 w
(file) 3239 2892 w
(contents.) 3425 2892 w
(The) 3859 2892 w
(pro\255) 4069 2892 w
(gram) 566 3012 w
(had) 836 3012 w
(to) 1039 3012 w
(call) 1170 3012 w
11 /Courier f
(read) 1373 3012 w
11 /Times-Roman f
(again,) 1682 3012 w
(and) 1992 3012 w
(this) 2195 3012 w
(time) 2400 3012 w
(there) 2641 3012 w
(was) 2904 3012 w
(nothing) 3119 3012 w
(else) 3501 3012 w
(to) 3716 3012 w
(read) 3848 3012 w
(\(the) 4081 3012 w
(number) 566 3132 w
(of) 929 3132 w
(bytes) 1048 3132 w
(in) 1308 3132 w
11 /Courier f
(Rread) 1422 3132 w
11 /Times-Roman f
(is) 1780 3132 w
(zero\).) 1882 3132 w
(So,) 2161 3132 w
11 /Courier f
(cat) 2334 3132 w
11 /Times-Roman f
(closed) 2560 3132 w
(the) 2868 3132 w
(file.) 3030 3132 w
(A) 816 3288 w
(file) 929 3288 w
(can) 1109 3288 w
(be) 1294 3288 w
(created) 1431 3288 w
(by) 1779 3288 w
(sending) 1924 3288 w
(a) 2301 3288 w
11 /Courier f
(Tcreate) 2384 3288 w
11 /Times-Roman f
(request) 2881 3288 w
(to) 3232 3288 w
(a) 3353 3288 w
(file) 3436 3288 w
(server.) 3617 3288 w
(This) 3946 3288 w
(is) 4177 3288 w
(the) 566 3408 w
(9P) 728 3408 w
(dialog) 873 3408 w
(for) 1176 3408 w
(creating) 1331 3408 w
(the) 1711 3408 w
(directory) 1873 3408 w
11 /Courier f
(/n/ram/a) 2296 3408 w
11 /Times-Roman f
(.) 2824 3408 w
10 /Courier f
(; mkdir /n/ram/a) 786 3578 w
(<\25512\255 Twalk tag 14 fid 435 newfid 458 nwname 1 0:a) 786 3688 w
(\25512\255> Rerror tag 14 ename file not found) 786 3798 w
(<\25512\255 Twalk tag 14 fid 435 newfid 474 nwname 1 0:a) 786 3908 w
(\25512\255> Rerror tag 14 ename file not found) 786 4018 w
(<\25512\255 Twalk tag 14 fid 435 newfid 474 nwname 0) 786 4128 w
(\25512\255> Rwalk tag 14 nwqid 0) 786 4238 w
(<\25512\255 Tcreate tag 14 fid 474 name a perm d\255rwxr\255xr\255x) 786 4348 w
(\25512\255> Rcreate tag 14 qid \(0000000000000003 0 d\) iounit 0) 786 4458 w
(<\25512\255 Tclunk tag 14 fid 474) 786 4568 w
(\25512\255> Rclunk tag 14) 786 4678 w
11 /Times-Roman f
(Plan) 566 4894 w
(9) 805 4894 w
(tried) 903 4894 w
(to) 1148 4894 w
(access) 1278 4894 w
11 /Courier f
(/n/ram/a) 1600 4894 w
11 /Times-Roman f
(several) 2172 4894 w
(times,) 2525 4894 w
(to) 2836 4894 w
(see) 2966 4894 w
(if) 3149 4894 w
(it) 3260 4894 w
(existed.) 3366 4894 w
(It) 3749 4894 w
(could) 3860 4894 w
(be) 4148 4894 w
11 /Courier f
(mkdir) 566 5014 w
11 /Times-Roman f
(,) 896 5014 w
(calling) 954 5014 w
11 /Courier f
(access) 1283 5014 w
11 /Times-Roman f
(,) 1679 5014 w
(or) 1737 5014 w
(Plan) 1858 5014 w
(9) 2084 5014 w
(itself.) 2169 5014 w
(It) 2447 5014 w
(does) 2544 5014 w
(not) 2774 5014 w
(really) 2944 5014 w
(matter.) 3222 5014 w
(What) 3559 5014 w
(matters) 3825 5014 w
(is) 4177 5014 w
(that) 566 5134 w
(the) 776 5134 w
(file) 955 5134 w
(server) 1146 5134 w
(replied) 1457 5134 w
(with) 1807 5134 w
11 /Courier f
(Rerror) 2049 5134 w
11 /Times-Roman f
(,) 2445 5134 w
(stating) 2519 5134 w
(that) 2859 5134 w
(there) 3070 5134 w
(was) 3334 5134 w
(an) 3550 5134 w
(error:) 3699 5134 w
11 /Courier f
(file) 3987 5134 w
(not) 566 5254 w
(found) 837 5254 w
11 /Times-Roman f
(.) 1167 5254 w
(Then,) 1258 5254 w
(a) 1546 5254 w
(last) 1629 5254 w
11 /Courier f
(Twalk) 1817 5254 w
11 /Times-Roman f
(was) 2182 5254 w
(issued) 2387 5254 w
(to) 2697 5254 w
(obtain) 2818 5254 w
(a) 3128 5254 w
(new) 3210 5254 w
(fid) 3426 5254 w
(referring) 3582 5254 w
(to) 3997 5254 w
(the) 4117 5254 w
(directory) 566 5374 w
(where) 998 5374 w
(the) 1301 5374 w
(file) 1472 5374 w
(is) 1655 5374 w
(being) 1766 5374 w
(created.) 2047 5374 w
(In) 2426 5374 w
(this) 2555 5374 w
(case,) 2753 5374 w
(the) 3006 5374 w
(fid) 3178 5374 w
(474) 3338 5374 w
(was) 3541 5374 w
(obtained) 3749 5374 w
(to) 4165 5374 w
(refer) 566 5494 w
(to) 806 5494 w
(the) 928 5494 w
(root) 1098 5494 w
(directory) 1311 5494 w
(in) 1742 5494 w
(the) 1864 5494 w
(file) 2034 5494 w
(server.) 2216 5494 w
(At) 2546 5494 w
(last) 2692 5494 w
11 /Courier f
(Tcreate) 2881 5494 w
11 /Times-Roman f
(asks) 3379 5494 w
(to) 3604 5494 w
(create) 3726 5494 w
(a) 4021 5494 w
(file) 4105 5494 w
(with) 566 5614 w
(the) 790 5614 w
(name) 952 5614 w
(indicated) 1217 5614 w
(in) 1647 5614 w
(the) 1761 5614 w
11 /Courier f
(name) 1923 5614 w
11 /Times-Roman f
(field,) 2215 5614 w
(i.e.,) 2472 5614 w
11 /Courier f
(a) 2663 5614 w
11 /Times-Roman f
(.) 2729 5614 w
(After) 2813 5614 w
(the) 3071 5614 w
(call,) 3233 5614 w
(the) 3447 5614 w
(fid) 3609 5614 w
(in) 3760 5614 w
(the) 3875 5614 w
(mes\255) 4038 5614 w
(sage) 566 5734 w
(refers) 789 5734 w
(to) 1065 5734 w
(the) 1180 5734 w
(newly) 1343 5734 w
(created) 1640 5734 w
(file,) 1983 5734 w
(and) 2186 5734 w
(it) 2373 5734 w
(is) 2463 5734 w
(open.) 2565 5734 w
(Because) 2834 5734 w
(we) 3226 5734 w
(are) 3381 5734 w
(creating) 3541 5734 w
(a) 3921 5734 w
(direc\255) 3997 5734 w
(tory,) 566 5854 w
(the) 807 5854 w
(bit) 977 5854 w
11 /Courier f
(DMDIR) 1130 5854 w
11 /Times-Roman f
(would) 1496 5854 w
(be) 1807 5854 w
(set) 1946 5854 w
(in) 2104 5854 w
(the) 2226 5854 w
11 /Courier f
(perm) 2396 5854 w
11 /Times-Roman f
(field,) 2696 5854 w
(along) 2961 5854 w
(with) 3241 5854 w
(other) 3473 5854 w
(file) 3734 5854 w
(permis\255) 3916 5854 w
(sions.) 566 5974 w
(This) 849 5974 w
(is) 1073 5974 w
(similar) 1175 5974 w
(to) 1509 5974 w
(what) 1623 5974 w
(we) 1864 5974 w
(did) 2019 5974 w
(when) 2188 5974 w
(using) 2453 5974 w
11 /Times-Italic f
(create) 2720 5974 w
11 /Times-Roman f
(\(2\).) 2993 5974 w
(There) 816 6130 w
(are) 1106 6130 w
(several) 1275 6130 w
(other) 1621 6130 w
(messages.) 1883 6130 w
(Removing) 2390 6130 w
(a) 2886 6130 w
(file) 2971 6130 w
(issues) 3154 6130 w
(a) 3454 6130 w
11 /Courier f
(Tremove) 3539 6130 w
11 /Times-Roman f
(mes\255) 4038 6130 w
(sage.) 566 6250 w
(The) 850 6250 w
11 /Courier f
(Tremove) 1053 6250 w
11 /Times-Roman f
(request) 1548 6250 w
(is) 1897 6250 w
(similar) 2004 6250 w
(to) 2343 6250 w
11 /Courier f
(Tclunk) 2462 6250 w
11 /Times-Roman f
(.) 2858 6250 w
(However,) 2947 6250 w
(it) 3408 6250 w
(also) 3503 6250 w
(removes) 3713 6250 w
(the) 4117 6250 w
cleartomark
showpage
saveobj restore
%%EndPage: 12 12
%%Page: 13 13
/saveobj save def
mark
13 pagesetup
11 /Times-Roman f
(\255 13 \255) 2289 413 w
(file) 566 686 w
(identified) 742 686 w
(by) 1193 686 w
(the) 1333 686 w
(fid.) 1497 686 w
11 /Courier f
(Tstat) 1705 686 w
11 /Times-Roman f
(obtains) 2065 686 w
(the) 2414 686 w
(attributes) 2579 686 w
(for) 3019 686 w
(a) 3177 686 w
(file.) 3256 686 w
11 /Courier f
(Twstat) 3489 686 w
11 /Times-Roman f
(updates) 3916 686 w
(them.) 566 806 w
10 /Courier f
(; rm /n/ram/y) 786 976 w
(<\25512\255 Twalk tag 14 fid 435 newfid 491 nwname 1 0:y) 786 1086 w
(\25512\255> Rwalk tag 14 nwqid 1 0:\(0000000000000001 0 \)) 786 1196 w
(<\25512\255 Tremove tag 14 fid 491) 786 1306 w
(\25512\255> Rremove tag 14) 786 1416 w
(; ls \255l /n/ram/z) 786 1646 w
(<\25512\255 Twalk tag 14 fid 435 newfid 458 nwname 1 0:z) 786 1756 w
(\25512\255> Rwalk tag 14 nwqid 1 0:\(0000000000000002 0 \)) 786 1866 w
(<\25512\255 Tstat tag 14 fid 458) 786 1976 w
(\25512\255> Rstat tag 14) 786 2086 w
(stat 'z' 'nemo' 'nemo' 'nemo') 1986 2086 w
(q \(0000000000000002 0 \) m 0644) 1266 2196 w
(at 1156033726 mt 1156033726 l 0 t 0 d 0) 1266 2306 w
(<\25512\255 Tclunk tag 14 fid 458) 786 2416 w
(\25512\255> Rclunk tag 14) 786 2526 w
(\255\255rw\255r\255\255r\255\255 M 125 nemo nemo 0 Aug 20 01:28 /n/ram/z) 786 2636 w
(; chmod \255w /n/ram/z) 786 2866 w
(<\25512\255 Twalk tag 14 fid 435 newfid 458 nwname 1 0:z) 786 2976 w
(\25512\255> Rwalk tag 14 nwqid 1 0:\(0000000000000002 0 \)) 786 3086 w
(<\25512\255 Tstat tag 14 fid 458) 786 3196 w
(\25512\255> Rstat tag 14) 786 3306 w
(stat 'z' 'nemo' 'nemo' 'nemo') 1986 3306 w
(q \(0000000000000002 0 \) m 0644) 1266 3416 w
(at 1156033726 mt 1156033726 l 0 t 0 d 0) 1266 3526 w
(<\25512\255 Tclunk tag 14 fid 458) 786 3636 w
(\25512\255> Rclunk tag 14) 786 3746 w
(<\25512\255 Twalk tag 14 fid 435 newfid 458 nwname 1 0:z) 786 3856 w
(\25512\255> Rwalk tag 14 nwqid 1 0:\(0000000000000002 0 \)) 786 3966 w
(<\25512\255 Twstat tag 14 fid 458 stat '' '' '' '') 786 4076 w
(q \(ffffffffffffffff 4294967295 dalA\) m 0444) 1266 4186 w
(at \2551 mt \2551 l \2551 t 65535 d \2551) 1266 4296 w
(\25512\255> Rwstat tag 14) 786 4406 w
(<\25512\255 Tclunk tag 14 fid 458) 786 4516 w
(\25512\255> Rclunk tag 14) 786 4626 w
11 /Times-Roman f
(At) 566 4842 w
(this) 707 4842 w
(point,) 898 4842 w
(we) 1184 4842 w
(know) 1342 4842 w
(enough) 1617 4842 w
(of) 1971 4842 w
(9P) 2093 4842 w
(and) 2241 4842 w
(what) 2430 4842 w
(a) 2675 4842 w
(file) 2755 4842 w
(server) 2933 4842 w
(does) 3231 4842 w
(to) 3464 4842 w
(start) 3582 4842 w
(building) 3803 4842 w
(a) 4203 4842 w
(new) 566 4962 w
(file) 776 4962 w
(server.) 950 4962 w
16 /Times-Bold f
(13.3.) 566 5322 w
(Semaphores for Plan) 966 5322 w
(9) 2437 5322 w
11 /Times-Roman f
(For) 566 5478 w
(most) 748 5478 w
(tasks,) 992 5478 w
(it) 1269 5478 w
(would) 1360 5478 w
(be) 1664 5478 w
(probably) 1796 5478 w
(better) 2215 5478 w
(to) 2493 5478 w
(use) 2608 5478 w
(channels,) 2783 5478 w
(from) 3223 5478 w
(the) 3465 5478 w
(thread) 3628 5478 w
(library,) 3931 5478 w
(instead) 566 5598 w
(of) 917 5598 w
(using) 1047 5598 w
(semaphores.) 1325 5598 w
(Semaphores) 1909 5598 w
(are) 2484 5598 w
(a) 2655 5598 w
(synchronization) 2742 5598 w
(abstraction) 3482 5598 w
(prone) 4002 5598 w
(to) 566 5718 w
(errors.) 693 5718 w
(But) 1016 5718 w
(assuming) 1217 5718 w
(that) 1674 5718 w
(we) 1880 5718 w
(need) 2049 5718 w
(semaphores) 2297 5718 w
(due) 2856 5718 w
(to) 3056 5718 w
(some) 3184 5718 w
(reason,) 3458 5718 w
(it) 3813 5718 w
(may) 3917 5718 w
(be) 4148 5718 w
(useful) 566 5838 w
(to) 871 5838 w
(write) 994 5838 w
(a) 1256 5838 w
(file) 1340 5838 w
(server) 1522 5838 w
(to) 1824 5838 w
(provide) 1946 5838 w
(them.) 2317 5838 w
(Before,) 2629 5838 w
(we) 2990 5838 w
(used) 3153 5838 w
(pipes) 3390 5838 w
(to) 3658 5838 w
(implement) 3780 5838 w
(semaphores.) 566 5958 w
(This) 1146 5958 w
(is) 1377 5958 w
(reasonable) 1486 5958 w
(and) 1988 5958 w
(works) 2181 5958 w
(well) 2484 5958 w
(within) 2708 5958 w
(a) 3025 5958 w
(single) 3108 5958 w
(machine.) 3407 5958 w
(But) 3842 5958 w
(what) 4038 5958 w
(if) 566 6078 w
(you) 691 6078 w
(want) 914 6078 w
(to) 1185 6078 w
(use) 1329 6078 w
(semaphores) 1533 6078 w
(to) 2108 6078 w
(synchronize) 2252 6078 w
(processes) 2838 6078 w
(that) 3314 6078 w
(run) 3536 6078 w
(at) 3739 6078 w
(different) 3875 6078 w
(machines?) 566 6198 w
(Also,) 1064 6198 w
(using) 1336 6198 w
(a) 1612 6198 w
(byte) 1697 6198 w
(of) 1923 6198 w
(buffering) 2051 6198 w
(in) 2495 6198 w
(the) 2618 6198 w
(pipe) 2789 6198 w
(for) 3015 6198 w
(each) 3179 6198 w
(ticket) 3415 6198 w
(in) 3696 6198 w
(the) 3819 6198 w
(sema\255) 3990 6198 w
(phore) 566 6318 w
(looks) 843 6318 w
(like) 1110 6318 w
(wasting) 1303 6318 w
(resources.) 1673 6318 w
cleartomark
showpage
saveobj restore
%%EndPage: 13 13
%%Page: 14 14
/saveobj save def
mark
14 pagesetup
11 /Times-Roman f
(\255 14 \255) 2289 413 w
(We) 816 686 w
(are) 1002 686 w
(going) 1169 686 w
(to) 1455 686 w
(implement) 1576 686 w
(a) 2082 686 w
(program,) 2165 686 w
11 /Courier f
(semfs) 2599 686 w
11 /Times-Roman f
(,) 2929 686 w
(that) 2992 686 w
(provides) 3193 686 w
(semaphores) 3607 686 w
(as) 4160 686 w
(if) 566 806 w
(they) 670 806 w
(were) 896 806 w
(files.) 1144 806 w
(It) 1398 806 w
(will) 1502 806 w
(export) 1711 806 w
(a) 2028 806 w
(single) 2113 806 w
(\(flat\)) 2413 806 w
(directory.) 2668 806 w
(Each) 3128 806 w
(file) 3382 806 w
(in) 3564 806 w
(the) 3686 806 w
(directory) 3856 806 w
(represents) 566 926 w
(a) 1037 926 w
(semaphore.) 1113 926 w
(And) 1643 926 w
(we) 1860 926 w
(have) 2015 926 w
(to) 2249 926 w
(think) 2363 926 w
(of) 2618 926 w
(an) 2737 926 w
(interface) 2868 926 w
(for) 3277 926 w
(using) 3432 926 w
(a) 3700 926 w
(semaphore) 3777 926 w
(by) 566 1046 w
(means) 704 1046 w
(of) 1012 1046 w
(file) 1131 1046 w
(operations.) 1305 1046 w
(It) 1818 1046 w
(could) 1913 1046 w
(be) 2185 1046 w
(as) 2316 1046 w
(follows.) 2435 1046 w
11 /LucidaSansUnicode20 f
(") 566 1202 w
11 /Times-Roman f
(Creating) 816 1202 w
(a) 1231 1202 w
(file) 1316 1202 w
(in) 1499 1202 w
(our) 1622 1202 w
(file) 1805 1202 w
(server) 1988 1202 w
(creates) 2291 1202 w
(a) 2630 1202 w
(semaphore,) 2715 1202 w
(with) 3254 1202 w
(no) 3487 1202 w
(tickets) 3635 1202 w
(inside.) 3960 1202 w
(That) 816 1322 w
(is,) 1045 1322 w
(its) 1175 1322 w
(initial) 1308 1322 w
(value) 1594 1322 w
(is) 1859 1322 w
(zero.) 1961 1322 w
11 /LucidaSansUnicode20 f
(") 566 1478 w
11 /Times-Roman f
(To) 816 1478 w
(put) 967 1478 w
(tickets) 1137 1478 w
(in) 1453 1478 w
(a) 1568 1478 w
(semaphore,) 1645 1478 w
(a) 2176 1478 w
(process) 2253 1478 w
(may) 2611 1478 w
(write) 2830 1478 w
(into) 3085 1478 w
(its) 3287 1478 w
(file) 3422 1478 w
(a) 3598 1478 w
(string) 3676 1478 w
(stating) 3957 1478 w
(how) 816 1598 w
(many) 1047 1598 w
(tickets) 1333 1598 w
(to) 1662 1598 w
(add) 1789 1598 w
(to) 1988 1598 w
(the) 2115 1598 w
(semaphore.) 2290 1598 w
(We) 2833 1598 w
(prefer) 3025 1598 w
(to) 3325 1598 w
(write) 3452 1598 w
(the) 3718 1598 w
(string) 3893 1598 w
11 /Courier f
(3) 4185 1598 w
11 /Times-Roman f
(instead) 816 1718 w
(of) 1175 1718 w
(the) 1314 1718 w
(binary) 1496 1718 w
(number) 1824 1718 w
11 /Courier f
(3) 2207 1718 w
11 /Times-Roman f
(because) 2321 1718 w
(strings) 2714 1718 w
(are) 3056 1718 w
(portable) 3236 1718 w
(\(all) 3643 1718 w
(machines) 3837 1718 w
(store) 816 1838 w
(them) 1057 1838 w
(in) 1305 1838 w
(the) 1419 1838 w
(same) 1581 1838 w
(way\).) 1834 1838 w
11 /LucidaSansUnicode20 f
(") 566 1994 w
11 /Times-Roman f
(To) 816 1994 w
(get) 969 1994 w
(a) 1134 1994 w
(ticket) 1213 1994 w
(from) 1488 1994 w
(a) 1732 1994 w
(semaphore,) 1812 1994 w
(a) 2346 1994 w
(process) 2426 1994 w
(may) 2786 1994 w
(read) 3007 1994 w
(from) 3226 1994 w
(its) 3471 1994 w
(file.) 3608 1994 w
(Each) 3814 1994 w
(read) 4064 1994 w
(would) 816 2114 w
(have) 1121 2114 w
(to) 1357 2114 w
(await) 1473 2114 w
(until) 1740 2114 w
(there) 1973 2114 w
(is) 2221 2114 w
(a) 2325 2114 w
(ticket) 2403 2114 w
(to) 2677 2114 w
(get,) 2793 2114 w
(and) 2985 2114 w
(it) 3173 2114 w
(will) 3265 2114 w
(return) 3467 2114 w
(some) 3758 2114 w
(unin\255) 4019 2114 w
(teresting) 816 2234 w
(data) 1222 2234 w
(once) 1432 2234 w
(a) 1666 2234 w
(ticket) 1742 2234 w
(is) 2014 2234 w
(available.) 2116 2234 w
(Before) 566 2390 w
(implementing) 893 2390 w
(anything,) 1535 2390 w
(we) 1978 2390 w
(want) 2135 2390 w
(to) 2378 2390 w
(be) 2494 2390 w
(sure) 2627 2390 w
(that) 2840 2390 w
(the) 3036 2390 w
(interface) 3201 2390 w
(could) 3613 2390 w
(be) 3888 2390 w
(used.) 4022 2390 w
(We) 566 2510 w
(can) 768 2510 w
(use) 970 2510 w
(some) 1167 2510 w
11 /Times-Italic f
(wishful) 1450 2510 w
(thinking) 1821 2510 w
11 /Times-Roman f
(and) 2233 2510 w
(assume) 2441 2510 w
(that) 2814 2510 w
(it) 3029 2510 w
(has) 3141 2510 w
(been) 3337 2510 w
(already) 3593 2510 w
(imple\255) 3964 2510 w
(mented.) 566 2630 w
(And) 979 2630 w
(now) 1202 2630 w
(we) 1425 2630 w
(can) 1586 2630 w
(try) 1771 2630 w
(to) 1927 2630 w
(use) 2047 2630 w
(it,) 2227 2630 w
(just) 2351 2630 w
(to) 2545 2630 w
(see) 2665 2630 w
(if) 2838 2630 w
(we) 2940 2630 w
(can.) 3102 2630 w
(For) 3316 2630 w
(example,) 3504 2630 w
(we) 3938 2630 w
(can) 4100 2630 w
(start) 566 2750 w
(by) 795 2750 w
(providing) 945 2750 w
(a) 1413 2750 w
(C) 1501 2750 w
(interface) 1615 2750 w
(for) 2036 2750 w
(using) 2203 2750 w
(the) 2482 2750 w
(semaphores.) 2656 2750 w
(The) 3241 2750 w
(function) 3450 2750 w
11 /Courier f
(newsem) 3855 2750 w
11 /Times-Roman f
(can) 566 2870 w
(create) 745 2870 w
(a) 1032 2870 w
(semaphore) 1108 2870 w
(and) 1610 2870 w
(give) 1796 2870 w
(it) 2013 2870 w
(an) 2103 2870 w
(initial) 2234 2870 w
(number) 2520 2870 w
(of) 2883 2870 w
(tickets.) 3002 2870 w
10 /Courier f
(int) 786 3040 w
(newsem\(char* sem, int val\)) 786 3150 w
({) 786 3260 w
(int) 1266 3370 w
(fd;) 1746 3370 w
(fd = create\(sem, OWRITE, 0664\);) 1266 3590 w
(if \(fd < 0\)) 1266 3700 w
(return \2551;) 1746 3810 w
(print\(fd, "%d", val\);) 1266 3920 w
(close\(fd\);) 1266 4030 w
(return 0;) 1266 4140 w
(}) 786 4250 w
11 /Times-Roman f
(Removing) 566 4466 w
(a) 1059 4466 w
(semaphore) 1141 4466 w
(is) 1649 4466 w
(easy,) 1758 4466 w
(we) 2015 4466 w
(can) 2177 4466 w
(use) 2363 4466 w
11 /Courier f
(remove) 2544 4466 w
11 /Times-Roman f
(.) 2940 4466 w
(To) 3031 4466 w
(do) 3188 4466 w
11 /Courier f
(ups) 3333 4466 w
11 /Times-Roman f
(and) 3566 4466 w
11 /Courier f
(downs) 3759 4466 w
11 /Times-Roman f
(we) 4124 4466 w
(can) 566 4586 w
(use) 745 4586 w
(the) 919 4586 w
(following) 1081 4586 w
(functions.) 1537 4586 w
10 /Courier f
(int) 786 4756 w
(up\(char* sem\)) 786 4866 w
({) 786 4976 w
(int) 1266 5086 w
(fd;) 1746 5086 w
(fd = open\(sem, OWRITE\);) 1266 5306 w
(if \(fd < 0\)) 1266 5416 w
(return \2551;) 1746 5526 w
(write\(fd, "1", 1\);) 1266 5636 w
(close\(fd\);) 1266 5746 w
(return 0;) 1266 5856 w
(}) 786 5966 w
cleartomark
showpage
saveobj restore
%%EndPage: 14 14
%%Page: 15 15
/saveobj save def
mark
15 pagesetup
11 /Times-Roman f
(\255 15 \255) 2289 413 w
10 /Courier f
(int) 786 676 w
(down\(char* sem\)) 786 786 w
({) 786 896 w
(char) 1266 1006 w
(buf[1];) 1746 1006 w
(int) 1266 1116 w
(fd;) 1746 1116 w
(fd = open\(sem, OREAD\);) 1266 1336 w
(if \(fd < 0\)) 1266 1446 w
(return \2551;) 1746 1556 w
(read\(fd, buf, 1\);) 1266 1666 w
(return 0;) 1266 1776 w
(}) 786 1886 w
11 /Times-Roman f
(The) 566 2102 w
(interface) 769 2102 w
(seems) 1183 2102 w
(to) 1484 2102 w
(be) 1603 2102 w
(convenient,) 1739 2102 w
(because) 2282 2102 w
(we) 2661 2102 w
(can) 2822 2102 w
(even) 3007 2102 w
(use) 3247 2102 w
(the) 3427 2102 w
(shell) 3595 2102 w
(to) 3837 2102 w
(initial\255) 3957 2102 w
(ize) 566 2222 w
(and) 724 2222 w
(list) 913 2222 w
(our) 1079 2222 w
(semaphores.) 1255 2222 w
(An) 1830 2222 w
(invented) 1994 2222 w
(session) 2402 2222 w
(could) 2750 2222 w
(be) 3024 2222 w
(as) 3157 2222 w
(follows,) 3278 2222 w
(provided) 3666 2222 w
(that) 4086 2222 w
11 /Courier f
(semfs) 566 2342 w
11 /Times-Roman f
(has) 924 2342 w
(been) 1098 2342 w
(mounted) 1332 2342 w
(at) 1745 2342 w
11 /Courier f
(/mnt/sem) 1852 2342 w
11 /Times-Roman f
(.) 2380 2342 w
10 /Courier f
(; echo 1 >/mnt/sem/mutex) 786 2512 w
10 /Times-Roman f
(create a sem for mutual exclusion) 2706 2512 w
10 /Courier f
(; touch /mnt/sem/items) 786 2622 w
10 /Times-Roman f
(create a sem with 0 tickets) 2706 2622 w
10 /Courier f
(; ls /mnt/sem) 786 2732 w
10 /Times-Roman f
(list semaphores) 2706 2732 w
10 /Courier f
(mutex) 786 2842 w
(items) 1386 2842 w
(;) 786 2952 w
16 /Times-Bold f
(13.4.) 566 3372 w
(Speaking 9P) 966 3372 w
11 /Times-Roman f
(It) 566 3528 w
(is) 667 3528 w
(quite) 775 3528 w
(easy) 1029 3528 w
(to) 1257 3528 w
(build) 1377 3528 w
(a) 1638 3528 w
(file) 1721 3528 w
(server) 1902 3528 w
(that) 2203 3528 w
(speaks) 2403 3528 w
(9P) 2730 3528 w
(using) 2882 3528 w
(the) 3156 3528 w
11 /Times-Italic f
(9p) 3325 3528 w
11 /Times-Roman f
(\(2\)) 3435 3528 w
(library,) 3597 3528 w
(known) 3952 3528 w
(also) 566 3648 w
(as) 789 3648 w
11 /Courier f
(lib9p) 926 3648 w
11 /Times-Roman f
(.) 1256 3648 w
(It) 1358 3648 w
(provides) 1470 3648 w
(most) 1893 3648 w
(of) 2153 3648 w
(the) 2289 3648 w
(machinery) 2468 3648 w
(needed) 2975 3648 w
(to) 3329 3648 w
(maintain) 3460 3648 w
(the) 3890 3648 w
(data) 4069 3648 w
(structures) 566 3768 w
(necessary) 1027 3768 w
(for) 1486 3768 w
(a) 1648 3768 w
(file) 1731 3768 w
(server,) 1912 3768 w
(and) 2241 3768 w
(many) 2434 3768 w
(of) 2713 3768 w
(the) 2839 3768 w
(common) 3008 3768 w
(functions) 3428 3768 w
(found) 3873 3768 w
(in) 4165 3768 w
(most) 566 3888 w
(file) 809 3888 w
(servers.) 983 3888 w
(The) 816 4044 w
(main) 1026 4044 w
(data) 1287 4044 w
(structure) 1510 4044 w
(provided) 1934 4044 w
(by) 2365 4044 w
11 /Courier f
(lib9p) 2516 4044 w
11 /Times-Roman f
(is) 2887 4044 w
11 /Courier f
(Srv) 3002 4044 w
11 /Times-Roman f
(.) 3200 4044 w
(The) 3297 4044 w
(task) 3508 4044 w
(of) 3726 4044 w
(a) 3858 4044 w
(9P) 3947 4044 w
(file) 4105 4044 w
(server) 566 4164 w
(is) 877 4164 w
(to) 996 4164 w
(serve) 1127 4164 w
(9P) 1402 4164 w
(requests.) 1564 4164 w
(For) 1996 4164 w
(each) 2194 4164 w
(9P) 2438 4164 w
(message) 2600 4164 w
(received,) 3016 4164 w
(it) 3458 4164 w
(must) 3565 4164 w
(execute) 3825 4164 w
(a) 4203 4164 w
(function) 566 4284 w
(to) 963 4284 w
(perform) 1080 4284 w
(the) 1463 4284 w
(actions) 1628 4284 w
(requested) 1970 4284 w
(by) 2420 4284 w
(the) 2561 4284 w
(message,) 2726 4284 w
(and) 3156 4284 w
(reply) 3346 4284 w
(with) 3603 4284 w
(an) 3831 4284 w
(appro\255) 3966 4284 w
(priate) 566 4404 w
(message) 851 4404 w
(to) 1258 4404 w
(the) 1379 4404 w
(client.) 1548 4404 w
(This) 1855 4404 w
(is) 2086 4404 w
(what) 2195 4404 w
11 /Courier f
(Srv) 2443 4404 w
11 /Times-Roman f
(represents,) 2676 4404 w
(the) 3182 4404 w
(implementation) 3351 4404 w
(of) 4077 4404 w
(a) 4203 4404 w
(file) 566 4524 w
(server.) 741 4524 w
11 /Courier f
(Srv) 1092 4524 w
11 /Times-Roman f
(is) 1319 4524 w
(a) 1422 4524 w
(structure) 1499 4524 w
(that) 1911 4524 w
(contains) 2105 4524 w
(pointers) 2500 4524 w
(to) 2883 4524 w
(functions) 2998 4524 w
(to) 3436 4524 w
(implement) 3551 4524 w
(each) 4052 4524 w
(9P) 566 4644 w
(message.) 711 4644 w
(This) 1138 4644 w
(is) 1362 4644 w
(an) 1464 4644 w
(excerpt) 1595 4644 w
(of) 1944 4644 w
(its) 2063 4644 w
(declaration.) 2196 4644 w
cleartomark
showpage
saveobj restore
%%EndPage: 15 15
%%Page: 16 16
/saveobj save def
mark
16 pagesetup
11 /Times-Roman f
(\255 16 \255) 2289 413 w
10 /Courier f
(typedef struct Srv Srv;) 786 676 w
(struct Srv {) 786 786 w
(void) 1266 896 w
(\(*attach\)\(Req*\);) 2226 896 w
(void) 1266 1006 w
(\(*auth\)\(Req*\);) 2226 1006 w
(void) 1266 1116 w
(\(*open\)\(Req*\);) 2226 1116 w
(void) 1266 1226 w
(\(*create\)\(Req*\);) 2226 1226 w
(void) 1266 1336 w
(\(*read\)\(Req*\);) 2226 1336 w
(void) 1266 1446 w
(\(*write\)\(Req*\);) 2226 1446 w
(void) 1266 1556 w
(\(*remove\)\(Req*\);) 2226 1556 w
(void) 1266 1666 w
(\(*stat\)\(Req*\);) 2226 1666 w
(void) 1266 1776 w
(\(*wstat\)\(Req*\);) 2226 1776 w
(void) 1266 1886 w
(\(*walk\)\(Req*\);) 2226 1886 w
(void) 1266 1996 w
(\(*flush\)\(Req*\);) 2226 1996 w
(char*) 1266 2106 w
(\(*clone\)\(Fid*, Fid*\);) 2226 2106 w
(char*) 1266 2216 w
(\(*walk1\)\(Fid*, char*, Qid*\);) 2226 2216 w
(int) 1266 2326 w
(infd;) 2226 2326 w
(// T\255messages fd) 2706 2326 w
(int) 1266 2436 w
(outfd;) 2226 2436 w
(// R\255messages fd) 2706 2436 w
(void*) 1266 2546 w
(aux;) 2226 2546 w
(// for you to use) 2706 2546 w
10 /Times-Italic f
(...) 1266 2656 w
10 /Courier f
(};) 786 2766 w
11 /Times-Roman f
(A) 566 2982 w
(file) 673 2982 w
(server) 847 2982 w
(program) 1141 2982 w
(initializes) 1541 2982 w
(a) 1998 2982 w
11 /Courier f
(Srv) 2075 2982 w
11 /Times-Roman f
(structure) 2302 2982 w
(with) 2714 2982 w
(pointers) 2939 2982 w
(to) 3322 2982 w
(appropriate) 3437 2982 w
(imple\255) 3964 2982 w
(mentations.) 566 3102 w
(Then,) 1113 3102 w
(it) 1402 3102 w
(calls) 1500 3102 w
(a) 1737 3102 w
(function) 1821 3102 w
(from) 2223 3102 w
11 /Courier f
(lib9p) 2472 3102 w
11 /Times-Roman f
(that) 2838 3102 w
(takes) 3039 3102 w
(care) 3300 3102 w
(of) 3516 3102 w
(almost) 3643 3102 w
(every\255) 3973 3102 w
(thing) 566 3222 w
(else.) 836 3222 w
(For) 1078 3222 w
(example,) 1275 3222 w
11 /Courier f
(postmountsrv) 1718 3222 w
11 /Times-Roman f
(takes) 2554 3222 w
(a) 2823 3222 w
(server) 2915 3222 w
(implementation) 3225 3222 w
(\(i.e.,) 3960 3222 w
(a) 4203 3222 w
11 /Courier f
(Srv) 566 3342 w
11 /Times-Roman f
(structure\),) 793 3342 w
(a) 1269 3342 w
(name) 1346 3342 w
(for) 1612 3342 w
(a) 1767 3342 w
(file) 1843 3342 w
(to) 2017 3342 w
(be) 2131 3342 w
(posted) 2262 3342 w
(at) 2577 3342 w
11 /Courier f
(/srv) 2684 3342 w
11 /Times-Roman f
(,) 2948 3342 w
(and) 3004 3342 w
(a) 3190 3342 w
(path) 3266 3342 w
(for) 3483 3342 w
(a) 3638 3342 w
(mount) 3714 3342 w
(point) 4024 3342 w
(\(as) 566 3462 w
(well) 721 3462 w
(as) 938 3462 w
(flags) 1057 3462 w
(for) 1298 3462 w
(mount\).) 1453 3462 w
9 /Courier f
(; sig postmountsrv) 786 3632 w
(void postmountsrv\(Srv *s, char *name, char *mtpt, int flag\)) 948 3742 w
11 /Times-Roman f
(This) 566 3958 w
(function) 794 3958 w
(creates) 1192 3958 w
(a) 1527 3958 w
(separate) 1608 3958 w
(process) 1998 3958 w
(to) 2359 3958 w
(run) 2478 3958 w
(the) 2657 3958 w
(server,) 2824 3958 w
(as) 3151 3958 w
(implemented) 3275 3958 w
(by) 3882 3958 w
11 /Courier f
(Srv) 4025 3958 w
11 /Times-Roman f
(.) 4223 3958 w
(It) 566 4078 w
(creates) 663 4078 w
(a) 995 4078 w
(pipe) 1073 4078 w
(and) 1292 4078 w
(puts) 1480 4078 w
(the) 1694 4078 w
(server) 1858 4078 w
(process) 2154 4078 w
(in) 2512 4078 w
(a) 2628 4078 w
(loop,) 2706 4078 w
(reading) 2960 4078 w
(9P) 3317 4078 w
(requests) 3463 4078 w
(from) 3851 4078 w
(one) 4093 4078 w
(end) 566 4198 w
(of) 753 4198 w
(the) 873 4198 w
(pipe) 1036 4198 w
(and) 1255 4198 w
(calling) 1443 4198 w
(the) 1772 4198 w
(corresponding) 1936 4198 w
(function) 2593 4198 w
(in) 2989 4198 w
11 /Courier f
(Srv) 3105 4198 w
11 /Times-Roman f
(for) 3333 4198 w
(each) 3490 4198 w
(request.) 3719 4198 w
(See) 4093 4198 w
(figure) 566 4318 w
([[!9P) 865 4318 w
(server) 1128 4318 w
(process!]].) 1432 4318 w
(The) 1934 4318 w
(other) 2142 4318 w
(end) 2405 4318 w
(of) 2601 4318 w
(the) 2730 4318 w
(pipe) 2902 4318 w
(is) 3129 4318 w
(posted) 3241 4318 w
(at) 3566 4318 w
11 /Courier f
(/srv) 3683 4318 w
11 /Times-Roman f
(,) 3947 4318 w
(using) 4012 4318 w
(the) 566 4438 w
11 /Courier f
(name) 732 4438 w
11 /Times-Roman f
(given) 1029 4438 w
(as) 1306 4438 w
(an) 1430 4438 w
(argument.) 1566 4438 w
(At) 2041 4438 w
(this) 2184 4438 w
(point,) 2377 4438 w
(the) 2665 4438 w
(file) 2832 4438 w
(in) 3011 4438 w
11 /Courier f
(/srv) 3130 4438 w
11 /Times-Roman f
(can) 3427 4438 w
(be) 3611 4438 w
(mounted) 3747 4438 w
(to) 4165 4438 w
(reach) 566 4558 w
(the) 840 4558 w
(file) 1013 4558 w
(server.) 1198 4558 w
(Furthermore,) 1531 4558 w
11 /Courier f
(postmountsrv) 2146 4558 w
11 /Times-Roman f
(mounts) 2977 4558 w
(the) 3340 4558 w
(file) 3512 4558 w
(server) 3696 4558 w
(at) 4000 4558 w
(the) 4117 4558 w
(directory) 566 4678 w
(given) 998 4678 w
(in) 1279 4678 w
11 /Courier f
(mtpt) 1402 4678 w
11 /Times-Roman f
(,) 1666 4678 w
(using) 1731 4678 w
11 /Courier f
(flag) 2007 4678 w
11 /Times-Roman f
(as) 2308 4678 w
(flags) 2436 4678 w
(for) 2687 4678 w
11 /Courier f
(mount) 2852 4678 w
11 /Times-Roman f
(.) 3182 4678 w
(So,) 3276 4678 w
11 /Courier f
(postmountsrv) 3459 4678 w
11 /Times-Roman f
(provides) 566 4798 w
(all) 985 4798 w
(the) 1136 4798 w
(main\255loop) 1311 4798 w
(logic) 1804 4798 w
(for) 2065 4798 w
(a) 2233 4798 w
(file) 2322 4798 w
(server,) 2509 4798 w
(and) 2844 4798 w
(makes) 3043 4798 w
(it) 3363 4798 w
(available) 3465 4798 w
(to) 3900 4798 w
(other) 4026 4798 w
(processes.) 566 4918 w
(It) 1063 4918 w
(is) 1180 4918 w
(optional) 1304 4918 w
(to) 1716 4918 w
(give) 1853 4918 w
11 /Courier f
(name) 2093 4918 w
11 /Times-Roman f
(,) 2357 4918 w
(and) 2436 4918 w
11 /Courier f
(mtpt) 2645 4918 w
11 /Times-Roman f
(.) 2909 4918 w
(Passing) 3016 4918 w
(nil) 3404 4918 w
(as) 3572 4918 w
(either) 3714 4918 w
(value) 4014 4918 w
(makes) 566 5038 w
11 /Courier f
(postmountsrv) 874 5038 w
11 /Times-Roman f
(not) 1694 5038 w
(to) 1863 5038 w
(post) 1977 5038 w
(or) 2189 5038 w
(not) 2308 5038 w
(to) 2477 5038 w
(mount) 2591 5038 w
(the) 2901 5038 w
(file) 3063 5038 w
(server) 3237 5038 w
(respectively.) 3531 5038 w
cleartomark
showpage
saveobj restore
%%EndPage: 16 16
%%Page: 17 17
/saveobj save def
mark
17 pagesetup
11 /Times-Roman f
(\255 17 \255) 2289 413 w
9 /Times-Roman f
(client) 1008 1387 w
(\(Plan) 964 1507 w
(9\)) 1177 1507 w
1373 1415 1320 1427 Dl
1373 1442 1320 1430 Dl
1320 1429 1584 1429 Dl
1532 1442 1585 1430 Dl
1532 1415 1585 1427 Dl
(9P) 1406 1387 w
1585 1481 1585 1376 Dl
1585 1375 1983 1375 Dl
1983 1375 1983 1480 Dl
1983 1481 1585 1481 Dl
(pipe) 1707 1447 w
1983 1429 2513 1429 Dl
2461 1442 2514 1430 Dl
2461 1415 2514 1427 Dl
9 /Courier f
(Tread) 2113 1387 w
2513 1521 2513 1309 Dl
2513 1309 2911 1309 Dl
2912 1309 2912 1521 Dl
2912 1521 2514 1521 Dl
9 /Times-Roman f
(server) 2603 1373 w
(loop) 2633 1493 w
2912 1415 3442 1415 Dl
3389 1429 3442 1417 Dl
3389 1402 3442 1414 Dl
(call) 3065 1373 w
(to) 3218 1373 w
9 /Courier f
(srv.read) 2960 1493 w
9 /Times-Bold f
(Srv) 3574 1115 w
3442 1256 3442 1151 Dl
3442 1150 3840 1150 Dl
3840 1150 3840 1255 Dl
3840 1256 3442 1256 Dl
9 /Times-Roman f
(attach) 3534 1220 w
3442 1362 3442 1257 Dl
3442 1256 3840 1256 Dl
3840 1256 3840 1361 Dl
3840 1362 3442 1362 Dl
(auth) 3564 1327 w
3442 1468 3442 1363 Dl
3442 1362 3840 1362 Dl
3840 1362 3840 1467 Dl
3840 1468 3442 1468 Dl
(read) 3564 1433 w
3442 1574 3442 1469 Dl
3442 1468 3840 1468 Dl
3840 1468 3840 1573 Dl
3840 1574 3442 1574 Dl
(write) 3549 1539 w
3442 1681 3442 1576 Dl
3442 1574 3840 1574 Dl
3840 1574 3840 1679 Dl
3840 1681 3442 1681 Dl
(...) 3607 1645 w
3442 1786 3442 1681 Dl
3442 1681 3840 1681 Dl
3840 1681 3840 1786 Dl
3840 1786 3442 1786 Dl
(walk) 3554 1751 w
3495 1415 3231 1706 Dl
3256 1659 3231 1707 Dl
3275 1676 3230 1706 Dl
2832 1813 2832 1601 Dl
2832 1601 3230 1601 Dl
3230 1601 3230 1813 Dl
3230 1813 2832 1813 Dl
(read) 2954 1664 w
(function) 2881 1784 w
2434 1429 1485 1485 De
(\(child\)) 2788 2242 w
(server) 3051 2242 w
(process) 3294 2242 w
2832 1706 1984 1454 Dl
2037 1457 1983 1455 Dl
2030 1483 1984 1455 Dl
9 /Courier f
(Rread) 2138 1658 w
11 /Times-Roman f
(One) 816 2511 w
(thing) 1041 2511 w
(to) 1311 2511 w
(note) 1440 2511 w
(is) 1672 2511 w
(that) 1789 2511 w
(the) 1997 2511 w
(process) 2174 2511 w
(created) 2546 2511 w
(by) 2904 2511 w
11 /Courier f
(postmountsrv) 3058 2511 w
11 /Times-Roman f
(will) 3894 2511 w
(not) 4110 2511 w
(share) 566 2631 w
(its) 827 2631 w
(name) 963 2631 w
(space) 1230 2631 w
(with) 1502 2631 w
(the) 1728 2631 w
(parent) 1892 2631 w
(process) 2195 2631 w
(\(the) 2553 2631 w
(one) 2753 2631 w
(calling) 2941 2631 w
11 /Courier f
(postmountsrv) 3270 2631 w
11 /Times-Roman f
(\).) 4062 2631 w
(It) 4184 2631 w
(could) 566 2751 w
(not) 844 2751 w
(be) 1019 2751 w
(otherwise.) 1156 2751 w
(If) 1644 2751 w
(it) 1750 2751 w
(was,) 1846 2751 w
(a) 2079 2751 w
(process) 2162 2751 w
(would) 2525 2751 w
(have) 2835 2751 w
(to) 3076 2751 w
(reply) 3197 2751 w
(to) 3457 2751 w
(9P) 3578 2751 w
(requests) 3730 2751 w
(for) 4124 2751 w
(the) 566 2871 w
(file) 736 2871 w
(tree) 918 2871 w
(it) 1117 2871 w
(is) 1215 2871 w
(using.) 1325 2871 w
(This) 1628 2871 w
(would) 1860 2871 w
(lead) 2171 2871 w
(to) 2389 2871 w
(deadlocks.) 2510 2871 w
(For) 3011 2871 w
(example,) 3199 2871 w
(opening) 3633 2871 w
(a) 4022 2871 w
(file) 4105 2871 w
(would) 566 2991 w
(make) 882 2991 w
(the) 1160 2991 w
(process) 1336 2991 w
(wait) 1706 2991 w
(for) 1937 2991 w
(Plan) 2106 2991 w
(9) 2344 2991 w
(to) 2441 2991 w
(speak) 2569 2991 w
(9P) 2860 2991 w
(with) 3019 2991 w
(the) 3257 2991 w
(server,) 3433 2991 w
(that) 3769 2991 w
(would) 3976 2991 w
(wait) 566 3111 w
(until) 793 3111 w
(the) 1034 3111 w
(server) 1206 3111 w
(handles) 1510 3111 w
(9P) 1883 3111 w
(requests,) 2038 3111 w
(and) 2463 3111 w
(the) 2659 3111 w
(server) 2831 3111 w
(would) 3134 3111 w
(be) 3446 3111 w
(waiting) 3586 3111 w
(for) 3953 3111 w
(the) 4117 3111 w
(open) 566 3231 w
(to) 808 3231 w
(complete.) 923 3231 w
(The) 1382 3231 w
(flag) 1581 3231 w
11 /Courier f
(RFNAMEG) 1780 3231 w
11 /Times-Roman f
(,) 2242 3231 w
11 /Courier f
(RFFDG) 2299 3231 w
11 /Times-Roman f
(,) 2629 3231 w
(and) 2686 3231 w
11 /Courier f
(RFMEM) 2873 3231 w
11 /Times-Roman f
(are) 3232 3231 w
(given) 3393 3231 w
(to) 3666 3231 w
11 /Courier f
(rfork) 3781 3231 w
11 /Times-Roman f
(by) 4141 3231 w
11 /Courier f
(postmountsrv) 566 3351 w
11 /Times-Roman f
(.) 1358 3351 w
(This) 1448 3351 w
(means) 1678 3351 w
(that) 1992 3351 w
(the) 2191 3351 w
(child) 2359 3351 w
(process) 2613 3351 w
(shares) 2975 3351 w
(memory) 3281 3351 w
(with) 3680 3351 w
(the) 3909 3351 w
(par\255) 4076 3351 w
(ent) 566 3471 w
(process,) 730 3471 w
(but) 1116 3471 w
(does) 1287 3471 w
11 /Times-Italic f
(not) 1518 3471 w
11 /Times-Roman f
(share) 1689 3471 w
(the) 1949 3471 w
(name) 2113 3471 w
(space) 2380 3471 w
(nor) 2653 3471 w
(the) 2830 3471 w
(file) 2995 3471 w
(descriptors) 3172 3471 w
(with) 3684 3471 w
(the) 3911 3471 w
(par\255) 4076 3471 w
(ent.) 566 3591 w
(Things) 816 3747 w
(work) 1150 3747 w
(as) 1403 3747 w
(shown) 1522 3747 w
(in) 1837 3747 w
(figure) 1951 3747 w
([[!9P) 2240 3747 w
(server) 2493 3747 w
(process!]].) 2787 3747 w
(The) 3279 3747 w
(child) 3477 3747 w
(process) 3726 3747 w
(cre\255) 4083 3747 w
(ated) 566 3867 w
(by) 787 3867 w
11 /Courier f
(postmountsrv) 936 3867 w
11 /Times-Roman f
(executes) 1767 3867 w
(the) 2182 3867 w
(main) 2355 3867 w
(server) 2614 3867 w
(loop.) 2919 3867 w
(This) 3181 3867 w
(loop,) 3415 3867 w
(implemented) 3677 3867 w
(by) 566 3987 w
(the) 716 3987 w
11 /Courier f
(srv) 890 3987 w
11 /Times-Roman f
(function) 1128 3987 w
(from) 1534 3987 w
11 /Courier f
(lib9p) 1787 3987 w
11 /Times-Roman f
(,) 2117 3987 w
(keeps) 2185 3987 w
(on) 2474 3987 w
(reading) 2624 3987 w
(9P) 2992 3987 w
(messages) 3150 3987 w
(from) 3605 3987 w
(the) 3859 3987 w
(pipe.) 4034 3987 w
(When) 566 4107 w
(it) 867 4107 w
(reads) 969 4107 w
(a) 1239 4107 w
11 /Courier f
(Tread) 1327 4107 w
11 /Times-Roman f
(message,) 1697 4107 w
(it) 2136 4107 w
(calls) 2238 4107 w
(the) 2479 4107 w
(function) 2653 4107 w
11 /Courier f
(Srv.read) 3058 4107 w
11 /Times-Roman f
(to) 3625 4107 w
(process) 3750 4107 w
(the) 4117 4107 w
(request.) 566 4227 w
(The) 947 4227 w
(function) 1154 4227 w
(is) 1557 4227 w
(expected) 1668 4227 w
(to) 2093 4227 w
(perform) 2216 4227 w
(the) 2605 4227 w
(read) 2776 4227 w
(and) 3000 4227 w
(then) 3195 4227 w
(reply) 3421 4227 w
(to) 3683 4227 w
(the) 3807 4227 w
(client,) 3979 4227 w
(by) 566 4347 w
(sending) 712 4347 w
(perhaps) 1090 4347 w
(an) 1466 4347 w
11 /Courier f
(Rread) 1604 4347 w
11 /Times-Roman f
(back) 1969 4347 w
(to) 2210 4347 w
(the) 2331 4347 w
(client.) 2500 4347 w
(In) 2807 4347 w
(the) 2933 4347 w
(same) 3102 4347 w
(way,) 3362 4347 w
11 /Courier f
(Twrite) 3607 4347 w
11 /Times-Roman f
(mes\255) 4038 4347 w
(sages) 566 4467 w
(are) 831 4467 w
(processed) 991 4467 w
(by) 1450 4467 w
11 /Courier f
(Srv.write) 1588 4467 w
11 /Times-Roman f
(,) 2182 4467 w
(and) 2238 4467 w
(so) 2424 4467 w
(on.) 2550 4467 w
(The) 816 4623 w
(main) 1078 4623 w
(server) 1390 4623 w
(loop) 1748 4623 w
(function,) 2036 4623 w
11 /Courier f
(srv) 2523 4623 w
11 /Times-Roman f
(may) 2814 4623 w
(be) 3096 4623 w
(used) 3292 4623 w
(directly) 3586 4623 w
(when) 4014 4623 w
11 /Courier f
(postmountsrv) 566 4743 w
11 /Times-Roman f
(does) 1415 4743 w
(not) 1673 4743 w
(do) 1871 4743 w
(exactly) 2038 4743 w
(what) 2410 4743 w
(we) 2679 4743 w
(want.) 2862 4743 w
(It) 3159 4743 w
(reads) 3282 4743 w
(messages) 3568 4743 w
(from) 4038 4743 w
11 /Courier f
(Srv.infd) 566 4863 w
11 /Times-Roman f
(,) 1094 4863 w
(and) 1156 4863 w
(sends) 1349 4863 w
(replies) 1628 4863 w
(to) 1955 4863 w
11 /Courier f
(Srv.outfd) 2076 4863 w
11 /Times-Roman f
(.) 2670 4863 w
(These) 2761 4863 w
(descriptors) 3057 4863 w
(usually) 3573 4863 w
(refer) 3926 4863 w
(to) 4165 4863 w
(the) 566 4983 w
(pipe) 728 4983 w
(created) 945 4983 w
(by) 1287 4983 w
11 /Courier f
(postmountsrv) 1425 4983 w
11 /Times-Roman f
(,) 2217 4983 w
(but) 2273 4983 w
(that) 2442 4983 w
(does) 2635 4983 w
(not) 2864 4983 w
(have) 3033 4983 w
(to) 3267 4983 w
(be) 3381 4983 w
(the) 3512 4983 w
(case.) 3674 4983 w
(Not) 816 5139 w
(all) 1019 5139 w
(functions) 1168 5139 w
(in) 1616 5139 w
11 /Courier f
(Srv) 1741 5139 w
11 /Times-Roman f
(have) 1978 5139 w
(to) 2223 5139 w
(be) 2348 5139 w
(implemented.) 2490 5139 w
(In) 3131 5139 w
(many) 3261 5139 w
(cases,) 3544 5139 w
(leaving) 3841 5139 w
(a) 4203 5139 w
(nil) 566 5259 w
(function) 731 5259 w
(pointer) 1145 5259 w
(for) 1504 5259 w
(a) 1679 5259 w
(9P) 1775 5259 w
(request) 1940 5259 w
(in) 2304 5259 w
11 /Courier f
(Srv) 2438 5259 w
11 /Times-Roman f
(provides) 2684 5259 w
(a) 3110 5259 w
(reasonable) 3205 5259 w
(default.) 3719 5259 w
(For) 4098 5259 w
(example,) 566 5379 w
(If) 997 5379 w
(files) 1101 5379 w
(cannot) 1322 5379 w
(be) 1646 5379 w
(written,) 1781 5379 w
(the) 2152 5379 w
(pointer) 2318 5379 w
11 /Courier f
(Srv.write) 2661 5379 w
11 /Times-Roman f
(may) 3287 5379 w
(be) 3508 5379 w
(set) 3643 5379 w
(to) 3797 5379 w
(nil,) 3915 5379 w
(and) 4093 5379 w
(the) 566 5499 w
(main) 730 5499 w
(loop) 980 5499 w
(will) 1206 5499 w
(respond) 1408 5499 w
(with) 1784 5499 w
(an) 2009 5499 w
(appropriate) 2141 5499 w
11 /Courier f
(Rerror) 2668 5499 w
11 /Times-Roman f
(reply) 3093 5499 w
(upon) 3347 5499 w
(write) 3596 5499 w
(attempts.) 3850 5499 w
(The) 566 5619 w
(details) 766 5619 w
(about) 1083 5619 w
(which) 1357 5619 w
(functions) 1655 5619 w
(must) 2094 5619 w
(be) 2339 5619 w
(provided,) 2473 5619 w
(which) 2922 5619 w
(ones) 3221 5619 w
(do) 3453 5619 w
(not) 3594 5619 w
(have) 3766 5619 w
(to) 4003 5619 w
(be,) 4120 5619 w
(and) 566 5739 w
(what) 756 5739 w
(should) 1001 5739 w
(such) 1326 5739 w
(functions) 1558 5739 w
(do,) 1998 5739 w
(are) 2167 5739 w
(described) 2330 5739 w
(in) 2780 5739 w
(the) 2897 5739 w
11 /Courier f
(9p) 3062 5739 w
11 /Times-Roman f
(\(2\)) 3194 5739 w
(manual) 3352 5739 w
(page.) 3706 5739 w
(In) 3971 5739 w
(any) 4093 5739 w
(case,) 566 5859 w
(if) 809 5859 w
(a) 904 5859 w
(function) 980 5859 w
(is) 1374 5859 w
(provided) 1476 5859 w
(for) 1894 5859 w
(a) 2049 5859 w
(message,) 2125 5859 w
(it) 2552 5859 w
(is) 2642 5859 w
(responsible) 2744 5859 w
(for) 3272 5859 w
(responding.) 3427 5859 w
(As) 816 6015 w
(an) 971 6015 w
(additional) 1107 6015 w
(help,) 1580 6015 w
(because) 1830 6015 w
11 /Courier f
(walk) 2208 6015 w
11 /Times-Roman f
(may) 2505 6015 w
(be) 2727 6015 w
(complicated) 2863 6015 w
(to) 3433 6015 w
(implement,) 3553 6015 w
(two) 4086 6015 w
(functions) 566 6135 w
(that) 1007 6135 w
(are) 1203 6135 w
(building) 1366 6135 w
(blocks) 1765 6135 w
(for) 2083 6135 w
11 /Courier f
(walk) 2241 6135 w
11 /Times-Roman f
(may) 2536 6135 w
(be) 2756 6135 w
(implemented) 2890 6135 w
(instead) 3495 6135 w
(of) 3837 6135 w
11 /Courier f
(walk) 3959 6135 w
11 /Times-Roman f
(.) 4223 6135 w
(This) 566 6255 w
(functions) 790 6255 w
(are) 1227 6255 w
11 /Courier f
(walk1) 1387 6255 w
11 /Times-Roman f
(and) 1745 6255 w
11 /Courier f
(clone) 1931 6255 w
11 /Times-Roman f
(.) 2261 6255 w
cleartomark
showpage
saveobj restore
%%EndPage: 17 17
%%Page: 18 18
/saveobj save def
mark
18 pagesetup
11 /Times-Roman f
(\255 18 \255) 2289 413 w
(At) 816 686 w
(this) 956 686 w
(point,) 1146 686 w
(we) 1431 686 w
(can) 1589 686 w
(start) 1771 686 w
(to) 1991 686 w
(implement) 2108 686 w
11 /Courier f
(semfs) 2610 686 w
11 /Times-Roman f
(.) 2940 686 w
(To) 3027 686 w
(handle) 3180 686 w
(9P) 3503 686 w
(messages,) 3651 686 w
(we) 4124 686 w
(must) 566 806 w
(implement) 822 806 w
(several) 1334 806 w
(functions) 1684 806 w
(and) 2134 806 w
(place) 2333 806 w
(pointers) 2604 806 w
(to) 2999 806 w
(them) 3126 806 w
(in) 3387 806 w
(a) 3514 806 w
11 /Courier f
(Srv) 3602 806 w
11 /Times-Roman f
(structure.) 3840 806 w
(All) 566 926 w
(the) 746 926 w
(functions) 919 926 w
(correspond) 1367 926 w
(with) 1893 926 w
(9P) 2129 926 w
(requests,) 2286 926 w
(but) 2713 926 w
(for) 2894 926 w
11 /Courier f
(fswalk1) 3061 926 w
11 /Times-Roman f
(and) 3563 926 w
11 /Courier f
(fsclone) 3761 926 w
11 /Times-Roman f
(,) 4223 926 w
(used) 566 1046 w
(by) 833 1046 w
(the) 1008 1046 w
(library) 1207 1046 w
(to) 1564 1046 w
(implement) 1715 1046 w
11 /Courier f
(walk) 2251 1046 w
11 /Times-Roman f
(,) 2515 1046 w
(and) 2608 1046 w
(for) 2831 1046 w
11 /Courier f
(freefid) 3023 1046 w
11 /Times-Roman f
(,) 3485 1046 w
(which) 3578 1046 w
(will) 3911 1046 w
(be) 4148 1046 w
(addressed) 566 1166 w
(later.) 1028 1166 w
(Given) 1309 1166 w
(this) 1608 1166 w
(structure,) 1799 1166 w
(it) 2241 1166 w
(is) 2334 1166 w
(simple) 2439 1166 w
(to) 2764 1166 w
(construct) 2881 1166 w
(a) 3314 1166 w
(file) 3394 1166 w
(server) 3572 1166 w
(by) 3870 1166 w
(using) 4012 1166 w
11 /Courier f
(postmountsrv) 566 1286 w
11 /Times-Roman f
(,) 1358 1286 w
(or) 1480 1286 w
(its) 1665 1286 w
(version) 1863 1286 w
(for) 2279 1286 w
(programs) 2499 1286 w
(using) 3006 1286 w
(the) 3338 1286 w
(thread) 3565 1286 w
(library,) 3931 1286 w
11 /Courier f
(threadpostmountsrv) 566 1406 w
11 /Times-Roman f
(.) 1754 1406 w
9 /S f
(\347) 566 1612 w
9 /Times-Bold f
(semfs.c) 581 1612 w
9 /S f
(\347) 874 1612 w
(`) 566 1612 w
(``````) 604 1612 w
(_) 566 1612 w
(______) 604 1612 w
8 /Courier f
(#include <u.h>) 786 1720 w
(#include <libc.h>) 786 1828 w
(#include <auth.h>) 786 1936 w
(// required by lib9p) 1746 1936 w
(#include <thread.h>) 786 2044 w
(#include <fcall.h>) 786 2152 w
(// required by lib9p) 1746 2152 w
(#include <9p.h>) 786 2260 w
(// definitions for lib9p) 2226 2260 w
(#include "sem.h") 786 2368 w
(// our own definitions) 1746 2368 w
(static void fsattach\(Req* r\) { ... }) 786 2596 w
(static void fscreate\(Req* r\) { ... }) 786 2704 w
(static void fsread\(Req* r\){ ... }) 786 2812 w
(static void fswrite\(Req* r\){ ... }) 786 2920 w
(static char* fswalk1\(Fid* fid, char* name, Qid* qid\){ ... }) 786 3028 w
(static char* sclone\(Fid* fid, Fid* newfid\){ ... }) 786 3136 w
(static void fsstat\(Req* r\){ ... }) 786 3244 w
(static void fsremove\(Req* r\){ ... }) 786 3352 w
(static void freefid\(Fid* fid\){ ... }) 786 3460 w
(static Srv sfs=) 786 3688 w
({) 786 3796 w
(.attach) 1266 3904 w
(=) 1746 3904 w
(fsattach,) 2226 3904 w
(.create) 1266 4012 w
(=) 1746 4012 w
(fscreate,) 2226 4012 w
(.remove) 1266 4120 w
(=) 1746 4120 w
(fsremove,) 2226 4120 w
(.read) 1266 4228 w
(=) 1746 4228 w
(fsread,) 2226 4228 w
(.write) 1266 4336 w
(=) 1746 4336 w
(fswrite,) 2226 4336 w
(.walk1) 1266 4444 w
(=) 1746 4444 w
(fswalk1,) 2226 4444 w
(.clone) 1266 4552 w
(=) 1746 4552 w
(fsclone,) 2226 4552 w
(.stat) 1266 4660 w
(=) 1746 4660 w
(fsstat,) 2226 4660 w
(.destroyfid=) 1266 4768 w
(freefid,) 2226 4768 w
(};) 786 4876 w
(void) 786 5104 w
(usage\(void\)) 786 5212 w
({) 786 5320 w
(fprint\(2, "usage: %s [\255D] [\255s srv] [\255m mnt]\\n", argv0\);) 1266 5428 w
(threadexitsall\("usage"\);) 1266 5536 w
(}) 786 5644 w
cleartomark
showpage
saveobj restore
%%EndPage: 18 18
%%Page: 19 19
/saveobj save def
mark
19 pagesetup
11 /Times-Roman f
(\255 19 \255) 2289 413 w
8 /Courier f
(void) 786 674 w
(threadmain\(int argc, char **argv\)) 786 782 w
({) 786 890 w
(char*) 1266 998 w
(mnt;) 1746 998 w
(char*) 1266 1106 w
(srv;) 1746 1106 w
(srv = nil;) 1266 1322 w
(mnt = "/mnt/sem";) 1266 1430 w
(ARGBEGIN{) 1266 1538 w
(case 'D':) 1266 1646 w
(chatty9p++;) 1746 1754 w
(break;) 1746 1862 w
(case 's':) 1266 1970 w
(srv = EARGF\(usage\(\)\);) 1746 2078 w
(break;) 1746 2186 w
(case 'm':) 1266 2294 w
(mnt = EARGF\(usage\(\)\);) 1746 2402 w
(break;) 1746 2510 w
(default:) 1266 2618 w
(usage\(\);) 1746 2726 w
(}ARGEND;) 1266 2834 w
(if\(argc!= 0\)) 1266 3050 w
(usage\(\);) 1746 3158 w
(threadpostmountsrv\(&sfs, srv, mnt, MREPL|MCREATE\);) 1266 3266 w
(threadexits\(nil\);) 1266 3374 w
(}) 786 3482 w
11 /Times-Roman f
(The) 566 3698 w
(call) 771 3698 w
(to) 964 3698 w
11 /Courier f
(threadpostmountsrv) 1085 3698 w
11 /Times-Roman f
(starts) 2308 3698 w
(a) 2575 3698 w
(process) 2659 3698 w
(\(containing) 3023 3698 w
(a) 3559 3698 w
(single) 3643 3698 w
(thread\)) 3942 3698 w
(to) 566 3818 w
(serve) 686 3818 w
(9P) 950 3818 w
(requests,) 1101 3818 w
(and) 1522 3818 w
(dispatches) 1714 3818 w
(to) 2205 3818 w
(functions) 2325 3818 w
(linked) 2768 3818 w
(at) 3077 3818 w
11 /Courier f
(sfs) 3189 3818 w
11 /Times-Roman f
(,) 3387 3818 w
(which) 3448 3818 w
(handles) 3749 3818 w
(the) 4117 3818 w
(different) 566 3938 w
(requests.) 974 3938 w
(This) 1393 3938 w
(program) 1621 3938 w
(mounts) 2024 3938 w
(itself) 2381 3938 w
(\(i.e.,) 2633 3938 w
(the) 2864 3938 w
(file) 3030 3938 w
(tree) 3208 3938 w
(served) 3403 3938 w
(by) 3721 3938 w
(the) 3864 3938 w
(child) 4031 3938 w
(process\)) 566 4058 w
(at) 962 4058 w
11 /Courier f
(/mnt/sem) 1073 4058 w
11 /Times-Roman f
(,) 1601 4058 w
(but) 1661 4058 w
(accepts) 1834 4058 w
(the) 2187 4058 w
(conventional) 2353 4058 w
(option) 2952 4058 w
11 /Courier f
(\255m) 3266 4058 w
11 /Times-Roman f
(to) 3430 4058 w
(specify) 3547 4058 w
(a) 3894 4058 w
(differ\255) 3973 4058 w
(ent) 566 4178 w
(mount) 739 4178 w
(point.) 1060 4178 w
(In) 1354 4178 w
(the) 1484 4178 w
(same) 1657 4178 w
(way,) 1921 4178 w
(the) 2170 4178 w
(option) 2343 4178 w
11 /Courier f
(\255s) 2664 4178 w
11 /Times-Roman f
(can) 2835 4178 w
(be) 3025 4178 w
(used) 3168 4178 w
(to) 3409 4178 w
(specify) 3535 4178 w
(a) 3891 4178 w
(file) 3979 4178 w
(in) 4165 4178 w
11 /Courier f
(/srv) 566 4298 w
11 /Times-Roman f
(where) 864 4298 w
(to) 1163 4298 w
(post) 1282 4298 w
(a) 1499 4298 w
(pipe) 1580 4298 w
(to) 1802 4298 w
(mount) 1921 4298 w
(the) 2236 4298 w
(file) 2403 4298 w
(server.) 2582 4298 w
(To) 2909 4298 w
(aid) 3064 4298 w
(the) 3231 4298 w
(debugging) 3398 4298 w
(process,) 3895 4298 w
(the) 566 4418 w
(flag) 732 4418 w
11 /Courier f
(\255D) 934 4418 w
11 /Times-Roman f
(increments) 1098 4418 w
(the) 1611 4418 w
(global) 1777 4418 w
(flag) 2084 4418 w
11 /Courier f
(chatty9p) 2286 4418 w
11 /Times-Roman f
(,) 2814 4418 w
(defined) 2874 4418 w
(by) 3235 4418 w
11 /Courier f
(lib9p) 3378 4418 w
11 /Times-Roman f
(.) 3708 4418 w
(When) 3797 4418 w
(this) 4091 4418 w
(global) 566 4538 w
(is) 880 4538 w
(non\255zero,) 993 4538 w
(the) 1448 4538 w
(library) 1621 4538 w
(prints) 1952 4538 w
(9P) 2242 4538 w
(messages) 2398 4538 w
(as) 2851 4538 w
(they) 2981 4538 w
(are) 3208 4538 w
(exchanged) 3378 4538 w
(with) 3883 4538 w
(the) 4117 4538 w
(client.) 566 4658 w
(Like) 866 4658 w
(we) 1095 4658 w
(saw) 1250 4658 w
(for) 1448 4658 w
11 /Courier f
(ramfs) 1603 4658 w
11 /Times-Roman f
(.) 1933 4658 w
16 /Times-Bold f
(13.5.) 566 5018 w
(9P) 966 5018 w
(requests) 1184 5018 w
11 /Times-Roman f
(The) 816 5174 w
(first) 1020 5174 w
(function) 1231 5174 w
(we) 1631 5174 w
(are) 1793 5174 w
(going) 1960 5174 w
(to) 2246 5174 w
(implement) 2367 5174 w
(is) 2873 5174 w
11 /Courier f
(fsattach) 2982 5174 w
11 /Times-Roman f
(.) 3510 5174 w
(This) 3601 5174 w
(particular) 3832 5174 w
(function) 566 5294 w
(handles) 1006 5294 w
11 /Courier f
(Tattach) 1415 5294 w
11 /Times-Roman f
(messages.) 1950 5294 w
(Its) 2465 5294 w
(implementation) 2648 5294 w
(introduces) 3412 5294 w
(several) 3942 5294 w
(important) 566 5414 w
(data) 1022 5414 w
(structures) 1232 5414 w
(provided) 1686 5414 w
(and) 2104 5414 w
(used) 2290 5414 w
(by) 2519 5414 w
11 /Courier f
(lib9p) 2657 5414 w
11 /Times-Roman f
(.) 2987 5414 w
cleartomark
showpage
saveobj restore
%%EndPage: 19 19
%%Page: 20 20
/saveobj save def
mark
20 pagesetup
11 /Times-Roman f
(\255 20 \255) 2289 413 w
10 /Courier f
(static void) 786 676 w
(fsattach\(Req* r\)) 786 786 w
({) 786 896 w
(r\255>fid\255>qid = \(Qid\){0,0,QTDIR};) 1266 1006 w
(r\255>ofcall.qid = r\255>fid\255>qid;) 1266 1116 w
(respond\(r, nil\);) 1266 1226 w
(}) 786 1336 w
11 /Times-Roman f
(Like) 566 1552 w
(all) 795 1552 w
(other) 933 1552 w
(functions) 1186 1552 w
(for) 1623 1552 w
(9P) 1779 1552 w
(messages,) 1925 1552 w
11 /Courier f
(fsattach) 2396 1552 w
11 /Times-Roman f
(receives) 2953 1552 w
(a) 3339 1552 w
(pointer) 3416 1552 w
(to) 3756 1552 w
(a) 3871 1552 w
11 /Courier f
(Req) 3948 1552 w
11 /Times-Roman f
(,) 4146 1552 w
(a) 4203 1552 w
(C) 566 1672 w
(structure) 733 1672 w
(representing) 1208 1672 w
(a) 1841 1672 w
(9P) 1981 1672 w
(request.) 2190 1672 w
(Its) 2626 1672 w
(definition) 2828 1672 w
(may) 3348 1672 w
(be) 3629 1672 w
(found) 3824 1672 w
(at) 4172 1672 w
11 /Courier f
(/sys/include/9p.h) 566 1792 w
11 /Times-Roman f
(,) 1688 1792 w
(and) 1744 1792 w
(includes) 1930 1792 w
(the) 2324 1792 w
(following) 2486 1792 w
(fields:) 2942 1792 w
10 /Courier f
(typedef struct Req Req;) 786 1962 w
(struct Req) 786 2072 w
({) 786 2182 w
(ulong) 1266 2292 w
(tag;) 1746 2292 w
(Fcall) 1266 2402 w
(ifcall;) 1746 2402 w
(Fcall) 1266 2512 w
(ofcall;) 1746 2512 w
(Fid*) 1266 2622 w
(fid;) 1746 2622 w
(Dir) 1266 2732 w
(d;) 1746 2732 w
(void*) 1266 2842 w
(aux;) 1746 2842 w
(Srv*) 1266 2952 w
(srv;) 1746 2952 w
10 /Times-Italic f
(...) 1266 3062 w
10 /Courier f
(};) 786 3172 w
11 /Times-Roman f
(The) 566 3388 w
11 /Courier f
(tag) 770 3388 w
11 /Times-Roman f
(field) 1002 3388 w
(is) 1238 3388 w
(the) 1347 3388 w
(tag) 1516 3388 w
(for) 1685 3388 w
(the) 1847 3388 w
(request.) 2016 3388 w
(It) 2395 3388 w
(is) 2497 3388 w
(must) 2606 3388 w
(be) 2856 3388 w
(the) 2994 3388 w
(same) 3163 3388 w
(in) 3423 3388 w
(the) 3544 3388 w
11 /Courier f
(T\255) 3713 3388 w
11 /Times-Roman f
(message) 3880 3388 w
(and) 566 3508 w
(in) 755 3508 w
(the) 872 3508 w
11 /Courier f
(R\255) 1037 3508 w
11 /Times-Roman f
(message) 1200 3508 w
(used) 1602 3508 w
(to) 1834 3508 w
(respond.) 1951 3508 w
(The) 2357 3508 w
(actual) 2558 3508 w
(message) 2850 3508 w
(that) 3252 3508 w
(was) 3447 3508 w
(received) 3647 3508 w
(\(as) 4046 3508 w
(a) 4203 3508 w
(request\)) 566 3628 w
(from) 959 3628 w
(the) 1213 3628 w
(client) 1388 3628 w
(is) 1673 3628 w
(kept) 1788 3628 w
(at) 2018 3628 w
11 /Courier f
(ifcall) 2139 3628 w
11 /Times-Roman f
(.) 2535 3628 w
(This) 2633 3628 w
(structure) 2871 3628 w
(contains) 3296 3628 w
(the) 3704 3628 w
(message) 3880 3628 w
(unpacked) 566 3748 w
(as) 1030 3748 w
(a) 1166 3748 w
(C) 1259 3748 w
(structure,) 1378 3748 w
(reflecting) 1834 3748 w
(the) 2298 3748 w
(actual) 2477 3748 w
(message) 2783 3748 w
(received) 3198 3748 w
(as) 3611 3748 w
(an) 3746 3748 w
(array) 3893 3748 w
(of) 4160 3748 w
(bytes) 566 3868 w
(from) 836 3868 w
(the) 1088 3868 w
(connection) 1261 3868 w
(to) 1781 3868 w
(the) 1906 3868 w
(client.) 2079 3868 w
(The) 2418 3868 w
(purpose) 2627 3868 w
(of) 3013 3868 w
(the) 3143 3868 w
(function) 3316 3868 w
(is) 3721 3868 w
(to) 3834 3868 w
(handle) 3959 3868 w
(the) 566 3988 w
(request) 741 3988 w
(as) 1098 3988 w
(found) 1230 3988 w
(in) 1527 3988 w
11 /Courier f
(Req.ifcall) 1654 3988 w
11 /Times-Roman f
(,) 2314 3988 w
(and) 2383 3988 w
(then) 2582 3988 w
(fill) 2812 3988 w
(up) 2981 3988 w
(a) 3131 3988 w
(response) 3219 3988 w
(message.) 3642 3988 w
(The) 4081 3988 w
(response) 566 4108 w
(message) 978 4108 w
(is) 1378 4108 w
(actually) 1481 4108 w
11 /Courier f
(Req.ofcall) 1857 4108 w
11 /Times-Roman f
(.) 2517 4108 w
(This) 2602 4108 w
(field) 2827 4108 w
(contains) 3058 4108 w
(a) 3454 4108 w
(structure) 3532 4108 w
(similar) 3945 4108 w
(to) 566 4228 w
(that) 685 4228 w
(of) 883 4228 w
11 /Courier f
(Req.ifcall) 1007 4228 w
11 /Times-Roman f
(,) 1667 4228 w
(but) 1728 4228 w
(this) 1902 4228 w
(one) 2095 4228 w
(is) 2286 4228 w
(for) 2393 4228 w
(the) 2553 4228 w
(response) 2720 4228 w
(message) 3136 4228 w
(instead) 3540 4228 w
(of) 3884 4228 w
(being) 4007 4228 w
(for) 566 4348 w
(the) 721 4348 w
(request) 883 4348 w
(message.) 1227 4348 w
(The) 816 4504 w
(function) 1029 4504 w
11 /Courier f
(respond) 1438 4504 w
11 /Times-Roman f
(\(see) 1943 4504 w
(in) 2162 4504 w
11 /Courier f
(fsattach) 2292 4504 w
11 /Times-Roman f
(above\)) 2864 4504 w
(builds) 3205 4504 w
(a) 3519 4504 w
(response) 3611 4504 w
(mes\255) 4038 4504 w
(sage) 566 4624 w
(by) 794 4624 w
(looking) 938 4624 w
(into) 1309 4624 w
11 /Courier f
(Req.ofcall) 1515 4624 w
11 /Times-Roman f
(and) 2209 4624 w
(packing) 2401 4624 w
(the) 2782 4624 w
(message) 2950 4624 w
(in) 3355 4624 w
(an) 3475 4624 w
(array) 3611 4624 w
(of) 3867 4624 w
(bytes,) 3991 4624 w
(which) 566 4744 w
(is) 875 4744 w
(then) 990 4744 w
(sent) 1220 4744 w
(back) 1438 4744 w
(to) 1685 4744 w
(the) 1812 4744 w
(client.) 1988 4744 w
(It) 2330 4744 w
(does) 2439 4744 w
(so) 2682 4744 w
(if) 2822 4744 w
(the) 2931 4744 w
(second) 3107 4744 w
(argument) 3453 4744 w
(is) 3909 4744 w
11 /Courier f
(nil) 4025 4744 w
11 /Times-Roman f
(.) 4223 4744 w
(Otherwise,) 566 4864 w
(the) 1074 4864 w
(second) 1238 4864 w
(argument) 1571 4864 w
(is) 2014 4864 w
(taken) 2117 4864 w
(as) 2383 4864 w
(an) 2503 4864 w
(error) 2635 4864 w
(string,) 2875 4864 w
(and) 3183 4864 w
11 /Courier f
(respond) 3370 4864 w
11 /Times-Roman f
(responds) 3861 4864 w
(with) 566 4984 w
(an) 804 4984 w
11 /Courier f
(Rerror) 949 4984 w
11 /Times-Roman f
(message) 1387 4984 w
(instead.) 1801 4984 w
(In) 2183 4984 w
(our) 2317 4984 w
11 /Courier f
(fsattach) 2506 4984 w
11 /Times-Roman f
(implementation,) 3077 4984 w
(we) 3839 4984 w
(never) 4009 4984 w
(respond) 566 5104 w
(with) 950 5104 w
(errors) 1183 5104 w
(and) 1474 5104 w
(accept) 1669 5104 w
(any) 1984 5104 w
(request.) 2179 5104 w
(After) 2588 5104 w
(the) 2855 5104 w
(request) 3025 5104 w
(has) 3377 5104 w
(been) 3559 5104 w
(responded) 3801 5104 w
11 /Courier f
(respond) 566 5224 w
11 /Times-Roman f
(releases) 1068 5224 w
(the) 1453 5224 w
11 /Courier f
(Req) 1627 5224 w
11 /Times-Roman f
(data) 1865 5224 w
(structure.) 2087 5224 w
(A) 2538 5224 w
(request) 2657 5224 w
(should) 3013 5224 w
(never) 3347 5224 w
(be) 3629 5224 w
(used) 3772 5224 w
(again) 4014 5224 w
(after) 566 5344 w
(responding) 804 5344 w
(to) 1331 5344 w
(it.) 1456 5344 w
(As) 1613 5344 w
(you) 1774 5344 w
(can) 1978 5344 w
(see) 2168 5344 w
(in) 2346 5344 w
(our) 2471 5344 w
(function,) 2656 5344 w
(there) 3089 5344 w
(is) 3346 5344 w
(no) 3458 5344 w
(need) 3606 5344 w
(to) 3850 5344 w
(fill) 3974 5344 w
(all) 4141 5344 w
(fields) 566 5464 w
(in) 840 5464 w
(the) 956 5464 w
(response.) 1120 5464 w
(The) 1561 5464 w
(library) 1761 5464 w
(takes) 2083 5464 w
(care) 2338 5464 w
(of) 2548 5464 w
(many) 2669 5464 w
(of) 2944 5464 w
(them,) 3066 5464 w
(including) 3345 5464 w
(setting) 3792 5464 w
(the) 4117 5464 w
(tag) 566 5584 w
(and) 760 5584 w
(the) 978 5584 w
(type) 1172 5584 w
(in) 1421 5584 w
(the) 1567 5584 w
(reply) 1761 5584 w
(to) 2046 5584 w
(correspond) 2192 5584 w
(to) 2738 5584 w
(those) 2884 5584 w
(in) 3176 5584 w
(the) 3322 5584 w
(request.) 3516 5584 w
(So,) 3920 5584 w
(for) 4124 5584 w
11 /Courier f
(fsattach) 566 5704 w
11 /Times-Roman f
(,) 1094 5704 w
(we) 1150 5704 w
(only) 1305 5704 w
(had) 1529 5704 w
(to) 1715 5704 w
(fill) 1829 5704 w
(up) 1986 5704 w
(the) 2124 5704 w
(qid) 2286 5704 w
(sent) 2455 5704 w
(in) 2660 5704 w
(the) 2774 5704 w
(reply.) 2936 5704 w
(The) 816 5860 w
(data) 1024 5860 w
(structure) 1244 5860 w
11 /Courier f
(Fcall) 1665 5860 w
11 /Times-Roman f
(,) 1995 5860 w
(defined) 2061 5860 w
(in) 2427 5860 w
11 /Courier f
(/sys/include/fcall.h) 2551 5860 w
11 /Times-Roman f
(,) 3871 5860 w
(is) 3937 5860 w
(used) 4050 5860 w
(in) 566 5980 w
(Plan) 711 5980 w
(9) 966 5980 w
(to) 1080 5980 w
(represent) 1224 5980 w
(a) 1682 5980 w
(9P) 1788 5980 w
(message.) 1963 5980 w
(It) 2420 5980 w
(is) 2545 5980 w
(used) 2677 5980 w
(both) 2936 5980 w
(for) 3190 5980 w
11 /Courier f
(Req.ifcall) 3375 5980 w
11 /Times-Roman f
(and) 4093 5980 w
11 /Courier f
(Req.ofcall) 566 6100 w
11 /Times-Roman f
(.) 1226 6100 w
(The) 1322 6100 w
(meaning) 1532 6100 w
(of) 1950 6100 w
(its) 2081 6100 w
(fields) 2226 6100 w
(is) 2510 6100 w
(exactly) 2624 6100 w
(the) 2980 6100 w
(meaning) 3154 6100 w
(of) 3573 6100 w
(the) 3705 6100 w
(fields) 3880 6100 w
(in) 4165 6100 w
(the) 566 6220 w
(9P) 746 6220 w
(message) 909 6220 w
(represented) 1326 6220 w
(by) 1875 6220 w
(the) 2031 6220 w
11 /Courier f
(Fcall) 2211 6220 w
11 /Times-Roman f
(,) 2541 6220 w
(as) 2615 6220 w
(described) 2751 6220 w
(in) 3215 6220 w
(the) 3346 6220 w
(section) 3525 6220 w
(5) 3881 6220 w
(of) 3981 6220 w
(the) 4117 6220 w
(manual.) 566 6340 w
cleartomark
showpage
saveobj restore
%%EndPage: 20 20
%%Page: 21 21
/saveobj save def
mark
21 pagesetup
11 /Times-Roman f
(\255 21 \255) 2289 413 w
8 /Courier f
(typedef) 786 674 w
(struct) 786 782 w
(Fcall) 1266 782 w
({) 786 890 w
(uchar) 930 998 w
(type;) 1314 998 w
(u32int) 930 1106 w
(fid;) 1362 1106 w
(ushort) 930 1214 w
(tag;) 1362 1214 w
(union {) 930 1322 w
(struct {) 1074 1430 w
(u32int) 1266 1538 w
(msize;) 1746 1538 w
(/* Tversion, Rversion */) 2706 1538 w
(char) 1266 1646 w
(*version;) 1746 1646 w
(/* Tversion, Rversion */) 2706 1646 w
(};) 1074 1754 w
(struct {) 1074 1862 w
(ushort) 1266 1970 w
(oldtag;) 1746 1970 w
(/* Tflush */) 2706 1970 w
(};) 1074 2078 w
(struct {) 1074 2306 w
(char) 1266 2414 w
(*ename;) 1746 2414 w
(/* Rerror */) 2706 2414 w
(};) 1074 2522 w
(struct {) 1074 2630 w
(Qid) 1266 2738 w
(qid;) 1746 2738 w
(/* Rattach, Ropen, Rcreate */) 2706 2738 w
(u32int) 1266 2846 w
(iounit;) 1746 2846 w
(/* Ropen, Rcreate */) 2706 2846 w
(};) 1074 2954 w
(struct {) 1074 3062 w
(Qid) 1266 3170 w
(aqid;) 1746 3170 w
(/* Rauth */) 2706 3170 w
(};) 1074 3278 w
(struct {) 1074 3506 w
(u32int) 1266 3614 w
(afid;) 1746 3614 w
(/* Tauth, Tattach */) 2706 3614 w
(char) 1266 3722 w
(*uname;) 1746 3722 w
(/* Tauth, Tattach */) 2706 3722 w
(char) 1266 3830 w
(*aname;) 1746 3830 w
(/* Tauth, Tattach */) 2706 3830 w
(};) 1074 3938 w
(struct {) 1074 4046 w
(u32int) 1266 4154 w
(perm;) 1746 4154 w
(/* Tcreate */) 2706 4154 w
(char) 1266 4262 w
(*name;) 1746 4262 w
(/* Tcreate */) 2706 4262 w
(uchar) 1266 4370 w
(mode;) 1746 4370 w
(/* Tcreate, Topen */) 2706 4370 w
(};) 1074 4478 w
(struct {) 1074 4706 w
(u32int) 1266 4814 w
(newfid;) 1746 4814 w
(/* Twalk */) 2706 4814 w
(ushort) 1266 4922 w
(nwname;) 1746 4922 w
(/* Twalk */) 2706 4922 w
(char) 1266 5030 w
(*wname[MAXWELEM];) 1746 5030 w
(/* Twalk */) 2706 5030 w
(};) 1074 5138 w
(struct {) 1074 5246 w
(ushort) 1266 5354 w
(nwqid;) 1746 5354 w
(/* Rwalk */) 2706 5354 w
(Qid) 1266 5462 w
(wqid[MAXWELEM];) 1746 5462 w
(/* Rwalk */) 2706 5462 w
(};) 1074 5570 w
cleartomark
showpage
saveobj restore
%%EndPage: 21 21
%%Page: 22 22
/saveobj save def
mark
22 pagesetup
11 /Times-Roman f
(\255 22 \255) 2289 413 w
8 /Courier f
(struct {) 1074 674 w
(vlong) 1266 782 w
(offset;) 1746 782 w
(/* Tread, Twrite */) 2706 782 w
(u32int) 1266 890 w
(count;) 1746 890 w
(/* Tread, Twrite, Rread */) 2706 890 w
(char) 1266 998 w
(*data;) 1746 998 w
(/* Twrite, Rread */) 2706 998 w
(};) 1074 1106 w
(struct {) 1074 1214 w
(ushort) 1266 1322 w
(nstat;) 1746 1322 w
(/* Twstat, Rstat */) 2706 1322 w
(uchar) 1266 1430 w
(*stat;) 1746 1430 w
(/* Twstat, Rstat */) 2706 1430 w
(};) 1074 1538 w
(};) 930 1646 w
(} Fcall;) 786 1754 w
11 /Times-Roman f
(Most) 816 1970 w
(9P) 1074 1970 w
(requests) 1222 1970 w
(refer) 1612 1970 w
(to) 1847 1970 w
(a) 1965 1970 w
(particular) 2045 1970 w
(fid,) 2496 1970 w
(which) 2678 1970 w
(is) 2978 1970 w
(a) 3084 1970 w
(number) 3164 1970 w
(that) 3531 1970 w
(represents) 3728 1970 w
(a) 4203 1970 w
(particular) 566 2090 w
(file) 1025 2090 w
(in) 1211 2090 w
(use) 1337 2090 w
(by) 1523 2090 w
(the) 1673 2090 w
(client.) 1847 2090 w
(Thus,) 2159 2090 w
(a) 2447 2090 w
11 /Courier f
(Req) 2535 2090 w
11 /Times-Roman f
(contains) 2773 2090 w
(a) 3179 2090 w
(pointer) 3267 2090 w
(to) 3618 2090 w
(a) 3744 2090 w
11 /Courier f
(Fid) 3832 2090 w
11 /Times-Roman f
(data) 4069 2090 w
(structure) 566 2210 w
(that) 980 2210 w
(represents) 1176 2210 w
(a) 1650 2210 w
(fid,) 1730 2210 w
(maintained) 1912 2210 w
(by) 2432 2210 w
11 /Courier f
(lib9p) 2574 2210 w
11 /Times-Roman f
(.) 2904 2210 w
(The) 2992 2210 w
(library) 3194 2210 w
(keeps) 3518 2210 w
(a) 3799 2210 w
(table) 3879 2210 w
(for) 4124 2210 w
(fids) 566 2330 w
(in) 761 2330 w
(use,) 877 2330 w
(and) 1081 2330 w
(a) 1269 2330 w
11 /Courier f
(Fid) 1347 2330 w
11 /Times-Roman f
(data) 1575 2330 w
(structure) 1786 2330 w
(for) 2198 2330 w
(each) 2354 2330 w
(one.) 2582 2330 w
(When) 2797 2330 w
(the) 3087 2330 w
(protocol) 3250 2330 w
(dictates) 3645 2330 w
(that) 4009 2330 w
(a) 4203 2330 w
(new) 566 2450 w
(fid) 789 2450 w
(is) 952 2450 w
(allocated,) 1067 2450 w
(the) 1531 2450 w
(library) 1706 2450 w
(creates) 2039 2450 w
(a) 2382 2450 w
11 /Courier f
(Fid) 2471 2450 w
11 /Times-Roman f
(and) 2711 2450 w
(updates) 2911 2450 w
(the) 3288 2450 w
(table.) 3464 2450 w
(The) 3747 2450 w
(library) 3959 2450 w
(also) 566 2570 w
(releases) 771 2570 w
(fids) 1144 2570 w
(when) 1337 2570 w
(they) 1602 2570 w
(are) 1819 2570 w
(no) 1979 2570 w
(longer) 2117 2570 w
(in) 2425 2570 w
(use.) 2539 2570 w
(A) 2769 2570 w
11 /Courier f
(Fid) 2876 2570 w
11 /Times-Roman f
(looks) 3102 2570 w
(like) 3369 2570 w
(follows.) 3562 2570 w
10 /Courier f
(typedef struct Fid Fid;) 786 2740 w
(struct Fid) 786 2850 w
({) 786 2960 w
(ulong) 1266 3070 w
(fid;) 1746 3070 w
(char) 1266 3180 w
(omode;) 1746 3180 w
(/* \2551 = not open */) 2226 3180 w
(Qid) 1266 3290 w
(qid;) 1746 3290 w
(void*) 1266 3400 w
(aux;) 1746 3400 w
10 /Times-Italic f
(...) 1266 3510 w
10 /Courier f
(};) 786 3620 w
11 /Times-Roman f
(It) 566 3836 w
(contains) 667 3836 w
(the) 1067 3836 w
(fid) 1235 3836 w
(number,) 1391 3836 w
(the) 1788 3836 w
(open) 1956 3836 w
(mode) 2203 3836 w
(for) 2481 3836 w
(the) 2642 3836 w
(fid) 2811 3836 w
(\(or) 2968 3836 w
11 /Courier f
(\2551) 3130 3836 w
11 /Times-Roman f
(if) 3297 3836 w
(it) 3399 3836 w
(is) 3496 3836 w
(not) 3605 3836 w
(open\),) 3781 3836 w
(and) 4093 3836 w
(the) 566 3956 w
(qid) 728 3956 w
(for) 897 3956 w
(the) 1052 3956 w
(file) 1214 3956 w
(referenced) 1388 3956 w
(by) 1874 3956 w
(the) 2012 3956 w
(fid.) 2174 3956 w
(The) 816 4112 w
(purpose) 1020 4112 w
(of) 1401 4112 w
11 /Courier f
(fsattach) 1526 4112 w
11 /Times-Roman f
(is) 2088 4112 w
(to) 2196 4112 w
(let) 2316 4112 w
(clients) 2461 4112 w
(attach) 2783 4112 w
(to) 3079 4112 w
(our) 3200 4112 w
(tree,) 3381 4112 w
(by) 3607 4112 w
(making) 3752 4112 w
(the) 4117 4112 w
(fid) 566 4232 w
(refer) 717 4232 w
(to) 950 4232 w
(our) 1065 4232 w
(root) 1240 4232 w
(directory) 1445 4232 w
(and) 1868 4232 w
(replying) 2054 4232 w
(with) 2448 4232 w
(an) 2672 4232 w
11 /Courier f
(Rattach) 2803 4232 w
11 /Times-Roman f
(message) 3293 4232 w
(informing) 3692 4232 w
(of) 4160 4232 w
(its) 566 4352 w
(qid.) 710 4352 w
(The) 919 4352 w
(library) 1129 4352 w
(helps) 1461 4352 w
(in) 1733 4352 w
(mapping) 1859 4352 w
(fids) 2284 4352 w
(to) 2489 4352 w
(qids,) 2615 4352 w
(because) 2867 4352 w
(it) 3252 4352 w
(handles) 3354 4352 w
(all) 3729 4352 w
(the) 3879 4352 w
11 /Courier f
(Fid) 4053 4352 w
11 /Times-Roman f
(structures) 566 4472 w
(and) 1037 4472 w
(keeps) 1240 4472 w
(their) 1534 4472 w
(qids) 1780 4472 w
(in) 2008 4472 w
(each) 2138 4472 w
11 /Courier f
(Fid.qid) 2381 4472 w
11 /Times-Roman f
(.) 2843 4472 w
(But) 2943 4472 w
(the) 3147 4472 w
(file) 3325 4472 w
(server) 3515 4472 w
(must) 3825 4472 w
(still) 4084 4472 w
(map) 566 4592 w
(different) 783 4592 w
(qids) 1187 4592 w
(to) 1399 4592 w
(different) 1513 4592 w
(files.) 1917 4592 w
(In) 816 4748 w
11 /Courier f
(semfs) 944 4748 w
11 /Times-Roman f
(,) 1274 4748 w
(there) 1339 4748 w
(is) 1594 4748 w
(a) 1705 4748 w
(flat) 1790 4748 w
(\(root\)) 1973 4748 w
(directory) 2259 4748 w
(that) 2692 4748 w
(may) 2895 4748 w
(contain) 3122 4748 w
(files) 3483 4748 w
(representing) 3710 4748 w
(semaphores.) 566 4868 w
(The) 1185 4868 w
(qid) 1401 4868 w
(for) 1588 4868 w
(the) 1760 4868 w
(directory) 1939 4868 w
(must) 2379 4868 w
(have) 2639 4868 w
11 /Courier f
(QTDIR) 2890 4868 w
11 /Times-Roman f
(set) 3265 4868 w
(in) 3432 4868 w
(its) 3563 4868 w
11 /Courier f
(type) 3713 4868 w
11 /Times-Roman f
(field.) 4022 4868 w
(Having) 566 4988 w
(just) 920 4988 w
(one) 1111 4988 w
(directory,) 1300 4988 w
(we) 1754 4988 w
(may) 1912 4988 w
(use) 2132 4988 w
11 /Courier f
(Qid.type) 2310 4988 w
11 /Times-Roman f
(to) 2870 4988 w
(see) 2988 4988 w
(if) 3159 4988 w
(a) 3258 4988 w
(qid) 3338 4988 w
(refers) 3511 4988 w
(to) 3790 4988 w
(the) 3908 4988 w
(root) 4074 4988 w
(or) 566 5108 w
(to) 688 5108 w
(any) 805 5108 w
(other) 994 5108 w
(file) 1250 5108 w
(in) 1427 5108 w
(our) 1544 5108 w
(tree.) 1721 5108 w
(The) 1943 5108 w
11 /Courier f
(path) 2144 5108 w
11 /Times-Roman f
(field) 2439 5108 w
(for) 2671 5108 w
(the) 2829 5108 w
(qid) 2993 5108 w
(\(i.e.,) 3164 5108 w
(the) 3393 5108 w
(actual) 3557 5108 w
(qid) 3848 5108 w
(num\255) 4019 5108 w
(ber\)) 566 5228 w
(may) 787 5228 w
(be) 1022 5228 w
(just) 1171 5228 w
(zero,) 1377 5228 w
(as) 1638 5228 w
(the) 1776 5228 w
(version) 1957 5228 w
(field.) 2327 5228 w
(Therefore,) 2631 5228 w
(this) 3135 5228 w
(is) 3342 5228 w
(what) 3463 5228 w
11 /Courier f
(fsattach) 3723 5228 w
11 /Times-Roman f
(does.) 566 5348 w
10 /Courier f
(r\255>fid\255>qid = \(Qid\){0,0,QTDIR};) 786 5518 w
(r\255>ofcall.qid = r\255>fid\255>qid;) 786 5628 w
11 /Times-Roman f
(The) 566 5844 w
(fid) 770 5844 w
(represented) 926 5844 w
(by) 1463 5844 w
11 /Courier f
(r\255>fid) 1607 5844 w
11 /Times-Roman f
(\(the) 2037 5844 w
(one) 2241 5844 w
(mentioned) 2434 5844 w
(by) 2933 5844 w
(the) 3078 5844 w
11 /Courier f
(Tattach) 3247 5844 w
11 /Times-Roman f
(\)) 3709 5844 w
(now) 3780 5844 w
(refers) 4004 5844 w
(to) 566 5964 w
(the) 689 5964 w
(root) 860 5964 w
(directory) 1074 5964 w
(of) 1506 5964 w
(our) 1634 5964 w
(tree.) 1817 5964 w
(The) 2045 5964 w
(response) 2252 5964 w
(message) 2672 5964 w
(carries) 3080 5964 w
(the) 3406 5964 w
(qid) 3576 5964 w
(back) 3753 5964 w
(to) 3995 5964 w
(the) 4117 5964 w
(client.) 566 6084 w
(That) 866 6084 w
(is) 1095 6084 w
(all) 1197 6084 w
(we) 1335 6084 w
(had) 1490 6084 w
(to) 1676 6084 w
(do.) 1790 6084 w
(We) 816 6240 w
(still) 1031 6240 w
(must) 1262 6240 w
(invent) 1541 6240 w
(a) 1880 6240 w
(scheme) 1992 6240 w
(for) 2384 6240 w
(assigning) 2575 6240 w
(qids) 3056 6240 w
(to) 3305 6240 w
(files) 3456 6240 w
(representing) 3710 6240 w
cleartomark
showpage
saveobj restore
%%EndPage: 22 22
%%Page: 23 23
/saveobj save def
mark
23 pagesetup
11 /Times-Roman f
(\255 23 \255) 2289 413 w
(semaphores.) 566 686 w
(A) 1171 686 w
(simple) 1282 686 w
(way) 1608 686 w
(is) 1822 686 w
(to) 1928 686 w
(keep) 2046 686 w
(all) 2284 686 w
(the) 2426 686 w
(semaphores) 2592 686 w
(in) 3141 686 w
(a) 3259 686 w
(single) 3339 686 w
(array,) 3634 686 w
(and) 3916 686 w
(use) 4105 686 w
(the) 566 806 w
(array) 729 806 w
(index) 981 806 w
(as) 1254 806 w
(the) 1374 806 w
11 /Courier f
(Qid.path) 1537 806 w
11 /Times-Roman f
(for) 2094 806 w
(each) 2250 806 w
(file.) 2478 806 w
(Given) 2681 806 w
(a) 2978 806 w
(qid,) 3055 806 w
(we) 3253 806 w
(would) 3409 806 w
(know) 3714 806 w
(if) 3988 806 w
(it) 4085 806 w
(is) 4177 806 w
(the) 566 926 w
(directory) 738 926 w
(or) 1171 926 w
(a) 1300 926 w
(file.) 1386 926 w
(Should) 1598 926 w
(it) 1948 926 w
(be) 2047 926 w
(a) 2187 926 w
(file,) 2272 926 w
11 /Courier f
(Qid.path) 2483 926 w
11 /Times-Roman f
(would) 3048 926 w
(be) 3360 926 w
(the) 3500 926 w
(unique) 3671 926 w
(index) 4007 926 w
(for) 566 1046 w
(each) 721 1046 w
(semaphore) 948 1046 w
(in) 1450 1046 w
(the) 1564 1046 w
(array.) 1726 1046 w
16 /Times-Bold f
(13.6.) 566 1406 w
(Semaphores) 966 1406 w
11 /Times-Roman f
(What) 566 1562 w
(is) 835 1562 w
(a) 941 1562 w
(semaphore?) 1021 1562 w
(For) 1575 1562 w
(our) 1760 1562 w
(server,) 1939 1562 w
(it) 2266 1562 w
(is) 2361 1562 w
(just) 2468 1562 w
(an) 2661 1562 w
(instance) 2797 1562 w
(of) 3189 1562 w
(a) 3313 1562 w
11 /Courier f
(Sem) 3394 1562 w
11 /Times-Roman f
(data) 3625 1562 w
(structure.) 3840 1562 w
(We) 566 1682 w
(can) 760 1682 w
(place) 954 1682 w
(in) 1227 1682 w
11 /Courier f
(sem.h) 1356 1682 w
11 /Times-Roman f
(its) 1729 1682 w
(declaration) 1877 1682 w
(and) 2406 1682 w
(all) 2607 1682 w
(the) 2760 1682 w
(definitions) 2937 1682 w
(needed) 3450 1682 w
(to) 3801 1682 w
(use) 3929 1682 w
(the) 4117 1682 w
(implementation) 566 1802 w
(for) 1292 1802 w
(semaphores,) 1454 1802 w
(that) 2034 1802 w
(we) 2234 1802 w
(may) 2397 1802 w
(keep) 2622 1802 w
(at) 2864 1802 w
11 /Courier f
(sem.c) 2979 1802 w
11 /Times-Roman f
(.) 3309 1802 w
(The) 3401 1802 w
(file) 3607 1802 w
11 /Courier f
(semfs.c) 3789 1802 w
11 /Times-Roman f
(is) 566 1922 w
(kept) 668 1922 w
(just) 885 1922 w
(with) 1073 1922 w
(the) 1297 1922 w
(implementation) 1459 1922 w
(for) 2178 1922 w
(the) 2333 1922 w
(different) 2495 1922 w
(file) 2899 1922 w
(server) 3073 1922 w
(requests.) 3367 1922 w
(The) 816 2078 w
(structure) 1031 2078 w
11 /Courier f
(Sem) 1459 2078 w
11 /Times-Roman f
(needs) 1702 2078 w
(to) 1996 2078 w
(keep) 2127 2078 w
(the) 2378 2078 w
(number) 2557 2078 w
(of) 2937 2078 w
(tickets.) 3073 2078 w
(Also,) 3461 2078 w
(we) 3742 2078 w
(need) 3914 2078 w
(to) 4165 2078 w
(record) 566 2198 w
(the) 882 2198 w
(name) 1054 2198 w
(for) 1329 2198 w
(the) 1494 2198 w
(file) 1666 2198 w
(representing) 1850 2198 w
(the) 2429 2198 w
(semaphore) 2601 2198 w
(and) 3113 2198 w
(its) 3309 2198 w
(index) 3452 2198 w
(in) 3734 2198 w
(the) 3857 2198 w
(array) 4028 2198 w
(\(used) 566 2318 w
(to) 831 2318 w
(build) 945 2318 w
(its) 1200 2318 w
(qid\).) 1333 2318 w
(When) 816 2474 w
(a) 1105 2474 w
11 /Times-Italic f
(down) 1181 2474 w
11 /Times-Roman f
(is) 1448 2474 w
(made) 1550 2474 w
(on) 1815 2474 w
(a) 1953 2474 w
(semaphore) 2029 2474 w
(with) 2531 2474 w
(no) 2755 2474 w
(tickets,) 2893 2474 w
(we) 3236 2474 w
(must) 3391 2474 w
(hold) 3634 2474 w
(the) 3858 2474 w
(oper\255) 4021 2474 w
(ation) 566 2594 w
(until) 836 2594 w
(there) 1089 2594 w
(is) 1356 2594 w
(one) 1479 2594 w
(ticket) 1686 2594 w
(available.) 1979 2594 w
(In) 2451 2594 w
(our) 2591 2594 w
(case,) 2786 2594 w
(when) 3050 2594 w
(a) 3336 2594 w
11 /Courier f
(Tread) 3433 2594 w
11 /Times-Roman f
(request) 3812 2594 w
(is) 4177 2594 w
(received) 566 2714 w
(for) 964 2714 w
(a) 1120 2714 w
(semaphore) 1198 2714 w
(that) 1702 2714 w
(has) 1897 2714 w
(no) 2073 2714 w
(tickets,) 2213 2714 w
(we) 2558 2714 w
(must) 2715 2714 w
(hold) 2960 2714 w
(the) 3186 2714 w
(request) 3350 2714 w
(until) 3696 2714 w
(there) 3929 2714 w
(is) 4177 2714 w
(one) 566 2834 w
(ticket) 763 2834 w
(and) 1046 2834 w
(we) 1242 2834 w
(can) 1407 2834 w
(reply.) 1596 2834 w
(Therefore,) 1887 2834 w
(the) 2382 2834 w
(semaphore) 2554 2834 w
(needs) 3066 2834 w
(to) 3353 2834 w
(maintain) 3477 2834 w
(a) 3900 2834 w
(list) 3986 2834 w
(of) 4160 2834 w
(requests) 566 2954 w
(to) 958 2954 w
(be) 1077 2954 w
(replied) 1213 2954 w
(when) 1550 2954 w
(tickets) 1820 2954 w
(arrive.) 2140 2954 w
(For) 2455 2954 w
(now,) 2641 2954 w
(this) 2892 2954 w
(is) 3086 2954 w
(all) 3194 2954 w
(we) 3338 2954 w
(need.) 3499 2954 w
(The) 3767 2954 w
(result\255) 3971 2954 w
(ing) 566 3074 w
(data) 735 3074 w
(structure) 945 3074 w
(is) 1356 3074 w
(as) 1458 3074 w
(follows) 1577 3074 w
(\(Ignore) 1935 3074 w
(the) 2284 3074 w
(field) 2446 3074 w
11 /Courier f
(Ref) 2675 3074 w
11 /Times-Roman f
(by) 2901 3074 w
(now\).) 3039 3074 w
9 /S f
(\347) 566 3244 w
9 /Times-Bold f
(sem.h) 581 3244 w
9 /S f
(\347) 819 3244 w
(`) 566 3244 w
(`````) 594 3244 w
(_) 566 3244 w
(_____) 594 3244 w
10 /Courier f
(typedef struct Sem Sem;) 786 3388 w
(typedef struct QReq QReq;) 786 3532 w
(struct Sem {) 786 3676 w
(Ref;) 1266 3820 w
(int) 1266 3964 w
(id;) 1746 3964 w
(// index in array; qid.path) 2226 3964 w
(char*) 1266 4108 w
(name;) 1746 4108 w
(// of file) 2226 4108 w
(int) 1266 4252 w
(tickets;) 1746 4252 w
(QReq*) 1266 4396 w
(reqs;) 1746 4396 w
(// reads \(i.e., downs\) pending) 2226 4396 w
(};) 786 4540 w
(struct QReq {) 786 4770 w
(QReq*) 1266 4880 w
(next;) 1746 4880 w
(// in pending request list) 2226 4880 w
(Req*) 1266 4990 w
(r;) 1746 4990 w
(// the request pending) 2226 4990 w
(};) 786 5100 w
(extern Sem*) 786 5210 w
(sems[Nsems];) 1746 5210 w
11 /Times-Roman f
(Before) 566 5426 w
(proceeding,) 891 5426 w
(we) 1433 5426 w
(are) 1588 5426 w
(going) 1749 5426 w
(to) 2029 5426 w
(complete) 2144 5426 w
(the) 2575 5426 w
(implementation) 2738 5426 w
(for) 3458 5426 w
(the) 3614 5426 w
(semaphore) 3777 5426 w
(abstraction) 566 5546 w
(by) 1092 5546 w
(implementing) 1247 5546 w
(its) 1904 5546 w
(operations.) 2054 5546 w
(We) 2612 5546 w
(need) 2808 5546 w
(to) 3059 5546 w
(create) 3189 5546 w
(semaphores.) 3492 5546 w
(The) 4081 5546 w
(function) 566 5666 w
11 /Courier f
(newsem) 960 5666 w
11 /Times-Roman f
(does) 1384 5666 w
(that.) 1613 5666 w
(The) 816 5822 w
11 /Courier f
(Sem) 1020 5822 w
11 /Times-Roman f
(structure) 1252 5822 w
(is) 1669 5822 w
(initialized) 1777 5822 w
(to) 2251 5822 w
(contain) 2372 5822 w
(no) 2730 5822 w
(tickets.) 2875 5822 w
(The) 3225 5822 w
11 /Courier f
(id) 3430 5822 w
11 /Times-Roman f
(field) 3597 5822 w
(keeps) 3833 5822 w
(the) 4117 5822 w
(index) 566 5942 w
(in) 846 5942 w
(the) 968 5942 w
(array,) 1138 5942 w
(and) 1425 5942 w
(the) 1619 5942 w
(name) 1789 5942 w
(for) 2061 5942 w
(the) 2223 5942 w
(file) 2392 5942 w
(representing) 2573 5942 w
(the) 3149 5942 w
(semaphore) 3318 5942 w
(is) 3827 5942 w
(kept) 3936 5942 w
(as) 4160 5942 w
(well.) 566 6062 w
cleartomark
showpage
saveobj restore
%%EndPage: 23 23
%%Page: 24 24
/saveobj save def
mark
24 pagesetup
11 /Times-Roman f
(\255 24 \255) 2289 413 w
9 /S f
(\347) 566 676 w
9 /Times-Bold f
(sem.c) 581 676 w
9 /S f
(\347) 809 676 w
(`) 566 676 w
(`````) 584 676 w
(_) 566 676 w
(_____) 584 676 w
10 /Times-Italic f
(...) 786 820 w
10 /Courier f
(Sem*) 786 964 w
(sems[Nsems];) 1266 964 w
(Sem*) 786 1252 w
(newsem\(char* name\)) 786 1396 w
({) 786 1540 w
(int) 1266 1684 w
(i;) 1746 1684 w
(for \(i = 0; i < Nsems; i++\)) 1266 1972 w
(if \(sems[i] == nil\)) 1746 2116 w
(break;) 2226 2260 w
(if \(i == Nsems\)) 1266 2404 w
(return nil;) 1746 2548 w
(sems[i] = emalloc9p\(sizeof\(Sem\)\);) 1266 2692 w
(memset\(sems[i], 0, sizeof\(Sem\)\);) 1266 2836 w
(sems[i]\255>ref = 2;) 1266 2980 w
(sems[i]\255>id = i;) 1266 3124 w
(sems[i]\255>name = estrdup9p\(name\);) 1266 3268 w
(return sems[i];) 1266 3412 w
(}) 786 3556 w
11 /Times-Roman f
(The) 566 3772 w
(function) 779 3772 w
(locates) 1188 3772 w
(a) 1535 3772 w
(free) 1626 3772 w
(entry) 1837 3772 w
(in) 2105 3772 w
11 /Courier f
(sems) 2234 3772 w
11 /Times-Roman f
(;) 2498 3772 w
(to) 2572 3772 w
(keep) 2701 3772 w
(the) 2950 3772 w
(new) 3127 3772 w
(semaphore.) 3352 3772 w
(When) 3898 3772 w
(a) 4203 3772 w
(semaphore) 566 3892 w
(is) 1082 3892 w
(no) 1198 3892 w
(longed) 1350 3892 w
(needed,) 1691 3892 w
(and) 2070 3892 w
(is) 2270 3892 w
(released,) 2386 3892 w
(we) 2813 3892 w
(will) 2982 3892 w
(deallocate) 3196 3892 w
(it) 3681 3892 w
(and) 3784 3892 w
(set) 3983 3892 w
(its) 4146 3892 w
(entry) 566 4012 w
(to) 819 4012 w
(nil) 933 4012 w
(in) 1078 4012 w
(the) 1192 4012 w
(array.) 1354 4012 w
(So,) 1633 4012 w
(the) 1806 4012 w
(function) 1968 4012 w
(sweeps) 2362 4012 w
(the) 2706 4012 w
(array) 2868 4012 w
(from) 3119 4012 w
(the) 3360 4012 w
(beginning,) 3522 4012 w
(look\255) 4019 4012 w
(ing) 566 4132 w
(for) 735 4132 w
(the) 890 4132 w
(first) 1052 4132 w
(available) 1257 4132 w
(entry.) 1680 4132 w
(All) 816 4288 w
(the) 1001 4288 w
(semaphores) 1179 4288 w
(will) 1740 4288 w
(be) 1956 4288 w
(kept) 2103 4288 w
(in) 2336 4288 w
(the) 2466 4288 w
(array) 2644 4288 w
11 /Courier f
(sems) 2911 4288 w
11 /Times-Roman f
(,) 3175 4288 w
(indexed) 3247 4288 w
(by) 3638 4288 w
(their) 3793 4288 w
(qids.) 4039 4288 w
(This) 566 4408 w
(violates) 796 4408 w
(a) 1172 4408 w
(little) 1254 4408 w
(bit) 1491 4408 w
(the) 1642 4408 w
(convention) 1810 4408 w
(that) 2331 4408 w
(a) 2529 4408 w
(qid) 2610 4408 w
(number) 2784 4408 w
(is) 3152 4408 w
(never) 3259 4408 w
(reused) 3534 4408 w
(for) 3852 4408 w
(a) 4012 4408 w
(dif\255) 4093 4408 w
(ferent) 566 4528 w
(file.) 852 4528 w
(A) 1058 4528 w
(semaphore) 1169 4528 w
(using) 1675 4528 w
(an) 1946 4528 w
(array) 2081 4528 w
(entry) 2336 4528 w
(that) 2593 4528 w
(was) 2790 4528 w
(used) 2992 4528 w
(before) 3226 4528 w
(by) 3537 4528 w
(an) 3680 4528 w
(old) 3816 4528 w
(sema\255) 3990 4528 w
(phore) 566 4648 w
(\(now) 848 4648 w
(removed\)) 1106 4648 w
(is) 1558 4648 w
(going) 1665 4648 w
(to) 1949 4648 w
(have) 2068 4648 w
(the) 2306 4648 w
(same) 2472 4648 w
(qid) 2729 4648 w
(used) 2902 4648 w
(by) 3135 4648 w
(the) 3277 4648 w
(old) 3443 4648 w
(one.) 3616 4648 w
(This) 3834 4648 w
(may) 4062 4648 w
(cause) 566 4768 w
(problems) 844 4768 w
(if) 1289 4768 w
(binds) 1392 4768 w
(are) 1667 4768 w
(done) 1835 4768 w
(to) 2084 4768 w
(semaphore) 2207 4768 w
(files,) 2718 4768 w
(and) 2972 4768 w
(also) 3167 4768 w
(if) 3381 4768 w
(any) 3485 4768 w
(client) 3680 4768 w
(caches) 3961 4768 w
(semaphores.) 566 4888 w
(In) 1143 4888 w
(our) 1266 4888 w
(case,) 1444 4888 w
(we) 1691 4888 w
(prefer) 1850 4888 w
(to) 2141 4888 w
(ignore) 2259 4888 w
(this) 2571 4888 w
(problem.) 2763 4888 w
(To) 3216 4888 w
(fix) 3369 4888 w
(it,) 3522 4888 w
(the) 3643 4888 w
(file) 3808 4888 w
(server) 3985 4888 w
(can) 566 5008 w
(keep) 750 5008 w
(a) 989 5008 w
(global) 1070 5008 w
(counter) 1378 5008 w
(to) 1739 5008 w
(assign) 1858 5008 w
(qid) 2167 5008 w
(numbers) 2342 5008 w
(to) 2754 5008 w
(semaphores,) 2874 5008 w
(and) 3453 5008 w
(increment) 3645 5008 w
(the) 4117 5008 w
(counter) 566 5128 w
(each) 937 5128 w
(time) 1179 5128 w
(a) 1418 5128 w
(new) 1509 5128 w
(semaphore) 1733 5128 w
(is) 2249 5128 w
(created.) 2365 5128 w
(Nevertheless,) 2749 5128 w
(the) 3384 5128 w
(implementation) 3560 5128 w
(shown) 566 5248 w
(here) 881 5248 w
(suffices) 1096 5248 w
(for) 1464 5248 w
(our) 1619 5248 w
(purposes.) 1793 5248 w
(Instead) 816 5404 w
(of) 1174 5404 w
(using) 1307 5404 w
11 /Courier f
(malloc) 1588 5404 w
11 /Times-Roman f
(,) 1984 5404 w
(we) 2054 5404 w
(must) 2223 5404 w
(use) 2480 5404 w
11 /Courier f
(emalloc9p) 2668 5404 w
11 /Times-Roman f
(.) 3262 5404 w
(The) 3361 5404 w
(9P) 3574 5404 w
(library) 3734 5404 w
(pro\255) 4069 5404 w
(vides) 566 5524 w
(implementations) 851 5524 w
(for) 1637 5524 w
11 /Courier f
(emalloc9p) 1816 5524 w
11 /Times-Roman f
(,) 2410 5524 w
11 /Courier f
(erealloc9p) 2490 5524 w
11 /Times-Roman f
(,) 3150 5524 w
(and) 3230 5524 w
11 /Courier f
(estrdup9p) 3440 5524 w
11 /Times-Roman f
(that) 4086 5524 w
(mimic) 566 5644 w
(the) 885 5644 w
(ones) 1056 5644 w
(with) 1294 5644 w
(a) 1527 5644 w
(similar) 1613 5644 w
(name) 1957 5644 w
(in) 2232 5644 w
(the) 2356 5644 w
(C) 2528 5644 w
(library.) 2640 5644 w
(These) 2998 5644 w
(implementations) 3297 5644 w
(take) 4069 5644 w
(an) 566 5764 w
(appropriate) 704 5764 w
(action) 1237 5764 w
(when) 1540 5764 w
(there) 1812 5764 w
(is) 2065 5764 w
(no) 2174 5764 w
(more) 2319 5764 w
(memory,) 2579 5764 w
(and) 3007 5764 w
(guarantee) 3199 5764 w
(that) 3657 5764 w
(they) 3856 5764 w
(will) 4079 5764 w
(always) 566 5884 w
(return) 914 5884 w
(new) 1219 5884 w
(memory.) 1445 5884 w
(The) 1883 5884 w
(appropriate) 2097 5884 w
(action) 2639 5884 w
(is) 2951 5884 w
(simply) 3069 5884 w
(aborting) 3414 5884 w
(the) 3824 5884 w
(entire) 4002 5884 w
(program,) 566 6004 w
(but) 1004 6004 w
(you) 1184 6004 w
(may) 1388 6004 w
(implement) 1616 6004 w
(your) 2126 6004 w
(own) 2366 6004 w
(versions) 2594 6004 w
(for) 2999 6004 w
(these) 3165 6004 w
(functions) 3429 6004 w
(if) 3877 6004 w
(some\255) 3983 6004 w
(thing) 566 6124 w
(better) 821 6124 w
(is) 1098 6124 w
(needed.) 1200 6124 w
(Perhaps) 816 6280 w
(surprisingly,) 1203 6280 w
(there) 1798 6280 w
(is) 2057 6280 w
11 /Times-Italic f
(no) 2172 6280 w
11 /Times-Roman f
(function) 2323 6280 w
(to) 2730 6280 w
(free) 2857 6280 w
(a) 3066 6280 w
(semaphore.) 3155 6280 w
(The) 3698 6280 w
(point) 3909 6280 w
(is) 4177 6280 w
cleartomark
showpage
saveobj restore
%%EndPage: 24 24
%%Page: 25 25
/saveobj save def
mark
25 pagesetup
11 /Times-Roman f
(\255 25 \255) 2289 413 w
(that) 566 686 w
(we) 761 686 w
(can) 918 686 w
(only) 1099 686 w
(free) 1325 686 w
(a) 1523 686 w
11 /Courier f
(Sem) 1601 686 w
11 /Times-Roman f
(when) 1829 686 w
(we) 2096 686 w
(know) 2253 686 w
(that) 2527 686 w
(no) 2722 686 w
(data) 2862 686 w
(structure) 3074 686 w
(in) 3487 686 w
(our) 3602 686 w
(program) 3777 686 w
(is) 4177 686 w
(using) 566 806 w
(it.) 836 806 w
(But) 957 806 w
(when) 1148 806 w
(does) 1416 806 w
(that) 1648 806 w
(happen?) 1844 806 w
(Requests) 2239 806 w
(mention) 2667 806 w
(fids,) 3059 806 w
(that) 3283 806 w
(may) 3479 806 w
(refer) 3699 806 w
(to) 3935 806 w
11 /Courier f
(Sem) 4053 806 w
11 /Times-Roman f
(data) 566 926 w
(structures.) 785 926 w
(If) 1276 926 w
(a) 1385 926 w
(user) 1470 926 w
(wants) 1689 926 w
(to) 1982 926 w
(remove) 2105 926 w
(a) 2470 926 w
(file) 2555 926 w
(representing) 2738 926 w
(a) 3315 926 w
(semaphore,) 3399 926 w
(we) 3937 926 w
(can) 4100 926 w
(only) 566 1046 w
(do) 792 1046 w
(so) 932 1046 w
(when) 1060 1046 w
(no) 1327 1046 w
(references) 1467 1046 w
(remain) 1943 1046 w
(to) 2277 1046 w
(that) 2393 1046 w
(semaphore.) 2588 1046 w
(Calling) 3120 1046 w
11 /Courier f
(free) 3475 1046 w
11 /Times-Roman f
(on) 3770 1046 w
(a) 3911 1046 w
(sema\255) 3990 1046 w
(phore) 566 1166 w
(while) 843 1166 w
(there) 1115 1166 w
(might) 1361 1166 w
(be) 1647 1166 w
(requests) 1778 1166 w
(and/or) 2165 1166 w
(fids) 2473 1166 w
(pointing) 2666 1166 w
(to) 3062 1166 w
(it) 3176 1166 w
(would) 3266 1166 w
(be) 3569 1166 w
(a) 3700 1166 w
(disaster.) 3776 1166 w
(The) 816 1322 w
(solution) 1015 1322 w
(is) 1400 1322 w
(to) 1503 1322 w
(do) 1618 1322 w
11 /Times-Bold f
(reference) 1757 1322 w
(counting) 2220 1322 w
11 /Times-Roman f
(.) 2631 1322 w
(Each) 2716 1322 w
(semaphore) 2963 1322 w
(contains) 3466 1322 w
(one) 3862 1322 w
(inte\255) 4050 1322 w
(ger,) 566 1442 w
(which) 762 1442 w
(is) 1059 1442 w
(called) 1162 1442 w
(a) 1452 1442 w
(reference) 1529 1442 w
(counter.) 1961 1442 w
(For) 2374 1442 w
(each) 2556 1442 w
(reference) 2784 1442 w
(that) 3216 1442 w
(points) 3410 1442 w
(to) 3708 1442 w
(a) 3822 1442 w
11 /Courier f
(Sem) 3898 1442 w
11 /Times-Roman f
(we) 4124 1442 w
(count) 566 1562 w
(one) 861 1562 w
(reference) 1070 1562 w
(using) 1524 1562 w
(the) 1814 1562 w
(counter.) 2000 1562 w
(New) 2408 1562 w
(references) 2666 1562 w
(made) 3164 1562 w
(to) 3453 1562 w
(the) 3591 1562 w
(semaphore) 3777 1562 w
(increment) 566 1682 w
(the) 1057 1682 w
(counter.) 1244 1682 w
(When) 1681 1682 w
(a) 1995 1682 w
(reference) 2096 1682 w
(is) 2552 1682 w
(gone,) 2679 1682 w
(we) 2973 1682 w
(decrement) 3153 1682 w
(the) 3661 1682 w
(reference) 3848 1682 w
(counter.) 566 1802 w
(Only) 950 1802 w
(when) 1198 1802 w
(the) 1463 1802 w
(counter) 1625 1802 w
(gets) 1981 1802 w
(down) 2186 1802 w
(to) 2458 1802 w
(zero) 2572 1802 w
(it) 2787 1802 w
(is) 2877 1802 w
(safe) 2979 1802 w
(to) 3182 1802 w
(release) 3297 1802 w
(the) 3628 1802 w
(data) 3791 1802 w
(struc\255) 4002 1802 w
(ture.) 566 1922 w
(This) 842 1922 w
(technique) 1088 1922 w
(is) 1564 1922 w
(used) 1688 1922 w
(in) 1939 1922 w
(many) 2075 1922 w
(different) 2369 1922 w
(places) 2795 1922 w
(by) 3117 1922 w
(operating) 3276 1922 w
(systems,) 3739 1922 w
(to) 4165 1922 w
(release) 566 2042 w
(file) 924 2042 w
(descriptors) 1126 2042 w
(when) 1663 2042 w
(no) 1956 2042 w
(process) 2123 2042 w
(is) 2508 2042 w
(using) 2639 2042 w
(them,) 2935 2042 w
(to) 3240 2042 w
(remove) 3383 2042 w
(files) 3768 2042 w
(when) 4014 2042 w
(nobody) 566 2162 w
(is) 924 2162 w
(using) 1026 2162 w
(them,) 1293 2162 w
(to) 1569 2162 w
(destroy) 1683 2162 w
(windows) 2034 2162 w
(when) 2459 2162 w
(no) 2724 2162 w
(process) 2862 2162 w
(is) 3218 2162 w
(using) 3320 2162 w
(them,) 3587 2162 w
(etc.) 3863 2162 w
(In) 816 2318 w
(general,) 961 2318 w
(releasing) 1364 2318 w
(data) 1813 2318 w
(structures) 2049 2318 w
(or) 2529 2318 w
(other) 2674 2318 w
(resources) 2953 2318 w
(when) 3419 2318 w
(they) 3710 2318 w
(are) 3954 2318 w
(no) 4141 2318 w
(longer) 566 2438 w
(needed) 884 2438 w
(is) 1231 2438 w
(called) 1343 2438 w
11 /Times-Bold f
(garbage) 1642 2438 w
(collection) 2058 2438 w
11 /Times-Roman f
(.) 2503 2438 w
(Reference) 2597 2438 w
(counting) 3076 2438 w
(is) 3499 2438 w
(a) 3611 2438 w
(form) 3697 2438 w
(of) 3948 2438 w
(gar\255) 4076 2438 w
(bage) 566 2558 w
(collection) 804 2558 w
(that) 1269 2558 w
(may) 1467 2558 w
(be) 1689 2558 w
(used) 1825 2558 w
(for) 2059 2558 w
(any) 2219 2558 w
(data) 2410 2558 w
(structures) 2625 2558 w
(that) 3084 2558 w
(do) 3282 2558 w
(not) 3425 2558 w
(form) 3599 2558 w
(cycles.) 3845 2558 w
(If) 4179 2558 w
(there) 566 2678 w
(are) 816 2678 w
(cycles,) 980 2678 w
(there) 1313 2678 w
(may) 1563 2678 w
(be) 1784 2678 w
(circular) 1919 2678 w
(lists) 2284 2678 w
(not) 2495 2678 w
(referenced) 2668 2678 w
(from) 3158 2678 w
(outside,) 3403 2678 w
(that) 3780 2678 w
(would) 3976 2678 w
(never) 566 2798 w
(be) 846 2798 w
(deallocated) 987 2798 w
(by) 1524 2798 w
(reference) 1673 2798 w
(counting) 2115 2798 w
(because) 2539 2798 w
(there) 2923 2798 w
(is) 3180 2798 w
(at) 3293 2798 w
(least) 3411 2798 w
(one) 3651 2798 w
(reference) 3848 2798 w
(for) 566 2918 w
(each) 721 2918 w
(node) 948 2918 w
(\(from) 1189 2918 w
(the) 1466 2918 w
(previous) 1628 2918 w
(node) 2034 2918 w
(in) 2275 2918 w
(the) 2389 2918 w
(cycle\).) 2551 2918 w
(The) 816 3074 w
(thread) 1019 3074 w
(library) 1326 3074 w
(provides) 1652 3074 w
(reference) 2064 3074 w
(counters,) 2501 3074 w
(protected) 2934 3074 w
(by) 3375 3074 w
(locks.) 3519 3074 w
(They) 3841 3074 w
(can) 4100 3074 w
(be) 566 3194 w
(used) 712 3194 w
(safely) 956 3194 w
(even) 1260 3194 w
(when) 1509 3194 w
(multiple) 1789 3194 w
(processes) 2199 3194 w
(are) 2660 3194 w
(incrementing) 2834 3194 w
(and) 3455 3194 w
(decrementing) 3655 3194 w
(the) 566 3314 w
(counters,) 729 3314 w
(which) 1157 3314 w
(by) 1454 3314 w
(the) 1593 3314 w
(way,) 1756 3314 w
(is) 1995 3314 w
(not) 2098 3314 w
(the) 2268 3314 w
(case) 2431 3314 w
(here.) 2647 3314 w
(A) 2919 3314 w
11 /Courier f
(Ref) 3027 3314 w
11 /Times-Roman f
(structure) 3254 3314 w
(is) 3666 3314 w
(a) 3770 3314 w
(reference) 3848 3314 w
(counter,) 566 3434 w
(containing) 954 3434 w
(a) 1450 3434 w
11 /Courier f
(ref) 1529 3434 w
11 /Times-Roman f
(field) 1758 3434 w
(with) 1990 3434 w
(the) 2217 3434 w
(counter) 2382 3434 w
(and) 2741 3434 w
(a) 2930 3434 w
(lock.) 3009 3434 w
(The) 3257 3434 w
(function) 3458 3434 w
11 /Courier f
(incref) 3855 3434 w
11 /Times-Roman f
(increments) 566 3554 w
(the) 1076 3554 w
(counter) 1239 3554 w
(\(using) 1596 3554 w
(the) 1901 3554 w
(lock) 2065 3554 w
(to) 2284 3554 w
(protect) 2400 3554 w
(from) 2734 3554 w
(possible) 2977 3554 w
(races\).) 3368 3554 w
(The) 3685 3554 w
(function) 3885 3554 w
11 /Courier f
(decref) 566 3674 w
11 /Times-Roman f
(decrements) 990 3674 w
(the) 1516 3674 w
(counter) 1678 3674 w
(and) 2034 3674 w
(returns) 2220 3674 w
(the) 2552 3674 w
(new) 2714 3674 w
(value) 2924 3674 w
(for) 3189 3674 w
(it.) 3344 3674 w
(As) 816 3830 w
(you) 973 3830 w
(could) 1173 3830 w
(see,) 1452 3830 w
11 /Courier f
(newsem) 1654 3830 w
11 /Times-Roman f
(sets) 2085 3830 w
11 /Courier f
(sems[i]\255>ref) 2285 3830 w
11 /Times-Roman f
(to) 3113 3830 w
11 /Courier f
(2) 3235 3830 w
11 /Times-Roman f
(,) 3301 3830 w
(because) 3365 3830 w
(it) 3746 3830 w
(is) 3844 3830 w
(return\255) 3954 3830 w
(ing) 566 3950 w
(one) 752 3950 w
(reference) 955 3950 w
(and) 1403 3950 w
(also) 1606 3950 w
(storing) 1827 3950 w
(another) 2177 3950 w
(reference) 2549 3950 w
(in) 2996 3950 w
(the) 3126 3950 w
(array) 3304 3950 w
(of) 3571 3950 w
(semaphores.) 3706 3950 w
(Both) 566 4070 w
(references) 809 4070 w
(must) 1283 4070 w
(go) 1526 4070 w
(away) 1664 4070 w
(before) 1922 4070 w
(releasing) 2228 4070 w
(the) 2651 4070 w
(semaphore.) 2813 4070 w
(To) 3343 4070 w
(release) 3493 4070 w
(one) 3824 4070 w
(refer\255) 4011 4070 w
(ence,) 566 4190 w
(the) 821 4190 w
(function) 983 4190 w
11 /Courier f
(closesem) 1377 4190 w
11 /Times-Roman f
(can) 1933 4190 w
(be) 2112 4190 w
(called.) 2243 4190 w
10 /Courier f
(void) 786 4360 w
(closesem\(Sem* s\)) 786 4470 w
({) 786 4580 w
(if \(s != nil && decref\(s\) == 0\){) 1266 4690 w
(assert\(s\255>reqs == nil\);) 1746 4800 w
(assert\(sems[s\255>id] == s\);) 1746 4910 w
(sems[s\255>id] = nil;) 1746 5020 w
(free\(s\255>name\);) 1746 5130 w
(free\(s\);) 1746 5240 w
(}) 1266 5350 w
(}) 786 5460 w
11 /Times-Roman f
(It) 566 5676 w
(decrements) 665 5676 w
(the) 1195 5676 w
(reference) 1361 5676 w
(counter) 1796 5676 w
(for) 2156 5676 w
11 /Courier f
(s) 2315 5676 w
11 /Times-Roman f
(,) 2381 5676 w
(but) 2441 5676 w
(releases) 2614 5676 w
(the) 2991 5676 w
(data) 3157 5676 w
(structure) 3371 5676 w
(only) 3786 5676 w
(when) 4014 5676 w
(no) 566 5796 w
(other) 722 5796 w
(references) 993 5796 w
(exist,) 1485 5796 w
(i.e.,) 1767 5796 w
(only) 1976 5796 w
(when) 2218 5796 w
11 /Courier f
(decref) 2501 5796 w
11 /Times-Roman f
(reports) 2943 5796 w
(that) 3293 5796 w
11 /Courier f
(s\255>ref) 3504 5796 w
11 /Times-Roman f
(is) 3945 5796 w
(zero) 4064 5796 w
(after) 566 5916 w
(discounting) 803 5916 w
(one) 1355 5916 w
(reference.) 1551 5916 w
(To) 2020 5916 w
(allow) 2180 5916 w
(calls) 2462 5916 w
(to) 2701 5916 w
11 /Courier f
(closesem) 2825 5916 w
11 /Times-Roman f
(with) 3391 5916 w
(nil) 3626 5916 w
(pointers,) 3782 5916 w
(a) 4203 5916 w
(check) 566 6036 w
(for) 848 6036 w
11 /Courier f
(s!=nil) 1003 6036 w
11 /Times-Roman f
(was) 1427 6036 w
(added) 1625 6036 w
(as) 1914 6036 w
(well.) 2033 6036 w
(Let's) 816 6192 w
(proceed) 1075 6192 w
(with) 1454 6192 w
(other) 1684 6192 w
(operations) 1943 6192 w
(for) 2434 6192 w
(our) 2595 6192 w
(data) 2775 6192 w
(type.) 2991 6192 w
(To) 3270 6192 w
(add) 3426 6192 w
(tickets) 3618 6192 w
(we) 3939 6192 w
(can) 4100 6192 w
(simply) 566 6312 w
(handle) 916 6312 w
11 /Courier f
(Sem.tickets) 1257 6312 w
11 /Times-Roman f
(as) 2032 6312 w
(we) 2172 6312 w
(please.) 2348 6312 w
(To) 2698 6312 w
(remove) 2869 6312 w
(tickets) 3246 6312 w
(we) 3582 6312 w
(can) 3758 6312 w
(do) 3958 6312 w
(the) 4117 6312 w
cleartomark
showpage
saveobj restore
%%EndPage: 25 25
%%Page: 26 26
/saveobj save def
mark
26 pagesetup
11 /Times-Roman f
(\255 26 \255) 2289 413 w
(same.) 566 686 w
(The) 851 686 w
(only) 1053 686 w
(operations) 1281 686 w
(that) 1770 686 w
(remain) 1967 686 w
(to) 2303 686 w
(be) 2421 686 w
(provided) 2556 686 w
(are) 2978 686 w
(those) 3142 686 w
(handling) 3406 686 w
(the) 3824 686 w
(list) 3991 686 w
(of) 4160 686 w
(pending) 566 806 w
(requests) 973 806 w
(in) 1385 806 w
(the) 1524 806 w
(semaphore.) 1711 806 w
(They) 2266 806 w
(are) 2544 806 w
(simply) 2729 806 w
(implementing) 3083 806 w
(a) 3747 806 w
(queue) 3847 806 w
(of) 4160 806 w
(requests) 566 926 w
(using) 962 926 w
11 /Courier f
(Sem.reqs) 1238 926 w
11 /Times-Roman f
(.) 1766 926 w
(This) 1859 926 w
(function) 2092 926 w
(enqueues) 2496 926 w
(a) 2941 926 w
(new) 3027 926 w
(pending) 3247 926 w
(request) 3639 926 w
(in) 3993 926 w
(the) 4117 926 w
(semaphore,) 566 1046 w
(adding) 1096 1046 w
(it) 1423 1046 w
(to) 1513 1046 w
(the) 1627 1046 w
(tail) 1789 1046 w
(of) 1958 1046 w
(the) 2077 1046 w
(queue.) 2239 1046 w
10 /Courier f
(void) 786 1216 w
(queuereq\(Sem* s, Req* r\)) 786 1326 w
({) 786 1436 w
(QReq*) 1266 1546 w
(q;) 1746 1546 w
(QReq**) 1266 1656 w
(l;) 1746 1656 w
(q = emalloc9p\(sizeof\(QReq\)\);) 1266 1876 w
(q\255>r = r;) 1266 1986 w
(q\255>next = nil;) 1266 2096 w
(for \(l = &s\255>reqs; *l != nil; l = &\(*l\)\255>next\)) 1266 2206 w
(;) 1746 2316 w
(*l = q;) 1266 2426 w
(}) 786 2536 w
11 /Times-Roman f
(The) 566 2752 w
(next) 764 2752 w
(one) 981 2752 w
(returns) 1167 2752 w
(the) 1499 2752 w
(first) 1661 2752 w
(request) 1866 2752 w
(in) 2210 2752 w
(the) 2324 2752 w
(queue,) 2486 2752 w
(and) 2803 2752 w
(removes) 2989 2752 w
(it) 3388 2752 w
(from) 3478 2752 w
(the) 3719 2752 w
(head.) 3881 2752 w
10 /Courier f
(Req*) 786 2922 w
(dequeuereq\(Sem* s\)) 786 3032 w
({) 786 3142 w
(QReq*) 1266 3252 w
(q;) 1746 3252 w
(Req*) 1266 3362 w
(r;) 1746 3362 w
(if \(s\255>reqs == nil\)) 1266 3582 w
(return nil;) 1746 3692 w
(q = s\255>reqs;) 1266 3802 w
(s\255>reqs = q\255>next;) 1266 3912 w
(r = q\255>r;) 1266 4022 w
(free\(q\);) 1266 4132 w
(return r;) 1266 4242 w
(}) 786 4352 w
11 /Times-Roman f
(Because) 566 4568 w
(we) 968 4568 w
(might) 1133 4568 w
(change) 1429 4568 w
(this) 1776 4568 w
(part) 1974 4568 w
(of) 2182 4568 w
(the) 2311 4568 w
(implementation) 2484 4568 w
(in) 3214 4568 w
(the) 3339 4568 w
(future,) 3512 4568 w
(we) 3840 4568 w
(add) 4006 4568 w
(a) 4203 4568 w
(function) 566 4688 w
(to) 978 4688 w
(check) 1110 4688 w
(if) 1410 4688 w
(there) 1523 4688 w
(is) 1787 4688 w
(any) 1907 4688 w
(queued) 2111 4688 w
(request,) 2473 4688 w
(so) 2863 4688 w
(that) 3007 4688 w
(nobody) 3218 4688 w
(would) 3594 4688 w
(need) 3914 4688 w
(to) 4165 4688 w
(touch) 566 4808 w
11 /Courier f
(Sem.reqs) 838 4808 w
11 /Times-Roman f
(.) 1366 4808 w
10 /Courier f
(int) 786 4978 w
(queuedreqs\(Sem* s\)) 786 5088 w
({) 786 5198 w
(return s\255>reqs != nil;) 1266 5308 w
(}) 786 5418 w
16 /Times-Bold f
(13.7.) 566 5838 w
(Semaphores as files) 966 5838 w
11 /Times-Roman f
(We) 566 5994 w
(have) 755 5994 w
(all) 999 5994 w
(the) 1147 5994 w
(tools) 1319 5994 w
(needed) 1572 5994 w
(to) 1919 5994 w
(complete) 2043 5994 w
(our) 2483 5994 w
(file) 2667 5994 w
(server.) 2851 5994 w
(The) 3211 5994 w
(following) 3419 5994 w
(function) 3885 5994 w
(serves) 566 6114 w
11 /Courier f
(Tcreate) 878 6114 w
11 /Times-Roman f
(requests,) 1379 6114 w
(which) 1804 6114 w
(create) 2110 6114 w
(semaphores.) 2407 6114 w
(To) 2990 6114 w
(do) 3150 6114 w
(so,) 3298 6114 w
(it) 3462 6114 w
(allocates) 3562 6114 w
(a) 3983 6114 w
(new) 4069 6114 w
11 /Courier f
(Sem) 566 6234 w
11 /Times-Roman f
(data) 792 6234 w
(structure) 1002 6234 w
(by) 1413 6234 w
(calling) 1551 6234 w
11 /Courier f
(newsem) 1878 6234 w
11 /Times-Roman f
(.) 2274 6234 w
cleartomark
showpage
saveobj restore
%%EndPage: 26 26
%%Page: 27 27
/saveobj save def
mark
27 pagesetup
11 /Times-Roman f
(\255 27 \255) 2289 413 w
10 /Courier f
(static void) 786 676 w
(fscreate\(Req* r\)) 786 786 w
({) 786 896 w
(Fid*) 1266 1006 w
(fid;) 1746 1006 w
(Qid) 1266 1116 w
(q;) 1746 1116 w
(Sem*) 1266 1226 w
(s;) 1746 1226 w
(fid = r\255>fid;) 1266 1446 w
(q = fid\255>qid;) 1266 1556 w
(if \(!\(q.type&QTDIR\)\){) 1266 1666 w
(respond\(r, "not a directory"\);) 1746 1776 w
(return;) 1746 1886 w
(}) 1266 1996 w
(s = newsem\(r\255>ifcall.name\);) 1266 2106 w
(fid\255>qid = \(Qid\){s\255>id, 0, 0};) 1266 2216 w
(fid\255>aux = s;) 1266 2326 w
(fid\255>omode = r\255>ifcall.mode;) 1266 2436 w
(incref\(s\);) 1266 2546 w
(r\255>ofcall.qid = fid\255>qid;) 1266 2656 w
(respond\(r, nil\);) 1266 2766 w
(}) 786 2876 w
11 /Times-Roman f
(In) 566 3092 w
(a) 694 3092 w
11 /Courier f
(Tcreate) 779 3092 w
11 /Times-Roman f
(,) 1241 3092 w
(the) 1306 3092 w
(fid) 1477 3092 w
(in) 1637 3092 w
(the) 1761 3092 w
(request) 1933 3092 w
(\(represented) 2287 3092 w
(by) 2864 3092 w
11 /Courier f
(r\255>fid) 3012 3092 w
11 /Times-Roman f
(\)) 3408 3092 w
(should) 3482 3092 w
(point) 3814 3092 w
(to) 4079 3092 w
(a) 4203 3092 w
(directory.) 566 3212 w
(The) 1035 3212 w
(server) 1251 3212 w
(is) 1563 3212 w
(expected) 1683 3212 w
(to) 2117 3212 w
(create) 2249 3212 w
(a) 2554 3212 w
(file) 2648 3212 w
(with) 2840 3212 w
(the) 3082 3212 w
(name) 3262 3212 w
(specified) 3545 3212 w
(in) 3986 3212 w
(the) 4117 3212 w
(request) 566 3332 w
(\(which) 922 3332 w
(is) 1266 3332 w
11 /Courier f
(r\255>ifcall.name) 1380 3332 w
11 /Times-Roman f
(here\)) 2344 3332 w
(within) 2607 3332 w
(that) 2930 3332 w
(directory.) 3136 3332 w
(Also,) 3600 3332 w
(after) 3877 3332 w
(the) 4117 3332 w
11 /Courier f
(Tcreate) 566 3452 w
11 /Times-Roman f
(,) 1028 3452 w
(the) 1087 3452 w
(fid) 1252 3452 w
(must) 1405 3452 w
(point) 1651 3452 w
(to) 1909 3452 w
(the) 2026 3452 w
(newly) 2191 3452 w
(created) 2490 3452 w
(file) 2835 3452 w
(and) 3011 3452 w
(must) 3199 3452 w
(be) 3444 3452 w
(open) 3577 3452 w
(according) 3820 3452 w
(to) 566 3572 w
(the) 680 3572 w
(mode) 842 3572 w
(specified) 1114 3572 w
(in) 1537 3572 w
(the) 1651 3572 w
(request.) 1813 3572 w
(This) 2185 3572 w
(is) 2409 3572 w
(what) 2511 3572 w
(the) 2752 3572 w
(function) 2914 3572 w
(does.) 3308 3572 w
(If) 816 3728 w
(the) 932 3728 w
(qid) 1111 3728 w
(is) 1297 3728 w
(not) 1416 3728 w
(for) 1602 3728 w
(the) 1774 3728 w
(directory) 1953 3728 w
(\(the) 2393 3728 w
11 /Courier f
(QTDIR) 2608 3728 w
11 /Times-Roman f
(bit) 2983 3728 w
(is) 3145 3728 w
(not) 3264 3728 w
(set) 3450 3728 w
(in) 3617 3728 w
(its) 3748 3728 w
(qid\),) 3898 3728 w
(an) 4148 3728 w
11 /Courier f
(Rerror) 566 3848 w
11 /Times-Roman f
(message) 1008 3848 w
(is) 1425 3848 w
(sent) 1545 3848 w
(back) 1768 3848 w
(to) 2020 3848 w
(the) 2152 3848 w
(client,) 2332 3848 w
(instead) 2649 3848 w
(of) 3005 3848 w
(creating) 3141 3848 w
(the) 3538 3848 w
(file.) 3717 3848 w
(This) 3936 3848 w
(is) 4177 3848 w
(achieved) 566 3968 w
(by) 982 3968 w
(calling) 1120 3968 w
11 /Courier f
(respond) 1447 3968 w
11 /Times-Roman f
(with) 1937 3968 w
(a) 2161 3968 w
(non\255null) 2237 3968 w
(string) 2638 3968 w
(as) 2917 3968 w
(the) 3036 3968 w
(error) 3198 3968 w
(string.) 3437 3968 w
(Otherwise,) 3773 3968 w
(we) 566 4088 w
(create) 734 4088 w
(a) 1034 4088 w
11 /Courier f
(Sem) 1123 4088 w
11 /Times-Roman f
(data) 1362 4088 w
(structure) 1585 4088 w
(by) 2009 4088 w
(calling) 2159 4088 w
11 /Courier f
(newsem) 2498 4088 w
11 /Times-Roman f
(.) 2894 4088 w
(The) 2990 4088 w
(qid) 3200 4088 w
(in) 3381 4088 w
(the) 3507 4088 w
11 /Courier f
(fid) 3681 4088 w
11 /Times-Roman f
(and) 3919 4088 w
(the) 4117 4088 w
(response,) 566 4208 w
11 /Courier f
(r\255>ofcall) 1005 4208 w
11 /Times-Roman f
(,) 1599 4208 w
(is) 1655 4208 w
(also) 1757 4208 w
(updated) 1962 4208 w
(to) 2337 4208 w
(refer) 2451 4208 w
(to) 2683 4208 w
(the) 2797 4208 w
(new) 2959 4208 w
(file.) 3169 4208 w
(To) 816 4364 w
(make) 971 4364 w
(things) 1241 4364 w
(simpler) 1545 4364 w
(for) 1909 4364 w
(us,) 2070 4364 w
(we) 2230 4364 w
(place) 2391 4364 w
(a) 2655 4364 w
(pointer) 2737 4364 w
(to) 3082 4364 w
(the) 3202 4364 w
11 /Courier f
(Sem) 3370 4364 w
11 /Times-Roman f
(implied) 3602 4364 w
(by) 3973 4364 w
(the) 4117 4364 w
(qid) 566 4484 w
(in) 746 4484 w
(the) 871 4484 w
11 /Courier f
(Fid.aux) 1044 4484 w
11 /Times-Roman f
(field) 1544 4484 w
(of) 1783 4484 w
(each) 1912 4484 w
(fid.) 2149 4484 w
(All) 2337 4484 w
(of) 2516 4484 w
11 /Courier f
(Fid) 2645 4484 w
11 /Times-Roman f
(,) 2843 4484 w
11 /Courier f
(Req) 2909 4484 w
11 /Times-Roman f
(,) 3107 4484 w
(and) 3173 4484 w
11 /Courier f
(Srv) 3369 4484 w
11 /Times-Roman f
(data) 3605 4484 w
(structures) 3825 4484 w
(contain) 566 4604 w
(an) 927 4604 w
11 /Courier f
(aux) 1068 4604 w
11 /Times-Roman f
(field) 1304 4604 w
(that) 1543 4604 w
(can) 1747 4604 w
(be) 1937 4604 w
(used) 2079 4604 w
(by) 2319 4604 w
(your) 2468 4604 w
(programs) 2708 4604 w
(to) 3161 4604 w
(keep) 3286 4604 w
(a) 3531 4604 w
(pointer) 3618 4604 w
(to) 3968 4604 w
(any) 4093 4604 w
(data) 566 4724 w
(of) 788 4724 w
(interest) 919 4724 w
(for) 1282 4724 w
(your) 1449 4724 w
(file) 1690 4724 w
(server.) 1876 4724 w
(In) 2209 4724 w
(our) 2339 4724 w
(case,) 2524 4724 w
11 /Courier f
(fid\255>aux) 2778 4724 w
11 /Times-Roman f
(will) 3345 4724 w
(always) 3556 4724 w
(point) 3899 4724 w
(to) 4165 4724 w
(the) 566 4844 w
11 /Courier f
(Sem) 728 4844 w
11 /Times-Roman f
(structure) 954 4844 w
(for) 1365 4844 w
(the) 1520 4844 w
(file) 1682 4844 w
(referenced) 1856 4844 w
(by) 2342 4844 w
(the) 2480 4844 w
(fid.) 2642 4844 w
(We) 2820 4844 w
(do) 3000 4844 w
(so) 3139 4844 w
(for) 3266 4844 w
(all) 3422 4844 w
(fids) 3561 4844 w
(referring) 3755 4844 w
(to) 4165 4844 w
(semaphore) 566 4964 w
(files.) 1068 4964 w
(The) 816 5120 w
11 /Courier f
(fsclone) 1019 5120 w
11 /Times-Roman f
(routine) 1514 5120 w
(is) 1858 5120 w
(called) 1965 5120 w
(by) 2259 5120 w
(the) 2403 5120 w
(library) 2571 5120 w
(when) 2897 5120 w
(a) 3168 5120 w
(new) 3250 5120 w
(fid) 3466 5120 w
(is) 3622 5120 w
(created) 3730 5120 w
(as) 4078 5120 w
(a) 4203 5120 w
(clone) 566 5240 w
(of) 848 5240 w
(an) 984 5240 w
(existing) 1132 5240 w
(one,) 1526 5240 w
(as) 1757 5240 w
(part) 1893 5240 w
(of) 2108 5240 w
(the) 2244 5240 w
(implementation) 2422 5240 w
(for) 3157 5240 w
(the) 3328 5240 w
11 /Courier f
(Twalk) 3506 5240 w
11 /Times-Roman f
(message) 3880 5240 w
(\(that) 566 5360 w
(creates) 803 5360 w
(new) 1141 5360 w
(fids) 1359 5360 w
(by) 1560 5360 w
(cloning) 1706 5360 w
(old) 2072 5360 w
(ones\).) 2249 5360 w
(The) 2578 5360 w
(implementation) 2784 5360 w
(updates) 3511 5360 w
(the) 3882 5360 w
11 /Courier f
(aux) 4053 5360 w
11 /Times-Roman f
(field) 566 5480 w
(for) 796 5480 w
(the) 952 5480 w
(new) 1115 5480 w
(fid) 1326 5480 w
(and) 1477 5480 w
(the) 1664 5480 w
(reference) 1826 5480 w
(counter) 2257 5480 w
(for) 2613 5480 w
(the) 2768 5480 w
(semaphore) 2930 5480 w
(involved) 3432 5480 w
(\(which) 3845 5480 w
(is) 4177 5480 w
(now) 566 5600 w
(pointed) 786 5600 w
(to) 1147 5600 w
(by) 1265 5600 w
(a) 1407 5600 w
(new) 1487 5600 w
(fid\).) 1701 5600 w
(The) 1919 5600 w
(function) 2121 5600 w
(might) 2519 5600 w
(return) 2809 5600 w
(a) 3102 5600 w
(non\255null) 3182 5600 w
(string) 3587 5600 w
(to) 3870 5600 w
(signal) 3988 5600 w
(errors,) 566 5720 w
(but) 876 5720 w
(this) 1045 5720 w
(implementation) 1233 5720 w
(will) 1952 5720 w
(never) 2152 5720 w
(fail.) 2422 5720 w
cleartomark
showpage
saveobj restore
%%EndPage: 27 27
%%Page: 28 28
/saveobj save def
mark
28 pagesetup
11 /Times-Roman f
(\255 28 \255) 2289 413 w
10 /Courier f
(static char*) 786 676 w
(fsclone\(Fid* fid, Fid* newfid\)) 786 786 w
({) 786 896 w
(Sem*) 1266 1006 w
(s;) 1746 1006 w
(s = fid\255>aux;) 1266 1226 w
(if \(s != nil\)) 1266 1336 w
(incref\(s\);) 1746 1446 w
(newfid\255>aux = s;) 1266 1556 w
(return nil;) 1266 1666 w
(}) 786 1776 w
11 /Times-Roman f
(The) 566 1992 w
(library) 774 1992 w
(uses) 1105 1992 w
(reference) 1333 1992 w
(counting) 1775 1992 w
(to) 2199 1992 w
(know) 2324 1992 w
(when) 2607 1992 w
(a) 2883 1992 w
11 /Courier f
(Fid) 2970 1992 w
11 /Times-Roman f
(is) 3207 1992 w
(no) 3320 1992 w
(longer) 3469 1992 w
(used) 3788 1992 w
(\(e.g.,) 4028 1992 w
(because) 566 2112 w
(of) 959 2112 w
(a) 1098 2112 w
11 /Courier f
(Tclunk) 1194 2112 w
11 /Times-Roman f
(that) 1638 2112 w
(removed) 1851 2112 w
(the) 2282 2112 w
(last) 2464 2112 w
(reference) 2665 2112 w
(to) 3116 2112 w
(a) 3249 2112 w
(fid\).) 3344 2112 w
(When) 3605 2112 w
(a) 3913 2112 w
(fid) 4008 2112 w
(is) 4177 2112 w
(released) 566 2232 w
(the) 974 2232 w
(library) 1159 2232 w
(calls) 1502 2232 w
11 /Courier f
(Srv.destroyfid) 1754 2232 w
11 /Times-Roman f
(,) 2678 2232 w
(which) 2757 2232 w
(we) 3077 2232 w
(initialized) 3256 2232 w
(to) 3748 2232 w
(point) 3886 2232 w
(to) 4165 2232 w
11 /Courier f
(freefid) 566 2352 w
11 /Times-Roman f
(.) 1028 2352 w
(This) 1128 2352 w
(function) 1368 2352 w
(releases) 1778 2352 w
(one) 2167 2352 w
(reference) 2369 2352 w
(to) 2816 2352 w
(the) 2945 2352 w
(semaphore) 3122 2352 w
(for) 3639 2352 w
(the) 3809 2352 w
(fid.) 3986 2352 w
(If) 4179 2352 w
(this) 566 2472 w
(was) 759 2472 w
(the) 962 2472 w
(last) 1129 2472 w
(one) 1315 2472 w
(pointing) 1506 2472 w
(to) 1907 2472 w
(the) 2026 2472 w
(semaphore,) 2193 2472 w
(it) 2729 2472 w
(will) 2825 2472 w
(be) 3031 2472 w
(released.) 3168 2472 w
(Note) 3587 2472 w
(that) 3834 2472 w
(there) 4033 2472 w
(will) 566 2592 w
(always) 774 2592 w
(be) 1114 2592 w
(one) 1253 2592 w
(reference) 1447 2592 w
(from) 1886 2592 w
(the) 2135 2592 w
(array) 2305 2592 w
(of) 2564 2592 w
(semaphores,) 2691 2592 w
(as) 3272 2592 w
(long) 3398 2592 w
(as) 3629 2592 w
(the) 3755 2592 w
(file) 3924 2592 w
(has) 4105 2592 w
(not) 566 2712 w
(been) 735 2712 w
(removed.) 969 2712 w
10 /Courier f
(static void) 786 2882 w
(freefid\(Fid* fid\)) 786 2992 w
({) 786 3102 w
(Sem*) 1266 3212 w
(s;) 1746 3212 w
(s = fid\255>aux;) 1266 3432 w
(fid\255>aux = nil;) 1266 3542 w
(closesem\(s\);) 1266 3652 w
(}) 786 3762 w
11 /Times-Roman f
(Removing) 566 3978 w
(of) 1066 3978 w
(files) 1198 3978 w
(is) 1428 3978 w
(done) 1543 3978 w
(by) 1797 3978 w
11 /Courier f
(fsremove) 1948 3978 w
11 /Times-Roman f
(,) 2476 3978 w
(which) 2545 3978 w
(releases) 2854 3978 w
(the) 3241 3978 w
(reference) 3417 3978 w
(from) 3862 3978 w
(the) 4117 3978 w
(array) 566 4098 w
(as) 817 4098 w
(well) 936 4098 w
(as) 1153 4098 w
(the) 1272 4098 w
(one) 1434 4098 w
(from) 1620 4098 w
(the) 1861 4098 w
(fid.) 2023 4098 w
10 /Courier f
(static void) 786 4268 w
(fsremove\(Req* r\)) 786 4378 w
({) 786 4488 w
(Req*) 1266 4598 w
(q;) 1746 4598 w
(Sem*) 1266 4708 w
(s;) 1746 4708 w
(s = r\255>fid\255>aux;) 1266 4928 w
(while\(r = dequeuereq\(s\)\)) 1266 5038 w
(respond\(q, "file has been removed"\);) 1746 5148 w
(closesem\(s\);) 1266 5258 w
(r\255>fid\255>aux = nil;) 1266 5368 w
(closesem\(s\);) 1266 5478 w
(// release reference from sems[]) 2226 5478 w
(respond\(r, nil\);) 1266 5588 w
(}) 786 5698 w
11 /Times-Roman f
(Before) 566 5914 w
(actually) 899 5914 w
(removing) 1282 5914 w
(anything,) 1739 5914 w
(all) 2188 5914 w
(the) 2334 5914 w
(poor) 2504 5914 w
(requests) 2741 5914 w
(waiting) 3136 5914 w
(for) 3502 5914 w
(future) 3666 5914 w
(tickets) 3964 5914 w
(are) 566 6034 w
(responded,) 726 6034 w
(with) 1232 6034 w
(an) 1456 6034 w
(error) 1587 6034 w
(message) 1826 6034 w
(that) 2225 6034 w
(reports) 2418 6034 w
(that) 2750 6034 w
(the) 2943 6034 w
(semaphore) 3105 6034 w
(was) 3607 6034 w
(removed.) 3805 6034 w
(One) 816 6190 w
(word) 1051 6190 w
(about) 1329 6190 w
(reference) 1626 6190 w
(counting) 2082 6190 w
(before) 2520 6190 w
(continuing.) 2851 6190 w
(A) 3403 6190 w
(semaphore) 3535 6190 w
(may) 4062 6190 w
(point) 566 6310 w
(to) 834 6310 w
(requests,) 961 6310 w
(that) 1389 6310 w
(point) 1595 6310 w
(to) 1863 6310 w
(fids,) 1990 6310 w
(that) 2224 6310 w
(may) 2430 6310 w
(point) 2660 6310 w
(to) 2928 6310 w
(the) 3054 6310 w
(semaphore.) 3228 6310 w
(So,) 3770 6310 w
(at) 3955 6310 w
(first) 4074 6310 w
cleartomark
showpage
saveobj restore
%%EndPage: 28 28
%%Page: 29 29
/saveobj save def
mark
29 pagesetup
11 /Times-Roman f
(\255 29 \255) 2289 413 w
(sight,) 566 686 w
(we) 843 686 w
(have) 1004 686 w
(a) 1244 686 w
(data) 1326 686 w
(structure) 1542 686 w
(with) 1959 686 w
(cycles) 2189 686 w
(and) 2496 686 w
(we) 2688 686 w
(should) 2849 686 w
(not) 3177 686 w
(use) 3352 686 w
(reference) 3533 686 w
(count\255) 3971 686 w
(ing) 566 806 w
(to) 740 806 w
(release) 859 806 w
(it.) 1194 806 w
(However,) 1316 806 w
(upon) 1776 806 w
(a) 2028 806 w
11 /Courier f
(Tremove) 2108 806 w
11 /Times-Roman f
(,) 2570 806 w
(all) 2630 806 w
(the) 2772 806 w
(requests) 2938 806 w
(in) 3329 806 w
(the) 3447 806 w
(semaphore) 3613 806 w
(are) 4119 806 w
(released.) 566 926 w
(From) 981 926 w
(this) 1250 926 w
(point,) 1440 926 w
(the) 1725 926 w
(semaphore) 1889 926 w
(will) 2393 926 w
(not) 2595 926 w
(create) 2767 926 w
(any) 3057 926 w
(cycle) 3246 926 w
(in) 3507 926 w
(the) 3624 926 w
(data) 3789 926 w
(struc\255) 4002 926 w
(ture,) 566 1046 w
(and) 792 1046 w
(reference) 978 1046 w
(counting) 1409 1046 w
(may) 1822 1046 w
(be) 2039 1046 w
(safely) 2170 1046 w
(used.) 2459 1046 w
(The) 816 1202 w
(9P) 1024 1202 w
(message) 1179 1202 w
11 /Courier f
(Tread) 1589 1202 w
11 /Times-Roman f
(is) 1958 1202 w
(handled) 2071 1202 w
(by) 2457 1202 w
11 /Courier f
(fsread) 2606 1202 w
11 /Times-Roman f
(.) 3002 1202 w
(This) 3097 1202 w
(function) 3332 1202 w
(implements) 3737 1202 w
(reading) 566 1322 w
(from) 931 1322 w
(a) 1181 1322 w
(fid) 1266 1322 w
(\(i.e.,) 1425 1322 w
(a) 1661 1322 w
(file\).) 1746 1322 w
(But) 1993 1322 w
(note) 2190 1322 w
(that) 2416 1322 w
(the) 2618 1322 w
(root) 2788 1322 w
(directory) 3001 1322 w
(may) 3432 1322 w
(be) 3657 1322 w
(one) 3796 1322 w
(of) 3990 1322 w
(the) 4117 1322 w
(files) 566 1442 w
(read) 788 1442 w
(by) 1008 1442 w
(the) 1151 1442 w
(client,) 1318 1442 w
(e.g.,) 1623 1442 w
(to) 1843 1442 w
(list) 1963 1442 w
(its) 2133 1442 w
(contents.) 2272 1442 w
(This) 2700 1442 w
(is) 2930 1442 w
(very) 3038 1442 w
(different) 3266 1442 w
(from) 3676 1442 w
(reading) 3923 1442 w
(for) 566 1562 w
(a) 741 1562 w
(semaphore) 837 1562 w
(file,) 1359 1562 w
(and) 1581 1562 w
(the) 1787 1562 w
(function) 1969 1562 w
(must) 2383 1562 w
(take) 2646 1562 w
(a) 2876 1562 w
(different) 2972 1562 w
(course) 3396 1562 w
(of) 3729 1562 w
(action) 3868 1562 w
(if) 4184 1562 w
11 /Courier f
(QTDIR) 566 1682 w
11 /Times-Roman f
(is) 924 1682 w
(set) 1026 1682 w
(in) 1176 1682 w
(the) 1290 1682 w
(qid) 1452 1682 w
(for) 1621 1682 w
(the) 1776 1682 w
(file) 1938 1682 w
(being) 2112 1682 w
(read.) 2384 1682 w
10 /Courier f
(static void) 786 1852 w
(fsread\(Req* r\)) 786 1962 w
({) 786 2072 w
(Fid*) 1266 2182 w
(fid;) 1746 2182 w
(Qid) 1266 2292 w
(q;) 1746 2292 w
(Sem*) 1266 2402 w
(s;) 1746 2402 w
(char) 1266 2512 w
(nl[2] = "\\n";) 1746 2512 w
(fid = r\255>fid;) 1266 2622 w
(q = fid\255>qid;) 1266 2732 w
(if \(q.type&QTDIR\){) 1266 2842 w
(dirread9p\(r, getdirent, nil\);) 1746 2952 w
(respond\(r, nil\);) 1746 3062 w
(return;) 1746 3172 w
(}) 1266 3282 w
(s = fid\255>aux;) 1266 3512 w
(if \(s\255>tickets > 0\){) 1266 3622 w
(s\255>tickets\255\255;) 1746 3732 w
(readstr\(r, nl\);) 1746 3842 w
(respond\(r, nil\);) 1746 3952 w
(} else) 1266 4062 w
(queuereq\(s, r\);) 1746 4172 w
(}) 786 4282 w
11 /Times-Roman f
(We) 566 4462 w
(defer) 763 4462 w
(the) 1032 4462 w
(discussion) 1212 4462 w
(of) 1718 4462 w
(reading) 1856 4462 w
(from) 2231 4462 w
(the) 2491 4462 w
(root) 2672 4462 w
(directory) 2896 4462 w
(until) 3338 4462 w
(later.) 3588 4462 w
(Reading) 3885 4462 w
(from) 566 4582 w
(a) 822 4582 w
(semaphore) 913 4582 w
(file) 1430 4582 w
(means) 1619 4582 w
(obtaining) 1941 4582 w
(a) 2399 4582 w
(ticket) 2489 4582 w
(from) 2775 4582 w
(the) 3030 4582 w
(semaphore.) 3206 4582 w
(The) 3778 4582 w
(sema\255) 3990 4582 w
(phore) 566 4702 w
(is) 892 4702 w
(pointed) 1043 4702 w
(to) 1450 4702 w
(by) 1613 4702 w
11 /Courier f
(fid\255>aux) 1800 4702 w
11 /Times-Roman f
(.) 2328 4702 w
(So,) 2461 4702 w
(it) 2683 4702 w
(all) 2822 4702 w
(depends) 3009 4702 w
(on) 3445 4702 w
(the) 3633 4702 w
(value) 3845 4702 w
(of) 4160 4702 w
11 /Courier f
(s\255>tickets) 566 4822 w
11 /Times-Roman f
(.) 1226 4822 w
(When) 1311 4822 w
(there) 1601 4822 w
(is) 1848 4822 w
(one) 1950 4822 w
(ticket) 2136 4822 w
(to) 2408 4822 w
(satisfy) 2522 4822 w
(the) 2837 4822 w
(request) 2999 4822 w
(\(i.e.,) 3343 4822 w
(to) 3570 4822 w
(do) 3684 4822 w
(a) 3822 4822 w
11 /Times-Italic f
(down) 3898 4822 w
11 /Times-Roman f
(in) 4165 4822 w
(the) 566 4942 w
(semaphore\),) 747 4942 w
(we) 1332 4942 w
(decrement) 1506 4942 w
11 /Courier f
(s\255>tickets) 2008 4942 w
11 /Times-Roman f
(,) 2668 4942 w
(to) 2743 4942 w
(give) 2876 4942 w
(one) 3112 4942 w
(ticket) 3317 4942 w
(to) 3608 4942 w
(the) 3741 4942 w
(process) 3923 4942 w
(reading.) 566 5062 w
(When) 958 5062 w
(there) 1255 5062 w
(are) 1509 5062 w
(no) 1677 5062 w
(tickets,) 1823 5062 w
(the) 2174 5062 w
(request) 2344 5062 w
11 /Courier f
(r) 2696 5062 w
11 /Times-Roman f
(is) 2798 5062 w
(queued) 2908 5062 w
(in) 3259 5062 w
(the) 3380 5062 w
(semaphore) 3549 5062 w
(by) 4058 5062 w
(a) 4203 5062 w
(call) 566 5182 w
(to) 770 5182 w
11 /Courier f
(queuereq) 902 5182 w
11 /Times-Roman f
(.) 1430 5182 w
(Not) 1532 5182 w
(responding) 1743 5182 w
(until) 2277 5182 w
(we) 2526 5182 w
(have) 2699 5182 w
(one) 2951 5182 w
(ticket) 3155 5182 w
(means) 3445 5182 w
(blocking) 3771 5182 w
(a) 4203 5182 w
11 /Times-Italic f
(down) 566 5302 w
11 /Times-Roman f
(until) 833 5302 w
(it) 1064 5302 w
(obtains) 1154 5302 w
(its) 1500 5302 w
(ticket.) 1633 5302 w
(But) 816 5458 w
(a) 1013 5458 w
(read) 1098 5458 w
(must) 1322 5458 w
(return) 1574 5458 w
(some) 1873 5458 w
(bytes) 2143 5458 w
(from) 2413 5458 w
(the) 2664 5458 w
(file) 2836 5458 w
(\(maybe) 3020 5458 w
(none\).) 3386 5458 w
(What) 3701 5458 w
(do) 3976 5458 w
(we) 4124 5458 w
(read) 566 5578 w
(when) 781 5578 w
(we) 1046 5578 w
(obtain) 1201 5578 w
(a) 1504 5578 w
(ticket?) 1580 5578 w
(To) 1900 5578 w
(permit) 2050 5578 w
(using) 2365 5578 w
(the) 2632 5578 w
(command) 2794 5578 w
11 /Courier f
(read) 3255 5578 w
11 /Times-Roman f
(to) 3547 5578 w
(obtain) 3661 5578 w
(tickets) 3964 5578 w
(using) 566 5698 w
(the) 844 5698 w
(shell,) 1018 5698 w
(we) 1294 5698 w
(return) 1461 5698 w
(a) 1762 5698 w
(newline) 1850 5698 w
(character) 2237 5698 w
(for) 2675 5698 w
(each) 2842 5698 w
(ticket) 3081 5698 w
(read.) 3365 5698 w
(For) 3620 5698 w
(the) 3813 5698 w
11 /Courier f
(read) 3987 5698 w
11 /Times-Roman f
(command,) 566 5818 w
(a) 1061 5818 w
(new) 1143 5818 w
(line) 1359 5818 w
(terminates) 1558 5818 w
(the) 2049 5818 w
(line) 2217 5818 w
(it) 2416 5818 w
(should) 2512 5818 w
(read.) 2840 5818 w
(For) 3089 5818 w
(us,) 3276 5818 w
(reading) 3436 5818 w
(once) 3798 5818 w
(from) 4038 5818 w
(the) 566 5938 w
(semaphore) 750 5938 w
(means) 1274 5938 w
(obtaining) 1604 5938 w
(one) 2070 5938 w
(ticket.) 2278 5938 w
(Both) 2600 5938 w
(concepts) 2865 5938 w
(match) 3298 5938 w
(if) 3616 5938 w
(we) 3733 5938 w
(read) 3910 5938 w
(an) 4148 5938 w
(empty) 566 6058 w
(line.) 869 6058 w
(The) 816 6214 w
(data) 1025 6214 w
(supposedly) 1246 6214 w
(contained) 1780 6214 w
(in) 2245 6214 w
(the) 2370 6214 w
(file,) 2543 6214 w
(read) 2756 6214 w
(by) 2982 6214 w
(a) 3131 6214 w
11 /Courier f
(Tread) 3218 6214 w
11 /Times-Roman f
(request) 3587 6214 w
(is) 3943 6214 w
(con\255) 4057 6214 w
(tained) 566 6334 w
(in) 866 6334 w
(the) 984 6334 w
(string) 1150 6334 w
11 /Courier f
(nl) 1433 6334 w
11 /Times-Roman f
(.) 1565 6334 w
(Just) 1653 6334 w
(an) 1857 6334 w
(empty) 1992 6334 w
(line.) 2299 6334 w
(To) 2524 6334 w
(satisfy) 2678 6334 w
(a) 2997 6334 w
11 /Courier f
(Tread) 3077 6334 w
11 /Times-Roman f
(,) 3407 6334 w
(the) 3467 6334 w
(program) 3633 6334 w
(must) 4036 6334 w
cleartomark
showpage
saveobj restore
%%EndPage: 29 29
%%Page: 30 30
/saveobj save def
mark
30 pagesetup
11 /Times-Roman f
(\255 30 \255) 2289 413 w
(look) 566 686 w
(at) 792 686 w
11 /Courier f
(r\255>ifcall.offset) 902 686 w
11 /Times-Roman f
(and) 1989 686 w
11 /Courier f
(r\255>ifcall.count) 2178 686 w
11 /Times-Roman f
(,) 3168 686 w
(which) 3227 686 w
(contains) 3526 686 w
(the) 3923 686 w
(off\255) 4088 686 w
(set) 566 806 w
(in) 733 806 w
(the) 864 806 w
(file) 1043 806 w
(where) 1234 806 w
(to) 1545 806 w
(start) 1675 806 w
(reading) 1908 806 w
(and) 2280 806 w
(the) 2482 806 w
(number) 2660 806 w
(of) 3039 806 w
(bytes) 3174 806 w
(to) 3450 806 w
(return) 3580 806 w
(at) 3885 806 w
(most.) 4008 806 w
(Then,) 566 926 w
(the) 851 926 w
(program) 1017 926 w
(must) 1421 926 w
(update) 1669 926 w
11 /Courier f
(r\255>ofcall.count) 1994 926 w
11 /Times-Roman f
(and) 3017 926 w
11 /Courier f
(r\255>ofcall.data) 3208 926 w
11 /Times-Roman f
(to) 4165 926 w
(reply) 566 1046 w
(later) 827 1046 w
(with) 1057 1046 w
(an) 1289 1046 w
11 /Courier f
(Rread) 1428 1046 w
11 /Times-Roman f
(containing) 1794 1046 w
(the) 2294 1046 w
(number) 2464 1046 w
(of) 2835 1046 w
(bytes) 2961 1046 w
(in) 3228 1046 w
(the) 3349 1046 w
(message) 3518 1046 w
(and) 3924 1046 w
(the) 4117 1046 w
(bytes) 566 1166 w
(themselves.) 826 1166 w
(In) 1370 1166 w
(our) 1489 1166 w
(case,) 1663 1166 w
(we) 1906 1166 w
(could) 2061 1166 w
(ignore) 2333 1166 w
(the) 2641 1166 w
(offset) 2803 1166 w
(and) 3080 1166 w
(do) 3266 1166 w
(it) 3404 1166 w
(as) 3494 1166 w
(follows.) 3613 1166 w
10 /Courier f
(r\255>ofcall.count = r\255>ifcall.count;) 786 1336 w
(if \(r\255>ofcall.count > 1\)) 786 1446 w
(r\255>ofcall.count = 1;) 1266 1556 w
(memmove\(r\255>ofcall.data, "\\n", r\255>ofcall.count\);) 786 1666 w
(respond\(r, nil\);) 786 1776 w
11 /Times-Roman f
(We) 566 1992 w
(read) 760 1992 w
(one) 990 1992 w
(byte) 1191 1992 w
(at) 1424 1992 w
(most,) 1547 1992 w
(the) 1834 1992 w
(new) 2012 1992 w
(line.) 2238 1992 w
(And) 2475 1992 w
(then) 2708 1992 w
(we) 2941 1992 w
(respond) 3112 1992 w
(with) 3503 1992 w
(the) 3743 1992 w
11 /Courier f
(Rread) 3921 1992 w
11 /Times-Roman f
(message.) 566 2112 w
(If) 816 2268 w
(we) 927 2268 w
(did) 1093 2268 w
(not) 1273 2268 w
(ignore) 1453 2268 w
(the) 1772 2268 w
(offset) 1945 2268 w
(in) 2233 2268 w
(the) 2358 2268 w
(request,) 2532 2268 w
(further) 2916 2268 w
(reads) 3253 2268 w
(from) 3523 2268 w
(the) 3776 2268 w
(file) 3950 2268 w
(\(at) 4136 2268 w
(offsets) 566 2388 w
(bigger) 894 2388 w
(than) 1210 2388 w
(zero\)) 1435 2388 w
(would) 1694 2388 w
(always) 2005 2388 w
(return) 2345 2388 w
(zero) 2642 2388 w
(bytes,) 2865 2388 w
(and) 3161 2388 w
(not) 3355 2388 w
(a) 3532 2388 w
(new) 3616 2388 w
(line.) 3834 2388 w
(But) 4091 2388 w
(in) 566 2508 w
(any) 682 2508 w
(case,) 870 2508 w
(reading) 1115 2508 w
(from) 1474 2508 w
(a) 1718 2508 w
(semaphore) 1797 2508 w
(file) 2302 2508 w
(still) 2479 2508 w
(would) 2677 2508 w
(have) 2983 2508 w
(the) 3220 2508 w
(semantics) 3385 2508 w
(of) 3849 2508 w
(block\255) 3971 2508 w
(ing) 566 2628 w
(until) 743 2628 w
(a) 982 2628 w
(ticket) 1066 2628 w
(is) 1346 2628 w
(obtained,) 1455 2628 w
(and) 1896 2628 w
(then) 2089 2628 w
(returning) 2313 2628 w
(something) 2750 2628 w
(\(perhaps) 3244 2628 w
(just) 3655 2628 w
(nothing\).) 3850 2628 w
(Nevertheless,) 566 2748 w
(we) 1208 2748 w
(have) 1384 2748 w
(been) 1639 2748 w
(assuming) 1894 2748 w
(that) 2359 2748 w
(processes) 2573 2748 w
(using) 3042 2748 w
(our) 3331 2748 w
(file) 3527 2748 w
(system) 3723 2748 w
(will) 4079 2748 w
(open) 566 2868 w
(the) 809 2868 w
(file) 973 2868 w
(for) 1149 2868 w
(a) 1306 2868 w
(semaphore) 1384 2868 w
(before) 1888 2868 w
(each) 2196 2868 w
(operation,) 2425 2868 w
(and) 2897 2868 w
(then) 3085 2868 w
(close) 3304 2868 w
(it) 3559 2868 w
(after) 3651 2868 w
(doing) 3880 2868 w
(it.) 4161 2868 w
(The) 566 2988 w
(C) 777 2988 w
(interface) 892 2988 w
(that) 1314 2988 w
(we) 1520 2988 w
(designed) 1688 2988 w
(for) 2119 2988 w
(using) 2287 2988 w
(our) 2567 2988 w
(semaphore) 2754 2988 w
(file) 3269 2988 w
(system) 3456 2988 w
(did) 3804 2988 w
(it) 3987 2988 w
(this) 4091 2988 w
(way.) 566 3108 w
(In) 816 3264 w
(the) 941 3264 w
(implementation) 1109 3264 w
(for) 1834 3264 w
11 /Courier f
(fsread) 1995 3264 w
11 /Times-Roman f
(,) 2391 3264 w
(the) 2453 3264 w
(function) 2621 3264 w
(did) 3021 3264 w
(not) 3196 3264 w
(update) 3372 3264 w
(the) 3699 3264 w
(response) 3868 3264 w
(message) 566 3384 w
(by) 989 3384 w
(itself.) 1151 3384 w
(Instead,) 1451 3384 w
(it) 1847 3384 w
(calls) 1961 3384 w
11 /Courier f
(readstr) 2213 3384 w
11 /Times-Roman f
(,) 2675 3384 w
(which) 2754 3384 w
(is) 3073 3384 w
(a) 3198 3384 w
(helper) 3297 3384 w
(function) 3621 3384 w
(from) 4038 3384 w
11 /Courier f
(lib9p) 566 3504 w
11 /Times-Roman f
(that) 926 3504 w
(fills) 1121 3504 w
(an) 1324 3504 w
11 /Courier f
(Rread) 1458 3504 w
11 /Times-Roman f
(reply) 1819 3504 w
(assuming) 2075 3504 w
(that) 2522 3504 w
(file) 2718 3504 w
(contents) 2895 3504 w
(are) 3292 3504 w
(those) 3455 3504 w
(in) 3718 3504 w
(the) 3835 3504 w
(string) 4000 3504 w
(given) 566 3624 w
(as) 863 3624 w
(a) 1007 3624 w
(parameter) 1108 3624 w
(\(in) 1597 3624 w
(this) 1772 3624 w
(case,) 1985 3624 w
(the) 2253 3624 w
(contents) 2439 3624 w
(of) 2857 3624 w
11 /Courier f
(nl) 3000 3624 w
11 /Times-Roman f
(\).) 3132 3624 w
(The) 3276 3624 w
(function) 3498 3624 w
(updates) 3916 3624 w
11 /Courier f
(r\255>ofcall.count) 566 3744 w
11 /Times-Roman f
(and) 1617 3744 w
11 /Courier f
(r\255>ofcall.data) 1836 3744 w
11 /Times-Roman f
(,) 2760 3744 w
(taking) 2850 3744 w
(care) 3187 3744 w
(of) 3429 3744 w
(the) 3582 3744 w
(offset,) 3778 3744 w
(the) 4117 3744 w
(string) 566 3864 w
(size,) 849 3864 w
(and) 1079 3864 w
(the) 1269 3864 w
(maximum) 1435 3864 w
(number) 1913 3864 w
(of) 2279 3864 w
(bytes) 2401 3864 w
(requested.) 2664 3864 w
(After) 3170 3864 w
(calling) 3431 3864 w
11 /Courier f
(readstr) 3761 3864 w
11 /Times-Roman f
(,) 4223 3864 w
(the) 566 3984 w
(only) 745 3984 w
(thing) 986 3984 w
(pending) 1258 3984 w
(is) 1657 3984 w
(calling) 1776 3984 w
11 /Courier f
(respond) 2120 3984 w
11 /Times-Roman f
(to) 2627 3984 w
(reply) 2758 3984 w
(to) 3028 3984 w
(the) 3160 3984 w
(client.) 3340 3984 w
(By) 3686 3984 w
(the) 3861 3984 w
(way,) 4041 3984 w
(another) 566 4104 w
(helper) 923 4104 w
(called) 1225 4104 w
11 /Courier f
(readbuf) 1515 4104 w
11 /Times-Roman f
(is) 2006 4104 w
(similar) 2109 4104 w
(to) 2444 4104 w
11 /Courier f
(readstr) 2558 4104 w
11 /Times-Roman f
(,) 3020 4104 w
(but) 3076 4104 w
(reads) 3245 4104 w
(from) 3503 4104 w
(an) 3744 4104 w
(arbitrary) 3875 4104 w
(array) 566 4224 w
(of) 817 4224 w
(bytes,) 936 4224 w
(and) 1224 4224 w
(not) 1410 4224 w
(just) 1579 4224 w
(from) 1767 4224 w
(a) 2008 4224 w
(string.) 2084 4224 w
(Calling) 2419 4224 w
11 /Courier f
(readstr) 2772 4224 w
11 /Times-Roman f
(is) 3262 4224 w
(similar) 3364 4224 w
(to) 3698 4224 w
(calling) 3812 4224 w
10 /Courier f
(readbuf\(r, str, strlen\(str\)\);) 786 4394 w
11 /Times-Roman f
(in) 566 4610 w
(any) 680 4610 w
(case.) 866 4610 w
(That) 816 4766 w
(was) 1058 4766 w
(the) 1269 4766 w
(implementation) 1444 4766 w
(for) 2176 4766 w
(a) 2344 4766 w
11 /Times-Italic f
(down) 2433 4766 w
11 /Times-Roman f
(.) 2672 4766 w
(The) 2769 4766 w
(implementation) 2980 4766 w
(for) 3712 4766 w
(an) 3880 4766 w
11 /Times-Italic f
(up) 4025 4766 w
11 /Times-Roman f
(is) 4177 4766 w
(contained) 566 4886 w
(in) 1021 4886 w
(the) 1136 4886 w
(function) 1299 4886 w
(that) 1694 4886 w
(handles) 1888 4886 w
11 /Courier f
(Twrite) 2252 4886 w
11 /Times-Roman f
(messages.) 2676 4886 w
(Our) 3174 4886 w
(convention) 3372 4886 w
(was) 3888 4886 w
(that) 4086 4886 w
(a) 566 5006 w
(write) 646 5006 w
(with) 903 5006 w
(a) 1131 5006 w
(number) 1211 5006 w
(\(printed) 1578 5006 w
(as) 1957 5006 w
(a) 2080 5006 w
(string\)) 2160 5006 w
(would) 2479 5006 w
(add) 2786 5006 w
(so) 2976 5006 w
(many) 3107 5006 w
(tickets) 3384 5006 w
(to) 3704 5006 w
(the) 3823 5006 w
(sema\255) 3990 5006 w
(phore.) 566 5126 w
10 /Courier f
(static void) 786 5296 w
(fswrite\(Req* r\)) 786 5406 w
({) 786 5516 w
(Fid*) 1266 5626 w
(fid;) 1746 5626 w
(Qid) 1266 5736 w
(q;) 1746 5736 w
(Sem*) 1266 5846 w
(s;) 1746 5846 w
(char) 1266 5956 w
(str[10];) 1746 5956 w
(Req*) 1266 6066 w
(qr;) 1746 6066 w
(char) 1266 6176 w
(nl[2] = "\\n";) 1746 6176 w
cleartomark
showpage
saveobj restore
%%EndPage: 30 30
%%Page: 31 31
/saveobj save def
mark
31 pagesetup
11 /Times-Roman f
(\255 31 \255) 2289 413 w
10 /Courier f
(fid = r\255>fid;) 1266 676 w
(q = fid\255>qid;) 1266 786 w
(if \(q.type&QTDIR\){) 1266 896 w
(respond\(r, "permission denied"\);) 1746 1006 w
(return;) 1746 1116 w
(}) 1266 1226 w
(if \(r\255>ifcall.count > sizeof\(str\) \255 1\){) 1266 1456 w
(respond\(r, "string too large"\);) 1746 1566 w
(return;) 1746 1676 w
(}) 1266 1786 w
(memmove\(str, r\255>ifcall.data, r\255>ifcall.count\);) 1266 2016 w
(str[r\255>ifcall.count] = 0;) 1266 2126 w
(s = fid\255>aux;) 1266 2236 w
(s\255>tickets += atoi\(str\);) 1266 2346 w
(while\(s\255>tickets > 0 && queuedreqs\(s\)\){) 1266 2576 w
(qr = dequeuereq\(s\);) 1746 2686 w
(qr\255>ofcall.count = 1;) 1746 2796 w
(s\255>tickets\255\255;) 1746 2906 w
(readstr\(qr, nl\);) 1746 3016 w
(respond\(qr, nil\);) 1746 3126 w
(}) 1266 3236 w
(respond\(r, nil\);) 1266 3346 w
(}) 786 3456 w
11 /Times-Roman f
(Writing) 566 3672 w
(to) 946 3672 w
(directories) 1070 3672 w
(is) 1570 3672 w
(not) 1682 3672 w
(permitted) 1861 3672 w
(and) 2320 3672 w
(the) 2516 3672 w
(function) 2688 3672 w
(checks) 3092 3672 w
(that) 3427 3672 w
11 /Courier f
(QTDIR) 3630 3672 w
11 /Times-Roman f
(is) 3998 3672 w
(not) 4110 3672 w
(set) 566 3792 w
(in) 726 3792 w
(the) 850 3792 w
(qid) 1022 3792 w
(for) 1201 3792 w
(the) 1366 3792 w
(file) 1538 3792 w
(being) 1722 3792 w
(written.) 2004 3792 w
(When) 2380 3792 w
(writing) 2678 3792 w
(to) 3033 3792 w
(a) 3156 3792 w
(file,) 3241 3792 w
(the) 3452 3792 w
(function) 3623 3792 w
(takes) 4026 3792 w
(the) 566 3912 w
(bytes) 749 3912 w
(written) 1030 3912 w
(from) 1390 3912 w
11 /Courier f
(r\255>ifcall.data) 1652 3912 w
11 /Times-Roman f
(,) 2576 3912 w
(and) 2653 3912 w
(moves) 2860 3912 w
(the) 3197 3912 w
(bytes) 3381 3912 w
(in) 3663 3912 w
(there) 3799 3912 w
(to) 4067 3912 w
(a) 4203 3912 w
(buffer,) 566 4032 w
11 /Courier f
(str) 924 4032 w
11 /Times-Roman f
(.) 1122 4032 w
(The) 1242 4032 w
(number) 1476 4032 w
(of) 1875 4032 w
(bytes) 2029 4032 w
(sent) 2324 4032 w
(in) 2564 4032 w
(the) 2713 4032 w
(write) 2910 4032 w
(request) 3198 4032 w
(is) 3577 4032 w
(reported) 3714 4032 w
(by) 4141 4032 w
11 /Courier f
(r\255>ifcall.count) 566 4152 w
11 /Times-Roman f
(.) 1556 4152 w
(The) 1643 4152 w
(offset) 1844 4152 w
(for) 2124 4152 w
(the) 2282 4152 w
(write,) 2447 4152 w
(kept) 2731 4152 w
(at) 2951 4152 w
11 /Courier f
(r\255>ifcall.offset) 3061 4152 w
11 /Times-Roman f
(,) 4117 4152 w
(is) 4177 4152 w
(ignored.) 566 4272 w
(We) 816 4428 w
(had) 1000 4428 w
(to) 1191 4428 w
(move) 1310 4428 w
(the) 1587 4428 w
(bytes) 1754 4428 w
(to) 2020 4428 w
11 /Courier f
(str) 2140 4428 w
11 /Times-Roman f
(to) 2372 4428 w
(terminate) 2492 4428 w
(the) 2940 4428 w
(string) 3108 4428 w
(written) 3393 4428 w
(with) 3738 4428 w
(a) 3968 4428 w
(final) 4050 4428 w
(null) 566 4548 w
(byte,) 783 4548 w
(so) 1045 4548 w
(we) 1188 4548 w
(could) 1359 4548 w
(use) 1647 4548 w
11 /Courier f
(atoi) 1837 4548 w
11 /Times-Roman f
(to) 2145 4548 w
(convert) 2275 4548 w
(the) 2647 4548 w
(string) 2825 4548 w
(to) 3120 4548 w
(a) 3250 4548 w
(number,) 3342 4548 w
(and) 3749 4548 w
(add) 3951 4548 w
(so) 4153 4548 w
(many) 566 4668 w
(tickets) 842 4668 w
(to) 1161 4668 w
11 /Courier f
(s\255>tickets) 1279 4668 w
11 /Times-Roman f
(.) 1939 4668 w
(It) 2027 4668 w
(might) 2126 4668 w
(seem) 2417 4668 w
(simpler) 2675 4668 w
(to) 3038 4668 w
(write) 3157 4668 w
(an) 3415 4668 w
(integer) 3551 4668 w
(directly,) 3888 4668 w
(but) 566 4788 w
(then) 736 4788 w
(we) 954 4788 w
(could) 1110 4788 w
(not) 1382 4788 w
(use) 1551 4788 w
11 /Courier f
(echo) 1725 4788 w
11 /Times-Roman f
(to) 2017 4788 w
(update) 2131 4788 w
(semaphores,) 2451 4788 w
(and) 3024 4788 w
(we) 3210 4788 w
(would) 3365 4788 w
(have) 3668 4788 w
(to) 3902 4788 w
(agree) 4016 4788 w
(on) 566 4908 w
(the) 704 4908 w
(endianness) 866 4908 w
(for) 1375 4908 w
(the) 1530 4908 w
(integers) 1692 4908 w
(written) 2067 4908 w
(to) 2406 4908 w
(the) 2520 4908 w
(file.) 2682 4908 w
(It) 2884 4908 w
(is) 2979 4908 w
(simpler) 3081 4908 w
(in) 3439 4908 w
(this) 3553 4908 w
(way.) 3741 4908 w
(Once) 816 5064 w
(the) 1084 5064 w
(semaphore) 1256 5064 w
(has) 1768 5064 w
(been) 1952 5064 w
(updated,) 2196 5064 w
(the) 2609 5064 w
(implementation) 2781 5064 w
(still) 3510 5064 w
(has) 3716 5064 w
(to) 3901 5064 w
(com\255) 4026 5064 w
(plete) 566 5184 w
(any) 820 5184 w
(pending) 1019 5184 w
11 /Times-Italic f
(down) 1414 5184 w
11 /Times-Roman f
(that) 1693 5184 w
(may) 1898 5184 w
(proceed) 2127 5184 w
(due) 2512 5184 w
(to) 2710 5184 w
(the) 2836 5184 w
(new) 3010 5184 w
(tickets) 3232 5184 w
(added.) 3559 5184 w
(The) 3888 5184 w
(last) 4098 5184 w
11 /Courier f
(while) 566 5304 w
11 /Times-Roman f
(does) 939 5304 w
(just) 1183 5304 w
(that.) 1386 5304 w
(While) 1622 5304 w
(there) 1933 5304 w
(are) 2194 5304 w
(tickets) 2369 5304 w
(and) 2699 5304 w
(pending) 2900 5304 w
(requests,) 3297 5304 w
(we) 3727 5304 w
(reply) 3897 5304 w
(to) 4165 5304 w
(each) 566 5424 w
(one) 799 5424 w
(of) 991 5424 w
(such) 1116 5424 w
(requests) 1351 5424 w
(with) 1744 5424 w
(an) 1974 5424 w
(empty) 2111 5424 w
(line,) 2420 5424 w
(like) 2647 5424 w
11 /Courier f
(fsread) 2846 5424 w
11 /Times-Roman f
(did) 3276 5424 w
(when) 3450 5424 w
(tickets) 3720 5424 w
(were) 4040 5424 w
(available.) 566 5544 w
(That) 816 5700 w
(is) 1045 5700 w
(all) 1147 5700 w
(we) 1285 5700 w
(had) 1440 5700 w
(to) 1626 5700 w
(do.) 1740 5700 w
(We) 1906 5700 w
(still) 2085 5700 w
(have) 2280 5700 w
(to) 2514 5700 w
(show) 2628 5700 w
(reading) 2888 5700 w
(from) 3244 5700 w
(the) 3485 5700 w
(file) 3647 5700 w
(that) 3821 5700 w
(is) 4014 5700 w
(the) 4117 5700 w
(root) 566 5820 w
(directory.) 771 5820 w
(The) 1222 5820 w
(code) 1420 5820 w
(used) 1654 5820 w
(by) 1883 5820 w
11 /Courier f
(fsread) 2021 5820 w
11 /Times-Roman f
(to) 2445 5820 w
(handle) 2559 5820 w
(such) 2879 5820 w
(requests) 3108 5820 w
(was) 3495 5820 w
(as) 3693 5820 w
(follows.) 3812 5820 w
cleartomark
showpage
saveobj restore
%%EndPage: 31 31
%%Page: 32 32
/saveobj save def
mark
32 pagesetup
11 /Times-Roman f
(\255 32 \255) 2289 413 w
10 /Courier f
(if \(q.type&QTDIR\){) 786 676 w
(dirread9p\(r, getdirent, nil\);) 1266 786 w
(respond\(r, nil\);) 1266 896 w
(return;) 1266 1006 w
(}) 786 1116 w
11 /Times-Roman f
(Reading) 566 1332 w
(from) 969 1332 w
(a) 1219 1332 w
(directory) 1304 1332 w
(must) 1736 1332 w
(return) 1988 1332 w
(an) 2286 1332 w
(integral) 2426 1332 w
(number) 2798 1332 w
(of) 3170 1332 w
(directory) 3298 1332 w
(entries,) 3730 1332 w
(for\255) 4088 1332 w
(matted) 566 1452 w
(as) 894 1452 w
(an) 1014 1452 w
(array) 1146 1452 w
(of) 1398 1452 w
(bytes,) 1518 1452 w
(neutral) 1807 1452 w
(to) 2139 1452 w
(all) 2253 1452 w
(architectures,) 2391 1452 w
(so) 3005 1452 w
(that) 3131 1452 w
(reading) 3324 1452 w
(from) 3680 1452 w
(a) 3921 1452 w
(direc\255) 3997 1452 w
(tory) 566 1572 w
(would) 780 1572 w
(return) 1092 1572 w
(meaningful) 1391 1572 w
(data) 1929 1572 w
(no) 2149 1572 w
(matter) 2297 1572 w
(the) 2615 1572 w
(architecture) 2787 1572 w
(of) 3340 1572 w
(the) 3469 1572 w
(machine) 3641 1572 w
(used) 4050 1572 w
(by) 566 1692 w
(the) 712 1692 w
(file) 882 1692 w
(server) 1064 1692 w
(and) 1366 1692 w
(the) 1560 1692 w
(one) 1730 1692 w
(used) 1924 1692 w
(as) 2161 1692 w
(a) 2288 1692 w
(client.) 2372 1692 w
(Attending) 2680 1692 w
(such) 3156 1692 w
(reads) 3393 1692 w
(can) 3659 1692 w
(be) 3846 1692 w
(a) 3985 1692 w
(bur\255) 4069 1692 w
(den.) 566 1812 w
(The) 795 1812 w
(function) 1008 1812 w
11 /Courier f
(dirread9p) 1417 1812 w
11 /Times-Roman f
(,) 2011 1812 w
(provided) 2082 1812 w
(by) 2515 1812 w
(the) 2668 1812 w
(library,) 2845 1812 w
(is) 3208 1812 w
(a) 3325 1812 w
(helper) 3416 1812 w
(routine) 3732 1812 w
(that) 4086 1812 w
(fills) 566 1932 w
11 /Courier f
(r\255>ofcall.data) 768 1932 w
11 /Times-Roman f
(and) 1722 1932 w
11 /Courier f
(r\255>ofcall.count) 1910 1932 w
11 /Times-Roman f
(to) 2930 1932 w
(read) 3045 1932 w
(correctly) 3261 1932 w
(from) 3678 1932 w
(a) 3920 1932 w
(direc\255) 3997 1932 w
(tory.) 566 2052 w
(But) 816 2208 w
(how) 1005 2208 w
(can) 1223 2208 w
11 /Courier f
(dirread9p) 1403 2208 w
11 /Times-Roman f
(know) 2026 2208 w
(which) 2299 2208 w
(entries) 2596 2208 w
(are) 2917 2208 w
(kept) 3078 2208 w
(in) 3297 2208 w
(the) 3413 2208 w
(directory?) 3577 2208 w
(That) 4050 2208 w
(is,) 566 2328 w
(how) 739 2328 w
(can) 998 2328 w
(it) 1219 2328 w
(know) 1351 2328 w
(what) 1665 2328 w
(bytes) 1948 2328 w
(should) 2250 2328 w
(be) 2614 2328 w
(read?) 2787 2328 w
(A) 3120 2328 w
(function,) 3269 2328 w
(called) 3733 2328 w
(here) 4064 2328 w
11 /Courier f
(getdirent) 566 2448 w
11 /Times-Roman f
(,) 1160 2448 w
(and) 1224 2448 w
(called) 1418 2448 w
11 /Courier f
(dirgen) 1715 2448 w
11 /Times-Roman f
(by) 2147 2448 w
(the) 2293 2448 w
11 /Times-Italic f
(9p) 2463 2448 w
11 /Times-Roman f
(\(2\)) 2573 2448 w
(manual) 2736 2448 w
(page,) 3095 2448 w
(is) 3365 2448 w
(given) 3475 2448 w
(as) 3755 2448 w
(an) 3882 2448 w
(argu\255) 4021 2448 w
(ment) 566 2568 w
(to) 814 2568 w
11 /Courier f
(dirread9p) 928 2568 w
11 /Times-Roman f
(.) 1522 2568 w
(What) 816 2724 w
(happens) 1081 2724 w
(is) 1468 2724 w
(that) 1570 2724 w
11 /Courier f
(dirread9p) 1763 2724 w
11 /Times-Roman f
(calls) 2385 2724 w
11 /Courier f
(getdirent) 2615 2724 w
11 /Times-Roman f
(to) 3238 2724 w
(obtain) 3353 2724 w
(the) 3657 2724 w
(first) 3820 2724 w
(entry) 4026 2724 w
(in) 566 2844 w
(the) 688 2844 w
(directory,) 858 2844 w
(then) 1317 2844 w
(the) 1542 2844 w
(second,) 1712 2844 w
(then) 2080 2844 w
(the) 2305 2844 w
(third,) 2475 2844 w
(etc.) 2746 2844 w
(until) 2964 2844 w
(it) 3202 2844 w
(has) 3299 2844 w
(enough) 3480 2844 w
(entries) 3838 2844 w
(to) 4165 2844 w
(fill) 566 2964 w
(the) 727 2964 w
11 /Courier f
(Rread) 893 2964 w
11 /Times-Roman f
(message) 1255 2964 w
(in) 1658 2964 w
11 /Courier f
(r\255>ofcall) 1776 2964 w
11 /Times-Roman f
(.) 2370 2964 w
(The) 2458 2964 w
(parameter) 2660 2964 w
11 /Courier f
(n) 3128 2964 w
11 /Times-Roman f
(of) 3226 2964 w
11 /Courier f
(getdirent) 3349 2964 w
11 /Times-Roman f
(shows) 3976 2964 w
(which) 566 3084 w
(file) 870 3084 w
(is) 1052 3084 w
(the) 1162 3084 w
(one) 1332 3084 w
(whose) 1526 3084 w
(directory) 1842 3084 w
(entry) 2273 3084 w
(should) 2534 3084 w
(be) 2864 3084 w
(copied) 3003 3084 w
(into) 3331 3084 w
11 /Courier f
(*d) 3539 3084 w
11 /Times-Roman f
(by) 3707 3084 w
(the) 3852 3084 w
(func\255) 4021 3084 w
(tion.) 566 3204 w
(Each) 829 3204 w
(call) 1082 3204 w
(to) 1275 3204 w
11 /Courier f
(getdirent) 1396 3204 w
11 /Times-Roman f
(\(to) 2025 3204 w
(a) 2182 3204 w
11 /Courier f
(dirgen) 2265 3204 w
11 /Times-Roman f
(function\)) 2696 3204 w
(must) 3134 3204 w
(fill) 3385 3204 w
(a) 3550 3204 w
11 /Courier f
(Dir) 3634 3204 w
11 /Times-Roman f
(structure) 3868 3204 w
(for) 566 3324 w
(the) 724 3324 w
11 /Times-Italic f
(n) 889 3324 w
11 /Times-Roman f
(\255th) 944 3324 w
(file) 1097 3324 w
(in) 1274 3324 w
(the) 1391 3324 w
(directory,) 1556 3324 w
(and) 2010 3324 w
(return) 2199 3324 w
(zero.) 2491 3324 w
(Or) 2737 3324 w
(it) 2883 3324 w
(must) 2976 3324 w
(return) 3222 3324 w
11 /Courier f
(\2551) 3514 3324 w
11 /Times-Roman f
(to) 3677 3324 w
(signal) 3793 3324 w
(that) 4086 3324 w
(there) 566 3444 w
(is) 817 3444 w
(no) 924 3444 w
11 /Times-Italic f
(n) 1067 3444 w
11 /Times-Roman f
(\255th) 1122 3444 w
(file) 1277 3444 w
(in) 1456 3444 w
(the) 1576 3444 w
(directory.) 1744 3444 w
(Another) 2229 3444 w
(common) 2622 3444 w
(convention) 3041 3444 w
(is) 3563 3444 w
(that) 3671 3444 w
(an) 3870 3444 w
(index) 4007 3444 w
(of) 566 3564 w
11 /Courier f
(\2551) 688 3564 w
11 /Times-Roman f
(given) 851 3564 w
(to) 1126 3564 w
(a) 1243 3564 w
11 /Courier f
(dirgen) 1322 3564 w
11 /Times-Roman f
(refers) 1749 3564 w
(to) 2027 3564 w
(the) 2144 3564 w
(directory) 2309 3564 w
(itself,) 2734 3564 w
(and) 3012 3564 w
(not) 3200 3564 w
(to) 3371 3564 w
(any) 3487 3564 w
(of) 3675 3564 w
(its) 3796 3564 w
(entries.) 3931 3564 w
(Although) 566 3684 w
(we) 1015 3684 w
(do) 1175 3684 w
(not) 1318 3684 w
(depend) 1492 3684 w
(on) 1841 3684 w
(that,) 1984 3684 w
(we) 2210 3684 w
(follow) 2370 3684 w
(it) 2690 3684 w
(as) 2786 3684 w
(well.) 2911 3684 w
(This) 3190 3684 w
(is) 3420 3684 w
(the) 3528 3684 w
(implementa\255) 3696 3684 w
(tion) 566 3804 w
(for) 766 3804 w
11 /Courier f
(getdirent) 921 3804 w
11 /Times-Roman f
(.) 1515 3804 w
cleartomark
showpage
saveobj restore
%%EndPage: 32 32
%%Page: 33 33
/saveobj save def
mark
33 pagesetup
11 /Times-Roman f
(\255 33 \255) 2289 413 w
10 /Courier f
(static int) 786 676 w
(getdirent\(int n, Dir* d, void*\)) 786 786 w
({) 786 896 w
(d\255>atime= time\(nil\);) 1266 1006 w
(d\255>mtime= d\255>atime;) 1266 1116 w
(d\255>uid = estrdup9p\(getuser\(\)\);) 1266 1226 w
(d\255>gid = estrdup9p\(d\255>uid\);) 1266 1336 w
(d\255>muid= estrdup9p\(d\255>uid\);) 1266 1446 w
(if \(n == \2551\){) 1266 1556 w
(d\255>qid = \(Qid\){0, 0, QTDIR};) 1746 1666 w
(d\255>mode = 0775;) 1746 1776 w
(d\255>name = estrdup9p\("/"\);) 1746 1886 w
(d\255>length = 0;) 1746 1996 w
(} else if \(n >= 0 && n < nsems && sems[n] != nil\){) 1266 2106 w
(d\255>qid = \(Qid\){n, 0, 0};) 1746 2216 w
(d\255>mode = 0664;) 1746 2326 w
(d\255>name = estrdup9p\(sems[n]\255>name\);) 1746 2436 w
(d\255>length = sems[n]\255>tickets;) 1746 2546 w
(} else) 1266 2656 w
(return \2551;) 1746 2766 w
(return 0;) 1266 2876 w
(}) 786 2986 w
11 /Times-Roman f
(We) 566 3202 w
(pretend) 750 3202 w
(that) 1111 3202 w
(the) 1309 3202 w
(access) 1476 3202 w
(time) 1788 3202 w
(and) 2018 3202 w
(last) 2210 3202 w
(modification) 2397 3202 w
(time) 2993 3202 w
(for) 3223 3202 w
(the) 3384 3202 w
(file) 3552 3202 w
(is) 3732 3202 w
(just) 3840 3202 w
(now.) 4034 3202 w
(Regarding) 566 3322 w
(the) 1052 3322 w
(owner) 1215 3322 w
(\(and) 1517 3322 w
(group) 1740 3322 w
(and) 2025 3322 w
(last) 2212 3322 w
(modifier) 2394 3322 w
(user\)) 2801 3322 w
(for) 3048 3322 w
(the) 3204 3322 w
(file) 3367 3322 w
(we) 3542 3322 w
(use) 3697 3322 w
(the) 3871 3322 w
(user\255) 4033 3322 w
(name) 566 3442 w
(of) 831 3442 w
(the) 950 3442 w
(owner) 1112 3442 w
(of) 1413 3442 w
(our) 1532 3442 w
(process.) 1706 3442 w
(That) 2090 3442 w
(is) 2319 3442 w
(reasonable.) 2421 3442 w
(Now) 816 3598 w
(things) 1077 3598 w
(differ) 1395 3598 w
(depending) 1685 3598 w
(on) 2191 3598 w
(which) 2350 3598 w
(entry) 2667 3598 w
(is) 2941 3598 w
(requested) 3064 3598 w
(by) 3532 3598 w
(the) 3691 3598 w
(caller) 3874 3598 w
(to) 4165 3598 w
11 /Courier f
(getdirent) 566 3718 w
11 /Times-Roman f
(.) 1160 3718 w
(If) 1254 3718 w
11 /Courier f
(n) 1364 3718 w
11 /Times-Roman f
(is) 1468 3718 w
11 /Courier f
(\2551) 1580 3718 w
11 /Times-Roman f
(,) 1712 3718 w
(we) 1778 3718 w
(assume) 1943 3718 w
(that) 2304 3718 w
11 /Courier f
(d) 2507 3718 w
11 /Times-Roman f
(must) 2611 3718 w
(be) 2864 3718 w
(filled) 3005 3718 w
(with) 3275 3718 w
(a) 3509 3718 w
(directory) 3594 3718 w
(entry) 4026 3718 w
(for) 566 3838 w
(the) 726 3838 w
(directory) 893 3838 w
(itself.) 1321 3838 w
(In) 1602 3838 w
(this) 1726 3838 w
(case,) 1919 3838 w
(we) 2168 3838 w
(update) 2329 3838 w
(the) 2655 3838 w
(qid,) 2823 3838 w
(permissions,) 3026 3838 w
(file) 3614 3838 w
(name,) 3794 3838 w
(and) 4093 3838 w
(length) 566 3958 w
(to) 873 3958 w
(be) 991 3958 w
(those) 1125 3958 w
(of) 1388 3958 w
(our) 1510 3958 w
(root) 1687 3958 w
(directory.) 1895 3958 w
(Note) 2349 3958 w
(that) 2593 3958 w
(conventionally) 2789 3958 w
(directories) 3473 3958 w
(have) 3966 3958 w
(a) 4203 3958 w
(length) 566 4078 w
(of) 874 4078 w
(zero.) 998 4078 w
(Note) 1246 4078 w
(also) 1492 4078 w
(how) 1702 4078 w
(strings) 1924 4078 w
(kept) 2251 4078 w
(by) 2473 4078 w
(the) 2616 4078 w
(directory) 2783 4078 w
(entry) 3211 4078 w
(must) 3470 4078 w
(be) 3719 4078 w
(allocated) 3856 4078 w
(using) 566 4198 w
11 /Courier f
(estrdup9p) 833 4198 w
11 /Times-Roman f
(,) 1427 4198 w
(or) 1483 4198 w
(maybe) 1602 4198 w
(using) 1922 4198 w
11 /Courier f
(emalloc9p) 2189 4198 w
11 /Times-Roman f
(.) 2783 4198 w
(If) 816 4354 w
11 /Courier f
(n) 923 4354 w
11 /Times-Roman f
(is) 1025 4354 w
(a) 1135 4354 w
(valid) 1219 4354 w
(identifier) 1475 4354 w
(\(index\)) 1913 4354 w
(for) 2265 4354 w
(a) 2428 4354 w
(semaphore,) 2512 4354 w
(we) 3050 4354 w
(update) 3213 4354 w
(the) 3541 4354 w
(qid,) 3711 4354 w
(permis\255) 3916 4354 w
(sions,) 566 4474 w
(file) 852 4474 w
(name,) 1029 4474 w
(and) 1325 4474 w
(length) 1514 4474 w
(in) 1820 4474 w
11 /Courier f
(d) 1937 4474 w
11 /Times-Roman f
(.) 2003 4474 w
(Otherwise) 2090 4474 w
(we) 2571 4474 w
(return) 2729 4474 w
11 /Courier f
(\2551) 3021 4474 w
11 /Times-Roman f
(to) 3184 4474 w
(signal) 3301 4474 w
(that) 3594 4474 w
(there) 3789 4474 w
(is) 4037 4474 w
(no) 4141 4474 w
(such) 566 4594 w
(file.) 815 4594 w
(Note) 1065 4594 w
(how) 1326 4594 w
11 /Courier f
(d\255>qid.path) 1563 4594 w
11 /Times-Roman f
(is) 2337 4594 w
(the) 2459 4594 w
(index) 2641 4594 w
(for) 2933 4594 w
(the) 3108 4594 w
(semaphore.) 3290 4594 w
(Also,) 3840 4594 w
(we) 4124 4594 w
(report) 566 4714 w
(as) 863 4714 w
(the) 990 4714 w
(file) 1160 4714 w
(size) 1342 4714 w
(the) 1548 4714 w
(number) 1718 4714 w
(of) 2089 4714 w
(tickets) 2216 4714 w
(in) 2539 4714 w
(the) 2661 4714 w
(semaphore.) 2830 4714 w
(In) 3367 4714 w
(this) 3493 4714 w
(way,) 3688 4714 w
11 /Courier f
(ls) 3933 4714 w
11 /Times-Roman f
(can) 4100 4714 w
(be) 566 4834 w
(used) 697 4834 w
(to) 926 4834 w
(see) 1040 4834 w
(if) 1207 4834 w
(a) 1302 4834 w
(semaphore) 1378 4834 w
(has) 1880 4834 w
(any) 2054 4834 w
(available) 2240 4834 w
(tickets) 2663 4834 w
(in) 2978 4834 w
(it.) 3092 4834 w
(The) 816 4990 w
(last) 1015 4990 w
(parameter) 1197 4990 w
(in) 1662 4990 w
11 /Courier f
(getdirent) 1777 4990 w
11 /Times-Roman f
(corresponds) 2400 4990 w
(to) 2959 4990 w
(the) 3075 4990 w
(last) 3239 4990 w
(parameter) 3422 4990 w
(we) 3888 4990 w
(gave) 4045 4990 w
(to) 566 5110 w
11 /Courier f
(dirread9p) 704 5110 w
11 /Times-Roman f
(.) 1298 5110 w
(This) 1406 5110 w
(function) 1654 5110 w
(passes) 2072 5110 w
(such) 2404 5110 w
(argument) 2657 5110 w
(verbatim) 3123 5110 w
(to) 3564 5110 w
(each) 3701 5110 w
(call) 3951 5110 w
(of) 4160 5110 w
11 /Courier f
(getdirent) 566 5230 w
11 /Times-Roman f
(.) 1160 5230 w
(It) 1248 5230 w
(can) 1347 5230 w
(be) 1530 5230 w
(used) 1665 5230 w
(to) 1898 5230 w
(pass) 2017 5230 w
(the) 2239 5230 w
(data) 2406 5230 w
(structure) 2621 5230 w
(for) 3037 5230 w
(the) 3197 5230 w
(directory) 3364 5230 w
(being) 3792 5230 w
(iter\255) 4069 5230 w
(ated) 566 5350 w
(through) 782 5350 w
(calls) 1158 5350 w
(to) 1393 5350 w
11 /Courier f
(getdirent) 1512 5350 w
11 /Times-Roman f
(.) 2106 5350 w
(In) 2195 5350 w
(our) 2319 5350 w
(case,) 2498 5350 w
(we) 2746 5350 w
(have) 2906 5350 w
(a) 3145 5350 w
(single) 3226 5350 w
(directory) 3522 5350 w
(and) 3950 5350 w
(do) 4141 5350 w
(not) 566 5470 w
(use) 735 5470 w
(the) 909 5470 w
(auxiliary) 1071 5470 w
(argument.) 1489 5470 w
(Having) 816 5626 w
(implemented) 1217 5626 w
11 /Courier f
(getdirent) 1870 5626 w
11 /Times-Roman f
(makes) 2543 5626 w
(it) 2902 5626 w
(quite) 3043 5626 w
(easy) 3342 5626 w
(to) 3615 5626 w
(implement) 3780 5626 w
11 /Courier f
(fsstat) 566 5746 w
11 /Times-Roman f
(,) 962 5746 w
(to) 1020 5746 w
(serve) 1136 5746 w
11 /Courier f
(Tstat) 1396 5746 w
11 /Times-Roman f
(requests.) 1756 5746 w
(The) 2173 5746 w
(function) 2373 5746 w
11 /Courier f
(fsstat) 2769 5746 w
11 /Times-Roman f
(must) 3195 5746 w
(fill) 3440 5746 w
11 /Courier f
(r\255>d) 3599 5746 w
11 /Times-Roman f
(with) 3892 5746 w
(the) 4117 5746 w
(directory) 566 5866 w
(entry) 1003 5866 w
(for) 1270 5866 w
(the) 1439 5866 w
(file) 1616 5866 w
(involved.) 1805 5866 w
(Later,) 2261 5866 w
11 /Courier f
(respond) 2562 5866 w
11 /Times-Roman f
(will) 3067 5866 w
(fill) 3282 5866 w
(up) 3454 5866 w
(an) 3607 5866 w
(appropriate) 3753 5866 w
11 /Courier f
(Rstat) 566 5986 w
11 /Times-Roman f
(message) 926 5986 w
(by) 1327 5986 w
(packing) 1467 5986 w
(a) 1844 5986 w
(directory) 1922 5986 w
(entry) 2347 5986 w
(using) 2601 5986 w
(the) 2869 5986 w
(network) 3032 5986 w
(format) 3420 5986 w
(for) 3741 5986 w
(it) 3897 5986 w
(\(simi\255) 3988 5986 w
(lar) 566 6106 w
(to) 709 6106 w
(directory) 823 6106 w
(entries) 1246 6106 w
(traveling) 1566 6106 w
(in) 1984 6106 w
11 /Courier f
(Rread) 2098 6106 w
11 /Times-Roman f
(messages) 2456 6106 w
(for) 2898 6106 w
(directories\).) 3053 6106 w
cleartomark
showpage
saveobj restore
%%EndPage: 33 33
%%Page: 34 34
/saveobj save def
mark
34 pagesetup
11 /Times-Roman f
(\255 34 \255) 2289 413 w
10 /Courier f
(static void) 786 676 w
(fsstat\(Req* r\)) 786 786 w
({) 786 896 w
(Fid*) 1266 1006 w
(fid;) 1746 1006 w
(Qid) 1266 1116 w
(q;) 1746 1116 w
(fid = r\255>fid;) 1266 1336 w
(q = fid\255>qid;) 1266 1446 w
(if \(q.type&QTDIR\)) 1266 1556 w
(getdirent\(\2551, &r\255>d, nil\);) 1746 1666 w
(else) 1266 1776 w
(getdirent\(q.path, &r\255>d, nil\);) 1746 1886 w
(respond\(r, nil\);) 1266 1996 w
(}) 786 2106 w
11 /Times-Roman f
(When) 566 2322 w
(the) 862 2322 w
(file) 1031 2322 w
(for) 1213 2322 w
11 /Courier f
(Tstat) 1376 2322 w
11 /Times-Roman f
(is) 1742 2322 w
(the) 1852 2322 w
(directory,) 2022 2322 w
(we) 2481 2322 w
(call) 2644 2322 w
11 /Courier f
(getdirent) 2838 2322 w
11 /Times-Roman f
(to) 3468 2322 w
(fill) 3590 2322 w
11 /Courier f
(r\255>d) 3755 2322 w
11 /Times-Roman f
(with) 4055 2322 w
(the) 566 2442 w
(entry) 728 2442 w
(for) 981 2442 w
(the) 1136 2442 w
(file) 1298 2442 w
(number) 1472 2442 w
11 /Courier f
(\2551) 1835 2442 w
11 /Times-Roman f
(,) 1967 2442 w
(i.e.,) 2023 2442 w
(for) 2214 2442 w
(the) 2369 2442 w
(directory) 2531 2442 w
(itself.) 2954 2442 w
(Once) 3230 2442 w
11 /Courier f
(getdirent) 3488 2442 w
11 /Times-Roman f
(did) 4110 2442 w
(its) 566 2562 w
(job,) 699 2562 w
(we) 896 2562 w
(only) 1051 2562 w
(have) 1275 2562 w
(to) 1509 2562 w
(call) 1623 2562 w
11 /Courier f
(respond) 1809 2562 w
11 /Times-Roman f
(.) 2271 2562 w
(We) 816 2718 w
(are) 1000 2718 w
(now) 1165 2718 w
(close) 1387 2718 w
(to) 1645 2718 w
(completing) 1764 2718 w
(our) 2292 2718 w
(file) 2471 2718 w
(server.) 2650 2718 w
(We) 2977 2718 w
(must) 3162 2718 w
(still) 3411 2718 w
(implement) 3612 2718 w
(the) 4117 2718 w
(function) 566 2838 w
11 /Courier f
(fswalk1) 989 2838 w
11 /Times-Roman f
(,) 1451 2838 w
(used) 1535 2838 w
(by) 1792 2838 w
(the) 1958 2838 w
(library) 2148 2838 w
(\(along) 2496 2838 w
(with) 2832 2838 w
11 /Courier f
(fsclone) 3084 2838 w
11 /Times-Roman f
(\)) 3546 2838 w
(to) 3638 2838 w
(implement) 3780 2838 w
11 /Courier f
(walk) 566 2958 w
11 /Times-Roman f
(.) 830 2958 w
(This) 915 2958 w
(function) 1140 2958 w
(receives) 1535 2958 w
(a) 1921 2958 w
(fid,) 1998 2958 w
(a) 2177 2958 w
(file) 2254 2958 w
(name) 2429 2958 w
(and) 2696 2958 w
(a) 2884 2958 w
(qid.) 2962 2958 w
(It) 3161 2958 w
(should) 3258 2958 w
(walk) 3582 2958 w
(to) 3825 2958 w
(the) 3941 2958 w
(file) 4105 2958 w
11 /Courier f
(name) 566 3078 w
11 /Times-Roman f
(from) 875 3078 w
(the) 1133 3078 w
(one) 1312 3078 w
(pointed) 1515 3078 w
(to) 1890 3078 w
(by) 2021 3078 w
11 /Courier f
(fid) 2176 3078 w
11 /Times-Roman f
(.) 2374 3078 w
(For) 2475 3078 w
(example,) 2673 3078 w
(if) 3117 3078 w
11 /Courier f
(fid) 3229 3078 w
11 /Times-Roman f
(refers) 3472 3078 w
(to) 3764 3078 w
(the) 3895 3078 w
(root) 4074 3078 w
(directory,) 566 3198 w
(and) 1045 3198 w
11 /Courier f
(name) 1259 3198 w
11 /Times-Roman f
(is) 1579 3198 w
11 /Courier f
(mutex) 1709 3198 w
11 /Times-Roman f
(,) 2039 3198 w
(the) 2123 3198 w
(function) 2313 3198 w
(should) 2735 3198 w
(leave) 3085 3198 w
(the) 3371 3198 w
(fid) 3561 3198 w
(pointing) 3740 3198 w
(to) 4165 3198 w
11 /Courier f
(/mutex) 566 3318 w
11 /Times-Roman f
(.) 962 3318 w
(If) 1053 3318 w
(later,) 1160 3318 w
(the) 1417 3318 w
(function) 1585 3318 w
(is) 1985 3318 w
(called) 2093 3318 w
(with) 2388 3318 w
(the) 2618 3318 w
(same) 2786 3318 w
(fid) 3045 3318 w
(but) 3201 3318 w
(the) 3376 3318 w
(name) 3544 3318 w
(is) 3815 3318 w
11 /Courier f
(..) 3923 3318 w
11 /Times-Roman f
(,) 4055 3318 w
(the) 4117 3318 w
(function) 566 3438 w
(should) 969 3438 w
(leave) 1300 3438 w
(the) 1567 3438 w
(fid) 1738 3438 w
(pointing) 1897 3438 w
(to) 2302 3438 w
11 /Courier f
(/) 2425 3438 w
11 /Times-Roman f
(.) 2491 3438 w
(Walking) 2584 3438 w
(to) 2999 3438 w
11 /Courier f
(..) 3122 3438 w
11 /Times-Roman f
(from) 3291 3438 w
11 /Courier f
(/) 3542 3438 w
11 /Times-Roman f
(leaves) 3646 3438 w
(the) 3957 3438 w
(fid) 4129 3438 w
(unchanged.) 566 3558 w
(The) 1101 3558 w
(convention) 1304 3558 w
(is) 1825 3558 w
(that) 1932 3558 w
11 /Courier f
(/..) 2130 3558 w
11 /Times-Roman f
(is) 2361 3558 w
(just) 2468 3558 w
11 /Courier f
(/) 2661 3558 w
11 /Times-Roman f
(.) 2727 3558 w
(Like) 2815 3558 w
(it) 3048 3558 w
(happens) 3142 3558 w
(with) 3533 3558 w
11 /Courier f
(fsclone) 3761 3558 w
11 /Times-Roman f
(,) 4223 3558 w
(the) 566 3678 w
(function) 732 3678 w
(must) 1130 3678 w
(return) 1377 3678 w
(a) 1670 3678 w
(nil) 1750 3678 w
(string) 1899 3678 w
(when) 2182 3678 w
(it) 2451 3678 w
(could) 2545 3678 w
(do) 2822 3678 w
(its) 2965 3678 w
(job,) 3103 3678 w
(or) 3305 3678 w
(a) 3429 3678 w
(string) 3510 3678 w
(describing) 3794 3678 w
(the) 566 3798 w
(error) 730 3798 w
(when) 971 3798 w
(it) 1238 3798 w
(failed.) 1330 3798 w
(Besides,) 1637 3798 w
(both) 2037 3798 w
11 /Courier f
(fid\255>qid) 2263 3798 w
11 /Times-Roman f
(and) 2821 3798 w
11 /Courier f
(*qid) 3009 3798 w
11 /Times-Roman f
(must) 3303 3798 w
(be) 3547 3798 w
(updated) 3679 3798 w
(with) 4055 3798 w
(the) 566 3918 w
(qid) 731 3918 w
(for) 903 3918 w
(the) 1061 3918 w
(new) 1226 3918 w
(file) 1439 3918 w
(after) 1616 3918 w
(the) 1846 3918 w
(walk.) 2011 3918 w
(Furthermore,) 2283 3918 w
(because) 2890 3918 w
(we) 3266 3918 w
(keep) 3424 3918 w
(a) 3662 3918 w
(pointer) 3742 3918 w
(to) 4085 3918 w
(a) 4203 3918 w
11 /Courier f
(Sem) 566 4038 w
11 /Times-Roman f
(in) 805 4038 w
(the) 932 4038 w
11 /Courier f
(fid\255>aux) 1107 4038 w
11 /Times-Roman f
(field,) 1676 4038 w
(the) 1946 4038 w
(function) 2121 4038 w
(must) 2528 4038 w
(update) 2784 4038 w
(such) 3116 4038 w
(field) 3357 4038 w
(to) 3598 4038 w
(point) 3724 4038 w
(to) 3991 4038 w
(the) 4117 4038 w
(right) 566 4158 w
(place) 802 4158 w
(after) 1060 4158 w
(the) 1287 4158 w
(walk.) 1449 4158 w
8 /Courier f
(static char*) 786 4326 w
(fswalk1\(Fid* fid, char* name, Qid* qid\)) 786 4434 w
({) 786 4542 w
(Qid) 1266 4650 w
(q;) 1746 4650 w
(int) 1266 4758 w
(i;) 1746 4758 w
(Sem*) 1266 4866 w
(s;) 1746 4866 w
(q = fid\255>qid;) 1266 5082 w
(s = fid\255>aux;) 1266 5190 w
cleartomark
showpage
saveobj restore
%%EndPage: 34 34
%%Page: 35 35
/saveobj save def
mark
35 pagesetup
11 /Times-Roman f
(\255 35 \255) 2289 413 w
8 /Courier f
(if \(!\(q.type&QTDIR\)\){) 1266 674 w
(if \(!strcmp\(name, ".."\)\){) 1746 782 w
(fid\255>qid = \(Qid\){0,0,QTDIR};) 2226 890 w
(*qid = fid\255>qid;) 2226 998 w
(closesem\(s\);) 2226 1106 w
(fid\255>aux = nil;) 2226 1214 w
(return nil;) 2226 1322 w
(}) 1746 1430 w
(} else {) 1266 1538 w
(for \(i = 0; i < nsems; i++\)) 1746 1766 w
(if \(sems[i] && !strcmp\(name, sems[i]\255>name\)\){) 2226 1874 w
(fid\255>qid = \(Qid\){i, 0, 0};) 2706 1982 w
(incref\(sems[i]\);) 2706 2090 w
(closesem\(fid\255>aux\);) 2706 2198 w
(fid\255>aux = sems[i];) 2706 2306 w
(*qid = fid\255>qid;) 2706 2414 w
(return nil;) 2706 2522 w
(}) 2226 2630 w
(}) 1266 2738 w
(return "no such file";) 1266 2846 w
(}) 786 2954 w
11 /Times-Roman f
(Walking) 566 3170 w
(to) 995 3170 w
(the) 1132 3170 w
(root) 1317 3170 w
(directory) 1545 3170 w
(releases) 1991 3170 w
(any) 2387 3170 w
(reference) 2596 3170 w
(to) 3050 3170 w
(the) 3187 3170 w
11 /Courier f
(Sem) 3372 3170 w
11 /Times-Roman f
(that) 3621 3170 w
(might) 3838 3170 w
(be) 4148 3170 w
(pointed) 566 3290 w
(to) 939 3290 w
(by) 1068 3290 w
11 /Courier f
(fid\255>aux) 1221 3290 w
11 /Times-Roman f
(.) 1749 3290 w
(Walking) 1848 3290 w
(to) 2269 3290 w
(a) 2398 3290 w
(file) 2489 3290 w
(adds) 2678 3290 w
(a) 2922 3290 w
(new) 3013 3290 w
(reference) 3238 3290 w
(to) 3684 3290 w
(the) 3813 3290 w
(sema\255) 3990 3290 w
(phore) 566 3410 w
(for) 843 3410 w
(the) 998 3410 w
(file.) 1160 3410 w
(But) 1390 3410 w
(otherwise,) 1578 3410 w
(the) 2060 3410 w
(function) 2222 3410 w
(should) 2616 3410 w
(be) 2938 3410 w
(simple) 3069 3410 w
(to) 3391 3410 w
(understand.) 3505 3410 w
(And) 816 3566 w
(this) 1042 3566 w
(completes) 1239 3566 w
(the) 1721 3566 w
(implementation) 1892 3566 w
(for) 2620 3566 w
(our) 2784 3566 w
(semaphore) 2967 3566 w
(file) 3478 3566 w
(server.) 3661 3566 w
(After) 4021 3566 w
(compiling) 566 3686 w
(it,) 1041 3686 w
(we) 1159 3686 w
(can) 1314 3686 w
(now) 1493 3686 w
(use) 1710 3686 w
(it) 1884 3686 w
(like) 1974 3686 w
(follows.) 2167 3686 w
10 /Courier f
(; 8.semfs \255s sem \255m /mnt/sem) 786 3856 w
(; echo 1 >/mnt/sem/mutex) 786 3966 w
(; echo 3 >/mnt/sem/other) 786 4076 w
(; ls \255l /mnt/sem) 786 4306 w
(\255\255rw\255rw\255r\255\255 M 174 nemo nemo 1 Aug 23 00:16 /mnt/sem/mutex) 786 4416 w
(\255\255rw\255rw\255r\255\255 M 174 nemo nemo 3 Aug 23 00:16 /mnt/sem/other) 786 4526 w
(; read </mnt/sem/other) 786 4756 w
(; ls \255l /mnt/sem/other) 786 4976 w
(\255\255rw\255rw\255r\255\255 M 174 nemo nemo 2 Aug 23 00:16 /mnt/sem/other) 786 5086 w
(; read </mnt/sem/other) 786 5316 w
(; read </mnt/sem/other) 786 5536 w
(; read </mnt/sem/other) 786 5756 w
10 /Times-Italic f
(This blocks until a ticket is added. And then....) 1266 5866 w
10 /Courier f
(;) 786 5976 w
11 /Times-Roman f
(The) 566 6192 w
(program) 764 6192 w
(we) 1163 6192 w
(built) 1318 6192 w
(uses) 1549 6192 w
(a) 1767 6192 w
(single) 1844 6192 w
(process) 2136 6192 w
(to) 2493 6192 w
(handle) 2608 6192 w
(all) 2929 6192 w
(9P) 3068 6192 w
(requests.) 3214 6192 w
(Nevertheless,) 3658 6192 w
(we) 566 6312 w
(decided) 739 6312 w
(to) 1125 6312 w
(show) 1257 6312 w
(how) 1535 6312 w
(to) 1770 6312 w
(use) 1902 6312 w
(the) 2094 6312 w
(thread) 2274 6312 w
(library) 2593 6312 w
(together) 2931 6312 w
(with) 3335 6312 w
11 /Courier f
(lib9p) 3576 6312 w
11 /Times-Roman f
(.) 3906 6312 w
(If) 4007 6312 w
(we) 4124 6312 w
cleartomark
showpage
saveobj restore
%%EndPage: 35 35
%%Page: 36 36
/saveobj save def
mark
36 pagesetup
11 /Times-Roman f
(\255 36 \255) 2289 413 w
(decide) 566 686 w
(to) 888 686 w
(change) 1011 686 w
(the) 1357 686 w
(program) 1528 686 w
(to) 1936 686 w
(do) 2059 686 w
(something) 2206 686 w
(else,) 2702 686 w
(that) 2937 686 w
(requires) 3139 686 w
(multiple) 3529 686 w
(threads) 3935 686 w
(or) 566 806 w
(processes,) 688 806 w
(it) 1166 806 w
(is) 1259 806 w
(easy) 1364 806 w
(to) 1589 806 w
(do) 1706 806 w
(so.) 1847 806 w
(Once) 2004 806 w
(again,) 2265 806 w
(it) 2561 806 w
(is) 2654 806 w
(important) 2759 806 w
(to) 3217 806 w
(note) 3333 806 w
(that) 3552 806 w
(by) 3747 806 w
(process\255) 3887 806 w
(ing) 566 926 w
(all) 735 926 w
(the) 873 926 w
(requests) 1035 926 w
(in) 1422 926 w
(a) 1536 926 w
(single) 1612 926 w
(process,) 1903 926 w
(there) 2287 926 w
(is) 2534 926 w
(no) 2637 926 w
(race) 2776 926 w
(condition.) 2985 926 w
(All) 3458 926 w
(the) 3628 926 w
(data) 3791 926 w
(struc\255) 4002 926 w
(tures) 566 1046 w
(for) 814 1046 w
(the) 976 1046 w
(semaphores) 1145 1046 w
(are) 1697 1046 w
(free) 1864 1046 w
(of) 2066 1046 w
(races,) 2191 1046 w
(as) 2476 1046 w
(long) 2601 1046 w
(as) 2831 1046 w
(they) 2956 1046 w
(are) 3179 1046 w
(touched) 3345 1046 w
(only) 3726 1046 w
(from) 3956 1046 w
(a) 4203 1046 w
(single) 566 1166 w
(process.) 857 1166 w
(For) 816 1322 w
(example,) 1010 1322 w
(if) 1450 1322 w
(this) 1558 1322 w
(program) 1759 1322 w
(is) 2172 1322 w
(ever) 2288 1322 w
(changed) 2517 1322 w
(to) 2923 1322 w
(listen) 3051 1322 w
(for) 3332 1322 w
(9P) 3501 1322 w
(clients) 3660 1322 w
(in) 3989 1322 w
(the) 4117 1322 w
(network,) 566 1442 w
(it) 999 1442 w
(might) 1107 1442 w
(create) 1411 1442 w
(a) 1716 1442 w
(new) 1810 1442 w
(process) 2038 1442 w
(to) 2411 1442 w
(handle) 2542 1442 w
(each) 2879 1442 w
(connection.) 3123 1442 w
(That) 3677 1442 w
(process) 3923 1442 w
(may) 566 1562 w
(just) 793 1562 w
(forward) 991 1562 w
(9P) 1374 1562 w
(requests) 1529 1562 w
(through) 1927 1562 w
(channels) 2308 1562 w
(to) 2730 1562 w
(a) 2855 1562 w
(per\255client) 2942 1562 w
(thread) 3400 1562 w
(that) 3712 1562 w
(handles) 3916 1562 w
(the) 566 1682 w
(client) 756 1682 w
(requests.) 1056 1682 w
(Once) 1499 1682 w
(again,) 1785 1682 w
(there) 2106 1682 w
(would) 2380 1682 w
(be) 2711 1682 w
(no) 2870 1682 w
(races) 3036 1682 w
(because) 3315 1682 w
(of) 3715 1682 w
(the) 3861 1682 w
(non\255) 4050 1682 w
(preemption) 566 1802 w
(for) 1094 1802 w
(threads.) 1249 1802 w
(There) 816 1958 w
(are) 1100 1958 w
(several) 1262 1958 w
(other) 1601 1958 w
(tools) 1857 1958 w
(for) 2103 1958 w
(building) 2261 1958 w
(file) 2660 1958 w
(servers) 2837 1958 w
(in) 3177 1958 w
(Plan) 3294 1958 w
(9.) 3521 1958 w
(Most) 3635 1958 w
(notably,) 3893 1958 w
(there) 566 2078 w
(is) 831 2078 w
(a) 951 2078 w
(implementation) 1045 2078 w
(of) 1782 2078 w
(file) 1919 2078 w
(trees,) 2111 2078 w
(understood) 2391 2078 w
(by) 2925 2078 w
11 /Courier f
(lib9p) 3081 2078 w
11 /Times-Roman f
(.) 3411 2078 w
(File) 3513 2078 w
(servers) 3731 2078 w
(that) 4086 2078 w
(only) 566 2198 w
(want) 791 2198 w
(to) 1033 2198 w
(take) 1148 2198 w
(care) 1359 2198 w
(of) 1568 2198 w
(reading) 1688 2198 w
(and) 2045 2198 w
(writing) 2232 2198 w
(to) 2579 2198 w
(their) 2694 2198 w
(files) 2924 2198 w
(may) 3142 2198 w
(create) 3360 2198 w
(a) 3648 2198 w
(file) 3725 2198 w
(tree) 3900 2198 w
(and) 4093 2198 w
(place) 566 2318 w
(a) 825 2318 w
(pointer) 902 2318 w
(to) 1242 2318 w
(it) 1357 2318 w
(in) 1448 2318 w
(the) 1562 2318 w
11 /Courier f
(Srv) 1724 2318 w
11 /Times-Roman f
(structure.) 1950 2318 w
(After) 2389 2318 w
(doing) 2647 2318 w
(so,) 2926 2318 w
(most) 3080 2318 w
(of) 3323 2318 w
(the) 3442 2318 w
(calls) 3604 2318 w
(that) 3833 2318 w
(work) 4026 2318 w
(on) 566 2438 w
(the) 708 2438 w
(file) 874 2438 w
(tree) 1052 2438 w
(would) 1247 2438 w
(be) 1554 2438 w
(supplied) 1689 2438 w
(by) 2094 2438 w
(the) 2236 2438 w
(library.) 2402 2438 w
(In) 2754 2438 w
(general,) 2877 2438 w
(only) 3258 2438 w
(reading) 3486 2438 w
(and) 3847 2438 w
(writ\255) 4038 2438 w
(ing) 566 2558 w
(to) 737 2558 w
(the) 853 2558 w
(files) 1017 2558 w
(must) 1236 2558 w
(be) 1480 2558 w
(implemented) 1612 2558 w
(\(besides) 2215 2558 w
(creation) 2603 2558 w
(and) 2984 2558 w
(removal) 3171 2558 w
(of) 3559 2558 w
(files\).) 3679 2558 w
(We) 3961 2558 w
(do) 4141 2558 w
(not) 566 2678 w
(discuss) 738 2678 w
(this) 1087 2678 w
(here,) 1278 2678 w
(but) 1524 2678 w
(the) 1696 2678 w
(program) 1861 2678 w
11 /Courier f
(/sys/src/cmd/ramfs.c) 2263 2678 w
11 /Times-Roman f
(is) 3615 2678 w
(an) 3721 2678 w
(excellent) 3856 2678 w
(example) 566 2798 w
(of) 965 2798 w
(how) 1084 2798 w
(to) 1301 2798 w
(use) 1415 2798 w
(this) 1589 2798 w
(facility.) 1777 2798 w
16 /Times-Bold f
(13.8.) 566 3158 w
(A program) 966 3158 w
(to make things) 1764 3158 w
11 /Times-Roman f
(For) 566 3314 w
(all) 754 3314 w
(the) 899 3314 w
(previous) 1068 3314 w
(programs,) 1481 3314 w
(compiling) 1959 3314 w
(them) 2442 3314 w
(by) 2698 3314 w
(hand) 2844 3314 w
(could) 3093 3314 w
(suffice.) 3373 3314 w
(For) 3734 3314 w
(our) 3923 3314 w
(file) 4105 3314 w
(server) 566 3434 w
(program,) 867 3434 w
(it) 1301 3434 w
(is) 1397 3434 w
(likely) 1505 3434 w
(that) 1790 3434 w
(we) 1989 3434 w
(will) 2150 3434 w
(have) 2356 3434 w
(to) 2596 3434 w
(go) 2716 3434 w
(through) 2860 3434 w
(the) 3236 3434 w
(compile\255test\255debug) 3404 3434 w
(cycle) 566 3554 w
(multiple) 828 3554 w
(times.) 1228 3554 w
(Instead) 1555 3554 w
(of) 1903 3554 w
(compiling) 2027 3554 w
(and) 2507 3554 w
(linking) 2698 3554 w
(it) 3044 3554 w
(by) 3139 3554 w
(hand,) 3282 3554 w
(we) 3556 3554 w
(are) 3716 3554 w
(going) 3881 3554 w
(to) 4165 3554 w
(use) 566 3674 w
(a) 740 3674 w
(tool) 816 3674 w
(that) 1016 3674 w
(knows) 1209 3674 w
(how) 1524 3674 w
(to) 1741 3674 w
(build) 1855 3674 w
(things.) 2110 3674 w
(The) 816 3830 w
(program) 1022 3830 w
11 /Courier f
(mk) 1429 3830 w
11 /Times-Roman f
(is) 1597 3830 w
(similar) 1707 3830 w
(to) 2049 3830 w
(the) 2171 3830 w
(UNIX) 2341 3830 w
(program) 2650 3830 w
11 /Courier f
(make) 3057 3830 w
11 /Times-Roman f
(.) 3321 3830 w
(Its) 3413 3830 w
(only) 3560 3830 w
(purpose) 3793 3830 w
(is) 4177 3830 w
(to) 566 3950 w
(build) 683 3950 w
(things) 941 3950 w
(once) 1242 3950 w
(you) 1478 3950 w
(tell) 1673 3950 w
(it) 1844 3950 w
(how) 1936 3950 w
(to) 2155 3950 w
(build) 2271 3950 w
(them.) 2528 3950 w
(The) 2806 3950 w
(instructions) 3006 3950 w
(for) 3550 3950 w
(building) 3707 3950 w
(our) 4105 3950 w
11 /Times-Italic f
(products) 566 4070 w
11 /Times-Roman f
(must) 995 4070 w
(be) 1254 4070 w
(detailed) 1401 4070 w
(in) 1792 4070 w
(a) 1922 4070 w
(file) 2014 4070 w
(called) 2204 4070 w
11 /Courier f
(mkfile) 2509 4070 w
11 /Times-Roman f
(,) 2905 4070 w
(read) 2977 4070 w
(by) 3208 4070 w
11 /Courier f
(mk) 3362 4070 w
11 /Times-Roman f
(to) 3538 4070 w
(learn) 3668 4070 w
(how) 3931 4070 w
(to) 4165 4070 w
(build) 566 4190 w
(things.) 821 4190 w
(We) 816 4346 w
(placed) 1000 4346 w
(the) 1318 4346 w
(source) 1485 4346 w
(code,) 1804 4346 w
(along) 2072 4346 w
(with) 2350 4346 w
(an) 2580 4346 w
(initial) 2717 4346 w
(version) 3009 4346 w
(for) 3366 4346 w
(our) 3527 4346 w
11 /Courier f
(mkfile) 3707 4346 w
11 /Times-Roman f
(,) 4103 4346 w
(in) 4165 4346 w
(a) 566 4466 w
(directory) 642 4466 w
(for) 1065 4466 w
(our) 1220 4466 w
(file) 1394 4466 w
(server) 1568 4466 w
(program.) 1862 4466 w
10 /Courier f
(; lc) 786 4636 w
(mkfile) 786 4746 w
(sem.c) 1266 4746 w
(sem.h) 1746 4746 w
(semfs.c) 2226 4746 w
(; cat mkfile) 786 4856 w
(8.semfs: semfs.8 sem.8) 786 4966 w
(8l \255o 8.semfs semfs.8 sem.8) 1266 5076 w
(semfs.8: semfs.c sem.h) 786 5296 w
(8c \255FVw semfs.c) 1266 5406 w
(sem.8: sem.c sem.h) 786 5626 w
(8c \255FVw sem.c) 1266 5736 w
(;) 786 5846 w
11 /Times-Roman f
(Now,) 566 6062 w
(running) 835 6062 w
11 /Courier f
(mk) 1205 6062 w
11 /Times-Roman f
(in) 1365 6062 w
(this) 1479 6062 w
(directory) 1667 6062 w
(has) 2090 6062 w
(the) 2264 6062 w
(following) 2426 6062 w
(effect.) 2882 6062 w
cleartomark
showpage
saveobj restore
%%EndPage: 36 36
%%Page: 37 37
/saveobj save def
mark
37 pagesetup
11 /Times-Roman f
(\255 37 \255) 2289 413 w
10 /Courier f
(; mk) 786 676 w
(8c \255FVw semfs.c) 786 786 w
(8c \255FVw sem.c) 786 896 w
(8l \255o 8.semfs semfs.8 sem.8) 786 1006 w
(;) 786 1116 w
11 /Times-Roman f
(The) 566 1332 w
11 /Courier f
(mkfile) 767 1332 w
11 /Times-Roman f
(contains) 1194 1332 w
11 /Times-Italic f
(rules) 1591 1332 w
11 /Times-Roman f
(,) 1811 1332 w
(that) 1870 1332 w
(describe) 2066 1332 w
(how) 2461 1332 w
(to) 2681 1332 w
(build) 2799 1332 w
(one) 3058 1332 w
(file) 3248 1332 w
(provided) 3426 1332 w
(you) 3848 1332 w
(have) 4045 1332 w
(other) 566 1452 w
(ones.) 819 1452 w
(For) 1076 1452 w
(example,) 1257 1452 w
(this) 1684 1452 w
(was) 1872 1452 w
(one) 2070 1452 w
(rule:) 2256 1452 w
10 /Courier f
(8.semfs: semfs.8 sem.8) 786 1622 w
(8l \255o 8.semfs semfs.8 sem.8) 1266 1732 w
11 /Times-Roman f
(It) 566 1948 w
(says) 670 1948 w
(that) 896 1948 w
(we) 1098 1948 w
(can) 1262 1948 w
(build) 1450 1948 w
11 /Courier f
(8.semfs) 1714 1948 w
11 /Times-Roman f
(if) 2213 1948 w
(we) 2318 1948 w
(have) 2483 1948 w
(both) 2727 1948 w
11 /Courier f
(semfs.8) 2961 1948 w
11 /Times-Roman f
(and) 3461 1948 w
11 /Courier f
(sem.8) 3657 1948 w
11 /Times-Roman f
(.) 3987 1948 w
(The) 4081 1948 w
(way) 566 2068 w
(to) 776 2068 w
(build) 890 2068 w
11 /Courier f
(8.semfs) 1145 2068 w
11 /Times-Roman f
(according) 1635 2068 w
(to) 2094 2068 w
(this) 2208 2068 w
(rule) 2396 2068 w
(is) 2594 2068 w
(to) 2696 2068 w
(execute) 2810 2068 w
(the) 3171 2068 w
(command) 3333 2068 w
10 /Courier f
(8l \255o 8.semfs semfs.8 sem.8) 1266 2238 w
11 /Times-Roman f
(All) 566 2454 w
(the) 736 2454 w
(rules) 899 2454 w
(have) 1141 2454 w
(this) 1376 2454 w
(format.) 1565 2454 w
(There) 1914 2454 w
(is) 2197 2454 w
(a) 2300 2454 w
11 /Times-Italic f
(target) 2377 2454 w
11 /Times-Roman f
(to) 2669 2454 w
(build,) 2784 2454 w
(followed) 3068 2454 w
(by) 3487 2454 w
(a) 3627 2454 w
11 /Courier f
(:) 3705 2454 w
11 /Times-Roman f
(sign) 3801 2454 w
(and) 4015 2454 w
(a) 4203 2454 w
(list) 566 2574 w
(of) 736 2574 w
11 /Times-Italic f
(dependencies) 861 2574 w
11 /Times-Roman f
(\(that) 1483 2574 w
(is,) 1717 2574 w
(things) 1852 2574 w
(that) 2155 2574 w
(our) 2353 2574 w
(target) 2532 2574 w
(depends) 2814 2574 w
(on\).) 3206 2574 w
(The) 3441 2574 w
(target) 3644 2574 w
(and) 3926 2574 w
(the) 4117 2574 w
(list) 566 2694 w
(of) 734 2694 w
(dependencies) 857 2694 w
(must) 1479 2694 w
(be) 1727 2694 w
(in) 1863 2694 w
(the) 1982 2694 w
(same) 2149 2694 w
(line.) 2407 2694 w
(If) 2633 2694 w
(a) 2738 2694 w
(line) 2819 2694 w
(gets) 3017 2694 w
(too) 3227 2694 w
(long,) 3401 2694 w
(the) 3658 2694 w
(backslash) 3825 2694 w
(character,) 566 2814 w
11 /Courier f
(\\) 1029 2814 w
11 /Times-Roman f
(,) 1095 2814 w
(can) 1160 2814 w
(be) 1348 2814 w
(used) 1488 2814 w
(to) 1726 2814 w
(continue) 1849 2814 w
(writing) 2264 2814 w
(on) 2619 2814 w
(the) 2766 2814 w
(next) 2937 2814 w
(line) 3163 2814 w
(as) 3365 2814 w
(if) 3493 2814 w
(it) 3597 2814 w
(was) 3696 2814 w
(a) 3903 2814 w
(single) 3988 2814 w
(one.) 566 2934 w
(A) 809 2934 w
(rule) 917 2934 w
(says) 1116 2934 w
(that) 1334 2934 w
(provided) 1528 2934 w
(that) 1948 2934 w
(we) 2143 2934 w
(have) 2300 2934 w
(the) 2536 2934 w
(files) 2700 2934 w
(listed) 2919 2934 w
(in) 3188 2934 w
(the) 3304 2934 w
(dependencies) 3468 2934 w
(list,) 4087 2934 w
(the) 566 3054 w
(target) 732 3054 w
(can) 1013 3054 w
(be) 1196 3054 w
(built.) 1331 3054 w
(It) 1594 3054 w
(is) 1693 3054 w
(also) 1799 3054 w
(said) 2008 3054 w
(that) 2217 3054 w
(the) 2414 3054 w
(target) 2580 3054 w
(depends) 2861 3054 w
(on) 3252 3054 w
(the) 3394 3054 w
(files) 3560 3054 w
(listed) 3781 3054 w
(after) 4052 3054 w
(the) 566 3174 w
11 /Courier f
(:) 728 3174 w
11 /Times-Roman f
(sign.) 822 3174 w
(Following) 1091 3174 w
(this) 1574 3174 w
(line,) 1763 3174 w
(sometimes) 1985 3174 w
(called) 2485 3174 w
(the) 2775 3174 w
11 /Times-Italic f
(header) 2938 3174 w
11 /Times-Roman f
(of) 3271 3174 w
(the) 3391 3174 w
(rule,) 3554 3174 w
(a) 3781 3174 w
(rule) 3858 3174 w
(con\255) 4057 3174 w
(tains) 566 3294 w
(one) 810 3294 w
(or) 1004 3294 w
(more) 1130 3294 w
(lines) 1390 3294 w
(starting) 1633 3294 w
(with) 1998 3294 w
(a) 2229 3294 w
(tabulator) 2312 3294 w
(character.) 2737 3294 w
(Such) 3198 3294 w
(lines) 3453 3294 w
(are) 3696 3294 w
(executed) 3863 3294 w
(as) 566 3414 w
(shell) 695 3414 w
(commands) 942 3414 w
(to) 1457 3414 w
(build) 1582 3414 w
(the) 1848 3414 w
(target.) 2021 3414 w
(These) 2337 3414 w
(lines) 2637 3414 w
(are) 2884 3414 w
(sometimes) 3055 3414 w
(called) 3565 3414 w
(the) 3865 3414 w
11 /Times-Italic f
(body) 4038 3414 w
11 /Times-Roman f
(for) 566 3534 w
(the) 721 3534 w
(rule.) 883 3534 w
(When) 816 3690 w
(we) 1113 3690 w
(executed) 1276 3690 w
11 /Courier f
(mk) 1700 3690 w
11 /Times-Roman f
(,) 1832 3690 w
(it) 1896 3690 w
(understood) 1994 3690 w
(that) 2518 3690 w
(we) 2719 3690 w
(wanted) 2882 3690 w
(to) 3234 3690 w
(build) 3356 3690 w
(the) 3619 3690 w
(first) 3789 3690 w
(target) 4002 3690 w
(mentioned) 566 3810 w
(in) 1068 3810 w
(the) 1192 3810 w
11 /Courier f
(mkfile) 1364 3810 w
11 /Times-Roman f
(.) 1760 3810 w
(That) 1854 3810 w
(was) 2093 3810 w
11 /Courier f
(8.semfs) 2301 3810 w
11 /Times-Roman f
(.) 2763 3810 w
(So,) 2857 3810 w
11 /Courier f
(mk) 3040 3810 w
11 /Times-Roman f
(checked) 3210 3810 w
(out) 3605 3810 w
(to) 3784 3810 w
(see) 3908 3810 w
(if) 4085 3810 w
(it) 4189 3810 w
(had) 566 3930 w
11 /Courier f
(semfs.8) 773 3930 w
11 /Times-Roman f
(and) 1284 3930 w
11 /Courier f
(sem.8) 1491 3930 w
11 /Times-Roman f
(\(the) 1870 3930 w
(dependencies) 2089 3930 w
(for) 2727 3930 w
11 /Courier f
(8.semfs) 2903 3930 w
11 /Times-Roman f
(\).) 3365 3930 w
(Neither) 3507 3930 w
(file) 3885 3930 w
(was) 4081 3930 w
(there!) 566 4050 w
(What) 848 4050 w
(could) 1113 4050 w
11 /Courier f
(mk) 1385 4050 w
11 /Times-Roman f
(do?) 1545 4050 w
(Simple.) 1759 4050 w
(The) 2128 4050 w
(program) 2326 4050 w
(searched) 2725 4050 w
(the) 3134 4050 w
11 /Courier f
(mkfile) 3296 4050 w
11 /Times-Roman f
(to) 3720 4050 w
(see) 3834 4050 w
(if,) 4001 4050 w
(for) 4124 4050 w
(each) 566 4170 w
(dependency,) 793 4170 w
(any) 1371 4170 w
(other) 1557 4170 w
(rule) 1810 4170 w
(described) 2008 4170 w
(to) 2455 4170 w
(to) 2569 4170 w
(build) 2683 4170 w
(it.) 2939 4170 w
(That) 3058 4170 w
(was) 3288 4170 w
(the) 3487 4170 w
(case.) 3650 4170 w
(There) 3894 4170 w
(is) 4177 4170 w
(a) 566 4290 w
(rule) 642 4290 w
(for) 840 4290 w
(building) 995 4290 w
11 /Courier f
(sem.8) 1391 4290 w
11 /Times-Roman f
(,) 1721 4290 w
(and) 1777 4290 w
(one) 1963 4290 w
(for) 2149 4290 w
(building) 2304 4290 w
11 /Courier f
(semfs.8) 2700 4290 w
11 /Times-Roman f
(.) 3162 4290 w
(So,) 816 4446 w
11 /Courier f
(mk) 1010 4446 w
11 /Times-Roman f
(tried) 1191 4446 w
(to) 1441 4446 w
(build) 1576 4446 w
11 /Courier f
(semfs.8) 1853 4446 w
11 /Times-Roman f
(,) 2315 4446 w
(using) 2393 4446 w
(its) 2682 4446 w
(rule.) 2837 4446 w
(The) 3113 4446 w
(rule) 3333 4446 w
(says) 3553 4446 w
(that) 3792 4446 w
(given) 4007 4446 w
11 /Courier f
(semfs.c) 566 4566 w
11 /Times-Roman f
(and) 1056 4566 w
11 /Courier f
(sem.h) 1242 4566 w
11 /Times-Roman f
(,) 1572 4566 w
11 /Courier f
(semfs.8) 1628 4566 w
11 /Times-Roman f
(can) 2118 4566 w
(be) 2297 4566 w
(built.) 2428 4566 w
10 /Courier f
(semfs.8: semfs.c sem.h) 786 4736 w
(8c \255FVw semfs.c) 1266 4846 w
11 /Times-Roman f
(Both) 566 5062 w
11 /Courier f
(semfs.c) 827 5062 w
11 /Times-Roman f
(and) 1335 5062 w
11 /Courier f
(sem.h) 1539 5062 w
11 /Times-Roman f
(are) 1915 5062 w
(there,) 2093 5062 w
(and) 2385 5062 w
11 /Courier f
(mk) 2589 5062 w
11 /Times-Roman f
(can) 2767 5062 w
(proceed) 2964 5062 w
(to) 3355 5062 w
(build) 3487 5062 w
11 /Courier f
(semfs.8) 3761 5062 w
11 /Times-Roman f
(.) 4223 5062 w
(How?) 566 5182 w
(By) 860 5182 w
(executing) 1022 5182 w
(the) 1481 5182 w
(command) 1648 5182 w
(in) 2114 5182 w
(the) 2233 5182 w
(body) 2400 5182 w
(of) 2653 5182 w
(the) 2777 5182 w
(rule.) 2944 5182 w
(This) 3203 5182 w
(command) 3432 5182 w
(runs) 3898 5182 w
11 /Courier f
(8c) 4119 5182 w
11 /Times-Roman f
(and) 566 5302 w
(compiles) 752 5302 w
11 /Courier f
(semfs.c) 1177 5302 w
11 /Times-Roman f
(.) 1639 5302 w
(Note) 816 5458 w
(one) 1060 5458 w
(thing.) 1249 5458 w
(The) 1535 5458 w
(body) 1736 5458 w
(of) 1987 5458 w
(the) 2110 5458 w
(rule) 2276 5458 w
(does) 2478 5458 w
11 /Times-Italic f
(not) 2711 5458 w
11 /Times-Roman f
(use) 2884 5458 w
(the) 3062 5458 w
(file) 3228 5458 w
11 /Courier f
(sem.h) 3406 5458 w
11 /Times-Roman f
(.) 3736 5458 w
(We) 3824 5458 w
(know) 4007 5458 w
(that) 566 5578 w
(the) 777 5578 w
(object) 957 5578 w
(file) 1271 5578 w
11 /Courier f
(semfs.8) 1463 5578 w
11 /Times-Roman f
(comes) 1971 5578 w
(from) 2297 5578 w
(code) 2556 5578 w
(both) 2808 5578 w
(in) 3050 5578 w
11 /Courier f
(semfs.c) 3182 5578 w
11 /Times-Roman f
(and) 3690 5578 w
11 /Courier f
(sem.h) 3893 5578 w
11 /Times-Roman f
(.) 4223 5578 w
(But) 566 5698 w
11 /Courier f
(mk) 757 5698 w
11 /Times-Roman f
(does) 920 5698 w
(not!) 1152 5698 w
(You) 1360 5698 w
(see) 1581 5698 w
(the) 1752 5698 w
(same) 1918 5698 w
(invariant) 2175 5698 w
(all) 2597 5698 w
(the) 2739 5698 w
(times.) 2905 5698 w
(Programs) 3204 5698 w
(usually) 3657 5698 w
(know) 4007 5698 w
(nothing) 566 5818 w
(about) 944 5818 w
(things.) 1228 5818 w
(They) 1566 5818 w
(just) 1831 5818 w
(do) 2031 5818 w
(what) 2181 5818 w
(they) 2434 5818 w
(are) 2663 5818 w
(supposed) 2835 5818 w
(to) 3284 5818 w
(do,) 3410 5818 w
(but) 3588 5818 w
(there) 3769 5818 w
(is) 4027 5818 w
(no) 4141 5818 w
(magic) 566 5938 w
(way) 876 5938 w
(of) 1100 5938 w
(telling) 1233 5938 w
11 /Courier f
(mk) 1557 5938 w
11 /Times-Roman f
(which) 1731 5938 w
(files) 2041 5938 w
(really) 2273 5938 w
(depend) 2565 5938 w
(on) 2924 5938 w
(others,) 3077 5938 w
(and) 3416 5938 w
(why) 3617 5938 w
(the) 3849 5938 w
(com\255) 4026 5938 w
(mands) 566 6058 w
(in) 881 6058 w
(the) 995 6058 w
(body) 1157 6058 w
(can) 1405 6058 w
(be) 1584 6058 w
(used) 1715 6058 w
(to) 1944 6058 w
(build) 2058 6058 w
(the) 2313 6058 w
(target.) 2475 6058 w
(In) 816 6214 w
(the) 949 6214 w
(same) 1125 6214 w
(way,) 1392 6214 w
11 /Courier f
(mk) 1644 6214 w
11 /Times-Roman f
(uses) 1818 6214 w
(the) 2049 6214 w
(rule) 2225 6214 w
(for) 2437 6214 w
(the) 2606 6214 w
(target) 2782 6214 w
11 /Courier f
(sem.8) 3074 6214 w
11 /Times-Roman f
(,) 3404 6214 w
(to) 3475 6214 w
(build) 3604 6214 w
(this) 3874 6214 w
(file.) 4077 6214 w
(This) 566 6334 w
(is) 790 6334 w
(the) 892 6334 w
(last) 1054 6334 w
(dependency) 1235 6334 w
(needed) 1785 6334 w
(for) 2122 6334 w
(building) 2277 6334 w
11 /Courier f
(8.semfs) 2673 6334 w
11 /Times-Roman f
(.) 3135 6334 w
cleartomark
showpage
saveobj restore
%%EndPage: 37 37
%%Page: 38 38
/saveobj save def
mark
38 pagesetup
11 /Times-Roman f
(\255 38 \255) 2289 413 w
10 /Courier f
(sem.8: sem.c sem.h) 786 676 w
(8c \255FVw sem.c) 1266 786 w
11 /Times-Roman f
(After) 566 966 w
(executing) 829 966 w
(the) 1289 966 w
(body,) 1457 966 w
(and) 1739 966 w
(compiling) 1931 966 w
11 /Courier f
(sem.c) 2412 966 w
11 /Times-Roman f
(,) 2742 966 w
(both) 2804 966 w
(dependencies) 3034 966 w
(exist,) 3657 966 w
(and) 3927 966 w
11 /Courier f
(mk) 4119 966 w
11 /Times-Roman f
(can) 566 1086 w
(proceed) 766 1086 w
(to) 1160 1086 w
(build,) 1295 1086 w
(finally,) 1599 1086 w
11 /Courier f
(8.semfs) 1963 1086 w
11 /Times-Roman f
(.) 2425 1086 w
(How?) 2530 1086 w
(You) 2839 1086 w
(already) 3076 1086 w
(know.) 3445 1086 w
(It) 3765 1086 w
(runs) 3880 1086 w
(the) 4117 1086 w
(command) 566 1206 w
(in) 1029 1206 w
(the) 1145 1206 w
(body) 1309 1206 w
(of) 1559 1206 w
(the) 1681 1206 w
(rule) 1846 1206 w
(for) 2047 1206 w
11 /Courier f
(8.semfs) 2205 1206 w
11 /Times-Roman f
(.) 2667 1206 w
(This) 2754 1206 w
(command) 2981 1206 w
(uses) 3445 1206 w
11 /Courier f
(8l) 3665 1206 w
11 /Times-Roman f
(to) 3828 1206 w
(build) 3945 1206 w
(a) 4203 1206 w
(binary) 566 1326 w
(program) 874 1326 w
(from) 1273 1326 w
(the) 1514 1326 w
(object) 1676 1326 w
(files.) 1972 1326 w
11 /Courier f
(Mk) 816 1482 w
11 /Times-Roman f
(chains) 988 1482 w
(rules) 1308 1482 w
(in) 1561 1482 w
(this) 1687 1482 w
(way,) 1887 1482 w
(recursively,) 2137 1482 w
(trying) 2691 1482 w
(to) 2994 1482 w
(build) 3121 1482 w
(the) 3389 1482 w
(target.) 3564 1482 w
(A) 3882 1482 w
(target) 4002 1482 w
(may) 566 1602 w
(be) 798 1602 w
(given) 944 1602 w
(as) 1231 1602 w
(an) 1365 1602 w
(argument.) 1511 1602 w
(If) 1996 1602 w
(none) 2111 1602 w
(is) 2367 1602 w
(given,) 2484 1602 w
11 /Courier f
(mk) 2799 1602 w
11 /Times-Roman f
(tries) 2974 1602 w
(to) 3206 1602 w
(build) 3335 1602 w
(the) 3605 1602 w
(first) 3782 1602 w
(target) 4002 1602 w
(mentioned.) 566 1722 w
(Suppose) 816 1878 w
(we) 1217 1878 w
(now) 1372 1878 w
(run) 1589 1878 w
11 /Courier f
(mk) 1763 1878 w
11 /Times-Roman f
(again.) 1923 1878 w
(This) 2216 1878 w
(is) 2440 1878 w
(what) 2542 1878 w
(happens.) 2783 1878 w
10 /Courier f
(; mk) 786 2048 w
(mk: '8.semfs' is up to date) 786 2158 w
(;) 786 2268 w
11 /Times-Roman f
(No) 566 2484 w
(rule) 730 2484 w
(was) 930 2484 w
(executed.) 1130 2484 w
(The) 1576 2484 w
(program) 1776 2484 w
11 /Courier f
(mk) 2177 2484 w
11 /Times-Roman f
(assumes) 2339 2484 w
(that) 2735 2484 w
(a) 2930 2484 w
(target) 3008 2484 w
(built) 3287 2484 w
(from) 3520 2484 w
(some) 3763 2484 w
(other) 4026 2484 w
(files,) 566 2604 w
(if) 825 2604 w
(newer) 934 2604 w
(than) 1242 2604 w
(the) 1473 2604 w
(other) 1649 2604 w
(files,) 1915 2604 w
(is) 2173 2604 w
(already) 2288 2604 w
(up) 2650 2604 w
(to) 2801 2604 w
(date) 2928 2604 w
(and) 3151 2604 w
(does) 3350 2604 w
(not) 3592 2604 w
(need) 3774 2604 w
(to) 4021 2604 w
(be) 4148 2604 w
(built.) 566 2724 w
(Because) 881 2724 w
(we) 1301 2724 w
(did) 1484 2724 w
(not) 1681 2724 w
(modify) 1878 2724 w
(any) 2252 2724 w
(file,) 2466 2724 w
(the) 2696 2724 w
(file) 2886 2724 w
11 /Courier f
(8.semfs) 3089 2724 w
11 /Times-Roman f
(is) 3608 2724 w
(newer) 3739 2724 w
(than) 4062 2724 w
11 /Courier f
(semfs.8) 566 2844 w
11 /Times-Roman f
(and) 1059 2844 w
11 /Courier f
(sem.8) 1248 2844 w
11 /Times-Roman f
(.) 1578 2844 w
(This) 1665 2844 w
(means) 1892 2844 w
(that) 2203 2844 w
11 /Courier f
(8.semfs) 2399 2844 w
11 /Times-Roman f
(is) 2892 2844 w
(up) 2997 2844 w
(to) 3137 2844 w
(date) 3253 2844 w
(with) 3465 2844 w
(respect) 3691 2844 w
(to) 4030 2844 w
(its) 4146 2844 w
(dependencies.) 566 2964 w
(Before) 1217 2964 w
(checking) 1548 2964 w
(this) 1977 2964 w
(out,) 2171 2964 w
11 /Courier f
(mk) 2374 2964 w
11 /Times-Roman f
(checks) 2540 2964 w
(if) 2871 2964 w
(the) 2972 2964 w
(dependencies) 3140 2964 w
(themselves) 3763 2964 w
(are) 566 3084 w
(up) 740 3084 w
(to) 892 3084 w
(date.) 1020 3084 w
(The) 1300 3084 w
(file) 1512 3084 w
11 /Courier f
(semfs.8) 1700 3084 w
11 /Times-Roman f
(is) 2204 3084 w
(newer) 2320 3084 w
(than) 2628 3084 w
(its) 2858 3084 w
(dependencies,) 3004 3084 w
(which) 3662 3084 w
(means) 3971 3084 w
(that) 566 3204 w
(it) 761 3204 w
(is) 853 3204 w
(up) 957 3204 w
(to) 1097 3204 w
(date) 1213 3204 w
(as) 1425 3204 w
(well.) 1546 3204 w
(The) 1821 3204 w
(same) 2021 3204 w
(happens) 2276 3204 w
(to) 2665 3204 w
11 /Courier f
(sem.8) 2781 3204 w
11 /Times-Roman f
(.) 3111 3204 w
(In) 3197 3204 w
(few) 3318 3204 w
(words,) 3511 3204 w
(the) 3837 3204 w
(target) 4002 3204 w
(given) 566 3324 w
(to) 838 3324 w
11 /Courier f
(mk) 952 3324 w
11 /Times-Roman f
(is) 1112 3324 w
(up) 1214 3324 w
(to) 1352 3324 w
(date) 1466 3324 w
(and) 1676 3324 w
(there) 1862 3324 w
(is) 2108 3324 w
(nothing) 2210 3324 w
(to) 2575 3324 w
(make.) 2689 3324 w
(Suppose) 816 3480 w
(now) 1217 3480 w
(that) 1434 3480 w
(we) 1627 3480 w
(edit) 1782 3480 w
11 /Courier f
(sem.c) 1975 3480 w
11 /Times-Roman f
(,) 2305 3480 w
(which) 2361 3480 w
(we) 2657 3480 w
(can) 2812 3480 w
(simulate) 2991 3480 w
(by) 3392 3480 w
(touching) 3530 3480 w
(the) 3943 3480 w
(file) 4105 3480 w
(\(updating) 566 3600 w
(its) 1015 3600 w
(modification) 1148 3600 w
(time\).) 1738 3600 w
(Things) 2054 3600 w
(change.) 2388 3600 w
10 /Courier f
(; touch sem.c) 786 3770 w
(; mk) 786 3880 w
(8c \255FVw sem.c) 786 3990 w
(8l \255o 8.semfs semfs.8 sem.8) 786 4100 w
(;) 786 4210 w
11 /Times-Roman f
(The) 566 4426 w
(file) 765 4426 w
11 /Courier f
(sem.8) 940 4426 w
11 /Times-Roman f
(,) 1270 4426 w
(needed) 1327 4426 w
(because) 1665 4426 w
11 /Courier f
(8.semfs) 2039 4426 w
11 /Times-Roman f
(depends) 2530 4426 w
(on) 2918 4426 w
(it,) 3057 4426 w
(is) 3177 4426 w
(not) 3281 4426 w
(up) 3452 4426 w
(to) 3592 4426 w
(date.) 3708 4426 w
(One) 3948 4426 w
(of) 4160 4426 w
(the) 566 4546 w
(files) 737 4546 w
(it) 963 4546 w
(depends) 1061 4546 w
(on,) 1456 4546 w
11 /Courier f
(sem.c) 1630 4546 w
11 /Times-Roman f
(,) 1960 4546 w
(is) 2024 4546 w
(newer) 2134 4546 w
(than) 2436 4546 w
11 /Courier f
(sem.8) 2661 4546 w
11 /Times-Roman f
(.) 2991 4546 w
(This) 3083 4546 w
(means) 3315 4546 w
(that) 3631 4546 w
(the) 3832 4546 w
(target) 4002 4546 w
11 /Courier f
(sem.8) 566 4666 w
11 /Times-Roman f
(is) 930 4666 w
(old,) 1038 4666 w
(with) 1241 4666 w
(respect) 1472 4666 w
(to) 1816 4666 w
11 /Courier f
(sem.c) 1937 4666 w
11 /Times-Roman f
(,) 2267 4666 w
(and) 2330 4666 w
(must) 2523 4666 w
(be) 2773 4666 w
(rebuilt) 2911 4666 w
(to) 3233 4666 w
(be) 3354 4666 w
(up) 3492 4666 w
(to) 3637 4666 w
(date.) 3758 4666 w
(Thus,) 4003 4666 w
11 /Courier f
(mk) 566 4786 w
11 /Times-Roman f
(runs) 726 4786 w
(the) 943 4786 w
(body) 1105 4786 w
(of) 1353 4786 w
(its) 1472 4786 w
(rule) 1605 4786 w
(and) 1803 4786 w
(compiles) 1989 4786 w
(the) 2414 4786 w
(file) 2576 4786 w
(again.) 2750 4786 w
(The) 816 4942 w
(other) 1014 4942 w
(dependency) 1267 4942 w
(for) 1817 4942 w
(the) 1973 4942 w
(main) 2136 4942 w
(target,) 2385 4942 w
11 /Courier f
(semfs.8) 2691 4942 w
11 /Times-Roman f
(,) 3153 4942 w
(is) 3210 4942 w
(still) 3313 4942 w
(up) 3509 4942 w
(to) 3648 4942 w
(date.) 3763 4942 w
(How\255) 4002 4942 w
(ever,) 566 5062 w
(because) 813 5062 w
11 /Courier f
(sem.8) 1190 5062 w
11 /Times-Roman f
(is) 1552 5062 w
(now) 1658 5062 w
(newer) 1879 5062 w
(than) 2177 5062 w
11 /Courier f
(8.semfs) 2398 5062 w
11 /Times-Roman f
(,) 2860 5062 w
(this) 2920 5062 w
(file) 3111 5062 w
(is) 3288 5062 w
(out) 3393 5062 w
(of) 3565 5062 w
(date,) 3687 5062 w
(and) 3928 5062 w
(the) 4117 5062 w
(body) 566 5182 w
(for) 835 5182 w
(its) 1011 5182 w
(rule) 1166 5182 w
(is) 1386 5182 w
(executed.) 1510 5182 w
(In) 2004 5182 w
(few) 2145 5182 w
(words,) 2358 5182 w
11 /Courier f
(mk) 2704 5182 w
11 /Times-Roman f
(executes) 2886 5182 w
(only) 3312 5182 w
(what) 3558 5182 w
(is) 3821 5182 w
(strictly) 3945 5182 w
(needed) 566 5302 w
(to) 907 5302 w
(obtain) 1025 5302 w
(an) 1331 5302 w
(up) 1465 5302 w
(to) 1606 5302 w
(date) 1723 5302 w
(target.) 1936 5302 w
(If) 2244 5302 w
(nothing) 2347 5302 w
(has) 2715 5302 w
(to) 2892 5302 w
(be) 3009 5302 w
(done,) 3143 5302 w
(it) 3415 5302 w
(does) 3508 5302 w
(nothing.) 3740 5302 w
(Of) 4136 5302 w
(course) 566 5422 w
11 /Courier f
(mk) 885 5422 w
11 /Times-Roman f
(only) 1051 5422 w
(knows) 1281 5422 w
(what) 1602 5422 w
(the) 1849 5422 w
11 /Courier f
(mkfile) 2017 5422 w
11 /Times-Roman f
(says,) 2447 5422 w
(you) 2698 5422 w
(should) 2897 5422 w
(not) 3225 5422 w
(expect) 3400 5422 w
11 /Courier f
(mk) 3719 5422 w
11 /Times-Roman f
(to) 3886 5422 w
(know) 4007 5422 w
(C) 566 5542 w
(or) 693 5542 w
(any) 837 5542 w
(other) 1048 5542 w
(programming) 1326 5542 w
(language.) 1977 5542 w
(It) 2453 5542 w
(does) 2573 5542 w
(not) 2827 5542 w
(know) 3021 5542 w
(anything) 3317 5542 w
(about) 3754 5542 w
(your) 4050 5542 w
(source) 566 5662 w
(code.) 879 5662 w
(What) 816 5818 w
(if) 1084 5818 w
(we) 1182 5818 w
(want) 1340 5818 w
(to) 1584 5818 w
(compile) 1702 5818 w
11 /Courier f
(semfs) 2088 5818 w
11 /Times-Roman f
(for) 2450 5818 w
(an) 2609 5818 w
(ARM,) 2744 5818 w
(and) 3055 5818 w
(not) 3245 5818 w
(for) 3418 5818 w
(a) 3577 5818 w
(PC.) 3657 5818 w
(We) 3853 5818 w
(must) 4036 5818 w
(use) 566 5938 w
11 /Courier f
(5c) 743 5938 w
11 /Times-Roman f
(and) 906 5938 w
11 /Courier f
(5l) 1095 5938 w
11 /Times-Roman f
(instead) 1258 5938 w
(of) 1600 5938 w
11 /Courier f
(8c) 1722 5938 w
11 /Times-Roman f
(and) 1885 5938 w
11 /Courier f
(8l) 2074 5938 w
11 /Times-Roman f
(.) 2206 5938 w
(Adjusting) 2293 5938 w
(the) 2759 5938 w
11 /Courier f
(mkfile) 2924 5938 w
11 /Times-Roman f
(for) 3350 5938 w
(each) 3507 5938 w
(architecture) 3736 5938 w
(we) 566 6058 w
(want) 721 6058 w
(to) 962 6058 w
(compile) 1076 6058 w
(for) 1458 6058 w
(is) 1613 6058 w
(a) 1715 6058 w
(burden) 1791 6058 w
(at) 2123 6058 w
(least.) 2230 6058 w
(It) 2487 6058 w
(is) 2582 6058 w
(better) 2684 6058 w
(to) 2961 6058 w
(use) 3075 6058 w
11 /Times-Italic f
(variables) 3249 6058 w
11 /Times-Roman f
(.) 3658 6058 w
(An) 816 6214 w
11 /Courier f
(mkfile) 986 6214 w
11 /Times-Roman f
(may) 1418 6214 w
(declare) 1643 6214 w
(variables,) 1993 6214 w
(using) 2452 6214 w
(the) 2727 6214 w
(same) 2897 6214 w
(syntax) 3159 6214 w
(used) 3483 6214 w
(in) 3721 6214 w
(the) 3844 6214 w
(shell.) 4015 6214 w
(Environment) 566 6334 w
(variables) 1187 6334 w
(are) 1629 6334 w
(created) 1808 6334 w
(for) 2169 6334 w
(each) 2342 6334 w
(variable) 2587 6334 w
(you) 2985 6334 w
(define) 3196 6334 w
(in) 3515 6334 w
(the) 3647 6334 w
11 /Courier f
(mkfile) 3827 6334 w
11 /Times-Roman f
(.) 4223 6334 w
cleartomark
showpage
saveobj restore
%%EndPage: 38 38
%%Page: 39 39
/saveobj save def
mark
39 pagesetup
11 /Times-Roman f
(\255 39 \255) 2289 413 w
(Also,) 566 686 w
(you) 841 686 w
(may) 1045 686 w
(use) 1274 686 w
(environment) 1460 686 w
(variables) 2055 686 w
(already) 2490 686 w
(defined.) 2851 686 w
(That) 3247 686 w
(is) 3488 686 w
(to) 3602 686 w
(say) 3728 686 w
(that) 3914 686 w
11 /Courier f
(mk) 4119 686 w
11 /Times-Roman f
(uses) 566 806 w
(environment) 789 806 w
(variables) 1378 806 w
(in) 1807 806 w
(very) 1927 806 w
(much) 2155 806 w
(the) 2433 806 w
(same) 2601 806 w
(way) 2860 806 w
(the) 3076 806 w
(shell) 3244 806 w
(uses) 3486 806 w
(it.) 3708 806 w
(The) 3859 806 w
(next) 4062 806 w
11 /Courier f
(mkfile) 566 926 w
11 /Times-Roman f
(improves) 990 926 w
(our) 1427 926 w
(previous) 1601 926 w
(one.) 2007 926 w
9 /S f
(\347) 566 1096 w
9 /Times-Bold f
(mkfile) 581 1096 w
9 /S f
(\347) 841 1096 w
(`) 566 1096 w
(``````) 571 1096 w
(_) 566 1096 w
(______) 571 1096 w
10 /Courier f
(CC=8c) 786 1240 w
(LD=8l) 786 1384 w
(O=8) 786 1528 w
($O.semfs: semfs.$O sem.$O) 786 1816 w
($LD \255o $O.semfs semfs.$O sem.$O) 1266 1960 w
(semfs.$O: semfs.c sem.h) 786 2248 w
($CC \255FVw semfs.c) 1266 2392 w
(sem.$O: sem.c sem.h) 786 2680 w
($CC \255FVw sem.c) 1266 2824 w
11 /Times-Roman f
(The) 566 3040 w
11 /Courier f
(mkfile) 782 3040 w
11 /Times-Roman f
(defines) 1224 3040 w
(a) 1586 3040 w
11 /Courier f
(CC) 1680 3040 w
11 /Times-Roman f
(variable) 1858 3040 w
(to) 2256 3040 w
(name) 2388 3040 w
(the) 2671 3040 w
(C) 2851 3040 w
(compiler,) 2972 3040 w
(an) 3437 3040 w
11 /Courier f
(LD) 3587 3040 w
11 /Times-Roman f
(variable) 3766 3040 w
(to) 4165 3040 w
(name) 566 3160 w
(the) 837 3160 w
(loader,) 1005 3160 w
(and) 1340 3160 w
(an) 1531 3160 w
11 /Courier f
(O) 1667 3160 w
11 /Times-Roman f
(variable) 1766 3160 w
(to) 2151 3160 w
(name) 2270 3160 w
(the) 2540 3160 w
(character) 2707 3160 w
(used) 3138 3160 w
(to) 3372 3160 w
(name) 3491 3160 w
(object) 3761 3160 w
(files) 4062 3160 w
(for) 566 3280 w
(the) 730 3280 w
(architecture.) 901 3280 w
(The) 1509 3280 w
(behavior) 1716 3280 w
(of) 2137 3280 w
11 /Courier f
(mk) 2266 3280 w
11 /Times-Roman f
(when) 2436 3280 w
(using) 2711 3280 w
(this) 2988 3280 w
11 /Courier f
(mkfile) 3186 3280 w
11 /Times-Roman f
(is) 3620 3280 w
(exactly) 3732 3280 w
(like) 4086 3280 w
(before.) 566 3400 w
(However,) 900 3400 w
(we) 1356 3400 w
(can) 1511 3400 w
(now) 1690 3400 w
(change) 1907 3400 w
(the) 2244 3400 w
(definitions) 2406 3400 w
(for) 2905 3400 w
11 /Courier f
(CC) 3060 3400 w
11 /Times-Roman f
(,) 3192 3400 w
11 /Courier f
(LD) 3248 3400 w
11 /Times-Roman f
(,) 3380 3400 w
(and) 3436 3400 w
11 /Courier f
(O) 3622 3400 w
11 /Times-Roman f
(as) 3716 3400 w
(follows) 3835 3400 w
10 /Courier f
(CC=5c) 786 3570 w
(LD=5l) 786 3680 w
(O=5) 786 3790 w
11 /Times-Roman f
(Running) 566 4006 w
11 /Courier f
(mk) 974 4006 w
11 /Times-Roman f
(again) 1134 4006 w
(will) 1399 4006 w
(compile) 1599 4006 w
(for) 1981 4006 w
(an) 2136 4006 w
(ARM.) 2267 4006 w
10 /Courier f
(; mk) 786 4176 w
(5c \255FVw semfs.c) 786 4286 w
(5c \255FVw sem.c) 786 4396 w
(5l \255o 5.semfs semfs.5 sem.5) 786 4506 w
(;) 786 4616 w
11 /Times-Roman f
(As) 566 4832 w
(another) 719 4832 w
(example,) 1078 4832 w
(we) 1508 4832 w
(can) 1666 4832 w
(prepare) 1848 4832 w
(for) 2205 4832 w
(adding) 2363 4832 w
(more) 2693 4832 w
(source) 2950 4832 w
(files) 3267 4832 w
(in) 3488 4832 w
(the) 3606 4832 w
(future,) 3772 4832 w
(and) 4093 4832 w
(declare) 566 4952 w
(a) 919 4952 w
(variable) 1006 4952 w
(to) 1397 4952 w
(list) 1522 4952 w
(the) 1697 4952 w
(object) 1870 4952 w
(files) 2177 4952 w
(used) 2405 4952 w
(to) 2645 4952 w
(build) 2770 4952 w
(our) 3036 4952 w
(program.) 3221 4952 w
(The) 3658 4952 w
(resulting) 3866 4952 w
11 /Courier f
(mkfile) 566 5072 w
11 /Times-Roman f
(is) 990 5072 w
(equivalent) 1092 5072 w
(to) 1577 5072 w
(our) 1691 5072 w
(previous) 1865 5072 w
(one,) 2271 5072 w
(like) 2485 5072 w
(in) 2678 5072 w
(all) 2792 5072 w
(the) 2930 5072 w
(examples) 3092 5072 w
(that) 3534 5072 w
(follow.) 3727 5072 w
cleartomark
showpage
saveobj restore
%%EndPage: 39 39
%%Page: 40 40
/saveobj save def
mark
40 pagesetup
11 /Times-Roman f
(\255 40 \255) 2289 413 w
9 /S f
(\347) 566 676 w
9 /Times-Bold f
(mkfile) 581 676 w
9 /S f
(\347) 841 676 w
(`) 566 676 w
(``````) 571 676 w
(_) 566 676 w
(______) 571 676 w
10 /Courier f
(CC=8c) 786 820 w
(LD=8l) 786 964 w
(O=8) 786 1108 w
(OFILES=semfs.$O sem.$O) 786 1396 w
($O.semfs: $OFILES) 786 1684 w
($LD \255o $O.semfs $OFILES) 1266 1828 w
10 /Times-Italic f
(...other rules...) 786 1972 w
11 /Times-Roman f
(There) 566 2188 w
(are) 857 2188 w
(several) 1026 2188 w
(variables) 1372 2188 w
(defined) 1804 2188 w
(by) 2169 2188 w
11 /Courier f
(mk) 2316 2188 w
11 /Times-Roman f
(,) 2448 2188 w
(to) 2513 2188 w
(help) 2636 2188 w
(us) 2862 2188 w
(to) 2997 2188 w
(write) 3120 2188 w
(rules.) 3382 2188 w
(For) 3661 2188 w
(example,) 3852 2188 w
11 /Courier f
($target) 566 2308 w
11 /Times-Roman f
(is) 1067 2308 w
(the) 1180 2308 w
(target) 1353 2308 w
(being) 1641 2308 w
(built,) 1924 2308 w
(for) 2194 2308 w
(each) 2360 2308 w
(rule.) 2598 2308 w
(Also,) 2835 2308 w
11 /Courier f
($prereq) 3110 2308 w
11 /Times-Roman f
(are) 3611 2308 w
(the) 3782 2308 w
(depen\255) 3954 2308 w
(dencies) 566 2428 w
(\(prerequisites\)) 922 2428 w
(for) 1582 2428 w
(the) 1737 2428 w
(rule.) 1899 2428 w
(So,) 2125 2428 w
(we) 2298 2428 w
(could) 2453 2428 w
(do) 2725 2428 w
(this.) 2863 2428 w
9 /S f
(\347) 566 2598 w
9 /Times-Bold f
(mkfile) 581 2598 w
9 /S f
(\347) 841 2598 w
(`) 566 2598 w
(``````) 571 2598 w
(_) 566 2598 w
(______) 571 2598 w
10 /Courier f
(CC=8c) 786 2742 w
(LD=8l) 786 2886 w
(O=8) 786 3030 w
(OFILES=semfs.$O sem.$O) 786 3318 w
($O.semfs: $OFILES) 786 3606 w
($LD \255o $target $prereq) 1266 3750 w
10 /Times-Italic f
(...other rules...) 786 3894 w
11 /Times-Roman f
(Using) 566 4110 w
(these) 869 4110 w
(variables,) 1134 4110 w
(all) 1597 4110 w
(the) 1747 4110 w
(rules) 1922 4110 w
(we) 2176 4110 w
(are) 2344 4110 w
(using) 2517 4110 w
(for) 2797 4110 w
(compiling) 2965 4110 w
(a) 3453 4110 w
(source) 3542 4110 w
(file) 3868 4110 w
(look) 4055 4110 w
(very) 566 4230 w
(similar.) 798 4230 w
(Indeed,) 1170 4230 w
(we) 1533 4230 w
(can) 1698 4230 w
(write) 1887 4230 w
(just) 2150 4230 w
(a) 2348 4230 w
(single) 2434 4230 w
(rule) 2735 4230 w
(to) 2942 4230 w
(compile) 3065 4230 w
(any) 3456 4230 w
(source) 3651 4230 w
(file.) 3973 4230 w
(It) 4184 4230 w
(would) 566 4350 w
(look) 869 4350 w
(as) 1093 4350 w
(follows) 1212 4350 w
10 /Courier f
(%.$O: %.c sem.h) 786 4520 w
($CC \255FVw $stem.c) 1266 4630 w
11 /Times-Roman f
(This) 566 4846 w
(rule) 812 4846 w
(is) 1032 4846 w
(called) 1156 4846 w
(a) 1467 4846 w
11 /Times-Italic f
(meta\255rule) 1566 4846 w
11 /Times-Roman f
(.) 1992 4846 w
(It) 2099 4846 w
(defines) 2217 4846 w
(many) 2584 4846 w
(rules,) 2879 4846 w
(one) 3171 4846 w
(for) 3380 4846 w
(each) 3558 4846 w
(thing) 3808 4846 w
(that) 4086 4846 w
(matches) 566 4966 w
(the) 992 4966 w
11 /Courier f
(%) 1193 4966 w
11 /Times-Roman f
(character.) 1326 4966 w
(In) 1819 4966 w
(our) 1977 4966 w
(case,) 2190 4966 w
(it) 2472 4966 w
(would) 2601 4966 w
(be) 2942 4966 w
(like) 3111 4966 w
(defining) 3342 4966 w
(a) 3774 4966 w
(rule) 3888 4966 w
(for) 4124 4966 w
11 /Courier f
(semfs.$O) 566 5086 w
11 /Times-Roman f
(and) 1133 5086 w
(another) 1330 5086 w
(for) 1697 5086 w
11 /Courier f
(sem.$O) 1863 5086 w
11 /Times-Roman f
(.) 2259 5086 w
(The) 2354 5086 w
(rule) 2563 5086 w
(says) 2772 5086 w
(that) 3001 5086 w
11 /Times-Italic f
(anything) 3206 5086 w
11 /Times-Roman f
(\(the) 3631 5086 w
11 /Courier f
(%) 3841 5086 w
11 /Times-Roman f
(\)) 3907 5086 w
(termi\255) 3983 5086 w
(nated) 566 5206 w
(in) 844 5206 w
11 /Courier f
($O) 971 5206 w
11 /Times-Roman f
(can) 1144 5206 w
(be) 1336 5206 w
(built) 1480 5206 w
(from) 1724 5206 w
(the) 1978 5206 w
(corresponding) 2153 5206 w
(file,) 2821 5206 w
(but) 3036 5206 w
(terminated) 3218 5206 w
(in) 3727 5206 w
11 /Courier f
(.c) 3853 5206 w
11 /Times-Roman f
(.) 3985 5206 w
(The) 4081 5206 w
(command) 566 5326 w
(in) 1030 5326 w
(the) 1147 5326 w
(body) 1312 5326 w
(of) 1563 5326 w
(the) 1685 5326 w
(rule) 1850 5326 w
(uses) 2051 5326 w
(the) 2271 5326 w
(variable) 2437 5326 w
11 /Courier f
($stem) 2821 5326 w
11 /Times-Roman f
(,) 3151 5326 w
(which) 3211 5326 w
(is) 3511 5326 w
(defined) 3617 5326 w
(by) 3977 5326 w
11 /Courier f
(mk) 4119 5326 w
11 /Times-Roman f
(to) 566 5446 w
(contain) 680 5446 w
(the) 1031 5446 w
(string) 1193 5446 w
(matching) 1472 5446 w
(the) 1909 5446 w
11 /Courier f
(%) 2071 5446 w
11 /Times-Roman f
(in) 2165 5446 w
(each) 2279 5446 w
(case.) 2506 5446 w
(All) 816 5602 w
(this) 986 5602 w
(lets) 1175 5602 w
(you) 1357 5602 w
(write) 1551 5602 w
(very) 1805 5602 w
(compact) 2028 5602 w
11 /Courier f
(mkfiles) 2428 5602 w
11 /Times-Roman f
(,) 2890 5602 w
(for) 2947 5602 w
(compiling) 3103 5602 w
(your) 3579 5602 w
(programs.) 3809 5602 w
(But) 566 5722 w
(there) 768 5722 w
(is) 1028 5722 w
(even) 1144 5722 w
(more) 1392 5722 w
(help.) 1659 5722 w
(We) 1918 5722 w
(can) 2111 5722 w
(include) 2304 5722 w
(files) 2668 5722 w
(in) 2898 5722 w
(the) 3025 5722 w
11 /Courier f
(mkfile) 3200 5722 w
11 /Times-Roman f
(,) 3596 5722 w
(by) 3665 5722 w
(using) 3816 5722 w
(a) 4096 5722 w
11 /Courier f
(<) 4185 5722 w
11 /Times-Roman f
(character.) 566 5842 w
(And) 1029 5842 w
(we) 1255 5842 w
(can) 1419 5842 w
(use) 1607 5842 w
(variables) 1790 5842 w
(to) 2222 5842 w
(determine) 2345 5842 w
(which) 2820 5842 w
(files) 3126 5842 w
(to) 3353 5842 w
(include!) 3477 5842 w
(Look) 3902 5842 w
(at) 4172 5842 w
(the) 566 5962 w
(following) 728 5962 w
(file.) 1184 5962 w
cleartomark
showpage
saveobj restore
%%EndPage: 40 40
%%Page: 41 41
/saveobj save def
mark
41 pagesetup
11 /Times-Roman f
(\255 41 \255) 2289 413 w
9 /S f
(\347) 566 676 w
9 /Times-Bold f
(mkfile) 581 676 w
9 /S f
(\347) 841 676 w
(`) 566 676 w
(``````) 571 676 w
(_) 566 676 w
(______) 571 676 w
10 /Courier f
(</$objtype/mkfile) 786 820 w
(OFILES=semfs.$O sem.$O) 786 964 w
($O.semfs: $OFILES) 786 1252 w
($LD \255o $target $prereq) 1266 1396 w
(%.$O: %.c sem.h) 786 1684 w
($CC \255FVw $stem.c) 1266 1828 w
11 /Times-Roman f
(It) 566 2044 w
(includes) 673 2044 w
11 /Courier f
(/386/mkfile) 1079 2044 w
11 /Times-Roman f
(when) 1845 2044 w
11 /Courier f
($objtype) 2122 2044 w
11 /Times-Roman f
(is) 2690 2044 w
11 /Courier f
(386) 2804 2044 w
11 /Times-Roman f
(.) 3002 2044 w
(That) 3098 2044 w
(is) 3339 2044 w
(our) 3453 2044 w
(case.) 3639 2044 w
(The) 3894 2044 w
(file) 4105 2044 w
11 /Courier f
(/386/mkfile) 566 2164 w
11 /Times-Roman f
(defines) 1331 2164 w
11 /Courier f
($CC) 1686 2164 w
11 /Times-Roman f
(,) 1884 2164 w
11 /Courier f
($LD) 1951 2164 w
11 /Times-Roman f
(,) 2149 2164 w
(and) 2216 2164 w
(other) 2413 2164 w
(variables) 2677 2164 w
(to) 3111 2164 w
(compile) 3236 2164 w
(for) 3629 2164 w
(that) 3794 2164 w
(archi\255) 3997 2164 w
(tecture.) 566 2284 w
(Now,) 953 2284 w
(changing) 1228 2284 w
(the) 1664 2284 w
(value) 1832 2284 w
(of) 2103 2284 w
11 /Courier f
(objtype) 2228 2284 w
11 /Times-Roman f
(changes) 2724 2284 w
(all) 3110 2284 w
(the) 3254 2284 w
(tools) 3422 2284 w
(used) 3671 2284 w
(to) 3906 2284 w
(com\255) 4026 2284 w
(pile,) 566 2404 w
(because) 788 2404 w
(we) 1162 2404 w
(would) 1318 2404 w
(be) 1622 2404 w
(including) 1754 2404 w
(definitions) 2199 2404 w
(for) 2699 2404 w
(the) 2854 2404 w
(new) 3016 2404 w
(architecture.) 3226 2404 w
(For) 3797 2404 w
(exam\255) 3978 2404 w
(ple,) 566 2524 w
10 /Courier f
(; objtype=arm mk) 786 2694 w
(5c \255FVw sem.c) 786 2804 w
(5l \255o 5.semfs semfs.5 sem.5) 786 2914 w
(;) 786 3024 w
11 /Times-Roman f
(This) 566 3240 w
(way,) 797 3240 w
(it) 1042 3240 w
(is) 1139 3240 w
(very) 1248 3240 w
(easy) 1477 3240 w
(to) 1706 3240 w
(cross\255compile.) 1827 3240 w
(And) 2505 3240 w
(that) 2729 3240 w
(was) 2929 3240 w
(not) 3134 3240 w
(all.) 3310 3240 w
(There) 3484 3240 w
(are) 3774 3240 w
(several) 3942 3240 w
11 /Courier f
(mkfiles) 566 3360 w
11 /Times-Roman f
(that) 1061 3360 w
(can) 1259 3360 w
(be) 1443 3360 w
(included) 1579 3360 w
(to) 1990 3360 w
(define) 2109 3360 w
(appropriate) 2415 3360 w
(targets) 2946 3360 w
(for) 3270 3360 w
(compiling) 3429 3360 w
(a) 3908 3360 w
(single) 3988 3360 w
(program) 566 3480 w
(and) 982 3480 w
(for) 1185 3480 w
(compiling) 1357 3480 w
(multiple) 1849 3480 w
(ones) 2262 3480 w
(\(one) 2508 3480 w
(per) 2747 3480 w
(source) 2931 3480 w
(file\).) 3262 3480 w
(What) 3518 3480 w
(follows) 3801 3480 w
(is) 4177 3480 w
(once) 566 3600 w
(more) 800 3600 w
(our) 1053 3600 w
11 /Courier f
(mkfile) 1227 3600 w
11 /Times-Roman f
(.) 1623 3600 w
9 /S f
(\347) 566 3770 w
9 /Times-Bold f
(mkfile) 581 3770 w
9 /S f
(\347) 841 3770 w
(`) 566 3770 w
(``````) 571 3770 w
(_) 566 3770 w
(______) 571 3770 w
10 /Courier f
(</$objtype/mkfile) 786 3914 w
(OFILES=semfs.$O sem.$O) 786 4202 w
(HFILES=sem.h) 786 4346 w
(TARG=$O.semfs) 786 4490 w
(BIN=$home/bin/$objtype) 786 4634 w
(</sys/src/cmd/mkone) 786 4922 w
11 /Times-Roman f
(The) 566 5138 w
(file) 770 5138 w
11 /Courier f
(mkone) 950 5138 w
11 /Times-Roman f
(defines) 1315 5138 w
(targets) 1666 5138 w
(for) 1993 5138 w
(building) 2155 5138 w
(our) 2558 5138 w
(program.) 2739 5138 w
(It) 3173 5138 w
(assumes) 3275 5138 w
(that) 3676 5138 w
(the) 3876 5138 w
(vari\255) 4045 5138 w
(able) 566 5258 w
11 /Courier f
(OFILES) 790 5258 w
11 /Times-Roman f
(lists) 1228 5258 w
(the) 1449 5258 w
(object) 1625 5258 w
(files) 1935 5258 w
(that) 2166 5258 w
(are) 2373 5258 w
(part) 2547 5258 w
(of) 2758 5258 w
(the) 2890 5258 w
(program.) 3065 5258 w
(Also,) 3505 5258 w
(it) 3782 5258 w
(assumes) 3885 5258 w
(that) 566 5378 w
(the) 780 5378 w
(variable) 963 5378 w
11 /Courier f
(HFILES) 1364 5378 w
11 /Times-Roman f
(lists) 1809 5378 w
(the) 2038 5378 w
(headers) 2222 5378 w
(\(which) 2605 5378 w
(are) 2959 5378 w
(dependencies) 3141 5378 w
(for) 3780 5378 w
(all) 3957 5378 w
(the) 4117 5378 w
(objects\).) 566 5498 w
(Each) 981 5498 w
(object) 1239 5498 w
(is) 1547 5498 w
(assumed) 1661 5498 w
(to) 2079 5498 w
(come) 2205 5498 w
(from) 2482 5498 w
(a) 2735 5498 w
(C) 2823 5498 w
(file) 2937 5498 w
(with) 3123 5498 w
(the) 3359 5498 w
(same) 3533 5498 w
(name) 3798 5498 w
(\(but) 4074 5498 w
(different) 566 5618 w
(extension\).) 993 5618 w
(The) 1557 5618 w
(variable) 1778 5618 w
11 /Courier f
(BIN) 2181 5618 w
11 /Times-Roman f
(names) 2431 5618 w
(the) 2763 5618 w
(directory) 2949 5618 w
(where) 3396 5618 w
(to) 3714 5618 w
(copy) 3852 5618 w
(the) 4117 5618 w
(resulting) 566 5738 w
(target) 995 5738 w
(to) 1288 5738 w
(install) 1418 5738 w
(it,) 1732 5738 w
(and) 1866 5738 w
(the) 2068 5738 w
(variable) 2246 5738 w
11 /Courier f
(TARG) 2642 5738 w
11 /Times-Roman f
(names) 2950 5738 w
(the) 3274 5738 w
(target) 3452 5738 w
(to) 3745 5738 w
(be) 3874 5738 w
(built.) 4020 5738 w
(Now) 566 5858 w
(we) 809 5858 w
(can) 967 5858 w
(do) 1149 5858 w
(much) 1290 5858 w
(more) 1565 5858 w
(than) 1821 5858 w
(just) 2041 5858 w
(compiling) 2232 5858 w
(our) 2710 5858 w
(program,) 2887 5858 w
(there) 3317 5858 w
(are) 3566 5858 w
(several) 3729 5858 w
(use\255) 4069 5858 w
(ful) 566 5978 w
(targets) 716 5978 w
(defined) 1036 5978 w
(by) 1392 5978 w
11 /Courier f
(mkone) 1530 5978 w
11 /Times-Roman f
(.) 1860 5978 w
cleartomark
showpage
saveobj restore
%%EndPage: 41 41
%%Page: 42 42
/saveobj save def
mark
42 pagesetup
11 /Times-Roman f
(\255 42 \255) 2289 413 w
10 /Courier f
(; mk) 786 676 w
(8c \255FVw semfs.c) 786 786 w
(8c \255FVw sem.c) 786 896 w
(8l) 786 1006 w
(\255o 8.out semfs.8 sem.8) 1026 1006 w
(; mk install) 786 1116 w
(cp 8.out /usr/nemo/bin/386/8.semfs) 786 1226 w
(; mk clean) 786 1336 w
(rm \255f *.[578qv] [578qv].out y.tab.?) 786 1446 w
(rm \255f y.debug y.output 8.semfs $CLEANFILES) 786 1556 w
11 /Times-Roman f
(As) 566 1772 w
(before,) 716 1772 w
(changing) 1050 1772 w
11 /Courier f
($objtype) 1480 1772 w
11 /Times-Roman f
(changes) 2036 1772 w
(the) 2416 1772 w
(target) 2578 1772 w
(we) 2855 1772 w
(would) 3010 1772 w
(be) 3313 1772 w
(compiling) 3444 1772 w
(for.) 3919 1772 w
(It) 816 1928 w
(might) 929 1928 w
(seem) 1233 1928 w
(confusing) 1504 1928 w
(that) 1984 1928 w
11 /Courier f
(install) 2196 1928 w
11 /Times-Roman f
(and) 2705 1928 w
11 /Courier f
(clean) 2910 1928 w
11 /Times-Roman f
(were) 3287 1928 w
(used) 3545 1928 w
(as) 3793 1928 w
(targets.) 3931 1928 w
(They) 566 2048 w
(are) 821 2048 w
(not) 983 2048 w
(files.) 1154 2048 w
(That) 1401 2048 w
(point) 1632 2048 w
(is) 1889 2048 w
(that) 1992 2048 w
(targets) 2186 2048 w
(do) 2507 2048 w
(not) 2646 2048 w
(need) 2816 2048 w
(to) 3051 2048 w
(be) 3166 2048 w
(files.) 3298 2048 w
(A) 3544 2048 w
(target) 3652 2048 w
(may) 3930 2048 w
(be) 4148 2048 w
(a) 566 2168 w
(virtual) 647 2168 w
(thing,) 967 2168 w
(invented) 1255 2168 w
(by) 1666 2168 w
(you,) 1809 2168 w
(just) 2035 2168 w
(to) 2228 2168 w
(ask) 2347 2168 w
11 /Courier f
(mk) 2526 2168 w
11 /Times-Roman f
(to) 2691 2168 w
(do) 2810 2168 w
(something.) 2953 2168 w
(For) 3473 2168 w
(example,) 3659 2168 w
(this) 4091 2168 w
(might) 566 2288 w
(be) 852 2288 w
(the) 983 2288 w
(rule) 1145 2288 w
(for) 1343 2288 w
11 /Courier f
(install) 1498 2288 w
11 /Times-Roman f
(.) 1960 2288 w
10 /Courier f
(install:V: $O.semfs) 786 2458 w
(cp $O.semfs $BIN) 1266 2568 w
11 /Times-Roman f
(The) 566 2748 w
(rule) 776 2748 w
(is) 986 2748 w
(declared) 1100 2748 w
(as) 1509 2748 w
(a) 1641 2748 w
11 /Times-Italic f
(virtual) 1730 2748 w
11 /Times-Roman f
(target,) 2065 2748 w
(using) 2383 2748 w
(the) 2663 2748 w
11 /Courier f
(:V:) 2838 2748 w
11 /Times-Roman f
(in) 3077 2748 w
(the) 3204 2748 w
(header) 3379 2748 w
(for) 3710 2748 w
(the) 3878 2748 w
(rule.) 4053 2748 w
(This) 566 2868 w
(means) 791 2868 w
(that) 1100 2868 w
11 /Courier f
(mk) 1294 2868 w
11 /Times-Roman f
(will) 1455 2868 w
(consider) 1656 2868 w
11 /Courier f
(install) 2055 2868 w
11 /Times-Roman f
(to) 2545 2868 w
(be) 2659 2868 w
(something) 2790 2868 w
(that) 3277 2868 w
(is) 3470 2868 w
(not) 3572 2868 w
(a) 3741 2868 w
(file) 3817 2868 w
(and) 3991 2868 w
(is) 4177 2868 w
(never) 566 2988 w
(up) 845 2988 w
(to) 992 2988 w
(date.) 1115 2988 w
(Each) 1362 2988 w
(time) 1617 2988 w
(we) 1850 2988 w
(build) 2014 2988 w
(the) 2278 2988 w
(target) 2449 2988 w
11 /Courier f
(install) 2735 2988 w
11 /Times-Roman f
(,) 3197 2988 w
11 /Courier f
(mk) 3263 2988 w
11 /Times-Roman f
(would) 3433 2988 w
(execute) 3746 2988 w
(the) 4117 2988 w
(body) 566 3108 w
(for) 814 3108 w
(the) 969 3108 w
(rule.) 1131 3108 w
(That) 1357 3108 w
(is) 1586 3108 w
(how) 1688 3108 w
11 /Courier f
(mkone) 1905 3108 w
11 /Times-Roman f
(could) 2263 3108 w
(define) 2535 3108 w
(targets) 2836 3108 w
(for) 3156 3108 w
(doing) 3311 3108 w
(other) 3590 3108 w
(things.) 3843 3108 w
(One) 816 3264 w
(final) 1034 3264 w
(advice.) 1271 3264 w
(This) 1620 3264 w
(tool) 1852 3264 w
(can) 2060 3264 w
(be) 2247 3264 w
(used) 2386 3264 w
(to) 2623 3264 w
(build) 2745 3264 w
(anything,) 3008 3264 w
(and) 3457 3264 w
(not) 3651 3264 w
(just) 3829 3264 w
(bina\255) 4026 3264 w
(ries.) 566 3384 w
(For) 812 3384 w
(example,) 997 3384 w
(the) 1428 3384 w
(following) 1594 3384 w
(is) 2054 3384 w
(an) 2160 3384 w
(excerpt) 2295 3384 w
(of) 2648 3384 w
(the) 2770 3384 w
11 /Courier f
(mkfile) 2935 3384 w
11 /Times-Roman f
(used) 3362 3384 w
(to) 3594 3384 w
(build) 3711 3384 w
(a) 3969 3384 w
(PDF) 4048 3384 w
(file) 566 3504 w
(for) 740 3504 w
(this) 895 3504 w
(book.) 1083 3504 w
10 /Courier f
(CHAPTERS=`{echo ch?.ms ch??.ms}) 786 3674 w
(PROGRAMS=`{echo src/*.ms}) 786 3784 w
10 /Times-Italic f
(...) 786 3894 w
10 /Courier f
(%.ps:%.ms) 786 4004 w
(eval `{doctype $stem.ms} | lp \255d stdout > $stem.ps) 1266 4114 w
11 /Times-Roman f
(We) 566 4330 w
(defined) 746 4330 w
(variables) 1103 4330 w
(to) 1527 4330 w
(contain) 1643 4330 w
(the) 1996 4330 w
(source) 2160 4330 w
(files) 2475 4330 w
(for) 2694 4330 w
(chapters) 2851 4330 w
(\(named) 3245 4330 w
11 /Courier f
(ch*.ms) 3603 4330 w
11 /Times-Roman f
(\),) 3999 4330 w
(and) 4093 4330 w
(for) 566 4450 w
(formatted) 726 4450 w
(text) 1185 4450 w
(for) 1383 4450 w
(programs.) 1543 4450 w
(These) 2018 4450 w
(were) 2311 4450 w
(used) 2554 4450 w
(by) 2787 4450 w
(rules) 2929 4450 w
(not) 3174 4450 w
(shown) 3347 4450 w
(here,) 3666 4450 w
(but) 3913 4450 w
(you) 4086 4450 w
(can) 566 4570 w
(still) 750 4570 w
(see) 950 4570 w
(how) 1122 4570 w
(the) 1344 4570 w
(shell) 1511 4570 w
(can) 1753 4570 w
(be) 1938 4570 w
(combined) 2075 4570 w
(with) 2542 4570 w
11 /Courier f
(mk) 2772 4570 w
11 /Times-Roman f
(to) 2938 4570 w
(yield) 3058 4570 w
(a) 3312 4570 w
(very) 3394 4570 w
(powerful) 3622 4570 w
(tool.) 4051 4570 w
(The) 566 4690 w
11 /Times-Italic f
(meta\255rule) 778 4690 w
11 /Times-Roman f
(that) 1245 4690 w
(follows,) 1451 4690 w
(describes) 1850 4690 w
(how) 2298 4690 w
(to) 2528 4690 w
(compile) 2655 4690 w
(the) 3050 4690 w
(source) 3225 4690 w
(for) 3551 4690 w
(chapters) 3719 4690 w
(\(or) 4124 4690 w
(any) 566 4810 w
(other) 752 4810 w
(document) 1005 4810 w
(formatted) 1466 4810 w
(using) 1920 4810 w
11 /Times-Italic f
(troff) 2187 4810 w
11 /Times-Roman f
(\)) 2378 4810 w
(to) 2442 4810 w
(obtain) 2556 4810 w
(a) 2859 4810 w
(postscript) 2935 4810 w
(file.) 3391 4810 w
(The) 816 4966 w
(program) 1020 4966 w
11 /Courier f
(doctype) 1425 4966 w
11 /Times-Roman f
(prints) 1921 4966 w
(the) 2206 4966 w
(shell) 2374 4966 w
(commands) 2616 4966 w
(needed) 3126 4966 w
(to) 3469 4966 w
(compile) 3589 4966 w
(a) 3977 4966 w
11 /Times-Italic f
(troff) 4060 4966 w
11 /Times-Roman f
(document,) 566 5086 w
(and) 1061 5086 w
(the) 1253 5086 w
11 /Courier f
(eval) 1420 5086 w
11 /Times-Roman f
(shell) 1717 5086 w
(built\255in) 1958 5086 w
(executes) 2316 5086 w
(the) 2725 5086 w
(string) 2892 5086 w
(given) 3176 5086 w
(as) 3453 5086 w
(an) 3577 5086 w
(argument) 3713 5086 w
(as) 4160 5086 w
(if) 566 5206 w
(it) 685 5206 w
(was) 799 5206 w
(typed,) 1021 5206 w
(to) 1345 5206 w
(evaluate) 1483 5206 w
(environment) 1899 5206 w
(variables) 2506 5206 w
(or) 2953 5206 w
(other) 3096 5206 w
(artifacts) 3373 5206 w
(printed) 3777 5206 w
(by) 4141 5206 w
11 /Courier f
(doctype) 566 5326 w
11 /Times-Roman f
(.) 1028 5326 w
(Again,) 1120 5326 w
(this) 1452 5326 w
(is) 1648 5326 w
(just) 1757 5326 w
(an) 1952 5326 w
(example.) 2090 5326 w
(If) 2524 5326 w
(it) 2631 5326 w
(seems) 2728 5326 w
(confusing,) 3031 5326 w
(experiment) 3527 5326 w
(with) 4055 5326 w
(the) 566 5446 w
(building) 735 5446 w
(blocks) 1138 5446 w
(that) 1460 5446 w
(you) 1660 5446 w
(have) 1860 5446 w
(just) 2101 5446 w
(seen.) 2296 5446 w
(Try) 2553 5446 w
(to) 2746 5446 w
(use) 2868 5446 w
(them) 3050 5446 w
(separately,) 3306 5446 w
(and) 3813 5446 w
(try) 4007 5446 w
(to) 4165 5446 w
(combine) 566 5566 w
(them) 972 5566 w
(to) 1220 5566 w
(do) 1334 5566 w
(things.) 1472 5566 w
(That) 1798 5566 w
(is) 2027 5566 w
(what) 2129 5566 w
(Plan) 2370 5566 w
(9) 2594 5566 w
(\(and) 2677 5566 w
(UNIX!\)) 2899 5566 w
(is) 3272 5566 w
(about.) 3374 5566 w
(There) 816 5722 w
(are) 1103 5722 w
(several) 1268 5722 w
(other) 1610 5722 w
(features,) 1868 5722 w
(described) 2274 5722 w
(in) 2726 5722 w
(the) 2845 5722 w
11 /Times-Italic f
(mk) 3012 5722 w
11 /Times-Roman f
(\(1\)) 3139 5722 w
(manual) 3300 5722 w
(page,) 3657 5722 w
(that) 3925 5722 w
(we) 4124 5722 w
(omit.) 566 5842 w
(What) 830 5842 w
(has) 1100 5842 w
(been) 1279 5842 w
(said) 1518 5842 w
(is) 1728 5842 w
(enough) 1835 5842 w
(to) 2191 5842 w
(let) 2310 5842 w
(you) 2453 5842 w
(use) 2651 5842 w
(this) 2830 5842 w
(tool.) 3023 5842 w
(For) 3284 5842 w
(a) 3470 5842 w
(full) 3550 5842 w
(description,) 3735 5842 w
([.maintaining) 566 5962 w
(files) 1184 5962 w
(mk.]) 1401 5962 w
(is) 1634 5962 w
(a) 1736 5962 w
(good) 1812 5962 w
(paper) 2060 5962 w
(to) 2330 5962 w
(read.) 2444 5962 w
cleartomark
showpage
saveobj restore
%%EndPage: 42 42
%%Page: 43 43
/saveobj save def
mark
43 pagesetup
11 /Times-Roman f
(\255 43 \255) 2289 413 w
16 /Times-Bold f
(13.9.) 566 686 w
(Debugging and) 966 686 w
(testing) 2046 686 w
11 /Times-Roman f
(Having) 816 842 w
(executed) 1185 842 w
(our) 1619 842 w
(program) 1811 842 w
(a) 2228 842 w
(couple) 2322 842 w
(of) 2660 842 w
(times) 2797 842 w
(is) 3082 842 w
(not) 3202 842 w
(enough) 3390 842 w
(to) 3760 842 w
(say) 3893 842 w
(that) 4086 842 w
11 /Courier f
(semfs) 566 962 w
11 /Times-Roman f
(is) 929 962 w
(reliable) 1036 962 w
(enough) 1397 962 w
(to) 1753 962 w
(be) 1872 962 w
(used.) 2008 962 w
(At) 2270 962 w
(the) 2413 962 w
(very) 2580 962 w
(least,) 2807 962 w
(it) 3069 962 w
(should) 3164 962 w
(be) 3491 962 w
(used) 3627 962 w
(for) 3860 962 w
(some) 4019 962 w
(time) 566 1082 w
(besides) 797 1082 w
(being) 1155 1082 w
(tested.) 1434 1082 w
(Also,) 1753 1082 w
(some) 2024 1082 w
(tools) 2291 1082 w
(available) 2542 1082 w
(in) 2973 1082 w
(Plan) 3095 1082 w
(9) 3327 1082 w
(may) 3418 1082 w
(help) 3643 1082 w
(to) 3868 1082 w
(detect) 3990 1082 w
(common) 566 1202 w
(problems.) 987 1202 w
(Reading) 1460 1202 w
(a) 1862 1202 w
(book) 1945 1202 w
(that) 2200 1202 w
(addresses) 2400 1202 w
(this) 2854 1202 w
(topic) 3049 1202 w
(may) 3304 1202 w
(also) 3528 1202 w
(help) 3740 1202 w
([.prac\255) 3964 1202 w
(tice) 566 1322 w
(programming.].) 752 1322 w
(To) 816 1478 w
(test) 980 1478 w
(the) 1175 1478 w
(program,) 1351 1478 w
(we) 1792 1478 w
(might) 1961 1478 w
(think) 2261 1478 w
(on) 2530 1478 w
(some) 2682 1478 w
(tests) 2956 1478 w
(to) 3194 1478 w
(try) 3323 1478 w
(to) 3488 1478 w
(force) 3617 1478 w
(it) 3883 1478 w
(to) 3988 1478 w
(the) 4117 1478 w
(limit) 566 1598 w
(and) 814 1598 w
(see) 1010 1598 w
(if) 1186 1598 w
(it) 1290 1598 w
(crashes.) 1389 1598 w
(Which) 1775 1598 w
(tests) 2104 1598 w
(to) 2337 1598 w
(perform) 2460 1598 w
(heavily) 2849 1598 w
(depend) 3209 1598 w
(on) 3562 1598 w
(the) 3709 1598 w
(program) 3880 1598 w
(being) 566 1718 w
(tested.) 838 1718 w
(In) 1150 1718 w
(any) 1269 1718 w
(case,) 1455 1718 w
(the) 1698 1718 w
(shell) 1860 1718 w
(can) 2096 1718 w
(help) 2275 1718 w
(us) 2492 1718 w
(to) 2618 1718 w
(test) 2732 1718 w
(this) 2913 1718 w
(program.) 3101 1718 w
(The) 816 1874 w
(idea) 1022 1874 w
(is) 1240 1874 w
(to) 1350 1874 w
(try) 1472 1874 w
(to) 1630 1874 w
(use) 1752 1874 w
(our) 1934 1874 w
(program) 2116 1874 w
(and) 2523 1874 w
(then) 2717 1874 w
(check) 2942 1874 w
(if) 3232 1874 w
(it) 3335 1874 w
(behaved) 3434 1874 w
(correctly.) 3835 1874 w
(To) 566 1994 w
(do) 721 1994 w
(this,) 864 1994 w
(we) 1085 1994 w
(can) 1245 1994 w
(see) 1429 1994 w
(if) 1601 1994 w
(the) 1701 1994 w
(files) 1868 1994 w
(served) 2089 1994 w
(behave) 2406 1994 w
(as) 2747 1994 w
(they) 2870 1994 w
(should.) 3091 1994 w
(At) 3445 1994 w
(least,) 3587 1994 w
(we) 3848 1994 w
(could) 4007 1994 w
(do) 566 2114 w
(this) 707 2114 w
(for) 898 2114 w
(some) 1056 2114 w
(simple) 1319 2114 w
(things.) 1644 2114 w
(For) 1973 2114 w
(example,) 2157 2114 w
(if) 2587 2114 w
(the) 2685 2114 w
(file) 2850 2114 w
(system) 3027 2114 w
(is) 3364 2114 w
(correct,) 3469 2114 w
(it) 3831 2114 w
(must) 3925 2114 w
(at) 4172 2114 w
(least) 566 2234 w
(allow) 795 2234 w
(us) 1067 2234 w
(to) 1193 2234 w
(create) 1307 2234 w
(semaphores) 1594 2234 w
(and) 2139 2234 w
(to) 2325 2234 w
(remove) 2439 2234 w
(them.) 2795 2234 w
(So,) 3071 2234 w
(executing) 3244 2234 w
10 /Courier f
(; 8.semfs) 786 2404 w
(; for \(i in `{seq 1 100}\) { echo 1 >/mnt/sem/$i }) 786 2514 w
11 /Times-Roman f
(should) 566 2730 w
(always) 901 2730 w
(leave) 1246 2730 w
11 /Courier f
(/mnt/sem) 1517 2730 w
11 /Times-Roman f
(with) 2086 2730 w
(the) 2323 2730 w
(same) 2498 2730 w
(files.) 2764 2730 w
(One) 3022 2730 w
(hundred) 3245 2730 w
(of) 3645 2730 w
(semaphore) 3777 2730 w
(files) 566 2850 w
(with) 783 2850 w
(names) 1007 2850 w
11 /Courier f
(1) 1315 2850 w
11 /Times-Roman f
(,) 1381 2850 w
11 /Courier f
(2) 1437 2850 w
11 /Times-Roman f
(,) 1503 2850 w
(etc.,) 1559 2850 w
(up) 1770 2850 w
(to) 1908 2850 w
11 /Courier f
(100) 2022 2850 w
11 /Times-Roman f
(.) 2220 2850 w
(This) 2304 2850 w
(means) 2528 2850 w
(that) 2836 2850 w
(executing) 3029 2850 w
10 /Courier f
(; for \(i in `{seq 1 100}\) { echo 1 >/mnt/sem/$i }) 786 3020 w
(; ls /mnt/sem) 786 3130 w
11 /Times-Roman f
(should) 566 3310 w
(always) 890 3310 w
(produce) 1224 3310 w
(the) 1606 3310 w
(same) 1770 3310 w
(output,) 2026 3310 w
(if) 2367 3310 w
(the) 2465 3310 w
(program) 2630 3310 w
(is) 3032 3310 w
(correct.) 3137 3310 w
(In) 3498 3310 w
(the) 3620 3310 w
(same) 3785 3310 w
(way,) 4041 3310 w
(if) 566 3430 w
(semaphores) 672 3430 w
(behave) 1228 3430 w
(correctly,) 1576 3430 w
(the) 2031 3430 w
(following) 2204 3430 w
(will) 2671 3430 w
(not) 2882 3430 w
(block,) 3062 3430 w
(and) 3373 3430 w
(the) 3570 3430 w
(size) 3743 3430 w
(for) 3952 3430 w
(the) 4117 3430 w
(semaphore) 566 3550 w
(file) 1071 3550 w
(after) 1248 3550 w
(the) 1478 3550 w
(loop) 1643 3550 w
(should) 1871 3550 w
(be) 2197 3550 w
(zero.) 2332 3550 w
(Thus,) 2579 3550 w
(the) 2859 3550 w
(following) 3025 3550 w
(is) 3485 3550 w
(also) 3591 3550 w
(a) 3800 3550 w
(program) 3880 3550 w
(that) 566 3670 w
(should) 759 3670 w
(always) 1081 3670 w
(produce) 1413 3670 w
(the) 1793 3670 w
(same) 1955 3670 w
(output) 2208 3670 w
(if) 2518 3670 w
(the) 2613 3670 w
(file) 2775 3670 w
(system) 2949 3670 w
(is) 3283 3670 w
(correct.) 3385 3670 w
10 /Courier f
(; echo 4 >/mnt/sem/mutex) 786 3840 w
(; for \(i in `{seq 1 4}\) { read </mnt/sem/mutex }) 786 3950 w
(; if \(test \255s /mnt/sem/mutex\)) 786 4060 w
(;;) 786 4170 w
(echo not zero sized) 1266 4170 w
(;) 786 4280 w
11 /Times-Roman f
(For) 566 4496 w
(all) 747 4496 w
(these) 885 4496 w
(checks) 1138 4496 w
(we) 1463 4496 w
(can) 1618 4496 w
(think) 1797 4496 w
(of) 2052 4496 w
(how) 2171 4496 w
(to) 2388 4496 w
(perform) 2502 4496 w
(them) 2883 4496 w
(in) 3132 4496 w
(a) 3247 4496 w
(way) 3324 4496 w
(that) 3535 4496 w
(they) 3729 4496 w
(always) 3947 4496 w
(produce) 566 4616 w
(the) 948 4616 w
(same) 1112 4616 w
(output) 1367 4616 w
(\(as) 1679 4616 w
(long) 1836 4616 w
(as) 2061 4616 w
(the) 2181 4616 w
(program) 2344 4616 w
(is) 2744 4616 w
(correct\).) 2847 4616 w
(The) 3242 4616 w
(first) 3441 4616 w
(time) 3647 4616 w
(we) 3872 4616 w
(run) 4028 4616 w
(a) 4203 4616 w
(check,) 566 4736 w
(we) 880 4736 w
(check) 1039 4736 w
(the) 1325 4736 w
(output) 1491 4736 w
(by) 1805 4736 w
(hand) 1947 4736 w
(and) 2192 4736 w
(determine) 2382 4736 w
(if) 2852 4736 w
(it) 2951 4736 w
(seems) 3045 4736 w
(correct.) 3345 4736 w
(If) 3707 4736 w
(that) 3812 4736 w
(is) 4010 4736 w
(the) 4117 4736 w
(case,) 566 4856 w
(we) 831 4856 w
(may) 1008 4856 w
(record) 1247 4856 w
(the) 1574 4856 w
(output) 1757 4856 w
(for) 2088 4856 w
(later.) 2264 4856 w
(For) 2535 4856 w
(example,) 2737 4856 w
(suppose) 3185 4856 w
(the) 3588 4856 w
(first) 3771 4856 w
(check) 3997 4856 w
(above) 566 4976 w
(is) 856 4976 w
(contained) 960 4976 w
(in) 1416 4976 w
(the) 1532 4976 w
(script) 1696 4976 w
11 /Courier f
(chk100.rc) 1970 4976 w
11 /Times-Roman f
(,) 2564 4976 w
(and) 2622 4976 w
(the) 2810 4976 w
(last) 2974 4976 w
(check) 3157 4976 w
(is) 3441 4976 w
(contained) 3545 4976 w
(in) 4001 4976 w
(the) 4117 4976 w
(script) 566 5096 w
11 /Courier f
(chkdowns.rc) 838 5096 w
11 /Times-Roman f
(.) 1564 5096 w
(We) 1648 5096 w
(could) 1827 5096 w
(proceed) 2099 5096 w
(as) 2472 5096 w
(follows.) 2591 5096 w
10 /Courier f
(; 8.semfs) 786 5266 w
(; chk100.rc >chk100.rc.out) 786 5376 w
10 /Times-Italic f
(..inspect chk1.out to see if it looks ok, and proceed....) 786 5486 w
10 /Courier f
(; chkdowns.rc >chkdowns.rc.out) 786 5596 w
10 /Times-Italic f
(...do the same for this new check...) 786 5706 w
11 /Times-Roman f
(Now,) 566 5922 w
(if) 837 5922 w
(we) 934 5922 w
(make) 1091 5922 w
(a) 1358 5922 w
(change) 1436 5922 w
(to) 1775 5922 w
(the) 1891 5922 w
(program) 2055 5922 w
(and) 2456 5922 w
(want) 2644 5922 w
(to) 2887 5922 w
(check) 3003 5922 w
(a) 3287 5922 w
(little) 3365 5922 w
(bit) 3598 5922 w
(if) 3746 5922 w
(we) 3844 5922 w
(broke) 4002 5922 w
(something,) 566 6042 w
(we) 1095 6042 w
(can) 1264 6042 w
(use) 1456 6042 w
(the) 1643 6042 w
(shell) 1818 6042 w
(to) 2067 6042 w
(run) 2194 6042 w
(our) 2381 6042 w
(tests) 2568 6042 w
(again,) 2805 6042 w
(and) 3111 6042 w
(compare) 3310 6042 w
(their) 3727 6042 w
(output) 3969 6042 w
(with) 566 6162 w
(previous) 794 6162 w
(runs.) 1204 6162 w
(This) 1453 6162 w
(is) 1681 6162 w
(called) 1787 6162 w
11 /Times-Bold f
(regression) 2080 6162 w
(testing) 2593 6162 w
11 /Times-Roman f
(.) 2904 6162 w
(That) 2993 6162 w
(is,) 3227 6162 w
(testing) 3362 6162 w
(one) 3689 6162 w
(program) 3880 6162 w
(by) 566 6282 w
(looking) 704 6282 w
(at) 1069 6282 w
(the) 1176 6282 w
(output) 1338 6282 w
(of) 1648 6282 w
(previous) 1767 6282 w
(versions) 2173 6282 w
(for) 2567 6282 w
(the) 2722 6282 w
(same) 2884 6282 w
(program.) 3137 6282 w
cleartomark
showpage
saveobj restore
%%EndPage: 43 43
%%Page: 44 44
/saveobj save def
mark
44 pagesetup
11 /Times-Roman f
(\255 44 \255) 2289 413 w
10 /Courier f
(; for \(chk in chk*.rc\) {) 786 676 w
(;;) 786 786 w
(cmp <{$chk} $chk.out || echo check $chk failed) 1266 786 w
(;;) 786 896 w
(}) 1266 896 w
11 /Times-Roman f
(This) 566 1112 w
(loop) 790 1112 w
(could) 1014 1112 w
(perhaps) 1286 1112 w
(be) 1654 1112 w
(included) 1785 1112 w
(in) 2191 1112 w
(a) 2305 1112 w
(rule) 2382 1112 w
(for) 2581 1112 w
(the) 2737 1112 w
(target) 2900 1112 w
11 /Courier f
(check) 3178 1112 w
11 /Times-Roman f
(in) 3537 1112 w
(our) 3652 1112 w
11 /Courier f
(mkfile) 3827 1112 w
11 /Times-Roman f
(,) 4223 1112 w
(so) 566 1232 w
(that) 692 1232 w
(typing) 885 1232 w
10 /Courier f
(; mk check) 786 1402 w
11 /Times-Roman f
(suffices.) 566 1582 w
(What) 816 1738 w
(we) 1088 1738 w
(said) 1250 1738 w
(does) 1462 1738 w
(not) 1698 1738 w
(teach) 1874 1738 w
(how) 2139 1738 w
(to) 2363 1738 w
(test) 2484 1738 w
(a) 2672 1738 w
(program,) 2755 1738 w
(nor) 3189 1738 w
(tries) 3370 1738 w
(to.) 3594 1738 w
(We) 3743 1738 w
(tried) 3929 1738 w
(to) 4165 1738 w
(show) 566 1858 w
(how) 842 1858 w
(to) 1075 1858 w
(combine) 1205 1858 w
(the) 1627 1858 w
(shell) 1805 1858 w
(and) 2057 1858 w
(other) 2259 1858 w
(tools) 2528 1858 w
(to) 2787 1858 w
(help) 2917 1858 w
(you) 3150 1858 w
(in) 3359 1858 w
(testing) 3488 1858 w
(your) 3825 1858 w
(pro\255) 4069 1858 w
(grams.) 566 1978 w
(That) 890 1978 w
(is) 1119 1978 w
(part) 1221 1978 w
(of) 1419 1978 w
(development) 1538 1978 w
(and) 2133 1978 w
(Plan) 2319 1978 w
(9) 2543 1978 w
(helps) 2626 1978 w
(a) 2886 1978 w
(lot) 2962 1978 w
(in) 3107 1978 w
(that) 3221 1978 w
(respect.) 3414 1978 w
(There) 816 2134 w
(are) 1108 2134 w
(many) 1278 2134 w
(other) 1560 2134 w
(things) 1823 2134 w
(that) 2131 2134 w
(you) 2334 2134 w
(could) 2537 2134 w
(check) 2819 2134 w
(about) 3111 2134 w
(your) 3393 2134 w
(program.) 3632 2134 w
(For) 4098 2134 w
(example,) 566 2254 w
(listing) 995 2254 w
11 /Courier f
(/proc/$pid/fd) 1302 2254 w
11 /Times-Roman f
(for) 2190 2254 w
(the) 2347 2254 w
(program) 2510 2254 w
(should) 2910 2254 w
(perhaps) 3233 2254 w
(show) 3602 2254 w
(the) 3863 2254 w
(same) 4026 2254 w
(number) 566 2374 w
(of) 932 2374 w
(file) 1054 2374 w
(descriptors) 1231 2374 w
(for) 1743 2374 w
(the) 1901 2374 w
(same) 2066 2374 w
(cases.) 2322 2374 w
(That) 2611 2374 w
(would) 2843 2374 w
(let) 3149 2374 w
(you) 3290 2374 w
(know) 3487 2374 w
(if) 3763 2374 w
(a) 3862 2374 w
(change) 3942 2374 w
(you) 566 2494 w
(make) 761 2494 w
(leaks) 1028 2494 w
(any) 1283 2494 w
(file) 1471 2494 w
(descriptor) 1647 2494 w
(\(by) 2115 2494 w
(leaving) 2291 2494 w
(it) 2644 2494 w
(open\).) 2735 2494 w
(The) 3041 2494 w
(same) 3240 2494 w
(could) 3494 2494 w
(be) 3767 2494 w
(done) 3899 2494 w
(by) 4141 2494 w
(looking) 566 2614 w
(into) 931 2614 w
(memory) 1131 2614 w
(usage) 1525 2614 w
(and) 1802 2614 w
(alerting) 1988 2614 w
(about) 2351 2614 w
(huge) 2623 2614 w
(increases) 2864 2614 w
(of) 3292 2614 w
(memory.) 3411 2614 w
(There) 816 2770 w
(are) 1099 2770 w
(other) 1260 2770 w
(tools) 1514 2770 w
(to) 1758 2770 w
(help) 1873 2770 w
(you) 2091 2770 w
(optimize) 2285 2770 w
(your) 2699 2770 w
(programs,) 2929 2770 w
(including) 3400 2770 w
(a) 3845 2770 w
(profiler) 3923 2770 w
(that) 566 2890 w
(reports) 763 2890 w
(where) 1099 2890 w
(the) 1397 2890 w
(program) 1563 2890 w
(spends) 1966 2890 w
(time,) 2297 2890 w
(and) 2553 2890 w
(several) 2743 2890 w
(tools) 3084 2890 w
(for) 3331 2890 w
(drawing) 3490 2890 w
(graphics) 3880 2890 w
(and) 566 3010 w
(charts) 759 3010 w
(to) 1055 3010 w
(let) 1176 3010 w
(you) 1321 3010 w
(see) 1522 3010 w
(if) 1697 3010 w
(changes) 1800 3010 w
(improve) 2188 3010 w
(or) 2590 3010 w
(not) 2717 3010 w
(the) 2894 3010 w
(time) 3064 3010 w
(spent) 3296 3010 w
(by) 3564 3010 w
(the) 3710 3010 w
(program) 3880 3010 w
(\(or) 566 3130 w
(the) 742 3130 w
(memory\)) 924 3130 w
(for) 1374 3130 w
(different) 1549 3130 w
(usages.) 1973 3130 w
(All) 2341 3130 w
(of) 2530 3130 w
(them) 2669 3130 w
(are) 2937 3130 w
(described) 3117 3130 w
(in) 3584 3130 w
(the) 3718 3130 w
(manual.) 3900 3130 w
(Describing) 566 3250 w
(them) 1087 3250 w
(here) 1347 3250 w
(would) 1574 3250 w
(require) 1889 3250 w
(many) 2238 3250 w
(more) 2522 3250 w
(space,) 2787 3250 w
(and) 3097 3250 w
(there) 3295 3250 w
(are) 3554 3250 w
(good) 3727 3250 w
(books) 3988 3250 w
(that) 566 3370 w
(focus) 759 3370 w
(just) 1024 3370 w
(on) 1212 3370 w
(that) 1350 3370 w
(topic.) 1543 3370 w
(To) 816 3526 w
(conclude) 981 3526 w
(with) 1420 3526 w
(this) 1660 3526 w
(notes) 1864 3526 w
(about) 2140 3526 w
(how) 2428 3526 w
(to) 2661 3526 w
(check) 2791 3526 w
(your) 3089 3526 w
(program) 3334 3526 w
(once) 3749 3526 w
(it) 3999 3526 w
(has) 4105 3526 w
(been) 566 3646 w
(executed) 802 3646 w
(a) 1220 3646 w
(couple) 1298 3646 w
(of) 1620 3646 w
(times,) 1741 3646 w
(we) 2038 3646 w
(must) 2195 3646 w
(mention) 2440 3646 w
(the) 2831 3646 w
11 /Courier f
(leak) 2994 3646 w
11 /Times-Roman f
(tool.) 3287 3646 w
(This) 3516 3646 w
(tool) 3741 3646 w
(helps) 3942 3646 w
(a) 4203 3646 w
(lot) 566 3766 w
(to) 730 3766 w
(find) 863 3766 w
(memory) 1087 3766 w
(leaks,) 1500 3766 w
(a) 1800 3766 w
(very) 1896 3766 w
(common) 2138 3766 w
(type) 2571 3766 w
(of) 2808 3766 w
(error) 2947 3766 w
(while) 3206 3766 w
(programming.) 3498 3766 w
(A) 4172 3766 w
(memory) 566 3886 w
(leak) 969 3886 w
(is) 1188 3886 w
(simply) 1299 3886 w
(memory) 1637 3886 w
(that) 2040 3886 w
(you) 2241 3886 w
(have) 2442 3886 w
(allocated) 2684 3886 w
(\(using) 3115 3886 w
11 /Courier f
(malloc) 3426 3886 w
11 /Times-Roman f
(or) 3858 3886 w
(a) 3985 3886 w
(rou\255) 4069 3886 w
(tine) 566 4006 w
(that) 764 4006 w
(calls) 962 4006 w
11 /Courier f
(malloc\)) 1196 4006 w
11 /Times-Roman f
(but) 1691 4006 w
(not) 1865 4006 w
(released.) 2039 4006 w
(This) 2485 4006 w
(tool) 2715 4006 w
(uses) 2921 4006 w
(the) 3144 4006 w
(debugger) 3312 4006 w
(\(with) 3753 4006 w
(some) 4019 4006 w
(help) 566 4126 w
(from) 788 4126 w
(the) 1034 4126 w
(library) 1201 4126 w
(implementing) 1526 4126 w
(dynamic) 2171 4126 w
(memory\)) 2582 4126 w
(to) 3017 4126 w
(detect) 3136 4126 w
(any) 3430 4126 w
(such) 3621 4126 w
(leak.) 3855 4126 w
(For) 4098 4126 w
(example,) 566 4246 w
10 /Courier f
(; leak \255s page) 786 4416 w
(leak \255s 1868 1916 1917 1918) 786 4526 w
11 /Times-Roman f
(tries) 566 4706 w
(to) 797 4706 w
(find) 925 4706 w
(memory) 1144 4706 w
(leaks) 1552 4706 w
(for) 1819 4706 w
(the) 1988 4706 w
(process) 2164 4706 w
(running) 2534 4706 w
11 /Courier f
(page) 2919 4706 w
11 /Times-Roman f
(.) 3183 4706 w
(The) 3282 4706 w
(program) 3495 4706 w
(prints) 3909 4706 w
(a) 4203 4706 w
(command) 566 4826 w
(that) 1034 4826 w
(can) 1234 4826 w
(be) 1420 4826 w
(executed) 1558 4826 w
(to) 1980 4826 w
(scan) 2100 4826 w
(the) 2328 4826 w
(different) 2496 4826 w
(processes) 2906 4826 w
(for) 3359 4826 w
(that) 3520 4826 w
(program) 3719 4826 w
(for) 4124 4826 w
(memory) 566 4946 w
(leaks.) 960 4946 w
(Executing) 1241 4946 w
(such) 1714 4946 w
(command) 1943 4946 w
(looks) 2404 4946 w
(like) 2671 4946 w
(follows:) 2864 4946 w
10 /Courier f
(; leak \255s page|rc) 786 5116 w
(;) 786 5226 w
11 /Times-Roman f
(There) 566 5442 w
(was) 852 5442 w
(no) 1054 5442 w
(output,) 1196 5442 w
(which) 1539 5442 w
(meant) 1840 5442 w
(that) 2141 5442 w
(there) 2339 5442 w
(seems) 2590 5442 w
(to) 2891 5442 w
(be) 3010 5442 w
(no) 3146 5442 w
(memory) 3289 5442 w
(leaks.) 3688 5442 w
(How\255) 4002 5442 w
(ever,) 566 5562 w
(doing) 809 5562 w
(the) 1088 5562 w
(same) 1250 5562 w
(for) 1503 5562 w
(a) 1658 5562 w
(program) 1734 5562 w
(called) 2133 5562 w
11 /Courier f
(omero) 2422 5562 w
11 /Times-Roman f
(,) 2752 5562 w
(reported) 2808 5562 w
(some) 3200 5562 w
(memory) 3460 5562 w
(leaks.) 3854 5562 w
cleartomark
showpage
saveobj restore
%%EndPage: 44 44
%%Page: 45 45
/saveobj save def
mark
45 pagesetup
11 /Times-Roman f
(\255 45 \255) 2289 413 w
10 /Courier f
(; leak \255s omero|rc) 786 676 w
(src\(0x0000dd77\); // 7) 786 786 w
(src\(0x000206a8\); // 3) 786 896 w
(src\(0x000213bc\); // 3) 786 1006 w
(src\(0x00027e68\); // 3) 786 1116 w
(src\(0x00027fe7\); // 2) 786 1226 w
(src\(0x00002666\); // 1) 786 1336 w
(src\(0x0000c6ff\); // 1) 786 1446 w
11 /Times-Roman f
(Each) 566 1662 w
(line) 824 1662 w
(can) 1029 1662 w
(be) 1220 1662 w
(used) 1363 1662 w
(as) 1604 1662 w
(a) 1735 1662 w
(command) 1823 1662 w
(for) 2296 1662 w
(the) 2463 1662 w
(debugger) 2637 1662 w
(to) 3084 1662 w
(find) 3211 1662 w
(the) 3429 1662 w
(line) 3604 1662 w
(where) 3810 1662 w
(the) 4117 1662 w
(memory) 566 1782 w
(\(leaked\)) 960 1782 w
(was) 1345 1782 w
(allocated.) 1543 1782 w
(Using) 1994 1782 w
10 /Courier f
(; src \255s 0x0000dd77 omero) 786 1952 w
11 /Times-Roman f
(would) 566 2132 w
(point) 873 2132 w
(our) 1132 2132 w
(editor) 1310 2132 w
(to) 1598 2132 w
(the) 1716 2132 w
(offending) 1882 2132 w
(source) 2340 2132 w
(line) 2657 2132 w
(that) 2854 2132 w
(leaked) 3052 2132 w
(7) 3370 2132 w
(times) 3458 2132 w
(some) 3730 2132 w
(mem\255) 3995 2132 w
(ory,) 566 2252 w
(as) 775 2252 w
(reported) 901 2252 w
(by) 1300 2252 w
(the) 1445 2252 w
(first) 1614 2252 w
(line) 1826 2252 w
(in) 2026 2252 w
(the) 2147 2252 w
(output) 2316 2252 w
(of) 2633 2252 w
11 /Courier f
(leak) 2759 2252 w
11 /Times-Roman f
(.) 3023 2252 w
(Once) 3114 2252 w
(we) 3378 2252 w
(know) 3539 2252 w
(where) 3817 2252 w
(the) 4117 2252 w
(memory) 566 2372 w
(was) 963 2372 w
(allocated,) 1164 2372 w
(we) 1619 2372 w
(may) 1778 2372 w
(be) 1999 2372 w
(able) 2134 2372 w
(to) 2348 2372 w
(discover) 2466 2372 w
(which) 2869 2372 w
(call) 3169 2372 w
(to) 3359 2372 w
11 /Courier f
(free) 3477 2372 w
11 /Times-Roman f
(is) 3773 2372 w
(missing,) 3879 2372 w
(and) 566 2492 w
(fix) 752 2492 w
(the) 902 2492 w
(program.) 1064 2492 w
11 /Times-Bold f
(Problems) 566 2732 w
11 /Times-Roman f
(1) 566 2888 w
(Convert) 816 2888 w
(the) 1223 2888 w
(printer) 1410 2888 w
(spooler) 1755 2888 w
(program) 2131 2888 w
(from) 2556 2888 w
(a) 2823 2888 w
(previous) 2925 2888 w
(problem) 3357 2888 w
(into) 3777 2888 w
(a) 4003 2888 w
(file) 4105 2888 w
(server.) 816 3008 w
cleartomark
showpage
saveobj restore
%%EndPage: 45 45
%%Page: 46 46
/saveobj save def
mark
46 pagesetup
11 /Times-Roman f
(\255 46 \255) 2289 413 w
cleartomark
showpage
saveobj restore
%%EndPage: 46 46
%%Trailer
done
%%DocumentFonts: Times-Roman LucidaSansUnicode20 Times-Italic Times-Bold Courier S1 S
%%Pages: 46
